# ============================================
# Tales of Aneria - Environment Configuration
# ============================================
# This file documents all environment variables needed for the application.
# Copy this file to .env and fill in your actual values.

# ============================================
# DEPLOYMENT ENVIRONMENT
# ============================================
# Controls app behavior and security settings
# Options: development, production
NODE_ENV=production

# ============================================
# SERVER CONFIGURATION
# ============================================
# Port for the Express server (Vercel will override this)
PORT=5000

# ============================================
# DATABASE CONFIGURATION
# ============================================
# PostgreSQL database connection string
# Example: postgresql://user:password@host:port/database?sslmode=require
# 
# For Vercel deployment, use:
# - Vercel Postgres (recommended): Automatically set by Vercel
# - Neon: Get from https://neon.tech
# - Supabase: Get from https://supabase.com
# - Railway: Get from https://railway.app
#
DATABASE_URL=postgresql://user:password@host:port/database

# ============================================
# SECURITY CONFIGURATION (OWASP Best Practices)
# ============================================
# CORS - Allowed Origins (Required for Production)
# Comma-separated list of allowed domains for CORS
# Include ALL domains where your app will be accessed (with and without www)
# 
# For Docker development:
ALLOWED_ORIGINS=http://localhost:5000,http://localhost:3000,http://127.0.0.1:5000
# 
# For Production, update to:
# ALLOWED_ORIGINS=https://talesofaneria.com,https://www.talesofaneria.com,https://your-vercel-app.vercel.app
#

# Session Secret (Required for secure session management)
# Generate a strong random string (at least 32 characters)
# Use: openssl rand -base64 32
SESSION_SECRET=your-secure-random-session-secret-here

# ============================================
# YOUTUBE INTEGRATION
# ============================================
# YouTube Data API v3 - Get from Google Cloud Console
# https://console.cloud.google.com/apis/credentials
# 
# Steps:
# 1. Create a project in Google Cloud Console
# 2. Enable YouTube Data API v3
# 3. Create API credentials (API key)
# 4. Restrict the key to YouTube Data API v3
#
# Backend API Key (used by server-side API endpoints)
YOUTUBE_API_KEY=your_youtube_api_key_here

# Frontend API Key (Optional - exposed to client-side)
# Only set this if you need client-side YouTube API access
# WARNING: This will be visible in the browser - ensure it's restricted to your domain
VITE_YOUTUBE_API_KEY=your_youtube_api_key_here

# YouTube Playlist ID (Frontend - Public)
# The ID of your main YouTube playlist
# Example: PLrmC8WonT9uaUoORXiAwGUo21Mp_N2u8v
# Find it in your YouTube playlist URL: youtube.com/playlist?list=PLAYLIST_ID
VITE_YOUTUBE_PLAYLIST_ID=your_playlist_id_here

# ============================================
# REPLIT YOUTUBE CONNECTOR (Optional - Replit Only)
# ============================================
# These are automatically set by Replit when using the YouTube connector
# DO NOT set these manually - they are provided by Replit's infrastructure
# For Vercel deployment, use YOUTUBE_API_KEY instead
#
# REPLIT_CONNECTORS_HOSTNAME=auto-set-by-replit
# REPL_IDENTITY=auto-set-by-replit
# WEB_REPL_RENEWAL=auto-set-by-replit

# ============================================
# PODCAST INTEGRATION
# ============================================
# RSS Feed URL for your podcast (Frontend - Public)
# Example: https://anchor.fm/s/your-podcast-id/podcast/rss
# Get from your podcast hosting platform (Anchor, Buzzsprout, etc.)
VITE_PODCAST_FEED_URL=https://your-podcast-rss-feed-url.com/rss

# Podcast Platform URLs (Frontend - Public)
# Links to your podcast on various platforms
# These are used for the "Listen on" buttons in the podcast section
VITE_PODCAST_SPOTIFY_URL=https://open.spotify.com/show/your-show-id
VITE_PODCAST_APPLE_URL=https://podcasts.apple.com/us/podcast/your-podcast-name/id123456789
VITE_PODCAST_YOUTUBE_MUSIC_URL=https://music.youtube.com/playlist?list=your-playlist-id

# ============================================
# ETSY INTEGRATION (Optional)
# ============================================
# Etsy API Credentials - Get from Etsy Developer Portal
# https://www.etsy.com/developers/documentation/getting_started/register
#
# Steps:
# 1. Register your app at https://www.etsy.com/developers/register
# 2. Get your API Key (Keystring)
# 3. Generate Access Token using OAuth 2.0
#
# Note: If you don't have Etsy integration, the app will work without it
# (shop section will show empty state)
#
ETSY_API_KEY=your_etsy_api_key_here
ETSY_ACCESS_TOKEN=your_etsy_access_token_here

# ============================================
# PRINTFUL INTEGRATION
# ============================================
# Printful API Key - Get from Printful Dashboard
# https://www.printful.com/dashboard/store
#
# Steps:
# 1. Log in to Printful Dashboard
# 2. Go to Settings → Stores → Select your store
# 3. Click "Add API Access"
# 4. Copy the API key
#
# Used for fetching products and creating orders
PRINTFUL_API_KEY=your_printful_api_key_here

# ============================================
# STRIPE PAYMENT PROCESSING
# ============================================
# Stripe API Keys - Get from Stripe Dashboard
# https://dashboard.stripe.com/apikeys
#
# TEST/SANDBOX KEYS (for development):
STRIPE_PUBLISHABLE_KEY=pk_test_your_publishable_key_here
STRIPE_SECRET_KEY=sk_test_your_secret_key_here

# PRODUCTION KEYS (when ready to go live):
# STRIPE_PUBLISHABLE_KEY=pk_live_your_live_publishable_key_here
# STRIPE_SECRET_KEY=sk_live_your_live_secret_key_here

# Stripe Webhook Secret
# Get from: Stripe Dashboard → Developers → Webhooks
# Create endpoint: https://your-domain.com/api/stripe/webhook
# Events to listen for:
#   - checkout.session.completed
#   - checkout.session.async_payment_succeeded
#   - checkout.session.async_payment_failed
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Stripe Donation Link (Payment Link)
# Get from: Stripe Dashboard → Products → Payment links
# Create a payment link for donations
VITE_STRIPE_DONATION_URL=https://donate.stripe.com/your_donation_link_here

# Business Information (for Stripe receipts)
BUSINESS_NAME=Tales of Aneria
SUPPORT_EMAIL=TalesOfAneria@gmail.com
ADMIN_EMAIL=TalesOfAneria@gmail.com

# ============================================
# AWS SES EMAIL SERVICE
# ============================================
# AWS SES Configuration - Get from AWS IAM Console
# https://console.aws.amazon.com/iam/
#
# Steps:
# 1. Create IAM user with SES permissions (AmazonSESFullAccess)
# 2. Create access keys for the IAM user
# 3. Verify email addresses/domains in SES Console
# 4. Request production access (required for sending to unverified emails)
#
# AWS Region where SES is configured (e.g., us-east-1, us-west-2, eu-west-1)
AWS_SES_REGION=us-east-1

# AWS Access Key ID (from IAM user with SES permissions)
AWS_SES_ACCESS_KEY_ID=your_aws_access_key_id_here

# AWS Secret Access Key (from IAM user with SES permissions)
AWS_SES_SECRET_ACCESS_KEY=your_aws_secret_access_key_here

# Verified sender email address (must be verified in AWS SES)
# This is the "From" address for all emails sent
AWS_SES_FROM_EMAIL=noreply@talesofaneria.com

# Application URLs (for Stripe checkout redirects)
BASE_URL=https://talesofaneria.com
STRIPE_SUCCESS_URL=/checkout/success
STRIPE_CANCEL_URL=/checkout/cancel

# ============================================
# FRONTEND ENVIRONMENT VARIABLES
# ============================================
# These variables are prefixed with VITE_ and are exposed to the frontend
# They are embedded into the client-side JavaScript bundle
# DO NOT put sensitive information (API keys, secrets) in VITE_ variables
#
# Already documented above:
# - VITE_YOUTUBE_PLAYLIST_ID
# - VITE_PODCAST_FEED_URL

# ============================================
# VERCEL-SPECIFIC CONFIGURATION
# ============================================
# Vercel automatically sets these environment variables:
# - VERCEL=1
# - VERCEL_ENV=production|preview|development
# - VERCEL_URL=your-deployment-url.vercel.app
# - VERCEL_GIT_COMMIT_SHA=git-commit-hash
#
# You don't need to set these manually.

# ============================================
# DEPLOYMENT CHECKLIST FOR VERCEL
# ============================================
# 
# 1. REQUIRED Environment Variables:
#    - NODE_ENV=production
#    - DATABASE_URL=your-postgres-url
#    - ALLOWED_ORIGINS=https://your-domain.com
#    - SESSION_SECRET=random-secret-string
#    - YOUTUBE_API_KEY=your-youtube-key
#    - VITE_YOUTUBE_PLAYLIST_ID=your-playlist-id
#    - VITE_PODCAST_FEED_URL=your-podcast-rss
#    - PRINTFUL_API_KEY=your-printful-key
#    - STRIPE_PUBLISHABLE_KEY=your-stripe-publishable-key
#    - STRIPE_SECRET_KEY=your-stripe-secret-key
#    - STRIPE_WEBHOOK_SECRET=your-webhook-secret
#    - VITE_STRIPE_DONATION_URL=your-stripe-donation-link
#    - BUSINESS_NAME=Tales of Aneria
#    - SUPPORT_EMAIL=your-email@example.com
#    - BASE_URL=https://your-domain.com
#
# 2. OPTIONAL Environment Variables:
#    - ETSY_API_KEY=your-etsy-key (if using Etsy integration)
#    - ETSY_ACCESS_TOKEN=your-etsy-token (if using Etsy integration)
#    - STRIPE_SUCCESS_URL=/checkout/success
#    - STRIPE_CANCEL_URL=/checkout/cancel
#
# 3. Build Configuration:
#    - Build Command: npm run build
#    - Output Directory: dist
#    - Install Command: npm install
#
# 4. Custom Domain Setup:
#    - Add your custom domain in Vercel dashboard
#    - Update ALLOWED_ORIGINS to include your custom domain
#    - Configure DNS records (A/CNAME) to point to Vercel
#
# 5. Database Setup:
#    - Use Vercel Postgres (recommended) or external provider
#    - Run database migrations after deployment
#    - Ensure SSL is enabled for database connection
#
# 6. Stripe Webhook Setup:
#    - Add webhook endpoint in Stripe Dashboard
#    - URL: https://your-domain.com/api/stripe/webhook
#    - Add events: checkout.session.completed, etc.
#    - Copy signing secret to STRIPE_WEBHOOK_SECRET
#
# 7. Stripe Donation Link:
#    - Create a Payment Link in Stripe Dashboard → Products → Payment links
#    - Set up donation product/pricing
#    - Copy the payment link URL to VITE_STRIPE_DONATION_URL
#
# ============================================
# ⚠️  ENVIRONMENT VARIABLE UPDATE CHECKLIST
# ============================================
# 
# When you add or change environment variables:
#
# 1. ✅ Update .env.example (this file)
# 2. ✅ Update your local .env file
# 3. ✅ Update GitHub Secrets (for GitHub Actions)
#    - Go to: Settings → Secrets and variables → Actions
#    - Add or update the secret
# 4. ✅ Update Replit Secrets (if using Replit)
#    - Go to: Tools → Secrets
#    - Add or update the secret
# 5. ✅ Update production deployment
#    - Vercel: Project Settings → Environment Variables
#    - Railway: Variables tab
#    - Other: Check your platform's documentation
# 6. ✅ Redeploy if necessary
#    - Some platforms auto-redeploy, others require manual trigger
#
# ============================================
# SECURITY NOTES
# ============================================
# 
# - NEVER commit .env file to git (it's in .gitignore)
# - Rotate secrets regularly (every 90 days recommended)
# - Use different secrets for development and production
# - Enable 2FA on all service accounts (Google, Etsy, etc.)
# - Monitor API usage to detect unauthorized access
# - Set up API rate limits and quotas in provider dashboards
#
# ============================================
