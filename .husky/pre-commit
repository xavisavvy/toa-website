# Check for common coding mistakes
echo "ğŸ” Checking for common mistakes..."
npm run check:mistakes || {
  echo ""
  echo "âŒ Please fix the issues above before committing"
  exit 1
}

# Check markdown files for secrets
echo "ğŸ”’ Scanning markdown files for secrets..."
node scripts/check-markdown-secrets.mjs || {
  echo ""
  echo "âŒ Secret exposure detected in markdown files!"
  exit 1
}

# Check if .env.example was modified
if git diff --cached --name-only | grep -q "^\.env\.example$"; then
  echo "âš ï¸  .env.example was modified!"
  echo "ğŸ“ Checking environment file synchronization..."
  npm run env:check || {
    echo ""
    echo "âŒ Environment files are out of sync!"
    echo "ğŸ’¡ Run 'npm run env:sync' to synchronize, then commit again"
    exit 1
  }
fi

npx lint-staged
