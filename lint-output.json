
> rest-express@1.31.0 lint
> eslint . --ext .ts,.tsx --format json

The prop value with an expression type of MetaProperty could not be resolved. Please file an issue ( https://github.com/jsx-eslint/jsx-ast-utils/issues/new ) to get this fixed immediately.
[{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\AboutSection.tsx","messages":[{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 5 times.","line":112,"column":15,"nodeType":"Literal","endLine":112,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Youtube, Twitter, Instagram, Twitch, Globe } from \"lucide-react\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nimport brigetteAvatar from \"@/assets/cast-brigette.webp\";\r\nimport colbyAvatar from \"@/assets/cast-colby.webp\";\r\nimport coryAvatar from \"@/assets/cast-cory.webp\";\r\nimport dallinAvatar from \"@/assets/cast-dallin.webp\";\r\nimport ianAvatar from \"@/assets/cast-ian.webp\";\r\nimport jakeAvatar from \"@/assets/cast-jake.webp\";\r\nimport prestonAvatar from \"@/assets/cast-preston.webp\";\r\nimport scottAvatar from \"@/assets/cast-scott.webp\";\r\nimport torreyAvatar from \"@/assets/cast-torrey.webp\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport castData from \"@/data/cast.json\";\r\n\r\n// YouTube channel ID for Tales of Aneria\r\nconst YOUTUBE_CHANNEL_ID = \"UC7PTdudxJ43HMLJVv2QxVoQ\";\r\n\r\ninterface ChannelStats {\r\n  subscriberCount: string;\r\n  videoCount: string;\r\n  viewCount: string;\r\n  estimatedWatchHours: string;\r\n}\r\n\r\ninterface SocialLinks {\r\n  youtube?: string;\r\n  twitter?: string;\r\n  instagram?: string;\r\n  twitch?: string;\r\n  website?: string;\r\n}\r\n\r\ninterface CastMember {\r\n  id: string;\r\n  name: string;\r\n  role: string;\r\n  characters: string[];\r\n  isCurrent: boolean;\r\n  avatar: string;\r\n  socialLinks: SocialLinks;\r\n}\r\n\r\nexport default function AboutSection() {\r\n  const allCast: CastMember[] = castData.cast;\r\n  const currentCast = allCast.filter((member) => member.isCurrent);\r\n  const pastCast = allCast.filter((member) => !member.isCurrent);\r\n\r\n  const [channelStats, setChannelStats] = useState<ChannelStats | null>(null);\r\n  const [isLoadingStats, setIsLoadingStats] = useState(true);\r\n\r\n  const avatarImages: Record<string, string> = {\r\n    \"cast-preston.webp\": prestonAvatar,\r\n    \"cast-brigette.webp\": brigetteAvatar,\r\n    \"cast-dallin.webp\": dallinAvatar,\r\n    \"cast-cory.webp\": coryAvatar,\r\n    \"cast-torrey.webp\": torreyAvatar,\r\n    \"cast-scott.webp\": scottAvatar,\r\n    \"cast-colby.webp\": colbyAvatar,\r\n    \"cast-ian.webp\": ianAvatar,\r\n    \"cast-jake.webp\": jakeAvatar,\r\n  };\r\n\r\n  // Fetch channel statistics on mount\r\n  useEffect(() => {\r\n    async function fetchChannelStats() {\r\n      try {\r\n        const response = await fetch(`/api/youtube/channel/${YOUTUBE_CHANNEL_ID}/stats`);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setChannelStats(data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to fetch channel stats:', error);\r\n      } finally {\r\n        setIsLoadingStats(false);\r\n      }\r\n    }\r\n\r\n    fetchChannelStats();\r\n  }, []);\r\n\r\n  const stats = channelStats\r\n    ? [\r\n        { label: \"Episodes\", value: channelStats.videoCount },\r\n        { label: \"Subscribers\", value: channelStats.subscriberCount },\r\n        { label: \"Watch Hours\", value: channelStats.estimatedWatchHours },\r\n      ]\r\n    : [\r\n        { label: \"Episodes\", value: \"187+\" },\r\n        { label: \"Subscribers\", value: \"5K\" },\r\n        { label: \"Watch Hours\", value: \"92.2K\" },\r\n      ];\r\n\r\n  const renderSocialLinks = (member: CastMember) => {\r\n    const links = [];\r\n\r\n    if (member.socialLinks.youtube) {\r\n      links.push(\r\n        <Button\r\n          key=\"youtube\"\r\n          size=\"icon\"\r\n          variant=\"ghost\"\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            window.open(\r\n              member.socialLinks.youtube,\r\n              \"_blank\",\r\n              \"noopener,noreferrer\",\r\n            );\r\n          }}\r\n          data-testid={`button-social-youtube-${member.id}`}\r\n          aria-label={`${member.name}'s YouTube channel`}\r\n        >\r\n          <Youtube className=\"h-4 w-4\" />\r\n        </Button>,\r\n      );\r\n    }\r\n\r\n    if (member.socialLinks.twitter) {\r\n      links.push(\r\n        <Button\r\n          key=\"twitter\"\r\n          size=\"icon\"\r\n          variant=\"ghost\"\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            window.open(\r\n              member.socialLinks.twitter,\r\n              \"_blank\",\r\n              \"noopener,noreferrer\",\r\n            );\r\n          }}\r\n          data-testid={`button-social-twitter-${member.id}`}\r\n          aria-label={`${member.name}'s Twitter profile`}\r\n        >\r\n          <Twitter className=\"h-4 w-4\" />\r\n        </Button>,\r\n      );\r\n    }\r\n\r\n    if (member.socialLinks.instagram) {\r\n      links.push(\r\n        <Button\r\n          key=\"instagram\"\r\n          size=\"icon\"\r\n          variant=\"ghost\"\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            window.open(\r\n              member.socialLinks.instagram,\r\n              \"_blank\",\r\n              \"noopener,noreferrer\",\r\n            );\r\n          }}\r\n          data-testid={`button-social-instagram-${member.id}`}\r\n          aria-label={`${member.name}'s Instagram profile`}\r\n        >\r\n          <Instagram className=\"h-4 w-4\" />\r\n        </Button>,\r\n      );\r\n    }\r\n\r\n    if (member.socialLinks.twitch) {\r\n      links.push(\r\n        <Button\r\n          key=\"twitch\"\r\n          size=\"icon\"\r\n          variant=\"ghost\"\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            window.open(\r\n              member.socialLinks.twitch,\r\n              \"_blank\",\r\n              \"noopener,noreferrer\",\r\n            );\r\n          }}\r\n          data-testid={`button-social-twitch-${member.id}`}\r\n          aria-label={`${member.name}'s Twitch channel`}\r\n        >\r\n          <Twitch className=\"h-4 w-4\" />\r\n        </Button>,\r\n      );\r\n    }\r\n\r\n    if (member.socialLinks.website) {\r\n      links.push(\r\n        <Button\r\n          key=\"website\"\r\n          size=\"icon\"\r\n          variant=\"ghost\"\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            window.open(\r\n              member.socialLinks.website,\r\n              \"_blank\",\r\n              \"noopener,noreferrer\",\r\n            );\r\n          }}\r\n          data-testid={`button-social-website-${member.id}`}\r\n          aria-label={`${member.name}'s website`}\r\n        >\r\n          <Globe className=\"h-4 w-4\" />\r\n        </Button>,\r\n      );\r\n    }\r\n\r\n    return links.length > 0 ? (\r\n      <div\r\n        className=\"flex items-center justify-center gap-1 mt-3\"\r\n        data-testid={`social-links-${member.id}`}\r\n      >\r\n        {links}\r\n      </div>\r\n    ) : null;\r\n  };\r\n\r\n  const renderCastCard = (member: CastMember) => {\r\n    const avatarSrc =\r\n      member.avatar && avatarImages[member.avatar]\r\n        ? avatarImages[member.avatar]\r\n        : member.avatar;\r\n\r\n    return (\r\n      <Card\r\n        key={member.id}\r\n        className=\"overflow-hidden hover-elevate transition-all\"\r\n        data-testid={`card-cast-${member.id}`}\r\n      >\r\n        <CardContent className=\"p-6 text-center\">\r\n          <Avatar className=\"w-24 h-24 mx-auto mb-4\">\r\n            <AvatarImage\r\n              src={avatarSrc}\r\n              alt={`${member.name} - ${member.role}`}\r\n              loading=\"lazy\"\r\n            />\r\n            <AvatarFallback>\r\n              {member.name\r\n                .split(\" \")\r\n                .map((n) => n[0])\r\n                .join(\"\")}\r\n            </AvatarFallback>\r\n          </Avatar>\r\n          <h4\r\n            className=\"font-semibold text-lg mb-1\"\r\n            data-testid={`text-cast-name-${member.id}`}\r\n          >\r\n            {member.name}\r\n          </h4>\r\n          <p\r\n            className=\"text-sm text-muted-foreground mb-3\"\r\n            data-testid={`text-cast-role-${member.id}`}\r\n          >\r\n            {member.role}\r\n          </p>\r\n          <div className=\"space-y-1\">\r\n            {member.characters.slice(0, 3).map((character, idx) => (\r\n              <p\r\n                key={idx}\r\n                className=\"text-xs text-primary font-medium\"\r\n                data-testid={`text-cast-character-${member.id}-${idx}`}\r\n              >\r\n                {character}\r\n              </p>\r\n            ))}\r\n            {member.characters.length > 3 && (\r\n              <Badge\r\n                variant=\"secondary\"\r\n                className=\"text-xs mt-2\"\r\n                data-testid={`badge-more-characters-${member.id}`}\r\n              >\r\n                +{member.characters.length - 3} more\r\n              </Badge>\r\n            )}\r\n          </div>\r\n          {renderSocialLinks(member)}\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <section id=\"about\" className=\"py-20 lg:py-32 bg-card\">\r\n      <div className=\"max-w-7xl mx-auto px-6 lg:px-8\">\r\n        <div className=\"text-center mb-16\">\r\n          <h2\r\n            className=\"font-serif text-4xl md:text-5xl font-semibold mb-6\"\r\n            data-testid=\"text-about-title\"\r\n          >\r\n            About Tales of Aneria\r\n          </h2>\r\n          <p\r\n            className=\"text-lg text-muted-foreground max-w-3xl mx-auto mb-8\"\r\n            data-testid=\"text-about-description\"\r\n          >\r\n            Tales of Aneria is an epic tabletop RPG live play series that\r\n            follows a group of unlikely heroes as they navigate a world\r\n            teetering on the edge of chaos. With rich storytelling,\r\n            unforgettable characters, and immersive world-building, each episode\r\n            brings new adventures and unexpected twists.\r\n          </p>\r\n\r\n          <div className=\"flex flex-wrap items-center justify-center gap-12 mb-16\">\r\n            {stats.map((stat, index) => (\r\n              <div key={index} className=\"text-center\">\r\n                <div\r\n                  className={`text-4xl font-bold text-primary mb-2 ${isLoadingStats ? 'animate-pulse' : ''}`}\r\n                  data-testid={`text-stat-value-${index}`}\r\n                >\r\n                  {stat.value}\r\n                </div>\r\n                <div\r\n                  className=\"text-muted-foreground\"\r\n                  data-testid={`text-stat-label-${index}`}\r\n                >\r\n                  {stat.label}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mb-16\">\r\n          <h3\r\n            className=\"font-serif text-3xl font-semibold mb-8 text-center\"\r\n            data-testid=\"text-current-cast-title\"\r\n          >\r\n            Current Cast\r\n          </h3>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n            {currentCast.map(renderCastCard)}\r\n          </div>\r\n        </div>\r\n\r\n        {pastCast.length > 0 && (\r\n          <div>\r\n            <h3\r\n              className=\"font-serif text-2xl font-semibold mb-8 text-center text-muted-foreground\"\r\n              data-testid=\"text-past-cast-title\"\r\n            >\r\n              Other Cast Members and Special Guests\r\n            </h3>\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n              {pastCast.map(renderCastCard)}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ChaosGoblinMode.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":25,"column":67,"nodeType":"MemberExpression","endLine":25,"endColumn":81},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":96,"column":16,"nodeType":"MemberExpression","endLine":96,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\r\n\r\nconst KONAMI_CODE = [\r\n  'ArrowUp',\r\n  'ArrowUp',\r\n  'ArrowDown',\r\n  'ArrowDown',\r\n  'ArrowLeft',\r\n  'ArrowRight',\r\n  'ArrowLeft',\r\n  'ArrowRight',\r\n  'b',\r\n  'a',\r\n];\r\n\r\nexport function useKonamiCode(callback: () => void) {\r\n  const [keys, setKeys] = useState<string[]>([]);\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: globalThis.KeyboardEvent) => {\r\n      setKeys((prevKeys) => {\r\n        const newKeys = [...prevKeys, e.key].slice(-KONAMI_CODE.length);\r\n        \r\n        // Check if the sequence matches\r\n        const matches = KONAMI_CODE.every((key, index) => key === newKeys[index]);\r\n        \r\n        if (matches) {\r\n          callback();\r\n          return []; // Reset after successful activation\r\n        }\r\n        \r\n        return newKeys;\r\n      });\r\n    };\r\n\r\n    globalThis.window.addEventListener('keydown', handleKeyDown);\r\n    return () => globalThis.window.removeEventListener('keydown', handleKeyDown);\r\n  }, [callback]);\r\n\r\n  return keys;\r\n}\r\n\r\ninterface ChaosGoblinModeProps {\r\n  active: boolean;\r\n  onComplete: () => void;\r\n}\r\n\r\nexport function ChaosGoblinMode({ active, onComplete }: ChaosGoblinModeProps) {\r\n  const [color, setColor] = useState('#ff0000');\r\n  const [timeLeft, setTimeLeft] = useState(60);\r\n  const [audio] = useState(() => {\r\n    // Check if Audio is available (mock or real)\r\n    if (typeof globalThis.Audio === 'undefined') {\r\n      return null;\r\n    }\r\n    // YouTube video ID: tB-opEiK16o = \"Goblin Mode\" song\r\n    // Using direct MP3 from a CDN or local file\r\n    const audioElement = new globalThis.Audio('/goblin-mode.mp3');\r\n    audioElement.volume = 0.5; // 50% volume\r\n    audioElement.loop = false;\r\n    return audioElement;\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!active) {\r\n      setTimeLeft(60);\r\n      if (audio) {\r\n        audio.pause();\r\n        audio.currentTime = 0;\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Play music\r\n    if (audio) {\r\n      audio.play().catch((err) => {\r\n        console.warn('Failed to play Chaos Goblin audio:', err);\r\n      });\r\n    }\r\n\r\n    // Safe rainbow colors (slower transition, less intense)\r\n    const colors = [\r\n      '#FF6B6B', // Soft red\r\n      '#FFA06B', // Soft orange\r\n      '#FFD96B', // Soft yellow\r\n      '#6BFF8F', // Soft green\r\n      '#6BCDFF', // Soft blue\r\n      '#A06BFF', // Soft purple\r\n      '#FF6BCD', // Soft pink\r\n    ];\r\n\r\n    let colorIndex = 0;\r\n    \r\n    // Change color every 500ms (safe, non-seizure inducing)\r\n    const interval = globalThis.setInterval(() => {\r\n      setColor(colors[colorIndex] || '#FF6B6B');\r\n      colorIndex = (colorIndex + 1) % colors.length;\r\n    }, 500);\r\n\r\n    // Countdown timer\r\n    const countdownInterval = globalThis.setInterval(() => {\r\n      setTimeLeft((prev) => {\r\n        if (prev <= 1) {\r\n          globalThis.clearInterval(countdownInterval);\r\n          return 0;\r\n        }\r\n        return prev - 1;\r\n      });\r\n    }, 1000);\r\n\r\n    // Auto-stop after 60 seconds\r\n    const timeout = globalThis.setTimeout(() => {\r\n      globalThis.clearInterval(interval);\r\n      globalThis.clearInterval(countdownInterval);\r\n      if (audio) {\r\n        audio.pause();\r\n        audio.currentTime = 0;\r\n      }\r\n      onComplete();\r\n    }, 60000);\r\n\r\n    return () => {\r\n      globalThis.clearInterval(interval);\r\n      globalThis.clearInterval(countdownInterval);\r\n      globalThis.clearTimeout(timeout);\r\n      if (audio) {\r\n        audio.pause();\r\n        audio.currentTime = 0;\r\n      }\r\n    };\r\n  }, [active, onComplete, audio]);\r\n\r\n  if (!active) {return null;}\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 z-50 flex items-center justify-center pointer-events-none\"\r\n      style={{\r\n        backgroundColor: color,\r\n        transition: 'background-color 0.5s ease-in-out', // Smooth transition\r\n      }}\r\n    >\r\n      <div className=\"flex flex-col items-center animate-bounce\">\r\n        {/* Dancing Goblin Image */}\r\n        <img\r\n          src=\"/chaos-goblin.svg\"\r\n          alt=\"Dancing Chaos Goblin\"\r\n          className=\"w-64 h-64\"\r\n          style={{\r\n            animation: 'goblin-dance 0.5s ease-in-out infinite alternate, goblin-spin 2s linear infinite',\r\n          }}\r\n        />\r\n        \r\n        {/* Text */}\r\n        <h1 \r\n          className=\"text-6xl font-bold mt-8 animate-pulse\"\r\n          style={{\r\n            color: '#fff',\r\n            textShadow: '0 0 20px rgba(0,0,0,0.8), 0 0 40px rgba(0,0,0,0.6)',\r\n            fontFamily: 'Impact, Arial Black, sans-serif',\r\n            letterSpacing: '0.1em',\r\n          }}\r\n        >\r\n          CHAOS GOBLIN MODE\r\n        </h1>\r\n\r\n        {/* Countdown */}\r\n        <p className=\"text-2xl text-white mt-4 font-bold drop-shadow-lg\">\r\n          Ending in {timeLeft}s\r\n        </p>\r\n      </div>\r\n\r\n      {/* Additional safe animations */}\r\n      <style>{`\r\n        @keyframes goblin-spin {\r\n          from { transform: rotate(-15deg) scale(1); }\r\n          50% { transform: rotate(15deg) scale(1.1); }\r\n          to { transform: rotate(-15deg) scale(1); }\r\n        }\r\n        @keyframes goblin-dance {\r\n          0% { transform: translateY(0) translateX(0); }\r\n          25% { transform: translateY(-20px) translateX(-10px); }\r\n          50% { transform: translateY(0) translateX(10px); }\r\n          75% { transform: translateY(-20px) translateX(-10px); }\r\n          100% { transform: translateY(0) translateX(0); }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\CharactersSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\CommunitySection.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":145,"column":21,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[5105,5491],"text":"\r\n                    &quot;This brought a tear to my eye. Love to see a campaign come\r\n                    to fruition. The roleplay was fantastic, the story was\r\n                    brimming with life and creativity. It was a joy to listen\r\n                    to. Thank you all so much. I will be waiting with\r\n                    anticipation for the next adventure.\"\r\n                  "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[5105,5491],"text":"\r\n                    &ldquo;This brought a tear to my eye. Love to see a campaign come\r\n                    to fruition. The roleplay was fantastic, the story was\r\n                    brimming with life and creativity. It was a joy to listen\r\n                    to. Thank you all so much. I will be waiting with\r\n                    anticipation for the next adventure.\"\r\n                  "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[5105,5491],"text":"\r\n                    &#34;This brought a tear to my eye. Love to see a campaign come\r\n                    to fruition. The roleplay was fantastic, the story was\r\n                    brimming with life and creativity. It was a joy to listen\r\n                    to. Thank you all so much. I will be waiting with\r\n                    anticipation for the next adventure.\"\r\n                  "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[5105,5491],"text":"\r\n                    &rdquo;This brought a tear to my eye. Love to see a campaign come\r\n                    to fruition. The roleplay was fantastic, the story was\r\n                    brimming with life and creativity. It was a joy to listen\r\n                    to. Thank you all so much. I will be waiting with\r\n                    anticipation for the next adventure.\"\r\n                  "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":149,"column":57,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[5105,5491],"text":"\r\n                    \"This brought a tear to my eye. Love to see a campaign come\r\n                    to fruition. The roleplay was fantastic, the story was\r\n                    brimming with life and creativity. It was a joy to listen\r\n                    to. Thank you all so much. I will be waiting with\r\n                    anticipation for the next adventure.&quot;\r\n                  "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[5105,5491],"text":"\r\n                    \"This brought a tear to my eye. Love to see a campaign come\r\n                    to fruition. The roleplay was fantastic, the story was\r\n                    brimming with life and creativity. It was a joy to listen\r\n                    to. Thank you all so much. I will be waiting with\r\n                    anticipation for the next adventure.&ldquo;\r\n                  "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[5105,5491],"text":"\r\n                    \"This brought a tear to my eye. Love to see a campaign come\r\n                    to fruition. The roleplay was fantastic, the story was\r\n                    brimming with life and creativity. It was a joy to listen\r\n                    to. Thank you all so much. I will be waiting with\r\n                    anticipation for the next adventure.&#34;\r\n                  "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[5105,5491],"text":"\r\n                    \"This brought a tear to my eye. Love to see a campaign come\r\n                    to fruition. The roleplay was fantastic, the story was\r\n                    brimming with life and creativity. It was a joy to listen\r\n                    to. Thank you all so much. I will be waiting with\r\n                    anticipation for the next adventure.&rdquo;\r\n                  "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":163,"column":21,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[5971,6504],"text":"\r\n                    &quot;I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    &ldquo;I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[5971,6504],"text":"\r\n                    &#34;I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    &rdquo;I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":164,"column":62,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y&apos;all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y&lsquo;all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y&#39;all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y&rsquo;all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":164,"column":71,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren&apos;t overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren&lsquo;t overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren&#39;t overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren&rsquo;t overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":165,"column":42,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y&apos;all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y&lsquo;all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y&#39;all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y&rsquo;all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":166,"column":65,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y&apos;all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y&lsquo;all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y&#39;all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y&rsquo;all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":167,"column":77,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y&apos;all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y&lsquo;all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y&#39;all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y&rsquo;all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":168,"column":37,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can&apos;t wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can&lsquo;t wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can&#39;t wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can&rsquo;t wait to see what y'all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":168,"column":58,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y&apos;all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y&lsquo;all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y&#39;all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y&rsquo;all have in store for\r\n                    us later!\"\r\n                  "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":169,"column":30,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!&quot;\r\n                  "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!&ldquo;\r\n                  "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!&#34;\r\n                  "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[5971,6504],"text":"\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!&rdquo;\r\n                  "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":183,"column":21,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6984,7131],"text":"\r\n                    &quot; This world is amazing. Love exploring it with you\r\n                    guys.\"... \"Shenanigans abound!\"\r\n                  "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6984,7131],"text":"\r\n                    &ldquo; This world is amazing. Love exploring it with you\r\n                    guys.\"... \"Shenanigans abound!\"\r\n                  "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6984,7131],"text":"\r\n                    &#34; This world is amazing. Love exploring it with you\r\n                    guys.\"... \"Shenanigans abound!\"\r\n                  "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6984,7131],"text":"\r\n                    &rdquo; This world is amazing. Love exploring it with you\r\n                    guys.\"... \"Shenanigans abound!\"\r\n                  "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":184,"column":26,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6984,7131],"text":"\r\n                    \" This world is amazing. Love exploring it with you\r\n                    guys.&quot;... \"Shenanigans abound!\"\r\n                  "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6984,7131],"text":"\r\n                    \" This world is amazing. Love exploring it with you\r\n                    guys.&ldquo;... \"Shenanigans abound!\"\r\n                  "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6984,7131],"text":"\r\n                    \" This world is amazing. Love exploring it with you\r\n                    guys.&#34;... \"Shenanigans abound!\"\r\n                  "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6984,7131],"text":"\r\n                    \" This world is amazing. Love exploring it with you\r\n                    guys.&rdquo;... \"Shenanigans abound!\"\r\n                  "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":184,"column":31,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6984,7131],"text":"\r\n                    \" This world is amazing. Love exploring it with you\r\n                    guys.\"... &quot;Shenanigans abound!\"\r\n                  "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6984,7131],"text":"\r\n                    \" This world is amazing. Love exploring it with you\r\n                    guys.\"... &ldquo;Shenanigans abound!\"\r\n                  "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6984,7131],"text":"\r\n                    \" This world is amazing. Love exploring it with you\r\n                    guys.\"... &#34;Shenanigans abound!\"\r\n                  "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6984,7131],"text":"\r\n                    \" This world is amazing. Love exploring it with you\r\n                    guys.\"... &rdquo;Shenanigans abound!\"\r\n                  "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":184,"column":51,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6984,7131],"text":"\r\n                    \" This world is amazing. Love exploring it with you\r\n                    guys.\"... \"Shenanigans abound!&quot;\r\n                  "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6984,7131],"text":"\r\n                    \" This world is amazing. Love exploring it with you\r\n                    guys.\"... \"Shenanigans abound!&ldquo;\r\n                  "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6984,7131],"text":"\r\n                    \" This world is amazing. Love exploring it with you\r\n                    guys.\"... \"Shenanigans abound!&#34;\r\n                  "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6984,7131],"text":"\r\n                    \" This world is amazing. Love exploring it with you\r\n                    guys.\"... \"Shenanigans abound!&rdquo;\r\n                  "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { SiYoutube, SiX, SiDiscord, SiPatreon, SiReddit } from \"react-icons/si\";\r\n\r\nimport { AccessibleIcon } from \"@/components/ui/accessible-icon\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport socialLinksData from \"@/data/social-links.json\";\r\n\r\nexport default function CommunitySection() {\r\n  const socialLinks = [\r\n    {\r\n      Icon: SiYoutube,\r\n      name: \"YouTube\",\r\n      testId: \"youtube\",\r\n      url: socialLinksData.youtube,\r\n    },\r\n    {\r\n      Icon: SiX,\r\n      name: \"X\",\r\n      testId: \"x\",\r\n      url: socialLinksData.twitter,\r\n    },\r\n    {\r\n      Icon: SiDiscord,\r\n      name: \"Discord\",\r\n      testId: \"discord\",\r\n      url: socialLinksData.discord,\r\n    },\r\n    {\r\n      Icon: SiReddit,\r\n      name: \"Reddit\",\r\n      testId: \"reddit\",\r\n      url: socialLinksData.reddit,\r\n    },\r\n    {\r\n      Icon: SiPatreon,\r\n      name: \"Patreon\",\r\n      testId: \"patreon\",\r\n      url: socialLinksData.patreon,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <section className=\"py-20 lg:py-32 bg-background\">\r\n      <div className=\"max-w-7xl mx-auto px-6 lg:px-8\">\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center\">\r\n          <div>\r\n            <h2\r\n              className=\"font-serif text-4xl md:text-5xl font-semibold mb-6\"\r\n              data-testid=\"text-community-title\"\r\n            >\r\n              Join Our Community\r\n            </h2>\r\n            <p\r\n              className=\"text-lg text-muted-foreground mb-8\"\r\n              data-testid=\"text-community-description\"\r\n            >\r\n              Connect with fellow adventurers, get exclusive updates, and be\r\n              part of the Tales of Aneria community. Support us on Patreon for\r\n              behind-the-scenes content, early access to episodes, and exclusive\r\n              perks!\r\n            </p>\r\n\r\n            <Card className=\"mb-8 bg-primary/5 border-primary/20\">\r\n              <CardContent className=\"p-8 text-center\">\r\n                <div className=\"flex items-center justify-center mb-4\">\r\n                  <AccessibleIcon icon={SiPatreon} label=\"Patreon\" className=\"h-12 w-12 text-primary\" />\r\n                </div>\r\n                <h3\r\n                  className=\"font-serif text-2xl font-semibold mb-3\"\r\n                  data-testid=\"text-patreon-title\"\r\n                >\r\n                  Support Us on Patreon\r\n                </h3>\r\n                <p\r\n                  className=\"text-muted-foreground mb-6\"\r\n                  data-testid=\"text-patreon-description\"\r\n                >\r\n                  Get exclusive content, early access, and help us create more\r\n                  amazing episodes!\r\n                </p>\r\n                <Button\r\n                  size=\"lg\"\r\n                  className=\"w-full sm:w-auto\"\r\n                  data-testid=\"button-join-patreon\"\r\n                  onClick={() =>\r\n                    window.open(\r\n                      socialLinksData.patreon,\r\n                      \"_blank\",\r\n                      \"noopener,noreferrer\",\r\n                    )\r\n                  }\r\n                  aria-label=\"Join our Patreon\"\r\n                >\r\n                  <AccessibleIcon icon={SiPatreon} className=\"h-5 w-5 mr-2\" />\r\n                  Join Our Patreon\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <div>\r\n              <h3\r\n                className=\"font-semibold text-xl mb-4\"\r\n                data-testid=\"text-follow-us\"\r\n              >\r\n                Follow Us\r\n              </h3>\r\n              <div className=\"flex flex-wrap gap-3\">\r\n                {socialLinks.map((link) => {\r\n                  const Icon = link.Icon;\r\n                  return (\r\n                    <Button\r\n                      key={link.testId}\r\n                      variant=\"outline\"\r\n                      size=\"lg\"\r\n                      className=\"flex-1 min-w-[140px]\"\r\n                      data-testid={`button-social-${link.testId}`}\r\n                      onClick={() =>\r\n                        window.open(link.url, \"_blank\", \"noopener,noreferrer\")\r\n                      }\r\n                      aria-label={`Follow us on ${link.name}`}\r\n                    >\r\n                      <AccessibleIcon icon={Icon} className=\"h-6 w-6\" />\r\n                      <span className=\"ml-2\">{link.name}</span>\r\n                    </Button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <Card className=\"overflow-hidden\">\r\n            <CardContent className=\"p-8\">\r\n              <h3\r\n                className=\"font-serif text-2xl font-semibold mb-4\"\r\n                data-testid=\"text-testimonial-title\"\r\n              >\r\n                What Our Community Says\r\n              </h3>\r\n              <div className=\"space-y-6\">\r\n                <div className=\"border-l-2 border-primary pl-4\">\r\n                  <p\r\n                    className=\"text-muted-foreground mb-2 italic\"\r\n                    data-testid=\"text-testimonial-1\"\r\n                  >\r\n                    \"This brought a tear to my eye. Love to see a campaign come\r\n                    to fruition. The roleplay was fantastic, the story was\r\n                    brimming with life and creativity. It was a joy to listen\r\n                    to. Thank you all so much. I will be waiting with\r\n                    anticipation for the next adventure.\"\r\n                  </p>\r\n                  <p\r\n                    className=\"text-sm font-medium\"\r\n                    data-testid=\"text-testimonial-author-1\"\r\n                  >\r\n                    - @timothyhanna6304\r\n                  </p>\r\n                </div>\r\n                <div className=\"border-l-2 border-primary pl-4\">\r\n                  <p\r\n                    className=\"text-muted-foreground mb-2 italic\"\r\n                    data-testid=\"text-testimonial-2\"\r\n                  >\r\n                    \"I do wanna say you guys are amazing. I have learned so much\r\n                    as a DM and a player watching you guys. Y'all aren't overly\r\n                    polished and I love y'all for it. Every episode has felt\r\n                    like we are just chilling in the room with y'all as you\r\n                    play. Thank you so much for this campaign and the Time y'all\r\n                    put into it. Can't wait to see what y'all have in store for\r\n                    us later!\"\r\n                  </p>\r\n                  <p\r\n                    className=\"text-sm font-medium\"\r\n                    data-testid=\"text-testimonial-author-2\"\r\n                  >\r\n                    - @boscobubbles8839\r\n                  </p>\r\n                </div>\r\n                <div className=\"border-l-2 border-primary pl-4\">\r\n                  <p\r\n                    className=\"text-muted-foreground mb-2 italic\"\r\n                    data-testid=\"text-testimonial-2\"\r\n                  >\r\n                    \" This world is amazing. Love exploring it with you\r\n                    guys.\"... \"Shenanigans abound!\"\r\n                  </p>\r\n                  <p\r\n                    className=\"text-sm font-medium\"\r\n                    data-testid=\"text-testimonial-author-2\"\r\n                  >\r\n                    - @spacemanpack\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\Hero.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":43,"column":19,"nodeType":"MemberExpression","endLine":43,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Play, BookOpen } from \"lucide-react\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nimport butterflyImage from \"@/assets/hero-butterfly.webp\";\r\nimport cinderhearthImage from \"@/assets/hero-cinderhearth.webp\";\r\nimport desertImage from \"@/assets/hero-desert.webp\";\r\nimport spaceImage from \"@/assets/hero-space.webp\";\r\nimport taebrinImage from \"@/assets/hero-taebrin.webp\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport socialLinksData from \"@/data/social-links.json\";\r\n\r\nconst heroImages = [\r\n  taebrinImage,\r\n  butterflyImage,\r\n  cinderhearthImage,\r\n  desertImage,\r\n  spaceImage,\r\n];\r\n\r\nexport default function Hero() {\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n  const [loadedImages, setLoadedImages] = useState<Set<number>>(new Set([0]));\r\n\r\n  useEffect(() => {\r\n    // Ensure we start at index 0\r\n    setCurrentImageIndex(0);\r\n    \r\n    const interval = setInterval(() => {\r\n      setCurrentImageIndex((prevIndex) => (prevIndex + 1) % heroImages.length);\r\n    }, 6000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // Preload current and next image\r\n  useEffect(() => {\r\n    const nextIndex = (currentImageIndex + 1) % heroImages.length;\r\n    const imagesToLoad = [currentImageIndex, nextIndex];\r\n    \r\n    imagesToLoad.forEach((index) => {\r\n      if (!loadedImages.has(index)) {\r\n        const img = new Image();\r\n        img.src = heroImages[index];\r\n        img.onload = () => {\r\n          setLoadedImages((prev) => new Set(Array.from(prev).concat(index)));\r\n        };\r\n      }\r\n    });\r\n  }, [currentImageIndex, loadedImages]);\r\n\r\n  const scrollToSection = (id: string) => {\r\n    const element = document.querySelector(id);\r\n    element?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  return (\r\n    <section className=\"relative min-h-screen flex items-center justify-center overflow-hidden\">\r\n      {heroImages.map((image, index) => {\r\n        // Only render images that have been loaded or are currently visible\r\n        const shouldRender = loadedImages.has(index) || index === currentImageIndex;\r\n        if (!shouldRender) {return null;}\r\n\r\n        return (\r\n          <div\r\n            key={index}\r\n            className={`absolute inset-0 bg-cover bg-center bg-no-repeat transition-opacity duration-1000 ${\r\n              index === currentImageIndex ? 'opacity-100' : 'opacity-0'\r\n            }`}\r\n            style={{ backgroundImage: `url(${image})` }}\r\n          />\r\n        );\r\n      })}\r\n      <div className=\"absolute inset-0 bg-gradient-to-b from-background/60 via-background/80 to-background\" />\r\n      \r\n      <div className=\"relative z-10 max-w-5xl mx-auto px-6 lg:px-8 text-center py-20\">\r\n        <h1 \r\n          className=\"font-serif text-6xl md:text-7xl lg:text-8xl font-bold mb-6 text-foreground\" \r\n          data-testid=\"text-hero-title\"\r\n          style={{ textShadow: '0 2px 8px rgba(255, 255, 255, 0.7), 0 4px 16px rgba(255, 255, 255, 0.5)' }}\r\n        >\r\n          Tales of Aneria\r\n        </h1>\r\n        <p \r\n          className=\"text-xl md:text-2xl lg:text-3xl mb-8 text-muted-foreground font-light\" \r\n          data-testid=\"text-hero-tagline\"\r\n          style={{ textShadow: '0 2px 6px rgba(255, 255, 255, 0.7), 0 3px 12px rgba(255, 255, 255, 0.5)' }}\r\n        >\r\n          An epic journey through a world of magic, mystery, and adventure\r\n        </p>\r\n        <p \r\n          className=\"text-lg md:text-xl mb-12 max-w-2xl mx-auto text-muted-foreground\" \r\n          data-testid=\"text-hero-description\"\r\n          style={{ textShadow: '0 2px 6px rgba(255, 255, 255, 0.7), 0 3px 12px rgba(255, 255, 255, 0.5)' }}\r\n        >\r\n          Join our heroes as they unravel ancient secrets and forge their destiny in the mystical realm of Aneria\r\n        </p>\r\n        \r\n        <div className=\"flex flex-wrap items-center justify-center gap-4\">\r\n          <Button \r\n            size=\"lg\" \r\n            className=\"text-lg px-8 min-h-12\"\r\n            data-testid=\"button-watch-latest\"\r\n            onClick={() => window.open(socialLinksData.youtube, '_blank', 'noopener,noreferrer')}\r\n          >\r\n            <Play className=\"mr-2 h-5 w-5\" />\r\n            Watch Latest Episode\r\n          </Button>\r\n          <Button \r\n            size=\"lg\" \r\n            variant=\"outline\"\r\n            className=\"text-lg px-8 min-h-12 backdrop-blur-sm bg-background/20\"\r\n            data-testid=\"button-explore-world\"\r\n            onClick={() => scrollToSection('#lore')}\r\n          >\r\n            <BookOpen className=\"mr-2 h-5 w-5\" />\r\n            Explore the World\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce\">\r\n        <div className=\"w-6 h-10 border-2 border-foreground/30 rounded-full p-1\">\r\n          <div className=\"w-1.5 h-3 bg-foreground/30 rounded-full mx-auto\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"absolute bottom-8 right-8 flex gap-2 z-20\">\r\n        {heroImages.map((_, index) => (\r\n          <button\r\n            key={index}\r\n            onClick={() => setCurrentImageIndex(index)}\r\n            className={`w-2 h-2 rounded-full transition-all ${\r\n              index === currentImageIndex \r\n                ? 'bg-primary w-8' \r\n                : 'bg-foreground/30 hover:bg-foreground/50'\r\n            }`}\r\n            aria-label={`Go to slide ${index + 1}`}\r\n            data-testid={`button-carousel-${index}`}\r\n          />\r\n        ))}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\LatestEpisodes.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is assigned a value but never used.","line":28,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[769,776],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":28,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":43},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":36,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":36,"endColumn":20,"suggestions":[{"fix":{"range":[1113,1172],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":43,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":43,"endColumn":20,"suggestions":[{"fix":{"range":[1462,1520],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":47,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":47,"endColumn":20,"suggestions":[{"fix":{"range":[1620,1688],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":49,"column":35,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":49,"endColumn":47,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[1745,1746],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":83,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":83,"endColumn":20,"suggestions":[{"fix":{"range":[3010,3114],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":142,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":142,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[5514,5521],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":142,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":142,"endColumn":49}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useQuery } from \"@tanstack/react-query\";\r\nimport { Play, Clock, Eye } from \"lucide-react\";\r\n\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { analytics } from \"@/lib/analytics\";\r\n\r\n\r\ninterface Episode {\r\n  id: string;\r\n  title: string;\r\n  thumbnail: string;\r\n  duration: string;\r\n  viewCount?: string;\r\n  publishedAt: string;\r\n}\r\n\r\ninterface LatestEpisodesProps {\r\n  playlistIds?: string[];\r\n  channelId?: string;\r\n}\r\n\r\nexport default function LatestEpisodes({ playlistIds, channelId }: LatestEpisodesProps) {\r\n  // Prefer channel over playlists if both are provided\r\n  const useChannel = !!channelId;\r\n  \r\n  const { data: episodes, isLoading, error } = useQuery<Episode[]>({\r\n    queryKey: useChannel \r\n      ? ['/api/youtube/channel', channelId]\r\n      : ['/api/youtube/playlists', playlistIds],\r\n    enabled: useChannel ? !!channelId : (!!playlistIds && playlistIds.length > 0),\r\n    queryFn: async () => {\r\n      if (useChannel) {\r\n        // Fetch all videos from channel\r\n        console.log('Fetching YouTube channel videos:', channelId);\r\n        const response = await fetch(`/api/youtube/channel/${channelId}?maxResults=50`);\r\n        if (!response.ok) {\r\n          console.error('Error fetching channel videos:', response.statusText);\r\n          return [];\r\n        }\r\n        const videos = await response.json();\r\n        console.log('Channel response:', videos.length, 'videos');\r\n        return videos;\r\n      } else {\r\n        // Fetch from playlists (existing logic)\r\n        console.log('Fetching YouTube playlists from server:', playlistIds);\r\n        \r\n        const allVideosPromises = playlistIds!.map(async (playlistId) => {\r\n          try {\r\n            const response = await fetch(`/api/youtube/playlist/${playlistId}?maxResults=10000`);\r\n            if (!response.ok) {\r\n              console.error(`Error fetching playlist ${playlistId}:`, response.statusText);\r\n              return [];\r\n            }\r\n            return await response.json();\r\n          } catch (error) {\r\n            console.error(`Error fetching playlist ${playlistId}:`, error);\r\n            return [];\r\n          }\r\n        });\r\n        \r\n        const playlistResults = await Promise.all(allVideosPromises);\r\n        \r\n        // Flatten and dedupe by video ID\r\n        const videoMap = new Map<string, Episode>();\r\n        for (const videos of playlistResults) {\r\n          for (const video of videos) {\r\n            if (!videoMap.has(video.id)) {\r\n              videoMap.set(video.id, video);\r\n            }\r\n          }\r\n        }\r\n        \r\n        // Sort by publishedAt date (most recent first)\r\n        const allVideos = Array.from(videoMap.values());\r\n        allVideos.sort((a, b) => {\r\n          const dateA = new Date(a.publishedAt).getTime();\r\n          const dateB = new Date(b.publishedAt).getTime();\r\n          return dateB - dateA;\r\n        });\r\n        \r\n        console.log('Server-side response:', allVideos.length, 'videos from', playlistIds?.length, 'playlists');\r\n        return allVideos;\r\n      }\r\n    },\r\n  });\r\n\r\n  // Videos are already sorted by most recent first from the API\r\n  const displayEpisodes = episodes ? episodes.slice(0, 3) : [];\r\n  \r\n  // Link to YouTube channel since we have multiple playlists\r\n  const channelUrl = 'https://www.youtube.com/@TalesOfAneria';\r\n\r\n  return (\r\n    <section id=\"episodes\" className=\"py-20 lg:py-32 bg-background\">\r\n      <div className=\"max-w-7xl mx-auto px-6 lg:px-8\">\r\n        <div className=\"flex items-center justify-between mb-12 flex-wrap gap-4\">\r\n          <div>\r\n            <h2 className=\"font-serif text-4xl md:text-5xl font-semibold mb-3\" data-testid=\"text-episodes-title\">\r\n              Latest Episodes\r\n            </h2>\r\n            <p className=\"text-muted-foreground text-lg\">\r\n              Catch up on our most recent adventures\r\n            </p>\r\n          </div>\r\n          <Button \r\n            variant=\"outline\"\r\n            data-testid=\"button-view-all-episodes\"\r\n            onClick={() => window.open(channelUrl, '_blank', 'noopener,noreferrer')}\r\n          >\r\n            View All Episodes\r\n          </Button>\r\n        </div>\r\n\r\n        {isLoading ? (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n            {[1, 2, 3].map((i) => (\r\n              <Card key={i} className=\"overflow-hidden\">\r\n                <div className=\"aspect-video bg-muted animate-pulse\" />\r\n                <CardContent className=\"p-6\">\r\n                  <div className=\"h-6 bg-muted rounded animate-pulse mb-3\" />\r\n                  <div className=\"h-4 bg-muted rounded animate-pulse w-1/2\" />\r\n                </CardContent>\r\n              </Card>\r\n            ))}\r\n          </div>\r\n        ) : displayEpisodes.length === 0 ? (\r\n          <Card>\r\n            <CardContent className=\"p-12 text-center\">\r\n              <p className=\"text-muted-foreground\">\r\n                {useChannel \r\n                  ? \"No videos found on this channel.\"\r\n                  : (playlistIds && playlistIds.length > 0\r\n                      ? \"No episodes found in the playlists.\"\r\n                      : \"Configure your YouTube channel ID or playlist IDs to display episodes.\")}\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n            {displayEpisodes.map((episode, index) => (\r\n              <Card \r\n                key={episode.id} \r\n                className=\"overflow-hidden hover-elevate cursor-pointer transition-all\"\r\n                data-testid={`card-episode-${episode.id}`}\r\n                onClick={() => {\r\n                  analytics.videoPlay(episode.id, episode.title);\r\n                  window.open(`https://www.youtube.com/watch?v=${episode.id}`, '_blank');\r\n                }}\r\n              >\r\n                <div className=\"relative aspect-video overflow-hidden\">\r\n                  <img\r\n                    src={episode.thumbnail}\r\n                    alt={episode.title}\r\n                    className=\"object-cover w-full h-full\"\r\n                  />\r\n                  <div className=\"absolute inset-0 bg-background/40 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center\">\r\n                    <div className=\"w-16 h-16 rounded-full bg-primary flex items-center justify-center\">\r\n                      <Play className=\"h-8 w-8 text-primary-foreground ml-1\" />\r\n                    </div>\r\n                  </div>\r\n                  <Badge className=\"absolute top-3 left-3\" data-testid={`badge-episode-new-${episode.id}`}>\r\n                    New\r\n                  </Badge>\r\n                </div>\r\n                <CardContent className=\"p-6\">\r\n                  <h3 className=\"font-semibold text-xl mb-3 line-clamp-2\" data-testid={`text-episode-title-${episode.id}`}>\r\n                    {episode.title}\r\n                  </h3>\r\n                  <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\r\n                    <div className=\"flex items-center gap-1\">\r\n                      <Clock className=\"h-4 w-4\" />\r\n                      <span data-testid={`text-duration-${episode.id}`}>{episode.duration}</span>\r\n                    </div>\r\n                    {episode.viewCount && (\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <Eye className=\"h-4 w-4\" />\r\n                        <span data-testid={`text-views-${episode.id}`}>{episode.viewCount}</span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\LatestShorts.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is assigned a value but never used.","line":23,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[577,584],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":23,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":41},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":27,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":27,"endColumn":18,"suggestions":[{"fix":{"range":[730,781],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":34,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":34,"endColumn":18,"suggestions":[{"fix":{"range":[1056,1113],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useQuery } from \"@tanstack/react-query\";\r\nimport { Play, Clock, Eye } from \"lucide-react\";\r\n\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\n\r\n\r\ninterface Short {\r\n  id: string;\r\n  title: string;\r\n  thumbnail: string;\r\n  duration: string;\r\n  viewCount?: string;\r\n  publishedAt: string;\r\n}\r\n\r\ninterface LatestShortsProps {\r\n  channelId?: string;\r\n}\r\n\r\nexport default function LatestShorts({ channelId }: LatestShortsProps) {\r\n  const { data: shorts, isLoading, error } = useQuery<Short[]>({\r\n    queryKey: ['/api/youtube/channel/shorts', channelId],\r\n    enabled: !!channelId,\r\n    queryFn: async () => {\r\n      console.log('Fetching YouTube Shorts:', channelId);\r\n      const response = await fetch(`/api/youtube/channel/${channelId}/shorts?maxResults=50`);\r\n      if (!response.ok) {\r\n        console.error('Error fetching shorts:', response.statusText);\r\n        return [];\r\n      }\r\n      const videos = await response.json();\r\n      console.log('Shorts response:', videos.length, 'shorts');\r\n      return videos;\r\n    },\r\n  });\r\n\r\n  // Display first 5 shorts\r\n  const displayShorts = shorts ? shorts.slice(0, 5) : [];\r\n  \r\n  // Link to YouTube channel shorts page\r\n  const shortsUrl = 'https://www.youtube.com/@TalesOfAneria/shorts';\r\n\r\n  return (\r\n    <section id=\"shorts\" className=\"py-20 lg:py-32 bg-muted/30\">\r\n      <div className=\"max-w-7xl mx-auto px-6 lg:px-8\">\r\n        <div className=\"flex items-center justify-between mb-12 flex-wrap gap-4\">\r\n          <div>\r\n            <h2 className=\"font-serif text-4xl md:text-5xl font-semibold mb-3\" data-testid=\"text-shorts-title\">\r\n              Latest Shorts\r\n            </h2>\r\n            <p className=\"text-muted-foreground text-lg\">\r\n              Quick glimpses into our adventures\r\n            </p>\r\n          </div>\r\n          <Button \r\n            variant=\"outline\"\r\n            data-testid=\"button-view-all-shorts\"\r\n            onClick={() => window.open(shortsUrl, '_blank', 'noopener,noreferrer')}\r\n          >\r\n            View All Shorts\r\n          </Button>\r\n        </div>\r\n\r\n        {isLoading ? (\r\n          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4\">\r\n            {[1, 2, 3, 4, 5].map((i) => (\r\n              <Card key={i} className=\"overflow-hidden\">\r\n                <div className=\"aspect-[9/16] bg-muted animate-pulse\" />\r\n                <CardContent className=\"p-4\">\r\n                  <div className=\"h-4 bg-muted rounded animate-pulse mb-2\" />\r\n                  <div className=\"h-3 bg-muted rounded animate-pulse w-1/2\" />\r\n                </CardContent>\r\n              </Card>\r\n            ))}\r\n          </div>\r\n        ) : displayShorts.length === 0 ? (\r\n          <Card>\r\n            <CardContent className=\"p-12 text-center\">\r\n              <p className=\"text-muted-foreground\">\r\n                {channelId \r\n                  ? \"No shorts found on this channel.\"\r\n                  : \"Configure your YouTube channel ID to display shorts.\"}\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n        ) : (\r\n          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4\">\r\n            {displayShorts.map((short) => (\r\n              <Card \r\n                key={short.id} \r\n                className=\"overflow-hidden hover-elevate cursor-pointer transition-all\"\r\n                data-testid={`card-short-${short.id}`}\r\n                onClick={() => window.open(`https://www.youtube.com/shorts/${short.id}`, '_blank')}\r\n              >\r\n                <div className=\"relative aspect-[9/16] overflow-hidden\">\r\n                  <img\r\n                    src={short.thumbnail}\r\n                    alt={short.title}\r\n                    className=\"object-cover w-full h-full\"\r\n                  />\r\n                  <div className=\"absolute inset-0 bg-background/40 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center\">\r\n                    <div className=\"w-12 h-12 rounded-full bg-primary flex items-center justify-center\">\r\n                      <Play className=\"h-6 w-6 text-primary-foreground ml-1\" />\r\n                    </div>\r\n                  </div>\r\n                  <Badge className=\"absolute top-2 left-2 text-xs\" data-testid={`badge-short-new-${short.id}`}>\r\n                    Short\r\n                  </Badge>\r\n                </div>\r\n                <CardContent className=\"p-4\">\r\n                  <h3 className=\"font-semibold text-sm mb-2 line-clamp-2\" data-testid={`text-short-title-${short.id}`}>\r\n                    {short.title}\r\n                  </h3>\r\n                  <div className=\"flex items-center gap-3 text-xs text-muted-foreground\">\r\n                    <div className=\"flex items-center gap-1\">\r\n                      <Clock className=\"h-3 w-3\" />\r\n                      <span data-testid={`text-duration-${short.id}`}>{short.duration}</span>\r\n                    </div>\r\n                    {short.viewCount && (\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <Eye className=\"h-3 w-3\" />\r\n                        <span data-testid={`text-views-${short.id}`}>{short.viewCount}</span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\Navigation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\PodcastSection.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'apiRequest' is defined but never used.","line":9,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"apiRequest"},"fix":{"range":[378,425],"text":""},"desc":"Remove unused variable 'apiRequest'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'apiRequest' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":20},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":135,"column":23,"nodeType":"MemberExpression","messageId":"limited","endLine":135,"endColumn":34,"suggestions":[{"fix":{"range":[5257,5309],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":137,"column":45,"nodeType":"MemberExpression","messageId":"limited","endLine":137,"endColumn":56}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useQuery } from \"@tanstack/react-query\";\r\nimport { Headphones } from \"lucide-react\";\r\nimport { SiSpotify, SiApplepodcasts, SiYoutubemusic } from \"react-icons/si\";\r\n\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { analytics } from \"@/lib/analytics\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\n\r\ninterface PodcastEpisode {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  pubDate: string;\r\n  duration?: string;\r\n  audioUrl?: string;\r\n  link?: string;\r\n}\r\n\r\ninterface PodcastSectionProps {\r\n  feedUrl?: string;\r\n  spotifyUrl?: string;\r\n  applePodcastsUrl?: string;\r\n  youtubeMusicUrl?: string;\r\n}\r\n\r\nexport default function PodcastSection({ feedUrl, spotifyUrl, applePodcastsUrl, youtubeMusicUrl }: PodcastSectionProps) {\r\n  const { data: episodes, isLoading } = useQuery<PodcastEpisode[]>({\r\n    queryKey: ['/api/podcast/feed', feedUrl],\r\n    queryFn: async () => {\r\n      if (!feedUrl) {return [];}\r\n      const response = await fetch('/api/podcast/feed', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ feedUrl, limit: 5 }),\r\n      });\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch podcast feed');\r\n      }\r\n      return response.json();\r\n    },\r\n    enabled: !!feedUrl,\r\n  });\r\n\r\n  const featuredEpisode = episodes?.[0];\r\n  const recentEpisodes = (episodes || []).slice(1, 4);\r\n\r\n  const formatDate = (dateString: string) => {\r\n    try {\r\n      return new Date(dateString).toLocaleDateString('en-US', {\r\n        month: 'short',\r\n        day: 'numeric',\r\n        year: 'numeric',\r\n      });\r\n    } catch {\r\n      return dateString;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section id=\"podcast\" className=\"py-20 lg:py-32 bg-card\">\r\n      <div className=\"max-w-7xl mx-auto px-6 lg:px-8\">\r\n        <div className=\"mb-12\">\r\n          <h2 className=\"font-serif text-4xl md:text-5xl font-semibold mb-3\" data-testid=\"text-podcast-title\">\r\n            Podcast\r\n          </h2>\r\n          <p className=\"text-muted-foreground text-lg\">\r\n            Dive deeper into the world of Aneria with exclusive content\r\n          </p>\r\n        </div>\r\n\r\n        {isLoading ? (\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n            <Card>\r\n              <CardContent className=\"p-8\">\r\n                <div className=\"h-6 bg-muted rounded animate-pulse mb-4 w-32\" />\r\n                <div className=\"h-8 bg-muted rounded animate-pulse mb-4\" />\r\n                <div className=\"h-20 bg-muted rounded animate-pulse mb-6\" />\r\n                <div className=\"h-4 bg-muted rounded animate-pulse w-48 mb-6\" />\r\n                <div className=\"h-12 bg-muted rounded animate-pulse\" />\r\n              </CardContent>\r\n            </Card>\r\n            <div className=\"space-y-4\">\r\n              {[1, 2, 3].map((i) => (\r\n                <Card key={i}>\r\n                  <CardContent className=\"p-6\">\r\n                    <div className=\"h-6 bg-muted rounded animate-pulse mb-2\" />\r\n                    <div className=\"h-4 bg-muted rounded animate-pulse w-32\" />\r\n                  </CardContent>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ) : !feedUrl || !featuredEpisode ? (\r\n          <Card>\r\n            <CardContent className=\"p-12 text-center\">\r\n              <p className=\"text-muted-foreground\">\r\n                {feedUrl \r\n                  ? \"No podcast episodes found.\"\r\n                  : \"Configure your podcast RSS feed URL to display episodes.\"}\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n            <Card className=\"overflow-hidden\" data-testid=\"card-featured-episode\">\r\n              <CardContent className=\"p-8\">\r\n                <Badge className=\"mb-4\" data-testid=\"badge-featured\">\r\n                  <Headphones className=\"h-3 w-3 mr-1\" />\r\n                  Featured Episode\r\n                </Badge>\r\n                <h3 className=\"font-serif text-2xl font-semibold mb-4\" data-testid=\"text-featured-title\">\r\n                  {featuredEpisode.title}\r\n                </h3>\r\n                <p className=\"text-muted-foreground mb-6 line-clamp-3\" data-testid=\"text-featured-description\">\r\n                  {featuredEpisode.description}\r\n                </p>\r\n                <div className=\"flex items-center gap-4 text-sm text-muted-foreground mb-6\">\r\n                  <span data-testid=\"text-featured-date\">{formatDate(featuredEpisode.pubDate)}</span>\r\n                  {featuredEpisode.duration && (\r\n                    <>\r\n                      <span></span>\r\n                      <span data-testid=\"text-featured-duration\">{featuredEpisode.duration}</span>\r\n                    </>\r\n                  )}\r\n                </div>\r\n                {featuredEpisode.audioUrl ? (\r\n                  <audio \r\n                    controls \r\n                    className=\"w-full mb-6\"\r\n                    preload=\"metadata\"\r\n                    onError={(e) => {\r\n                      console.error('Audio playback error:', e);\r\n                      console.log('Audio URL:', featuredEpisode.audioUrl);\r\n                    }}\r\n                    onLoadedMetadata={() => console.log('Audio loaded successfully')}\r\n                  >\r\n                    <source src={`/api/podcast/audio-proxy?url=${encodeURIComponent(featuredEpisode.audioUrl)}`} type=\"audio/mpeg\" />\r\n                    <source src={`/api/podcast/audio-proxy?url=${encodeURIComponent(featuredEpisode.audioUrl)}`} type=\"audio/mp4\" />\r\n                    <source src={`/api/podcast/audio-proxy?url=${encodeURIComponent(featuredEpisode.audioUrl)}`} type=\"audio/x-m4a\" />\r\n                    Your browser does not support the audio element.\r\n                  </audio>\r\n                ) : (\r\n                  <div className=\"h-12 bg-muted rounded-md flex items-center justify-center text-muted-foreground mb-6\">\r\n                    Audio Player Placeholder\r\n                  </div>\r\n                )}\r\n                <div className=\"flex items-center gap-3 flex-wrap\">\r\n                  <span className=\"text-sm text-muted-foreground\">Listen on:</span>\r\n                  <Button \r\n                    size=\"sm\" \r\n                    variant=\"outline\"\r\n                    data-testid=\"button-spotify\"\r\n                    onClick={() => {\r\n                      if (spotifyUrl) {\r\n                        analytics.podcastPlay('Spotify');\r\n                        window.open(spotifyUrl, '_blank');\r\n                      }\r\n                    }}\r\n                    disabled={!spotifyUrl}\r\n                  >\r\n                    <SiSpotify className=\"h-4 w-4 mr-2\" />\r\n                    Spotify\r\n                  </Button>\r\n                  <Button \r\n                    size=\"sm\" \r\n                    variant=\"outline\"\r\n                    data-testid=\"button-apple-podcasts\"\r\n                    onClick={() => {\r\n                      if (applePodcastsUrl) {\r\n                        analytics.podcastPlay('Apple Podcasts');\r\n                        window.open(applePodcastsUrl, '_blank');\r\n                      }\r\n                    }}\r\n                    disabled={!applePodcastsUrl}\r\n                  >\r\n                    <SiApplepodcasts className=\"h-4 w-4 mr-2\" />\r\n                    Apple\r\n                  </Button>\r\n                  <Button \r\n                    size=\"sm\" \r\n                    variant=\"outline\"\r\n                    data-testid=\"button-youtube-music\"\r\n                    onClick={() => {\r\n                      if (youtubeMusicUrl) {\r\n                        analytics.podcastPlay('YouTube Music');\r\n                        window.open(youtubeMusicUrl, '_blank');\r\n                      }\r\n                    }}\r\n                    disabled={!youtubeMusicUrl}\r\n                  >\r\n                    <SiYoutubemusic className=\"h-4 w-4 mr-2\" />\r\n                    YouTube Music\r\n                  </Button>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"font-semibold text-xl mb-4\" data-testid=\"text-recent-episodes\">\r\n                Recent Episodes\r\n              </h3>\r\n              {recentEpisodes.length === 0 ? (\r\n                <Card>\r\n                  <CardContent className=\"p-6 text-center text-muted-foreground\">\r\n                    No additional episodes available\r\n                  </CardContent>\r\n                </Card>\r\n              ) : (\r\n                recentEpisodes.map((episode: PodcastEpisode) => (\r\n                  <Card \r\n                    key={episode.id}\r\n                    className=\"hover-elevate transition-all\"\r\n                    data-testid={`card-podcast-${episode.id}`}\r\n                  >\r\n                    <CardContent className=\"p-6\">\r\n                      <div className=\"flex flex-col gap-4\">\r\n                        <div className=\"flex items-start justify-between gap-4\">\r\n                          <div className=\"flex-1\">\r\n                            <h4 className=\"font-semibold mb-2 line-clamp-2\" data-testid={`text-podcast-title-${episode.id}`}>\r\n                              {episode.title}\r\n                            </h4>\r\n                            <div className=\"flex items-center gap-3 text-sm text-muted-foreground flex-wrap\">\r\n                              <span data-testid={`text-podcast-date-${episode.id}`}>{formatDate(episode.pubDate)}</span>\r\n                              {episode.duration && (\r\n                                <>\r\n                                  <span></span>\r\n                                  <span data-testid={`text-podcast-duration-${episode.id}`}>{episode.duration}</span>\r\n                                </>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2 flex-wrap\">\r\n                          <span className=\"text-xs text-muted-foreground\">Listen on:</span>\r\n                          <Button \r\n                            size=\"sm\" \r\n                            variant=\"outline\"\r\n                            className=\"h-7 text-xs\"\r\n                            data-testid={`button-spotify-${episode.id}`}\r\n                            onClick={() => spotifyUrl && window.open(spotifyUrl, '_blank')}\r\n                            disabled={!spotifyUrl}\r\n                          >\r\n                            <SiSpotify className=\"h-3 w-3 mr-1\" />\r\n                            Spotify\r\n                          </Button>\r\n                          <Button \r\n                            size=\"sm\" \r\n                            variant=\"outline\"\r\n                            className=\"h-7 text-xs\"\r\n                            data-testid={`button-apple-${episode.id}`}\r\n                            onClick={() => applePodcastsUrl && window.open(applePodcastsUrl, '_blank')}\r\n                            disabled={!applePodcastsUrl}\r\n                          >\r\n                            <SiApplepodcasts className=\"h-3 w-3 mr-1\" />\r\n                            Apple\r\n                          </Button>\r\n                          <Button \r\n                            size=\"sm\" \r\n                            variant=\"outline\"\r\n                            className=\"h-7 text-xs\"\r\n                            data-testid={`button-youtube-music-${episode.id}`}\r\n                            onClick={() => youtubeMusicUrl && window.open(youtubeMusicUrl, '_blank')}\r\n                            disabled={!youtubeMusicUrl}\r\n                          >\r\n                            <SiYoutubemusic className=\"h-3 w-3 mr-1\" />\r\n                            YouTube Music\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    </CardContent>\r\n                  </Card>\r\n                ))\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\PrintfulShop.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":215,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":215,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6980,6983],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6980,6983],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useQuery } from \"@tanstack/react-query\";\r\nimport { ShoppingBag, AlertCircle, CreditCard, Search, SlidersHorizontal } from \"lucide-react\";\r\nimport { useState, useMemo } from \"react\";\r\n\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { \r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue \r\n} from \"@/components/ui/select\";\r\nimport { analytics } from \"@/lib/analytics\";\r\nimport { createCheckout } from \"@/lib/stripe\";\r\n\r\n\r\ninterface Product {\r\n  id: string;\r\n  name: string;\r\n  price: string;\r\n  image: string;\r\n  url: string;\r\n  inStock: boolean;\r\n  variants?: Array<{\r\n    id: string;\r\n    name: string;\r\n    price: string;\r\n    inStock: boolean;\r\n  }>;\r\n}\r\n\r\ninterface PrintfulShopProps {\r\n  enableCheckout?: boolean;\r\n  limit?: number;\r\n}\r\n\r\nexport default function PrintfulShop({ enableCheckout = false, limit }: PrintfulShopProps) {\r\n  const [checkoutLoading, setCheckoutLoading] = useState<string | null>(null);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [sortBy, setSortBy] = useState<\"name\" | \"price-low\" | \"price-high\">(\"name\");\r\n  const [filterType, setFilterType] = useState<string>(\"all\");\r\n\r\n  const { data: products, isLoading, error } = useQuery<Product[]>({\r\n    queryKey: ['/api/printful/products', limit],\r\n    queryFn: async () => {\r\n      const url = limit ? `/api/printful/products?limit=${limit}` : '/api/printful/products';\r\n      const response = await fetch(url);\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch products');\r\n      }\r\n      return response.json();\r\n    },\r\n    staleTime: 5 * 60 * 1000,\r\n  });\r\n\r\n  // Extract product types from names for filtering\r\n  const productTypes = useMemo(() => {\r\n    if (!products) {return [];}\r\n    const types = new Set<string>();\r\n    products.forEach(product => {\r\n      // Try to extract product type from name (e.g., \"T-Shirt\", \"Hoodie\", \"Mug\")\r\n      const match = product.name.match(/\\b(T-Shirt|Hoodie|Sweatshirt|Mug|Hat|Cap|Poster|Sticker|Bag|Tank|Long Sleeve)\\b/i);\r\n      if (match) {\r\n        types.add(match[1]);\r\n      }\r\n    });\r\n    return Array.from(types).sort();\r\n  }, [products]);\r\n\r\n  // Filter and sort products\r\n  const displayProducts = useMemo(() => {\r\n    if (!products) {return [];}\r\n    \r\n    let filtered = products;\r\n\r\n    // Apply search filter - search in product name and variants\r\n    if (searchQuery) {\r\n      const query = searchQuery.toLowerCase();\r\n      filtered = filtered.filter(product => {\r\n        // Search in main product name\r\n        if (product.name.toLowerCase().includes(query)) {\r\n          return true;\r\n        }\r\n        // Also search in variant names if they exist\r\n        if (product.variants) {\r\n          return product.variants.some(variant => \r\n            variant.name.toLowerCase().includes(query)\r\n          );\r\n        }\r\n        return false;\r\n      });\r\n    }\r\n\r\n    // Apply type filter\r\n    if (filterType !== \"all\") {\r\n      filtered = filtered.filter(product =>\r\n        product.name.toLowerCase().includes(filterType.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Apply sorting\r\n    return [...filtered].sort((a, b) => {\r\n      if (sortBy === \"name\") {\r\n        return a.name.localeCompare(b.name);\r\n      }\r\n      \r\n      // Extract first price from price string\r\n      const getPrice = (priceStr: string) => {\r\n        const match = priceStr.match(/\\$?([\\d.]+)/);\r\n        return match ? parseFloat(match[1]) : 0;\r\n      };\r\n\r\n      const priceA = getPrice(a.price);\r\n      const priceB = getPrice(b.price);\r\n\r\n      if (sortBy === \"price-low\") {\r\n        return priceA - priceB;\r\n      } else if (sortBy === \"price-high\") {\r\n        return priceB - priceA;\r\n      }\r\n\r\n      return 0;\r\n    });\r\n  }, [products, searchQuery, filterType, sortBy]);\r\n\r\n  const handleProductClick = async (product: Product) => {\r\n    // Track product view\r\n    const priceMatch = product.price.match(/\\$?([\\d.]+)/);\r\n    const priceValue = priceMatch ? parseFloat(priceMatch[1]) : undefined;\r\n    analytics.viewItem(product.name, product.id, priceValue);\r\n\r\n    if (!enableCheckout) {\r\n      // Redirect to shop page with checkout enabled\r\n      window.location.href = '/shop';\r\n      return;\r\n    }\r\n\r\n    // Get first available variant or use product directly\r\n    const variant = product.variants?.[0];\r\n    if (!variant) {\r\n      console.error('No variants available for product');\r\n      return;\r\n    }\r\n\r\n    setCheckoutLoading(product.id);\r\n\r\n    try {\r\n      // Extract numeric price from string like \"$24.99\" or \"$24.99 - $29.99\"\r\n      const priceMatch = variant.price.match(/\\$?([\\d.]+)/);\r\n      const price = priceMatch ? priceMatch[1] : '0';\r\n\r\n      analytics.beginCheckout(parseFloat(price), [product.name]);\r\n\r\n      const result = await createCheckout({\r\n        productId: product.id,\r\n        variantId: variant.id,\r\n        productName: `${product.name} - ${variant.name}`,\r\n        price,\r\n        quantity: 1,\r\n        imageUrl: product.image,\r\n      });\r\n\r\n      if (result?.url) {\r\n        window.location.href = result.url;\r\n      } else {\r\n        console.error('Failed to create checkout session');\r\n      }\r\n    } catch (error) {\r\n      console.error('Checkout error:', error);\r\n    } finally {\r\n      setCheckoutLoading(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* Filter and Sort Controls - Only show if not limiting products */}\r\n      {!limit && displayProducts.length > 0 && (\r\n        <div className=\"mb-8 space-y-4\">\r\n          <div className=\"flex flex-col sm:flex-row gap-4\">\r\n            {/* Search */}\r\n            <div className=\"flex-1 relative\">\r\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n              <Input\r\n                type=\"text\"\r\n                placeholder=\"Search products...\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                className=\"pl-10\"\r\n              />\r\n            </div>\r\n\r\n            {/* Type Filter */}\r\n            {productTypes.length > 0 && (\r\n              <Select value={filterType} onValueChange={setFilterType}>\r\n                <SelectTrigger className=\"w-full sm:w-[200px]\">\r\n                  <SlidersHorizontal className=\"h-4 w-4 mr-2\" />\r\n                  <SelectValue placeholder=\"Product Type\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"all\">All Products</SelectItem>\r\n                  {productTypes.map(type => (\r\n                    <SelectItem key={type} value={type}>\r\n                      {type}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            )}\r\n\r\n            {/* Sort */}\r\n            <Select value={sortBy} onValueChange={(value: any) => setSortBy(value)}>\r\n              <SelectTrigger className=\"w-full sm:w-[200px]\">\r\n                <SelectValue placeholder=\"Sort by\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"name\">Name (A-Z)</SelectItem>\r\n                <SelectItem value=\"price-low\">Price: Low to High</SelectItem>\r\n                <SelectItem value=\"price-high\">Price: High to Low</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {/* Results count */}\r\n          <p className=\"text-sm text-muted-foreground\">\r\n            Showing {displayProducts.length} {displayProducts.length === 1 ? 'product' : 'products'}\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {isLoading ? (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n          {[1, 2, 3, 4].map((i) => (\r\n            <Card key={i} className=\"overflow-hidden\">\r\n              <div className=\"aspect-square bg-muted animate-pulse\" />\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"h-5 bg-muted rounded animate-pulse mb-2\" />\r\n                <div className=\"h-4 bg-muted rounded animate-pulse w-1/2\" />\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      ) : error ? (\r\n        <Card>\r\n          <CardContent className=\"p-12 text-center\">\r\n            <AlertCircle className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\r\n            <p className=\"text-muted-foreground mb-2\">\r\n              Unable to load products at the moment.\r\n            </p>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Please check back later!\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      ) : displayProducts.length === 0 ? (\r\n        <Card>\r\n          <CardContent className=\"p-12 text-center\">\r\n            <ShoppingBag className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\r\n            <p className=\"text-muted-foreground mb-4\">\r\n              {searchQuery || filterType !== \"all\"\r\n                ? \"No products match your search criteria.\"\r\n                : \"We're setting up our product catalog. Check back soon!\"}\r\n            </p>\r\n            {(searchQuery || filterType !== \"all\") && (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => {\r\n                  setSearchQuery(\"\");\r\n                  setFilterType(\"all\");\r\n                }}\r\n              >\r\n                Clear Filters\r\n              </Button>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n          {displayProducts.map((product) => {\r\n            const isLoading = checkoutLoading === product.id;\r\n            return (\r\n            <Card\r\n              key={product.id}\r\n              className=\"overflow-hidden hover-elevate cursor-pointer transition-all\"\r\n              data-testid={`card-printful-product-${product.id}`}\r\n              onClick={() => handleProductClick(product)}\r\n            >\r\n              <div className=\"relative aspect-square overflow-hidden\">\r\n                <img\r\n                  src={product.image}\r\n                  alt={product.name}\r\n                  className=\"object-cover w-full h-full\"\r\n                />\r\n                {!product.inStock && (\r\n                  <Badge \r\n                    variant=\"secondary\" \r\n                    className=\"absolute top-3 right-3\" \r\n                    data-testid={`badge-printful-product-${product.id}`}\r\n                  >\r\n                    Sold Out\r\n                  </Badge>\r\n                )}\r\n                {enableCheckout && product.inStock && !isLoading && (\r\n                  <div className=\"absolute bottom-3 right-3\">\r\n                    <Badge variant=\"default\" className=\"bg-primary/90\">\r\n                      <CreditCard className=\"h-3 w-3 mr-1\" />\r\n                      Buy Now\r\n                    </Badge>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <CardContent className=\"p-4\">\r\n                <h3 \r\n                  className=\"font-semibold mb-2 line-clamp-2\" \r\n                  data-testid={`text-printful-product-name-${product.id}`}\r\n                >\r\n                  {product.name}\r\n                </h3>\r\n                <p className=\"text-primary font-semibold\" data-testid={`text-printful-product-price-${product.id}`}>\r\n                  {product.price}\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n          );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\PrintfulShopPreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\PromotionsSection.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Gift' is defined but never used.","line":1,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"Gift"},"fix":{"range":[9,14],"text":""},"desc":"Remove unused variable 'Gift'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Gift' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":14},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":47,"column":16,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1415,1498],"text":"\r\n            Don&apos;t miss out on exclusive events and limited-time deals\r\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1415,1498],"text":"\r\n            Don&lsquo;t miss out on exclusive events and limited-time deals\r\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1415,1498],"text":"\r\n            Don&#39;t miss out on exclusive events and limited-time deals\r\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1415,1498],"text":"\r\n            Don&rsquo;t miss out on exclusive events and limited-time deals\r\n          "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":57,"column":30,"nodeType":"MemberExpression","messageId":"limited","endLine":57,"endColumn":41}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Gift, Sparkles } from \"lucide-react\";\r\n\r\nimport creepyForest from \"@/assets/creepy-forest.webp\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\n\r\ninterface Promotion {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  badge: string;\r\n  image: string;\r\n}\r\n\r\nexport default function PromotionsSection() {\r\n  //todo: remove mock functionality - Replace with actual promotions data\r\n  const promotions: Promotion[] = [\r\n    {\r\n      id: \"1\",\r\n      title: \"Journeys Through Taebrin Premiere Event\",\r\n      description:\r\n        \"Join us for a special live premiere event with exclusive behind-the-scenes content and Q&A\",\r\n      badge: \"Coming Soon\",\r\n      image: creepyForest,\r\n    },\r\n    // {\r\n    //   id: \"2\",\r\n    //   title: \"Limited Edition Dice Set\",\r\n    //   description: \"Coming Soon!\",\r\n    //   badge: \"Coming Soon\",\r\n    //   image: \"\",\r\n    // },\r\n  ];\r\n\r\n  return (\r\n    <section className=\"py-20 lg:py-32 bg-card\">\r\n      <div className=\"max-w-7xl mx-auto px-6 lg:px-8\">\r\n        <div className=\"text-center mb-12\">\r\n          <h2\r\n            className=\"font-serif text-4xl md:text-5xl font-semibold mb-4\"\r\n            data-testid=\"text-promotions-title\"\r\n          >\r\n            Special Offers\r\n          </h2>\r\n          <p className=\"text-muted-foreground text-lg\">\r\n            Don't miss out on exclusive events and limited-time deals\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n          {promotions.map((promo) => (\r\n            <Card\r\n              key={promo.id}\r\n              className=\"overflow-hidden hover-elevate cursor-pointer transition-all\"\r\n              data-testid={`card-promotion-${promo.id}`}\r\n              onClick={() => console.log(`Promotion ${promo.id} clicked`)}\r\n            >\r\n              <div className=\"relative aspect-[16/9] overflow-hidden\">\r\n                <img\r\n                  src={promo.image}\r\n                  alt={promo.title}\r\n                  className=\"object-cover w-full h-full\"\r\n                  loading=\"lazy\"\r\n                />\r\n                <div className=\"absolute inset-0 bg-gradient-to-t from-background to-transparent\" />\r\n                <Badge\r\n                  className=\"absolute top-4 right-4 bg-primary\"\r\n                  data-testid={`badge-promotion-${promo.id}`}\r\n                >\r\n                  <Sparkles className=\"h-3 w-3 mr-1\" />\r\n                  {promo.badge}\r\n                </Badge>\r\n              </div>\r\n              <CardContent className=\"p-6\">\r\n                <h3\r\n                  className=\"font-serif text-2xl font-semibold mb-3\"\r\n                  data-testid={`text-promotion-title-${promo.id}`}\r\n                >\r\n                  {promo.title}\r\n                </h3>\r\n                <p\r\n                  className=\"text-muted-foreground mb-4\"\r\n                  data-testid={`text-promotion-description-${promo.id}`}\r\n                >\r\n                  {promo.description}\r\n                </p>\r\n                <Button data-testid={`button-learn-more-${promo.id}`}>\r\n                  Learn More\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\SEO.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ShopSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\SponsorshipForm.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":172,"column":25,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[5929,5983],"text":"Click &quot;Open Email Client\" to create a pre-filled email"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[5929,5983],"text":"Click &ldquo;Open Email Client\" to create a pre-filled email"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[5929,5983],"text":"Click &#34;Open Email Client\" to create a pre-filled email"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[5929,5983],"text":"Click &rdquo;Open Email Client\" to create a pre-filled email"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":172,"column":43,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[5929,5983],"text":"Click \"Open Email Client&quot; to create a pre-filled email"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[5929,5983],"text":"Click \"Open Email Client&ldquo; to create a pre-filled email"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[5929,5983],"text":"Click \"Open Email Client&#34; to create a pre-filled email"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[5929,5983],"text":"Click \"Open Email Client&rdquo; to create a pre-filled email"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[681,684],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[681,684],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Mail, Send } from 'lucide-react';\r\nimport React, { useState } from 'react';\r\n\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\n\r\nexport function SponsorshipForm() {\r\n  const [formData, setFormData] = useState({\r\n    company: '',\r\n    contactName: '',\r\n    email: '',\r\n    phone: '',\r\n    goals: '',\r\n    message: '',\r\n  });\r\n\r\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\r\n  const handleChange = (e: any) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [e.target.name]: e.target.value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    const emailBody = `Hi Tales of Aneria team,\r\n\r\nI&apos;m interested in partnering with you!\r\n\r\nCompany: ${formData.company || 'N/A'}\r\nContact Name: ${formData.contactName || 'N/A'}\r\nEmail: ${formData.email || 'N/A'}\r\nPhone: ${formData.phone || 'N/A'}\r\n\r\nSponsorship Goals:\r\n${formData.goals || 'N/A'}\r\n\r\nAdditional Message:\r\n${formData.message || 'N/A'}\r\n\r\nI would like to discuss:\r\n- Available sponsorship packages and pricing\r\n- Timeline and available slots\r\n- Media kit and audience analytics\r\n- References from current sponsors\r\n\r\nThank you!`;\r\n\r\n    const subject = `Sponsorship Inquiry - ${formData.company || 'Potential Partner'}`;\r\n    const mailtoLink = `mailto:TalesOfAneria@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;\r\n    \r\n    window.location.href = mailtoLink;\r\n  };\r\n\r\n  return (\r\n    <Card className=\"max-w-2xl mx-auto\" data-testid=\"sponsorship-form\">\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <Mail className=\"h-5 w-5\" />\r\n          Contact Us About Sponsorship\r\n        </CardTitle>\r\n        <CardDescription>\r\n          Fill out the form below and we&apos;ll open your email client with a pre-filled message.{' '}\r\n          You can review and send it from there.\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"company\">\r\n                Company Name <span className=\"text-destructive\">*</span>\r\n              </Label>\r\n              <Input\r\n                id=\"company\"\r\n                name=\"company\"\r\n                placeholder=\"Acme Corp\"\r\n                value={formData.company}\r\n                onChange={handleChange}\r\n                required\r\n                data-testid=\"input-company\"\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"contactName\">\r\n                Contact Name <span className=\"text-destructive\">*</span>\r\n              </Label>\r\n              <Input\r\n                id=\"contactName\"\r\n                name=\"contactName\"\r\n                placeholder=\"John Doe\"\r\n                value={formData.contactName}\r\n                onChange={handleChange}\r\n                required\r\n                data-testid=\"input-contact-name\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"email\">\r\n                Email <span className=\"text-destructive\">*</span>\r\n              </Label>\r\n              <Input\r\n                id=\"email\"\r\n                name=\"email\"\r\n                type=\"email\"\r\n                placeholder=\"john@acme.com\"\r\n                value={formData.email}\r\n                onChange={handleChange}\r\n                required\r\n                data-testid=\"input-email\"\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"phone\">Phone (Optional)</Label>\r\n              <Input\r\n                id=\"phone\"\r\n                name=\"phone\"\r\n                type=\"tel\"\r\n                placeholder=\"+1 (555) 123-4567\"\r\n                value={formData.phone}\r\n                onChange={handleChange}\r\n                data-testid=\"input-phone\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"goals\">\r\n              Sponsorship Goals <span className=\"text-destructive\">*</span>\r\n            </Label>\r\n            <Textarea\r\n              id=\"goals\"\r\n              name=\"goals\"\r\n              placeholder=\"What do you hope to achieve through this sponsorship? (e.g., brand awareness, product promotion, community engagement)\"\r\n              value={formData.goals}\r\n              onChange={handleChange}\r\n              required\r\n              rows={3}\r\n              data-testid=\"textarea-goals\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"message\">Additional Information (Optional)</Label>\r\n            <Textarea\r\n              id=\"message\"\r\n              name=\"message\"\r\n              placeholder=\"Tell us more about your company, budget range, preferred timeline, or any specific questions...\"\r\n              value={formData.message}\r\n              onChange={handleChange}\r\n              rows={4}\r\n              data-testid=\"textarea-message\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"bg-muted/50 border border-border rounded-lg p-4\">\r\n            <p className=\"text-sm text-muted-foreground mb-2\">\r\n              <strong>What happens next?</strong>\r\n            </p>\r\n            <ol className=\"text-sm text-muted-foreground space-y-1 list-decimal list-inside\">\r\n              <li>Review your information above</li>\r\n              <li>Click \"Open Email Client\" to create a pre-filled email</li>\r\n              <li>Your default email app will open with all details included</li>\r\n              <li>Review, make any edits, and send when ready</li>\r\n            </ol>\r\n          </div>\r\n\r\n          <Button \r\n            type=\"submit\" \r\n            className=\"w-full\" \r\n            size=\"lg\"\r\n            data-testid=\"button-submit-sponsorship\"\r\n          >\r\n            <Send className=\"mr-2 h-4 w-4\" />\r\n            Open Email Client\r\n          </Button>\r\n        </form>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\WorldSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\examples\\AboutSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\examples\\CommunitySection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\examples\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\examples\\Hero.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\examples\\LatestEpisodes.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\examples\\Navigation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\examples\\PodcastSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\examples\\PromotionsSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\examples\\ShopSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\examples\\WorldSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\accessible-icon.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\alert.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'HTMLParagraphElement' is not defined.","line":36,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":36,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'HTMLHeadingElement' is not defined.","line":37,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":37,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'HTMLParagraphElement' is not defined.","line":48,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":48,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'HTMLParagraphElement' is not defined.","line":49,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":49,"endColumn":44}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { cva, type VariantProps } from \"class-variance-authority\"\r\nimport * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst alertVariants = cva(\r\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-background text-foreground\",\r\n        destructive:\r\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Alert = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\r\n>(({ className, variant, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    role=\"alert\"\r\n    className={cn(alertVariants({ variant }), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlert.displayName = \"Alert\"\r\n\r\nconst AlertTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h5\r\n    ref={ref}\r\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertTitle.displayName = \"AlertTitle\"\r\n\r\nconst AlertDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDescription.displayName = \"AlertDescription\"\r\n\r\nexport { Alert, AlertTitle, AlertDescription }\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\aspect-ratio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\breadcrumb.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'HTMLElement' is not defined.","line":8,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'HTMLOListElement' is not defined.","line":16,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":16,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'HTMLLIElement' is not defined.","line":31,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":31,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'HTMLSpanElement' is not defined.","line":61,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":61,"endColumn":18}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Slot } from \"@radix-ui/react-slot\"\r\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\r\nimport * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Breadcrumb = React.forwardRef<\r\n  HTMLElement,\r\n  React.ComponentPropsWithoutRef<\"nav\"> & {\r\n    separator?: React.ReactNode\r\n  }\r\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\r\nBreadcrumb.displayName = \"Breadcrumb\"\r\n\r\nconst BreadcrumbList = React.forwardRef<\r\n  HTMLOListElement,\r\n  React.ComponentPropsWithoutRef<\"ol\">\r\n>(({ className, ...props }, ref) => (\r\n  <ol\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nBreadcrumbList.displayName = \"BreadcrumbList\"\r\n\r\nconst BreadcrumbItem = React.forwardRef<\r\n  HTMLLIElement,\r\n  React.ComponentPropsWithoutRef<\"li\">\r\n>(({ className, ...props }, ref) => (\r\n  <li\r\n    ref={ref}\r\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\r\n    {...props}\r\n  />\r\n))\r\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\r\n\r\nconst BreadcrumbLink = React.forwardRef<\r\n  HTMLAnchorElement,\r\n  React.ComponentPropsWithoutRef<\"a\"> & {\r\n    asChild?: boolean\r\n  }\r\n>(({ asChild, className, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"a\"\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      className={cn(\"transition-colors hover:text-foreground\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\r\n\r\nconst BreadcrumbPage = React.forwardRef<\r\n  HTMLSpanElement,\r\n  React.ComponentPropsWithoutRef<\"span\">\r\n>(({ className, ...props }, ref) => (\r\n  <span\r\n    ref={ref}\r\n    role=\"link\"\r\n    aria-disabled=\"true\"\r\n    aria-current=\"page\"\r\n    className={cn(\"font-normal text-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\r\n\r\nconst BreadcrumbSeparator = ({\r\n  children,\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"li\">) => (\r\n  <li\r\n    role=\"presentation\"\r\n    aria-hidden=\"true\"\r\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\r\n    {...props}\r\n  >\r\n    {children ?? <ChevronRight />}\r\n  </li>\r\n)\r\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\r\n\r\nconst BreadcrumbEllipsis = ({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"span\">) => (\r\n  <span\r\n    role=\"presentation\"\r\n    aria-hidden=\"true\"\r\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\r\n    {...props}\r\n  >\r\n    <MoreHorizontal className=\"h-4 w-4\" />\r\n    <span className=\"sr-only\">More</span>\r\n  </span>\r\n)\r\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\r\n\r\nexport {\r\n  Breadcrumb,\r\n  BreadcrumbList,\r\n  BreadcrumbItem,\r\n  BreadcrumbLink,\r\n  BreadcrumbPage,\r\n  BreadcrumbSeparator,\r\n  BreadcrumbEllipsis,\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\button.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'HTMLButtonElement' is not defined.","line":43,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":43,"endColumn":55},{"ruleId":"no-undef","severity":2,"message":"'HTMLButtonElement' is not defined.","line":48,"column":33,"nodeType":"Identifier","messageId":"undef","endLine":48,"endColumn":50}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\r\n  \" hover-elevate active-elevate-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-primary text-primary-foreground border border-primary-border\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\r\n        outline:\r\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\r\n          // Inherits the current text color.\r\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\r\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\r\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\r\n        ghost: \"border border-transparent\",\r\n      },\r\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\r\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\r\n      // but will expand to fit large amounts of content.\r\n      size: {\r\n        default: \"min-h-9 px-4 py-2\",\r\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\r\n        lg: \"min-h-10 rounded-md px-8\",\r\n        icon: \"h-9 w-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  },\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  },\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\carousel.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'api' is defined but never used.","line":19,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"api"},"fix":{"range":[604,620],"text":""},"desc":"Remove unused variable 'api'."}]},{"ruleId":"no-undef","severity":2,"message":"'HTMLButtonElement' is not defined.","line":196,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":196,"endColumn":20},{"ruleId":"no-undef","severity":2,"message":"'HTMLButtonElement' is not defined.","line":225,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":225,"endColumn":20}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import useEmblaCarousel, {\r\n  type UseEmblaCarouselType,\r\n} from \"embla-carousel-react\"\r\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\r\nimport * as React from \"react\"\r\n\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ntype CarouselApi = UseEmblaCarouselType[1]\r\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\r\ntype CarouselOptions = UseCarouselParameters[0]\r\ntype CarouselPlugin = UseCarouselParameters[1]\r\n\r\ntype CarouselProps = {\r\n  opts?: CarouselOptions\r\n  plugins?: CarouselPlugin\r\n  orientation?: \"horizontal\" | \"vertical\"\r\n  setApi?: (api: CarouselApi) => void\r\n}\r\n\r\ntype CarouselContextProps = {\r\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\r\n  api: ReturnType<typeof useEmblaCarousel>[1]\r\n  scrollPrev: () => void\r\n  scrollNext: () => void\r\n  canScrollPrev: boolean\r\n  canScrollNext: boolean\r\n} & CarouselProps\r\n\r\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\r\n\r\nfunction useCarousel() {\r\n  const context = React.useContext(CarouselContext)\r\n\r\n  if (!context) {\r\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\r\n  }\r\n\r\n  return context\r\n}\r\n\r\nconst Carousel = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\r\n>(\r\n  (\r\n    {\r\n      orientation = \"horizontal\",\r\n      opts,\r\n      setApi,\r\n      plugins,\r\n      className,\r\n      children,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const [carouselRef, api] = useEmblaCarousel(\r\n      {\r\n        ...opts,\r\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\r\n      },\r\n      plugins\r\n    )\r\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\r\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\r\n\r\n    const onSelect = React.useCallback((api: CarouselApi) => {\r\n      if (!api) {\r\n        return\r\n      }\r\n\r\n      setCanScrollPrev(api.canScrollPrev())\r\n      setCanScrollNext(api.canScrollNext())\r\n    }, [])\r\n\r\n    const scrollPrev = React.useCallback(() => {\r\n      api?.scrollPrev()\r\n    }, [api])\r\n\r\n    const scrollNext = React.useCallback(() => {\r\n      api?.scrollNext()\r\n    }, [api])\r\n\r\n    const handleKeyDown = React.useCallback(\r\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\r\n        if (event.key === \"ArrowLeft\") {\r\n          event.preventDefault()\r\n          scrollPrev()\r\n        } else if (event.key === \"ArrowRight\") {\r\n          event.preventDefault()\r\n          scrollNext()\r\n        }\r\n      },\r\n      [scrollPrev, scrollNext]\r\n    )\r\n\r\n    React.useEffect(() => {\r\n      if (!api || !setApi) {\r\n        return\r\n      }\r\n\r\n      setApi(api)\r\n    }, [api, setApi])\r\n\r\n    React.useEffect(() => {\r\n      if (!api) {\r\n        return\r\n      }\r\n\r\n      onSelect(api)\r\n      api.on(\"reInit\", onSelect)\r\n      api.on(\"select\", onSelect)\r\n\r\n      return () => {\r\n        api?.off(\"select\", onSelect)\r\n      }\r\n    }, [api, onSelect])\r\n\r\n    return (\r\n      <CarouselContext.Provider\r\n        value={{\r\n          carouselRef,\r\n          api: api,\r\n          opts,\r\n          orientation:\r\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\r\n          scrollPrev,\r\n          scrollNext,\r\n          canScrollPrev,\r\n          canScrollNext,\r\n        }}\r\n      >\r\n        <div\r\n          ref={ref}\r\n          onKeyDownCapture={handleKeyDown}\r\n          className={cn(\"relative\", className)}\r\n          role=\"region\"\r\n          aria-roledescription=\"carousel\"\r\n          {...props}\r\n        >\r\n          {children}\r\n        </div>\r\n      </CarouselContext.Provider>\r\n    )\r\n  }\r\n)\r\nCarousel.displayName = \"Carousel\"\r\n\r\nconst CarouselContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const { carouselRef, orientation } = useCarousel()\r\n\r\n  return (\r\n    <div ref={carouselRef} className=\"overflow-hidden\">\r\n      <div\r\n        ref={ref}\r\n        className={cn(\r\n          \"flex\",\r\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n    </div>\r\n  )\r\n})\r\nCarouselContent.displayName = \"CarouselContent\"\r\n\r\nconst CarouselItem = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const { orientation } = useCarousel()\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      role=\"group\"\r\n      aria-roledescription=\"slide\"\r\n      className={cn(\r\n        \"min-w-0 shrink-0 grow-0 basis-full\",\r\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nCarouselItem.displayName = \"CarouselItem\"\r\n\r\nconst CarouselPrevious = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<typeof Button>\r\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\r\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\r\n\r\n  return (\r\n    <Button\r\n      ref={ref}\r\n      variant={variant}\r\n      size={size}\r\n      className={cn(\r\n        \"absolute  h-8 w-8 rounded-full\",\r\n        orientation === \"horizontal\"\r\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\r\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\r\n        className\r\n      )}\r\n      disabled={!canScrollPrev}\r\n      onClick={scrollPrev}\r\n      {...props}\r\n    >\r\n      <ArrowLeft className=\"h-4 w-4\" />\r\n      <span className=\"sr-only\">Previous slide</span>\r\n    </Button>\r\n  )\r\n})\r\nCarouselPrevious.displayName = \"CarouselPrevious\"\r\n\r\nconst CarouselNext = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<typeof Button>\r\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\r\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\r\n\r\n  return (\r\n    <Button\r\n      ref={ref}\r\n      variant={variant}\r\n      size={size}\r\n      className={cn(\r\n        \"absolute h-8 w-8 rounded-full\",\r\n        orientation === \"horizontal\"\r\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\r\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\r\n        className\r\n      )}\r\n      disabled={!canScrollNext}\r\n      onClick={scrollNext}\r\n      {...props}\r\n    >\r\n      <ArrowRight className=\"h-4 w-4\" />\r\n      <span className=\"sr-only\">Next slide</span>\r\n    </Button>\r\n  )\r\n})\r\nCarouselNext.displayName = \"CarouselNext\"\r\n\r\nexport {\r\n  type CarouselApi,\r\n  Carousel,\r\n  CarouselContent,\r\n  CarouselItem,\r\n  CarouselPrevious,\r\n  CarouselNext,\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\chart.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'k' is defined but never used.","line":12,"column":4,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":5,"suggestions":[{"messageId":"removeVar","data":{"varName":"k"},"fix":{"range":[262,263],"text":""},"desc":"Remove unused variable 'k'."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":354,"column":7,"nodeType":"MemberExpression","endLine":354,"endColumn":29}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as RechartsPrimitive from \"recharts\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\n// Format: { THEME_NAME: CSS_SELECTOR }\r\nconst THEMES = { light: \"\", dark: \".dark\" } as const\r\n\r\nexport type ChartConfig = {\r\n  [k in string]: {\r\n    label?: React.ReactNode\r\n    icon?: React.ComponentType\r\n  } & (\r\n    | { color?: string; theme?: never }\r\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\r\n  )\r\n}\r\n\r\ntype ChartContextProps = {\r\n  config: ChartConfig\r\n}\r\n\r\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\r\n\r\nfunction useChart() {\r\n  const context = React.useContext(ChartContext)\r\n\r\n  if (!context) {\r\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\r\n  }\r\n\r\n  return context\r\n}\r\n\r\nconst ChartContainer = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> & {\r\n    config: ChartConfig\r\n    children: React.ComponentProps<\r\n      typeof RechartsPrimitive.ResponsiveContainer\r\n    >[\"children\"]\r\n  }\r\n>(({ id, className, children, config, ...props }, ref) => {\r\n  const uniqueId = React.useId()\r\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\r\n\r\n  return (\r\n    <ChartContext.Provider value={{ config }}>\r\n      <div\r\n        data-chart={chartId}\r\n        ref={ref}\r\n        className={cn(\r\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        <ChartStyle id={chartId} config={config} />\r\n        <RechartsPrimitive.ResponsiveContainer>\r\n          {children}\r\n        </RechartsPrimitive.ResponsiveContainer>\r\n      </div>\r\n    </ChartContext.Provider>\r\n  )\r\n})\r\nChartContainer.displayName = \"Chart\"\r\n\r\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\r\n  const colorConfig = Object.entries(config).filter(\r\n    ([, config]) => config.theme || config.color\r\n  )\r\n\r\n  if (!colorConfig.length) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <style\r\n      dangerouslySetInnerHTML={{\r\n        __html: Object.entries(THEMES)\r\n          .map(\r\n            ([theme, prefix]) => `\r\n${prefix} [data-chart=${id}] {\r\n${colorConfig\r\n  .map(([key, itemConfig]) => {\r\n    const color =\r\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\r\n      itemConfig.color\r\n    return color ? `  --color-${key}: ${color};` : null\r\n  })\r\n  .join(\"\\n\")}\r\n}\r\n`\r\n          )\r\n          .join(\"\\n\"),\r\n      }}\r\n    />\r\n  )\r\n}\r\n\r\nconst ChartTooltip = RechartsPrimitive.Tooltip\r\n\r\nconst ChartTooltipContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\r\n    React.ComponentProps<\"div\"> & {\r\n      hideLabel?: boolean\r\n      hideIndicator?: boolean\r\n      indicator?: \"line\" | \"dot\" | \"dashed\"\r\n      nameKey?: string\r\n      labelKey?: string\r\n    }\r\n>(\r\n  (\r\n    {\r\n      active,\r\n      payload,\r\n      className,\r\n      indicator = \"dot\",\r\n      hideLabel = false,\r\n      hideIndicator = false,\r\n      label,\r\n      labelFormatter,\r\n      labelClassName,\r\n      formatter,\r\n      color,\r\n      nameKey,\r\n      labelKey,\r\n    },\r\n    ref\r\n  ) => {\r\n    const { config } = useChart()\r\n\r\n    const tooltipLabel = React.useMemo(() => {\r\n      if (hideLabel || !payload?.length) {\r\n        return null\r\n      }\r\n\r\n      const [item] = payload\r\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\r\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\r\n      const value =\r\n        !labelKey && typeof label === \"string\"\r\n          ? config[label as keyof typeof config]?.label || label\r\n          : itemConfig?.label\r\n\r\n      if (labelFormatter) {\r\n        return (\r\n          <div className={cn(\"font-medium\", labelClassName)}>\r\n            {labelFormatter(value, payload)}\r\n          </div>\r\n        )\r\n      }\r\n\r\n      if (!value) {\r\n        return null\r\n      }\r\n\r\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\r\n    }, [\r\n      label,\r\n      labelFormatter,\r\n      payload,\r\n      hideLabel,\r\n      labelClassName,\r\n      config,\r\n      labelKey,\r\n    ])\r\n\r\n    if (!active || !payload?.length) {\r\n      return null\r\n    }\r\n\r\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\r\n\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        className={cn(\r\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\r\n          className\r\n        )}\r\n      >\r\n        {!nestLabel ? tooltipLabel : null}\r\n        <div className=\"grid gap-1.5\">\r\n          {payload.map((item, index) => {\r\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\r\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\r\n            const indicatorColor = color || item.payload.fill || item.color\r\n\r\n            return (\r\n              <div\r\n                key={item.dataKey}\r\n                className={cn(\r\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\r\n                  indicator === \"dot\" && \"items-center\"\r\n                )}\r\n              >\r\n                {formatter && item?.value !== undefined && item.name ? (\r\n                  formatter(item.value, item.name, item, index, item.payload)\r\n                ) : (\r\n                  <>\r\n                    {itemConfig?.icon ? (\r\n                      <itemConfig.icon />\r\n                    ) : (\r\n                      !hideIndicator && (\r\n                        <div\r\n                          className={cn(\r\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\r\n                            {\r\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\r\n                              \"w-1\": indicator === \"line\",\r\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\r\n                                indicator === \"dashed\",\r\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\r\n                            }\r\n                          )}\r\n                          style={\r\n                            {\r\n                              \"--color-bg\": indicatorColor,\r\n                              \"--color-border\": indicatorColor,\r\n                            } as React.CSSProperties\r\n                          }\r\n                        />\r\n                      )\r\n                    )}\r\n                    <div\r\n                      className={cn(\r\n                        \"flex flex-1 justify-between leading-none\",\r\n                        nestLabel ? \"items-end\" : \"items-center\"\r\n                      )}\r\n                    >\r\n                      <div className=\"grid gap-1.5\">\r\n                        {nestLabel ? tooltipLabel : null}\r\n                        <span className=\"text-muted-foreground\">\r\n                          {itemConfig?.label || item.name}\r\n                        </span>\r\n                      </div>\r\n                      {item.value && (\r\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\r\n                          {item.value.toLocaleString()}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </>\r\n                )}\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n)\r\nChartTooltipContent.displayName = \"ChartTooltip\"\r\n\r\nconst ChartLegend = RechartsPrimitive.Legend\r\n\r\nconst ChartLegendContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.ComponentProps<\"div\"> &\r\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\r\n      hideIcon?: boolean\r\n      nameKey?: string\r\n    }\r\n>(\r\n  (\r\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\r\n    ref\r\n  ) => {\r\n    const { config } = useChart()\r\n\r\n    if (!payload?.length) {\r\n      return null\r\n    }\r\n\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        className={cn(\r\n          \"flex items-center justify-center gap-4\",\r\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\r\n          className\r\n        )}\r\n      >\r\n        {payload.map((item) => {\r\n          const key = `${nameKey || item.dataKey || \"value\"}`\r\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\r\n\r\n          return (\r\n            <div\r\n              key={item.value}\r\n              className={cn(\r\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\r\n              )}\r\n            >\r\n              {itemConfig?.icon && !hideIcon ? (\r\n                <itemConfig.icon />\r\n              ) : (\r\n                <div\r\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\r\n                  style={{\r\n                    backgroundColor: item.color,\r\n                  }}\r\n                />\r\n              )}\r\n              {itemConfig?.label}\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n    )\r\n  }\r\n)\r\nChartLegendContent.displayName = \"ChartLegend\"\r\n\r\n// Helper to extract item config from a payload.\r\nfunction getPayloadConfigFromPayload(\r\n  config: ChartConfig,\r\n  payload: unknown,\r\n  key: string\r\n) {\r\n  if (typeof payload !== \"object\" || payload === null) {\r\n    return undefined\r\n  }\r\n\r\n  const payloadPayload =\r\n    \"payload\" in payload &&\r\n    typeof payload.payload === \"object\" &&\r\n    payload.payload !== null\r\n      ? payload.payload\r\n      : undefined\r\n\r\n  let configLabelKey: string = key\r\n\r\n  if (\r\n    key in payload &&\r\n    typeof payload[key as keyof typeof payload] === \"string\"\r\n  ) {\r\n    configLabelKey = payload[key as keyof typeof payload] as string\r\n  } else if (\r\n    payloadPayload &&\r\n    key in payloadPayload &&\r\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\r\n  ) {\r\n    configLabelKey = payloadPayload[\r\n      key as keyof typeof payloadPayload\r\n    ] as string\r\n  }\r\n\r\n  return configLabelKey in config\r\n    ? config[configLabelKey]\r\n    : config[key as keyof typeof config]\r\n}\r\n\r\nexport {\r\n  ChartContainer,\r\n  ChartTooltip,\r\n  ChartTooltipContent,\r\n  ChartLegend,\r\n  ChartLegendContent,\r\n  ChartStyle,\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\command.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'HTMLSpanElement' is not defined.","line":128,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":128,"endColumn":40}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { type DialogProps } from \"@radix-ui/react-dialog\"\r\nimport { Command as CommandPrimitive } from \"cmdk\"\r\nimport { Search } from \"lucide-react\"\r\nimport * as React from \"react\"\r\n\r\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Command = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCommand.displayName = CommandPrimitive.displayName\r\n\r\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\r\n  return (\r\n    <Dialog {...props}>\r\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\r\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\r\n          {children}\r\n        </Command>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nconst CommandInput = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Input>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\r\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\r\n    <CommandPrimitive.Input\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\n\r\nCommandInput.displayName = CommandPrimitive.Input.displayName\r\n\r\nconst CommandList = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.List\r\n    ref={ref}\r\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandList.displayName = CommandPrimitive.List.displayName\r\n\r\nconst CommandEmpty = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Empty>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\r\n>((props, ref) => (\r\n  <CommandPrimitive.Empty\r\n    ref={ref}\r\n    className=\"py-6 text-center text-sm\"\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\r\n\r\nconst CommandGroup = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Group>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Group\r\n    ref={ref}\r\n    className={cn(\r\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandGroup.displayName = CommandPrimitive.Group.displayName\r\n\r\nconst CommandSeparator = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 h-px bg-border\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\r\n\r\nconst CommandItem = React.forwardRef<\r\n  React.ElementRef<typeof CommandPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\r\n>(({ className, ...props }, ref) => (\r\n  <CommandPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\n\r\nCommandItem.displayName = CommandPrimitive.Item.displayName\r\n\r\nconst CommandShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\r\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nCommandShortcut.displayName = \"CommandShortcut\"\r\n\r\nexport {\r\n  Command,\r\n  CommandDialog,\r\n  CommandInput,\r\n  CommandList,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandItem,\r\n  CommandShortcut,\r\n  CommandSeparator,\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\context-menu.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'HTMLSpanElement' is not defined.","line":169,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":169,"endColumn":40}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\r\nimport * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst ContextMenu = ContextMenuPrimitive.Root\r\n\r\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\r\n\r\nconst ContextMenuGroup = ContextMenuPrimitive.Group\r\n\r\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\r\n\r\nconst ContextMenuSub = ContextMenuPrimitive.Sub\r\n\r\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\r\n\r\nconst ContextMenuSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => (\r\n  <ContextMenuPrimitive.SubTrigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\r\n  </ContextMenuPrimitive.SubTrigger>\r\n))\r\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\r\n\r\nconst ContextMenuSubContent = React.forwardRef<\r\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <ContextMenuPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\r\n\r\nconst ContextMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <ContextMenuPrimitive.Portal>\r\n    <ContextMenuPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </ContextMenuPrimitive.Portal>\r\n))\r\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\r\n\r\nconst ContextMenuItem = React.forwardRef<\r\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <ContextMenuPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\r\n\r\nconst ContextMenuCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <ContextMenuPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    checked={checked}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <ContextMenuPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </ContextMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </ContextMenuPrimitive.CheckboxItem>\r\n))\r\nContextMenuCheckboxItem.displayName =\r\n  ContextMenuPrimitive.CheckboxItem.displayName\r\n\r\nconst ContextMenuRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <ContextMenuPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <ContextMenuPrimitive.ItemIndicator>\r\n        <Circle className=\"h-2 w-2 fill-current\" />\r\n      </ContextMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </ContextMenuPrimitive.RadioItem>\r\n))\r\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\r\n\r\nconst ContextMenuLabel = React.forwardRef<\r\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <ContextMenuPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\r\n\r\nconst ContextMenuSeparator = React.forwardRef<\r\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <ContextMenuPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\r\n    {...props}\r\n  />\r\n))\r\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\r\n\r\nconst ContextMenuShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\r\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\r\n\r\nexport {\r\n  ContextMenu,\r\n  ContextMenuTrigger,\r\n  ContextMenuContent,\r\n  ContextMenuItem,\r\n  ContextMenuCheckboxItem,\r\n  ContextMenuRadioItem,\r\n  ContextMenuLabel,\r\n  ContextMenuSeparator,\r\n  ContextMenuShortcut,\r\n  ContextMenuGroup,\r\n  ContextMenuPortal,\r\n  ContextMenuSub,\r\n  ContextMenuSubContent,\r\n  ContextMenuSubTrigger,\r\n  ContextMenuRadioGroup,\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\dropdown-menu.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'HTMLSpanElement' is not defined.","line":172,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":172,"endColumn":40}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\r\nimport * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst DropdownMenu = DropdownMenuPrimitive.Root\r\n\r\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\r\n\r\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\r\n\r\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\r\n\r\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\r\n\r\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\r\n\r\nconst DropdownMenuSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubTrigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronRight className=\"ml-auto\" />\r\n  </DropdownMenuPrimitive.SubTrigger>\r\n))\r\nDropdownMenuSubTrigger.displayName =\r\n  DropdownMenuPrimitive.SubTrigger.displayName\r\n\r\nconst DropdownMenuSubContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSubContent.displayName =\r\n  DropdownMenuPrimitive.SubContent.displayName\r\n\r\nconst DropdownMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Portal>\r\n    <DropdownMenuPrimitive.Content\r\n      ref={ref}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </DropdownMenuPrimitive.Portal>\r\n))\r\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\r\n\r\nconst DropdownMenuItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\r\n\r\nconst DropdownMenuCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    checked={checked}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.CheckboxItem>\r\n))\r\nDropdownMenuCheckboxItem.displayName =\r\n  DropdownMenuPrimitive.CheckboxItem.displayName\r\n\r\nconst DropdownMenuRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Circle className=\"h-2 w-2 fill-current\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.RadioItem>\r\n))\r\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\r\n\r\nconst DropdownMenuLabel = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\r\n\r\nconst DropdownMenuSeparator = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\r\n\r\nconst DropdownMenuShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\r\n\r\nexport {\r\n  DropdownMenu,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuCheckboxItem,\r\n  DropdownMenuRadioItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuShortcut,\r\n  DropdownMenuGroup,\r\n  DropdownMenuPortal,\r\n  DropdownMenuSub,\r\n  DropdownMenuSubContent,\r\n  DropdownMenuSubTrigger,\r\n  DropdownMenuRadioGroup,\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\form.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'HTMLParagraphElement' is not defined.","line":129,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":129,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'HTMLParagraphElement' is not defined.","line":130,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":130,"endColumn":44},{"ruleId":"no-undef","severity":2,"message":"'HTMLParagraphElement' is not defined.","line":146,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":146,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'HTMLParagraphElement' is not defined.","line":147,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":147,"endColumn":44}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport * as React from \"react\"\r\nimport {\r\n  Controller,\r\n  FormProvider,\r\n  useFormContext,\r\n  type ControllerProps,\r\n  type FieldPath,\r\n  type FieldValues,\r\n} from \"react-hook-form\"\r\n\r\nimport { Label } from \"@/components/ui/label\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Form = FormProvider\r\n\r\ntype FormFieldContextValue<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n> = {\r\n  name: TName\r\n}\r\n\r\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\r\n  {} as FormFieldContextValue\r\n)\r\n\r\nconst FormField = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n>({\r\n  ...props\r\n}: ControllerProps<TFieldValues, TName>) => {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name: props.name }}>\r\n      <Controller {...props} />\r\n    </FormFieldContext.Provider>\r\n  )\r\n}\r\n\r\nconst useFormField = () => {\r\n  const fieldContext = React.useContext(FormFieldContext)\r\n  const itemContext = React.useContext(FormItemContext)\r\n  const { getFieldState, formState } = useFormContext()\r\n\r\n  const fieldState = getFieldState(fieldContext.name, formState)\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"useFormField should be used within <FormField>\")\r\n  }\r\n\r\n  const { id } = itemContext\r\n\r\n  return {\r\n    id,\r\n    name: fieldContext.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    ...fieldState,\r\n  }\r\n}\r\n\r\ntype FormItemContextValue = {\r\n  id: string\r\n}\r\n\r\nconst FormItemContext = React.createContext<FormItemContextValue>(\r\n  {} as FormItemContextValue\r\n)\r\n\r\nconst FormItem = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const id = React.useId()\r\n\r\n  return (\r\n    <FormItemContext.Provider value={{ id }}>\r\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\r\n    </FormItemContext.Provider>\r\n  )\r\n})\r\nFormItem.displayName = \"FormItem\"\r\n\r\nconst FormLabel = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  const { error, formItemId } = useFormField()\r\n\r\n  return (\r\n    <Label\r\n      ref={ref}\r\n      className={cn(error && \"text-destructive\", className)}\r\n      htmlFor={formItemId}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormLabel.displayName = \"FormLabel\"\r\n\r\nconst FormControl = React.forwardRef<\r\n  React.ElementRef<typeof Slot>,\r\n  React.ComponentPropsWithoutRef<typeof Slot>\r\n>(({ ...props }, ref) => {\r\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\r\n\r\n  return (\r\n    <Slot\r\n      ref={ref}\r\n      id={formItemId}\r\n      aria-describedby={\r\n        !error\r\n          ? `${formDescriptionId}`\r\n          : `${formDescriptionId} ${formMessageId}`\r\n      }\r\n      aria-invalid={!!error}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormControl.displayName = \"FormControl\"\r\n\r\nconst FormDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => {\r\n  const { formDescriptionId } = useFormField()\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formDescriptionId}\r\n      className={cn(\"text-sm text-muted-foreground\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormDescription.displayName = \"FormDescription\"\r\n\r\nconst FormMessage = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, children, ...props }, ref) => {\r\n  const { error, formMessageId } = useFormField()\r\n  const body = error ? String(error?.message ?? \"\") : children\r\n\r\n  if (!body) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formMessageId}\r\n      className={cn(\"text-sm font-medium text-destructive\", className)}\r\n      {...props}\r\n    >\r\n      {body}\r\n    </p>\r\n  )\r\n})\r\nFormMessage.displayName = \"FormMessage\"\r\n\r\nexport {\r\n  useFormField,\r\n  Form,\r\n  FormItem,\r\n  FormLabel,\r\n  FormControl,\r\n  FormDescription,\r\n  FormMessage,\r\n  FormField,\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\input-otp.tsx","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":36,"column":44,"nodeType":"MemberExpression","endLine":36,"endColumn":72}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { OTPInput, OTPInputContext } from \"input-otp\"\r\nimport { Dot } from \"lucide-react\"\r\nimport * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst InputOTP = React.forwardRef<\r\n  React.ElementRef<typeof OTPInput>,\r\n  React.ComponentPropsWithoutRef<typeof OTPInput>\r\n>(({ className, containerClassName, ...props }, ref) => (\r\n  <OTPInput\r\n    ref={ref}\r\n    containerClassName={cn(\r\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\r\n      containerClassName\r\n    )}\r\n    className={cn(\"disabled:cursor-not-allowed\", className)}\r\n    {...props}\r\n  />\r\n))\r\nInputOTP.displayName = \"InputOTP\"\r\n\r\nconst InputOTPGroup = React.forwardRef<\r\n  React.ElementRef<\"div\">,\r\n  React.ComponentPropsWithoutRef<\"div\">\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\r\n))\r\nInputOTPGroup.displayName = \"InputOTPGroup\"\r\n\r\nconst InputOTPSlot = React.forwardRef<\r\n  React.ElementRef<\"div\">,\r\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\r\n>(({ index, className, ...props }, ref) => {\r\n  const inputOTPContext = React.useContext(OTPInputContext)\r\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\r\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {char}\r\n      {hasFakeCaret && (\r\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\r\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n})\r\nInputOTPSlot.displayName = \"InputOTPSlot\"\r\n\r\nconst InputOTPSeparator = React.forwardRef<\r\n  React.ElementRef<\"div\">,\r\n  React.ComponentPropsWithoutRef<\"div\">\r\n>(({ ...props }, ref) => (\r\n  <div ref={ref} role=\"separator\" {...props}>\r\n    <Dot />\r\n  </div>\r\n))\r\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\r\n\r\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\input.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'HTMLInputElement' is not defined.","line":5,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":5,"endColumn":48}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\r\n  ({ className, type, ...props }, ref) => {\r\n    // h-9 to match icon buttons and default buttons.\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\menubar.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'HTMLSpanElement' is not defined.","line":226,"column":25,"nodeType":"Identifier","messageId":"undef","endLine":226,"endColumn":40}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\r\nimport * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction MenubarMenu({\r\n  ...props\r\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\r\n  return <MenubarPrimitive.Menu {...props} />\r\n}\r\n\r\nfunction MenubarGroup({\r\n  ...props\r\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\r\n  return <MenubarPrimitive.Group {...props} />\r\n}\r\n\r\nfunction MenubarPortal({\r\n  ...props\r\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\r\n  return <MenubarPrimitive.Portal {...props} />\r\n}\r\n\r\nfunction MenubarRadioGroup({\r\n  ...props\r\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\r\n  return <MenubarPrimitive.RadioGroup {...props} />\r\n}\r\n\r\nfunction MenubarSub({\r\n  ...props\r\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\r\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\r\n}\r\n\r\nconst Menubar = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <MenubarPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nMenubar.displayName = MenubarPrimitive.Root.displayName\r\n\r\nconst MenubarTrigger = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <MenubarPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\r\n\r\nconst MenubarSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => (\r\n  <MenubarPrimitive.SubTrigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\r\n  </MenubarPrimitive.SubTrigger>\r\n))\r\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\r\n\r\nconst MenubarSubContent = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <MenubarPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\r\n\r\nconst MenubarContent = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\r\n>(\r\n  (\r\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\r\n    ref\r\n  ) => (\r\n    <MenubarPrimitive.Portal>\r\n      <MenubarPrimitive.Content\r\n        ref={ref}\r\n        align={align}\r\n        alignOffset={alignOffset}\r\n        sideOffset={sideOffset}\r\n        className={cn(\r\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n    </MenubarPrimitive.Portal>\r\n  )\r\n)\r\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\r\n\r\nconst MenubarItem = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <MenubarPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\r\n\r\nconst MenubarCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <MenubarPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    checked={checked}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <MenubarPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </MenubarPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </MenubarPrimitive.CheckboxItem>\r\n))\r\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\r\n\r\nconst MenubarRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <MenubarPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <MenubarPrimitive.ItemIndicator>\r\n        <Circle className=\"h-2 w-2 fill-current\" />\r\n      </MenubarPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </MenubarPrimitive.RadioItem>\r\n))\r\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\r\n\r\nconst MenubarLabel = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <MenubarPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\r\n\r\nconst MenubarSeparator = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <MenubarPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\r\n\r\nconst MenubarShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\r\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nMenubarShortcut.displayname = \"MenubarShortcut\"\r\n\r\nexport {\r\n  Menubar,\r\n  MenubarMenu,\r\n  MenubarTrigger,\r\n  MenubarContent,\r\n  MenubarItem,\r\n  MenubarSeparator,\r\n  MenubarLabel,\r\n  MenubarCheckboxItem,\r\n  MenubarRadioGroup,\r\n  MenubarRadioItem,\r\n  MenubarPortal,\r\n  MenubarSubContent,\r\n  MenubarSubTrigger,\r\n  MenubarGroup,\r\n  MenubarSub,\r\n  MenubarShortcut,\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\navigation-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\pagination.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'HTMLUListElement' is not defined.","line":18,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":18,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'HTMLLIElement' is not defined.","line":30,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":30,"endColumn":16}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\r\nimport * as React from \"react\"\r\n\r\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\r\n  <nav\r\n    role=\"navigation\"\r\n    aria-label=\"pagination\"\r\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\r\n    {...props}\r\n  />\r\n)\r\nPagination.displayName = \"Pagination\"\r\n\r\nconst PaginationContent = React.forwardRef<\r\n  HTMLUListElement,\r\n  React.ComponentProps<\"ul\">\r\n>(({ className, ...props }, ref) => (\r\n  <ul\r\n    ref={ref}\r\n    className={cn(\"flex flex-row items-center gap-1\", className)}\r\n    {...props}\r\n  />\r\n))\r\nPaginationContent.displayName = \"PaginationContent\"\r\n\r\nconst PaginationItem = React.forwardRef<\r\n  HTMLLIElement,\r\n  React.ComponentProps<\"li\">\r\n>(({ className, ...props }, ref) => (\r\n  <li ref={ref} className={cn(\"\", className)} {...props} />\r\n))\r\nPaginationItem.displayName = \"PaginationItem\"\r\n\r\ntype PaginationLinkProps = {\r\n  isActive?: boolean\r\n} & Pick<ButtonProps, \"size\"> &\r\n  React.ComponentProps<\"a\">\r\n\r\nconst PaginationLink = ({\r\n  className,\r\n  isActive,\r\n  size = \"icon\",\r\n  ...props\r\n}: PaginationLinkProps) => (\r\n  <a\r\n    aria-current={isActive ? \"page\" : undefined}\r\n    className={cn(\r\n      buttonVariants({\r\n        variant: isActive ? \"outline\" : \"ghost\",\r\n        size,\r\n      }),\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nPaginationLink.displayName = \"PaginationLink\"\r\n\r\nconst PaginationPrevious = ({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof PaginationLink>) => (\r\n  <PaginationLink\r\n    aria-label=\"Go to previous page\"\r\n    size=\"default\"\r\n    className={cn(\"gap-1 pl-2.5\", className)}\r\n    {...props}\r\n  >\r\n    <ChevronLeft className=\"h-4 w-4\" />\r\n    <span>Previous</span>\r\n  </PaginationLink>\r\n)\r\nPaginationPrevious.displayName = \"PaginationPrevious\"\r\n\r\nconst PaginationNext = ({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof PaginationLink>) => (\r\n  <PaginationLink\r\n    aria-label=\"Go to next page\"\r\n    size=\"default\"\r\n    className={cn(\"gap-1 pr-2.5\", className)}\r\n    {...props}\r\n  >\r\n    <span>Next</span>\r\n    <ChevronRight className=\"h-4 w-4\" />\r\n  </PaginationLink>\r\n)\r\nPaginationNext.displayName = \"PaginationNext\"\r\n\r\nconst PaginationEllipsis = ({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"span\">) => (\r\n  <span\r\n    aria-hidden\r\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\r\n    {...props}\r\n  >\r\n    <MoreHorizontal className=\"h-4 w-4\" />\r\n    <span className=\"sr-only\">More pages</span>\r\n  </span>\r\n)\r\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\r\n\r\nexport {\r\n  Pagination,\r\n  PaginationContent,\r\n  PaginationEllipsis,\r\n  PaginationItem,\r\n  PaginationLink,\r\n  PaginationNext,\r\n  PaginationPrevious,\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\resizable.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":11,"column":4,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":9},{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":27,"column":4,"nodeType":"Identifier","messageId":"undef","endLine":27,"endColumn":9}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { GripVertical } from \"lucide-react\"\r\nimport * as ResizablePrimitive from \"react-resizable-panels\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst ResizablePanelGroup = ({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\r\n  <ResizablePrimitive.PanelGroup\r\n    className={cn(\r\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\n\r\nconst ResizablePanel = ResizablePrimitive.Panel\r\n\r\nconst ResizableHandle = ({\r\n  withHandle,\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\r\n  withHandle?: boolean\r\n}) => (\r\n  <ResizablePrimitive.PanelResizeHandle\r\n    className={cn(\r\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {withHandle && (\r\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\r\n        <GripVertical className=\"h-2.5 w-2.5\" />\r\n      </div>\r\n    )}\r\n  </ResizablePrimitive.PanelResizeHandle>\r\n)\r\n\r\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\sidebar.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'open' is defined but never used.","line":38,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"open"},"fix":{"range":[1061,1074],"text":""},"desc":"Remove unused variable 'open'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'open' is defined but never used.","line":40,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"open"},"fix":{"range":[1126,1139],"text":""},"desc":"Remove unused variable 'open'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'open' is defined but never used.","line":67,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"open"},"fix":{"range":[1731,1744],"text":""},"desc":"Remove unused variable 'open'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'value' is defined but never used.","line":77,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":77,"endColumn":39,"suggestions":[{"messageId":"removeVar","data":{"varName":"value"},"fix":{"range":[2138,2152],"text":""},"desc":"Remove unused variable 'value'."}]},{"ruleId":"no-undef","severity":2,"message":"'KeyboardEvent' is not defined.","line":98,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":98,"endColumn":48},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 5 times.","line":433,"column":9,"nodeType":"Literal","endLine":433,"endColumn":47}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, VariantProps } from \"class-variance-authority\"\r\nimport { PanelLeftIcon } from \"lucide-react\"\r\nimport * as React from \"react\"\r\n\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Separator } from \"@/components/ui/separator\"\r\nimport {\r\n  Sheet,\r\n  SheetContent,\r\n  SheetDescription,\r\n  SheetHeader,\r\n  SheetTitle,\r\n} from \"@/components/ui/sheet\"\r\nimport { Skeleton } from \"@/components/ui/skeleton\"\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\"\r\nimport { useIsMobile } from \"@/hooks/use-mobile\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\r\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\r\nconst SIDEBAR_WIDTH = \"16rem\"\r\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\r\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\r\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\r\n\r\ntype SidebarContextProps = {\r\n  state: \"expanded\" | \"collapsed\"\r\n  open: boolean\r\n  setOpen: (open: boolean) => void\r\n  openMobile: boolean\r\n  setOpenMobile: (open: boolean) => void\r\n  isMobile: boolean\r\n  toggleSidebar: () => void\r\n}\r\n\r\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\r\n\r\nfunction useSidebar() {\r\n  const context = React.useContext(SidebarContext)\r\n  if (!context) {\r\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\r\n  }\r\n\r\n  return context\r\n}\r\n\r\nfunction SidebarProvider({\r\n  defaultOpen = true,\r\n  open: openProp,\r\n  onOpenChange: setOpenProp,\r\n  className,\r\n  style,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & {\r\n  defaultOpen?: boolean\r\n  open?: boolean\r\n  onOpenChange?: (open: boolean) => void\r\n}) {\r\n  const isMobile = useIsMobile()\r\n  const [openMobile, setOpenMobile] = React.useState(false)\r\n\r\n  // This is the internal state of the sidebar.\r\n  // We use openProp and setOpenProp for control from outside the component.\r\n  const [_open, _setOpen] = React.useState(defaultOpen)\r\n  const open = openProp ?? _open\r\n  const setOpen = React.useCallback(\r\n    (value: boolean | ((value: boolean) => boolean)) => {\r\n      const openState = typeof value === \"function\" ? value(open) : value\r\n      if (setOpenProp) {\r\n        setOpenProp(openState)\r\n      } else {\r\n        _setOpen(openState)\r\n      }\r\n\r\n      // This sets the cookie to keep the sidebar state.\r\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\r\n    },\r\n    [setOpenProp, open]\r\n  )\r\n\r\n  // Helper to toggle the sidebar.\r\n  const toggleSidebar = React.useCallback(() => {\r\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\r\n  }, [isMobile, setOpen, setOpenMobile])\r\n\r\n  // Adds a keyboard shortcut to toggle the sidebar.\r\n  React.useEffect(() => {\r\n    const handleKeyDown = (event: KeyboardEvent) => {\r\n      if (\r\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\r\n        (event.metaKey || event.ctrlKey)\r\n      ) {\r\n        event.preventDefault()\r\n        toggleSidebar()\r\n      }\r\n    }\r\n\r\n    window.addEventListener(\"keydown\", handleKeyDown)\r\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\r\n  }, [toggleSidebar])\r\n\r\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\r\n  // This makes it easier to style the sidebar with Tailwind classes.\r\n  const state = open ? \"expanded\" : \"collapsed\"\r\n\r\n  const contextValue = React.useMemo<SidebarContextProps>(\r\n    () => ({\r\n      state,\r\n      open,\r\n      setOpen,\r\n      isMobile,\r\n      openMobile,\r\n      setOpenMobile,\r\n      toggleSidebar,\r\n    }),\r\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\r\n  )\r\n\r\n  return (\r\n    <SidebarContext.Provider value={contextValue}>\r\n      <TooltipProvider delayDuration={0}>\r\n        <div\r\n          data-slot=\"sidebar-wrapper\"\r\n          style={\r\n            {\r\n              \"--sidebar-width\": SIDEBAR_WIDTH,\r\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\r\n              ...style,\r\n            } as React.CSSProperties\r\n          }\r\n          className={cn(\r\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\r\n            className\r\n          )}\r\n          {...props}\r\n        >\r\n          {children}\r\n        </div>\r\n      </TooltipProvider>\r\n    </SidebarContext.Provider>\r\n  )\r\n}\r\n\r\nfunction Sidebar({\r\n  side = \"left\",\r\n  variant = \"sidebar\",\r\n  collapsible = \"offcanvas\",\r\n  className,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & {\r\n  side?: \"left\" | \"right\"\r\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\r\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\r\n}) {\r\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\r\n\r\n  if (collapsible === \"none\") {\r\n    return (\r\n      <div\r\n        data-slot=\"sidebar\"\r\n        className={cn(\r\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (isMobile) {\r\n    return (\r\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\r\n        <SheetContent\r\n          data-sidebar=\"sidebar\"\r\n          data-slot=\"sidebar\"\r\n          data-mobile=\"true\"\r\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\r\n          style={\r\n            {\r\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\r\n            } as React.CSSProperties\r\n          }\r\n          side={side}\r\n        >\r\n          <SheetHeader className=\"sr-only\">\r\n            <SheetTitle>Sidebar</SheetTitle>\r\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\r\n          </SheetHeader>\r\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\r\n        </SheetContent>\r\n      </Sheet>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"group peer text-sidebar-foreground hidden md:block\"\r\n      data-state={state}\r\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\r\n      data-variant={variant}\r\n      data-side={side}\r\n      data-slot=\"sidebar\"\r\n    >\r\n      {/* This is what handles the sidebar gap on desktop */}\r\n      <div\r\n        data-slot=\"sidebar-gap\"\r\n        className={cn(\r\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\r\n          \"group-data-[collapsible=offcanvas]:w-0\",\r\n          \"group-data-[side=right]:rotate-180\",\r\n          variant === \"floating\" || variant === \"inset\"\r\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\r\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\r\n        )}\r\n      />\r\n      <div\r\n        data-slot=\"sidebar-container\"\r\n        className={cn(\r\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\r\n          side === \"left\"\r\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\r\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\r\n          // Adjust the padding for floating and inset variants.\r\n          variant === \"floating\" || variant === \"inset\"\r\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\r\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        <div\r\n          data-sidebar=\"sidebar\"\r\n          data-slot=\"sidebar-inner\"\r\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\r\n        >\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction SidebarTrigger({\r\n  className,\r\n  onClick,\r\n  ...props\r\n}: React.ComponentProps<typeof Button>) {\r\n  const { toggleSidebar } = useSidebar()\r\n\r\n  return (\r\n    <Button\r\n      data-sidebar=\"trigger\"\r\n      data-slot=\"sidebar-trigger\"\r\n      variant=\"ghost\"\r\n      size=\"icon\"\r\n      className={cn(\"h-7 w-7\", className)}\r\n      onClick={(event) => {\r\n        onClick?.(event)\r\n        toggleSidebar()\r\n      }}\r\n      {...props}\r\n    >\r\n      <PanelLeftIcon />\r\n      <span className=\"sr-only\">Toggle Sidebar</span>\r\n    </Button>\r\n  )\r\n}\r\n\r\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\r\n  const { toggleSidebar } = useSidebar()\r\n\r\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\r\n  return (\r\n    <button\r\n      data-sidebar=\"rail\"\r\n      data-slot=\"sidebar-rail\"\r\n      aria-label=\"Toggle Sidebar\"\r\n      tabIndex={-1}\r\n      onClick={toggleSidebar}\r\n      title=\"Toggle Sidebar\"\r\n      className={cn(\r\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\r\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\r\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\r\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\r\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\r\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\r\n  return (\r\n    <main\r\n      data-slot=\"sidebar-inset\"\r\n      className={cn(\r\n        \"bg-background relative flex w-full flex-1 flex-col\",\r\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarInput({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof Input>) {\r\n  return (\r\n    <Input\r\n      data-slot=\"sidebar-input\"\r\n      data-sidebar=\"input\"\r\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"sidebar-header\"\r\n      data-sidebar=\"header\"\r\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"sidebar-footer\"\r\n      data-sidebar=\"footer\"\r\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarSeparator({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof Separator>) {\r\n  return (\r\n    <Separator\r\n      data-slot=\"sidebar-separator\"\r\n      data-sidebar=\"separator\"\r\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"sidebar-content\"\r\n      data-sidebar=\"content\"\r\n      className={cn(\r\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"sidebar-group\"\r\n      data-sidebar=\"group\"\r\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarGroupLabel({\r\n  className,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\r\n  const Comp = asChild ? Slot : \"div\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"sidebar-group-label\"\r\n      data-sidebar=\"group-label\"\r\n      className={cn(\r\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\r\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarGroupAction({\r\n  className,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"sidebar-group-action\"\r\n      data-sidebar=\"group-action\"\r\n      className={cn(\r\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        // Increases the hit area of the button on mobile.\r\n        \"after:absolute after:-inset-2 md:after:hidden\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarGroupContent({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"sidebar-group-content\"\r\n      data-sidebar=\"group-content\"\r\n      className={cn(\"w-full text-sm\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\r\n  return (\r\n    <ul\r\n      data-slot=\"sidebar-menu\"\r\n      data-sidebar=\"menu\"\r\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\r\n  return (\r\n    <li\r\n      data-slot=\"sidebar-menu-item\"\r\n      data-sidebar=\"menu-item\"\r\n      className={cn(\"group/menu-item relative\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nconst sidebarMenuButtonVariants = cva(\r\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\r\n        outline:\r\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\r\n      },\r\n      size: {\r\n        default: \"h-8 text-sm\",\r\n        sm: \"h-7 text-xs\",\r\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction SidebarMenuButton({\r\n  asChild = false,\r\n  isActive = false,\r\n  variant = \"default\",\r\n  size = \"default\",\r\n  tooltip,\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> & {\r\n  asChild?: boolean\r\n  isActive?: boolean\r\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\r\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n  const { isMobile, state } = useSidebar()\r\n\r\n  const button = (\r\n    <Comp\r\n      data-slot=\"sidebar-menu-button\"\r\n      data-sidebar=\"menu-button\"\r\n      data-size={size}\r\n      data-active={isActive}\r\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n\r\n  if (!tooltip) {\r\n    return button\r\n  }\r\n\r\n  if (typeof tooltip === \"string\") {\r\n    tooltip = {\r\n      children: tooltip,\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Tooltip>\r\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\r\n      <TooltipContent\r\n        side=\"right\"\r\n        align=\"center\"\r\n        hidden={state !== \"collapsed\" || isMobile}\r\n        {...tooltip}\r\n      />\r\n    </Tooltip>\r\n  )\r\n}\r\n\r\nfunction SidebarMenuAction({\r\n  className,\r\n  asChild = false,\r\n  showOnHover = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> & {\r\n  asChild?: boolean\r\n  showOnHover?: boolean\r\n}) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"sidebar-menu-action\"\r\n      data-sidebar=\"menu-action\"\r\n      className={cn(\r\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        // Increases the hit area of the button on mobile.\r\n        \"after:absolute after:-inset-2 md:after:hidden\",\r\n        \"peer-data-[size=sm]/menu-button:top-1\",\r\n        \"peer-data-[size=default]/menu-button:top-1.5\",\r\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        showOnHover &&\r\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarMenuBadge({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"sidebar-menu-badge\"\r\n      data-sidebar=\"menu-badge\"\r\n      className={cn(\r\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\r\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\r\n        \"peer-data-[size=sm]/menu-button:top-1\",\r\n        \"peer-data-[size=default]/menu-button:top-1.5\",\r\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarMenuSkeleton({\r\n  className,\r\n  showIcon = false,\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & {\r\n  showIcon?: boolean\r\n}) {\r\n  // Random width between 50 to 90%.\r\n  const width = React.useMemo(() => {\r\n    return `${Math.floor(Math.random() * 40) + 50}%`\r\n  }, [])\r\n\r\n  return (\r\n    <div\r\n      data-slot=\"sidebar-menu-skeleton\"\r\n      data-sidebar=\"menu-skeleton\"\r\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\r\n      {...props}\r\n    >\r\n      {showIcon && (\r\n        <Skeleton\r\n          className=\"size-4 rounded-md\"\r\n          data-sidebar=\"menu-skeleton-icon\"\r\n        />\r\n      )}\r\n      <Skeleton\r\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\r\n        data-sidebar=\"menu-skeleton-text\"\r\n        style={\r\n          {\r\n            \"--skeleton-width\": width,\r\n          } as React.CSSProperties\r\n        }\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\r\n  return (\r\n    <ul\r\n      data-slot=\"sidebar-menu-sub\"\r\n      data-sidebar=\"menu-sub\"\r\n      className={cn(\r\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarMenuSubItem({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"li\">) {\r\n  return (\r\n    <li\r\n      data-slot=\"sidebar-menu-sub-item\"\r\n      data-sidebar=\"menu-sub-item\"\r\n      className={cn(\"group/menu-sub-item relative\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarMenuSubButton({\r\n  asChild = false,\r\n  size = \"md\",\r\n  isActive = false,\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"a\"> & {\r\n  asChild?: boolean\r\n  size?: \"sm\" | \"md\"\r\n  isActive?: boolean\r\n}) {\r\n  const Comp = asChild ? Slot : \"a\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"sidebar-menu-sub-button\"\r\n      data-sidebar=\"menu-sub-button\"\r\n      data-size={size}\r\n      data-active={isActive}\r\n      className={cn(\r\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\r\n        size === \"sm\" && \"text-xs\",\r\n        size === \"md\" && \"text-sm\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Sidebar,\r\n  SidebarContent,\r\n  SidebarFooter,\r\n  SidebarGroup,\r\n  SidebarGroupAction,\r\n  SidebarGroupContent,\r\n  SidebarGroupLabel,\r\n  SidebarHeader,\r\n  SidebarInput,\r\n  SidebarInset,\r\n  SidebarMenu,\r\n  SidebarMenuAction,\r\n  SidebarMenuBadge,\r\n  SidebarMenuButton,\r\n  SidebarMenuItem,\r\n  SidebarMenuSkeleton,\r\n  SidebarMenuSub,\r\n  SidebarMenuSubButton,\r\n  SidebarMenuSubItem,\r\n  SidebarProvider,\r\n  SidebarRail,\r\n  SidebarSeparator,\r\n  SidebarTrigger,\r\n  useSidebar,\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\skeleton.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":6,"column":4,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":9}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { cn } from \"@/lib/utils\"\r\n\r\nfunction Skeleton({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\table.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'HTMLTableElement' is not defined.","line":6,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'HTMLTableElement' is not defined.","line":7,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":40},{"ruleId":"no-undef","severity":2,"message":"'HTMLTableSectionElement' is not defined.","line":20,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":20,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'HTMLTableSectionElement' is not defined.","line":21,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":47},{"ruleId":"no-undef","severity":2,"message":"'HTMLTableSectionElement' is not defined.","line":28,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'HTMLTableSectionElement' is not defined.","line":29,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":47},{"ruleId":"no-undef","severity":2,"message":"'HTMLTableSectionElement' is not defined.","line":40,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":40,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'HTMLTableSectionElement' is not defined.","line":41,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":41,"endColumn":47},{"ruleId":"no-undef","severity":2,"message":"'HTMLTableRowElement' is not defined.","line":55,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":55,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'HTMLTableRowElement' is not defined.","line":56,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":56,"endColumn":43},{"ruleId":"no-undef","severity":2,"message":"'HTMLTableCellElement' is not defined.","line":70,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":70,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'HTMLTableCellElement' is not defined.","line":71,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":71,"endColumn":46},{"ruleId":"no-undef","severity":2,"message":"'HTMLTableCellElement' is not defined.","line":85,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":85,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'HTMLTableCellElement' is not defined.","line":86,"column":26,"nodeType":"Identifier","messageId":"undef","endLine":86,"endColumn":46},{"ruleId":"no-undef","severity":2,"message":"'HTMLTableCaptionElement' is not defined.","line":97,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":97,"endColumn":26},{"ruleId":"no-undef","severity":2,"message":"'HTMLTableCaptionElement' is not defined.","line":98,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":98,"endColumn":47}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\textarea.tsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'HTMLTextAreaElement' is not defined.","line":6,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":6,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Textarea = React.forwardRef<\r\n  HTMLTextAreaElement,\r\n  React.ComponentProps<\"textarea\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <textarea\r\n      className={cn(\r\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        className\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\toggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\hooks\\use-mobile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\hooks\\use-toast.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'actionTypes' is assigned a value but only used as a type. Allowed unused vars must match /^_/u.","line":18,"column":7,"nodeType":null,"messageId":"usedOnlyAsType","endLine":18,"endColumn":18},{"ruleId":"no-unused-vars","severity":2,"message":"'state' is defined but never used.","line":129,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":129,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"state"},"fix":{"range":[2828,2840],"text":""},"desc":"Remove unused variable 'state'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\n\r\nimport type {\r\n  ToastActionElement,\r\n  ToastProps,\r\n} from \"@/components/ui/toast\"\r\n\r\nconst TOAST_LIMIT = 1\r\nconst TOAST_REMOVE_DELAY = 1000000\r\n\r\ntype ToasterToast = ToastProps & {\r\n  id: string\r\n  title?: React.ReactNode\r\n  description?: React.ReactNode\r\n  action?: ToastActionElement\r\n}\r\n\r\nconst actionTypes = {\r\n  ADD_TOAST: \"ADD_TOAST\",\r\n  UPDATE_TOAST: \"UPDATE_TOAST\",\r\n  DISMISS_TOAST: \"DISMISS_TOAST\",\r\n  REMOVE_TOAST: \"REMOVE_TOAST\",\r\n} as const\r\n\r\nlet count = 0\r\n\r\nfunction genId() {\r\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\r\n  return count.toString()\r\n}\r\n\r\ntype ActionType = typeof actionTypes\r\n\r\ntype Action =\r\n  | {\r\n      type: ActionType[\"ADD_TOAST\"]\r\n      toast: ToasterToast\r\n    }\r\n  | {\r\n      type: ActionType[\"UPDATE_TOAST\"]\r\n      toast: Partial<ToasterToast>\r\n    }\r\n  | {\r\n      type: ActionType[\"DISMISS_TOAST\"]\r\n      toastId?: ToasterToast[\"id\"]\r\n    }\r\n  | {\r\n      type: ActionType[\"REMOVE_TOAST\"]\r\n      toastId?: ToasterToast[\"id\"]\r\n    }\r\n\r\ninterface State {\r\n  toasts: ToasterToast[]\r\n}\r\n\r\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\r\n\r\nconst addToRemoveQueue = (toastId: string) => {\r\n  if (toastTimeouts.has(toastId)) {\r\n    return\r\n  }\r\n\r\n  const timeout = setTimeout(() => {\r\n    toastTimeouts.delete(toastId)\r\n    dispatch({\r\n      type: \"REMOVE_TOAST\",\r\n      toastId: toastId,\r\n    })\r\n  }, TOAST_REMOVE_DELAY)\r\n\r\n  toastTimeouts.set(toastId, timeout)\r\n}\r\n\r\nexport const reducer = (state: State, action: Action): State => {\r\n  switch (action.type) {\r\n    case \"ADD_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\r\n      }\r\n\r\n    case \"UPDATE_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\r\n        ),\r\n      }\r\n\r\n    case \"DISMISS_TOAST\": {\r\n      const { toastId } = action\r\n\r\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\r\n      // but I'll keep it here for simplicity\r\n      if (toastId) {\r\n        addToRemoveQueue(toastId)\r\n      } else {\r\n        state.toasts.forEach((toast) => {\r\n          addToRemoveQueue(toast.id)\r\n        })\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === toastId || toastId === undefined\r\n            ? {\r\n                ...t,\r\n                open: false,\r\n              }\r\n            : t\r\n        ),\r\n      }\r\n    }\r\n    case \"REMOVE_TOAST\":\r\n      if (action.toastId === undefined) {\r\n        return {\r\n          ...state,\r\n          toasts: [],\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\r\n      }\r\n  }\r\n}\r\n\r\nconst listeners: Array<(state: State) => void> = []\r\n\r\nlet memoryState: State = { toasts: [] }\r\n\r\nfunction dispatch(action: Action) {\r\n  memoryState = reducer(memoryState, action)\r\n  listeners.forEach((listener) => {\r\n    listener(memoryState)\r\n  })\r\n}\r\n\r\ntype Toast = Omit<ToasterToast, \"id\">\r\n\r\nfunction toast({ ...props }: Toast) {\r\n  const id = genId()\r\n\r\n  const update = (props: ToasterToast) =>\r\n    dispatch({\r\n      type: \"UPDATE_TOAST\",\r\n      toast: { ...props, id },\r\n    })\r\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\r\n\r\n  dispatch({\r\n    type: \"ADD_TOAST\",\r\n    toast: {\r\n      ...props,\r\n      id,\r\n      open: true,\r\n      onOpenChange: (open) => {\r\n        if (!open) {dismiss()}\r\n      },\r\n    },\r\n  })\r\n\r\n  return {\r\n    id: id,\r\n    dismiss,\r\n    update,\r\n  }\r\n}\r\n\r\nfunction useToast() {\r\n  const [state, setState] = React.useState<State>(memoryState)\r\n\r\n  React.useEffect(() => {\r\n    listeners.push(setState)\r\n    return () => {\r\n      const index = listeners.indexOf(setState)\r\n      if (index > -1) {\r\n        listeners.splice(index, 1)\r\n      }\r\n    }\r\n  }, [state])\r\n\r\n  return {\r\n    ...state,\r\n    toast,\r\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\r\n  }\r\n}\r\n\r\nexport { useToast, toast }\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\lib\\analytics.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'_args' is defined but never used.","line":10,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"_args"},"fix":{"range":[206,211],"text":""},"desc":"Remove unused variable '_args'."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[213,216],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[213,216],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[253,256],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[253,256],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable @typescript-eslint/no-explicit-any */\r\n/**\r\n * Google Analytics 4 Utility\r\n * Handles GA4 pageview and event tracking\r\n */\r\n\r\ndeclare global {\r\n  interface Window {\r\n     \r\n    gtag?: (..._args: any[]) => void;\r\n     \r\n    dataLayer?: any[];\r\n  }\r\n}\r\n\r\nexport const GA_MEASUREMENT_ID = import.meta.env.VITE_GA_MEASUREMENT_ID;\r\n\r\n// Initialize Google Analytics\r\nexport const initGA = () => {\r\n  if (!GA_MEASUREMENT_ID) {\r\n    console.warn('Google Analytics Measurement ID not configured');\r\n    return;\r\n  }\r\n\r\n  // Add gtag script\r\n  const script = document.createElement('script');\r\n  script.async = true;\r\n  script.src = `https://www.googletagmanager.com/gtag/js?id=${GA_MEASUREMENT_ID}`;\r\n  document.head.appendChild(script);\r\n\r\n  // Initialize gtag\r\n  window.gtag = function gtag() {\r\n    window.dataLayer = window.dataLayer || [];\r\n     \r\n    window.dataLayer.push(arguments);\r\n  };\r\n\r\n  window.gtag('js', new Date().toISOString());\r\n  window.gtag('config', GA_MEASUREMENT_ID, {\r\n    send_page_view: false, // We'll handle pageviews manually\r\n  });\r\n};\r\n\r\n// Track page views\r\nexport const trackPageView = (url: string, title?: string) => {\r\n  if (!window.gtag || !GA_MEASUREMENT_ID) {return;}\r\n\r\n  window.gtag('config', GA_MEASUREMENT_ID, {\r\n    page_path: url,\r\n    page_title: title || document.title,\r\n  });\r\n};\r\n\r\n// Track custom events\r\nexport const trackEvent = (\r\n  eventName: string,\r\n  parameters?: Record<string, unknown>\r\n) => {\r\n  if (!window.gtag || !GA_MEASUREMENT_ID) {return;}\r\n\r\n  window.gtag('event', eventName, parameters);\r\n};\r\n\r\n// Common event trackers\r\nexport const analytics = {\r\n  // Page views\r\n  pageView: (url: string, title?: string) => trackPageView(url, title),\r\n\r\n  // User interactions\r\n  buttonClick: (buttonName: string, location?: string) => {\r\n    trackEvent('button_click', {\r\n      button_name: buttonName,\r\n      location: location || window.location.pathname,\r\n    });\r\n  },\r\n\r\n  // External link clicks\r\n  externalLinkClick: (url: string, linkText?: string) => {\r\n    trackEvent('external_link_click', {\r\n      url,\r\n      link_text: linkText,\r\n      outbound: true,\r\n    });\r\n  },\r\n\r\n  // Video interactions\r\n  videoPlay: (videoId: string, videoTitle?: string) => {\r\n    trackEvent('video_play', {\r\n      video_id: videoId,\r\n      video_title: videoTitle,\r\n    });\r\n  },\r\n\r\n  // E-commerce events\r\n  viewItem: (itemName: string, itemId?: string, price?: number) => {\r\n    trackEvent('view_item', {\r\n      item_name: itemName,\r\n      item_id: itemId,\r\n      price,\r\n    });\r\n  },\r\n\r\n  addToCart: (itemName: string, itemId?: string, price?: number) => {\r\n    trackEvent('add_to_cart', {\r\n      item_name: itemName,\r\n      item_id: itemId,\r\n      price,\r\n    });\r\n  },\r\n\r\n  beginCheckout: (value?: number, items?: string[]) => {\r\n    trackEvent('begin_checkout', {\r\n      value,\r\n      items,\r\n    });\r\n  },\r\n\r\n  purchase: (transactionId: string, value: number, items?: string[]) => {\r\n    trackEvent('purchase', {\r\n      transaction_id: transactionId,\r\n      value,\r\n      items,\r\n    });\r\n  },\r\n\r\n  // Social interactions\r\n  socialShare: (platform: string, contentType?: string, contentId?: string) => {\r\n    trackEvent('share', {\r\n      method: platform,\r\n      content_type: contentType,\r\n      content_id: contentId,\r\n    });\r\n  },\r\n\r\n  // Form submissions\r\n  formSubmit: (formName: string, success: boolean = true) => {\r\n    trackEvent('form_submit', {\r\n      form_name: formName,\r\n      success,\r\n    });\r\n  },\r\n\r\n  // Character page views\r\n  characterView: (characterName: string, characterId: string) => {\r\n    trackEvent('character_view', {\r\n      character_name: characterName,\r\n      character_id: characterId,\r\n    });\r\n  },\r\n\r\n  // Podcast interactions\r\n  podcastPlay: (platform: string) => {\r\n    trackEvent('podcast_play', {\r\n      platform,\r\n    });\r\n  },\r\n\r\n  // Newsletter signup\r\n  newsletterSignup: (location?: string) => {\r\n    trackEvent('newsletter_signup', {\r\n      location: location || window.location.pathname,\r\n    });\r\n  },\r\n\r\n  // Search\r\n  search: (searchTerm: string, resultsCount?: number) => {\r\n    trackEvent('search', {\r\n      search_term: searchTerm,\r\n      results_count: resultsCount,\r\n    });\r\n  },\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\lib\\queryClient.ts","messages":[{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":3,"column":37,"nodeType":"Identifier","messageId":"undef","endLine":3,"endColumn":45},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":14,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":14,"endColumn":20},{"ruleId":"no-unused-vars","severity":2,"message":"'options' is defined but never used.","line":27,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":2,"suggestions":[{"messageId":"removeVar","data":{"varName":"options"},"fix":{"range":[713,758],"text":""},"desc":"Remove unused variable 'options'."}]},{"ruleId":"no-return-await","severity":2,"message":"Redundant use of `await` on a return value.","line":41,"column":12,"nodeType":"Identifier","messageId":"redundantUseOfAwait","endLine":41,"endColumn":28,"suggestions":[{"messageId":"removeAwait","fix":{"range":[1100,1106],"text":""},"desc":"Remove redundant `await`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\r\n\r\nasync function throwIfResNotOk(res: Response) {\r\n  if (!res.ok) {\r\n    const text = (await res.text()) || res.statusText;\r\n    throw new Error(`${res.status}: ${text}`);\r\n  }\r\n}\r\n\r\nexport async function apiRequest(\r\n  method: string,\r\n  url: string,\r\n  data?: unknown | undefined,\r\n): Promise<Response> {\r\n  const res = await fetch(url, {\r\n    method,\r\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\r\n    body: data ? JSON.stringify(data) : undefined,\r\n    credentials: \"include\",\r\n  });\r\n\r\n  await throwIfResNotOk(res);\r\n  return res;\r\n}\r\n\r\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\r\nexport const getQueryFn: <T>(options: {\r\n  on401: UnauthorizedBehavior;\r\n}) => QueryFunction<T> =\r\n  ({ on401: unauthorizedBehavior }) =>\r\n  async ({ queryKey }) => {\r\n    const res = await fetch(queryKey.join(\"/\") as string, {\r\n      credentials: \"include\",\r\n    });\r\n\r\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\r\n      return null;\r\n    }\r\n\r\n    await throwIfResNotOk(res);\r\n    return await res.json();\r\n  };\r\n\r\nexport const queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      queryFn: getQueryFn({ on401: \"throw\" }),\r\n      refetchInterval: false,\r\n      refetchOnWindowFocus: false,\r\n      staleTime: Infinity,\r\n      retry: false,\r\n    },\r\n    mutations: {\r\n      retry: false,\r\n    },\r\n  },\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\lib\\stripe.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\lib\\structuredData.ts","messages":[{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 6 times.","line":4,"column":15,"nodeType":"Literal","endLine":4,"endColumn":35},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 6 times.","line":6,"column":11,"nodeType":"Literal","endLine":6,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Structured Data (JSON-LD) generators for SEO\r\n\r\nexport const getOrganizationSchema = () => ({\r\n  \"@context\": \"https://schema.org\",\r\n  \"@type\": \"Organization\",\r\n  \"name\": \"Tales of Aneria\",\r\n  \"url\": \"https://talesofaneria.com\",\r\n  \"logo\": \"https://talesofaneria.com/favicon.png\",\r\n  \"description\": \"Epic TTRPG live play series exploring the mystical world of Aneria through Dungeons & Dragons gameplay\",\r\n  \"sameAs\": [\r\n    \"https://www.youtube.com/@TalesofAneria\",\r\n    \"https://twitter.com/talesofaneria\",\r\n    \"https://www.patreon.com/talesofaneria\"\r\n  ],\r\n  \"contactPoint\": {\r\n    \"@type\": \"ContactPoint\",\r\n    \"email\": \"legal@talesofaneria.com\",\r\n    \"contactType\": \"Customer Service\"\r\n  }\r\n});\r\n\r\nexport const getWebSiteSchema = () => ({\r\n  \"@context\": \"https://schema.org\",\r\n  \"@type\": \"WebSite\",\r\n  \"name\": \"Tales of Aneria\",\r\n  \"url\": \"https://talesofaneria.com\",\r\n  \"description\": \"Join us on an epic journey through the mystical world of Aneria. Watch our TTRPG live play series, explore rich lore, and discover exclusive merchandise from our adventures.\",\r\n  \"publisher\": {\r\n    \"@type\": \"Organization\",\r\n    \"name\": \"Tales of Aneria\"\r\n  },\r\n  \"potentialAction\": {\r\n    \"@type\": \"SearchAction\",\r\n    \"target\": \"https://talesofaneria.com/characters?search={search_term_string}\",\r\n    \"query-input\": \"required name=search_term_string\"\r\n  }\r\n});\r\n\r\nexport const getBreadcrumbSchema = (items: { name: string; url: string }[]) => ({\r\n  \"@context\": \"https://schema.org\",\r\n  \"@type\": \"BreadcrumbList\",\r\n  \"itemListElement\": items.map((item, index) => ({\r\n    \"@type\": \"ListItem\",\r\n    \"position\": index + 1,\r\n    \"name\": item.name,\r\n    \"item\": item.url\r\n  }))\r\n});\r\n\r\nexport const getVideoSchema = (video: {\r\n  name: string;\r\n  description: string;\r\n  thumbnailUrl: string;\r\n  uploadDate: string;\r\n  duration?: string;\r\n  contentUrl?: string;\r\n}) => ({\r\n  \"@context\": \"https://schema.org\",\r\n  \"@type\": \"VideoObject\",\r\n  \"name\": video.name,\r\n  \"description\": video.description,\r\n  \"thumbnailUrl\": video.thumbnailUrl,\r\n  \"uploadDate\": video.uploadDate,\r\n  \"duration\": video.duration,\r\n  \"contentUrl\": video.contentUrl,\r\n  \"embedUrl\": video.contentUrl,\r\n  \"publisher\": {\r\n    \"@type\": \"Organization\",\r\n    \"name\": \"Tales of Aneria\",\r\n    \"logo\": {\r\n      \"@type\": \"ImageObject\",\r\n      \"url\": \"https://talesofaneria.com/favicon.png\"\r\n    }\r\n  }\r\n});\r\n\r\nexport const getPersonSchema = (person: {\r\n  name: string;\r\n  description?: string;\r\n  image?: string;\r\n  sameAs?: string[];\r\n}) => ({\r\n  \"@context\": \"https://schema.org\",\r\n  \"@type\": \"Person\",\r\n  \"name\": person.name,\r\n  \"description\": person.description,\r\n  \"image\": person.image,\r\n  \"sameAs\": person.sameAs,\r\n  \"memberOf\": {\r\n    \"@type\": \"Organization\",\r\n    \"name\": \"Tales of Aneria\"\r\n  }\r\n});\r\n\r\nexport const getCreativeWorkSchema = (character: {\r\n  name: string;\r\n  description: string;\r\n  creator: string;\r\n  image?: string;\r\n}) => ({\r\n  \"@context\": \"https://schema.org\",\r\n  \"@type\": \"CreativeWork\",\r\n  \"name\": character.name,\r\n  \"description\": character.description,\r\n  \"creator\": {\r\n    \"@type\": \"Person\",\r\n    \"name\": character.creator\r\n  },\r\n  \"image\": character.image,\r\n  \"isPartOf\": {\r\n    \"@type\": \"CreativeWorkSeries\",\r\n    \"name\": \"Tales of Aneria\"\r\n  },\r\n  \"genre\": [\"Fantasy\", \"Tabletop RPG\", \"Dungeons & Dragons\"]\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\lib\\youtube.ts","messages":[{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":21,"column":35,"nodeType":"Literal","endLine":21,"endColumn":72},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":95,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3096,3099],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3096,3099],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":126,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4117,4120],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4117,4120],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export interface VideoItem {\r\n  id: string;\r\n  title: string;\r\n  thumbnail: string;\r\n  duration: string;\r\n  publishedAt: string;\r\n  viewCount?: string;\r\n  description?: string;\r\n}\r\n\r\nfunction formatViewCount(count: number): string {\r\n  if (count >= 1000000) {\r\n    return `${(count / 1000000).toFixed(1)  }M`;\r\n  } else if (count >= 1000) {\r\n    return `${(count / 1000).toFixed(1)  }K`;\r\n  }\r\n  return count.toString();\r\n}\r\n\r\nfunction formatDuration(isoDuration: string): string {\r\n  const match = isoDuration.match(/PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/);\r\n  if (!match) {return '0:00';}\r\n\r\n  const hours = parseInt(match[1] || '0');\r\n  const minutes = parseInt(match[2] || '0');\r\n  const seconds = parseInt(match[3] || '0');\r\n\r\n  if (hours > 0) {\r\n    return `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\r\n  }\r\n  return `${minutes}:${seconds.toString().padStart(2, '0')}`;\r\n}\r\n\r\nexport async function getMultiplePlaylistVideosClient(playlistIds: string[], apiKey: string, maxResults: number = 50): Promise<VideoItem[]> {\r\n  // Fetch videos from all playlists in parallel\r\n  const allPlaylistPromises = playlistIds.map(playlistId => \r\n    getPlaylistVideosClient(playlistId, apiKey, 100).catch(error => {\r\n      console.error(`Error fetching playlist ${playlistId}:`, error);\r\n      return [] as VideoItem[];\r\n    })\r\n  );\r\n  \r\n  const playlistResults = await Promise.all(allPlaylistPromises);\r\n  \r\n  // Flatten and dedupe by video ID\r\n  const videoMap = new Map<string, VideoItem>();\r\n  for (const videos of playlistResults) {\r\n    for (const video of videos) {\r\n      if (!videoMap.has(video.id)) {\r\n        videoMap.set(video.id, video);\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Sort by publishedAt date (most recent first)\r\n  const allVideos = Array.from(videoMap.values());\r\n  allVideos.sort((a, b) => {\r\n    const dateA = new Date(a.publishedAt).getTime();\r\n    const dateB = new Date(b.publishedAt).getTime();\r\n    return dateB - dateA; // Most recent first\r\n  });\r\n  \r\n  return allVideos.slice(0, maxResults);\r\n}\r\n\r\nexport async function getPlaylistVideosClient(playlistId: string, apiKey: string, maxResults: number = 50): Promise<VideoItem[]> {\r\n  const allVideoIds: string[] = [];\r\n  let nextPageToken: string | undefined = undefined;\r\n  \r\n  // Fetch all pages of playlist items\r\n  do {\r\n    const url = new URL('https://www.googleapis.com/youtube/v3/playlistItems');\r\n    url.searchParams.set('part', 'snippet,contentDetails');\r\n    url.searchParams.set('playlistId', playlistId);\r\n    url.searchParams.set('maxResults', '50');\r\n    url.searchParams.set('key', apiKey);\r\n    if (nextPageToken) {\r\n      url.searchParams.set('pageToken', nextPageToken);\r\n    }\r\n    \r\n    const response = await fetch(url.toString());\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(`YouTube API error: ${JSON.stringify(error)}`);\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    if (!data.items || data.items.length === 0) {\r\n      break;\r\n    }\r\n\r\n    const videoIds = data.items\r\n      .map((item: any) => item.contentDetails?.videoId)\r\n      .filter(Boolean) as string[];\r\n    \r\n    allVideoIds.push(...videoIds);\r\n    nextPageToken = data.nextPageToken;\r\n    \r\n  } while (nextPageToken);\r\n\r\n  if (allVideoIds.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  // Fetch video details in batches of 50 (API limit)\r\n  const allVideos: VideoItem[] = [];\r\n  for (let i = 0; i < allVideoIds.length; i += 50) {\r\n    const batchIds = allVideoIds.slice(i, i + 50);\r\n    \r\n    const url = new URL('https://www.googleapis.com/youtube/v3/videos');\r\n    url.searchParams.set('part', 'snippet,contentDetails,statistics');\r\n    url.searchParams.set('id', batchIds.join(','));\r\n    url.searchParams.set('key', apiKey);\r\n    \r\n    const response = await fetch(url.toString());\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(`YouTube API error: ${JSON.stringify(error)}`);\r\n    }\r\n    \r\n    const data = await response.json();\r\n\r\n    const videos: VideoItem[] = (data.items || []).map((video: any) => {\r\n      const snippet = video.snippet;\r\n      const statistics = video.statistics;\r\n      const contentDetails = video.contentDetails;\r\n      \r\n      const viewCount = statistics?.viewCount \r\n        ? formatViewCount(parseInt(statistics.viewCount))\r\n        : undefined;\r\n\r\n      const duration = contentDetails?.duration \r\n        ? formatDuration(contentDetails.duration)\r\n        : '0:00';\r\n\r\n      return {\r\n        id: video.id || '',\r\n        title: snippet?.title || 'Untitled',\r\n        thumbnail: snippet?.thumbnails?.high?.url || snippet?.thumbnails?.default?.url || '',\r\n        duration: duration,\r\n        publishedAt: snippet?.publishedAt || '',\r\n        viewCount: viewCount,\r\n        description: snippet?.description || undefined,\r\n      };\r\n    });\r\n    \r\n    allVideos.push(...videos);\r\n  }\r\n\r\n  return allVideos.slice(0, maxResults);\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\main.tsx","messages":[{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":6,"column":12,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":6,"endColumn":44}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createRoot } from \"react-dom/client\";\r\n\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\n\r\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\pages\\CharacterDetail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\pages\\Characters.tsx","messages":[{"ruleId":"jsx-a11y/click-events-have-key-events","severity":1,"message":"Visible, non-interactive elements with click handlers must have at least one keyboard listener.","line":99,"column":23,"nodeType":"JSXOpeningElement","endLine":102,"endColumn":24},{"ruleId":"jsx-a11y/no-static-element-interactions","severity":1,"message":"Avoid non-native interactive elements. If using native HTML is not possible, add an appropriate role and support for tabbing, mouse, keyboard, and touch inputs to an interactive content element.","line":99,"column":23,"nodeType":"JSXOpeningElement","endLine":102,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Users } from \"lucide-react\";\r\nimport { useState } from \"react\";\r\nimport { Link } from \"wouter\";\r\n\r\nimport Footer from \"@/components/Footer\";\r\nimport Navigation from \"@/components/Navigation\";\r\nimport SEO from \"@/components/SEO\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport charactersData from \"@/data/characters.json\";\r\nimport { getBreadcrumbSchema } from \"@/lib/structuredData\";\r\n\r\ninterface CharacterImage {\r\n  id: string;\r\n  url?: string;\r\n  caption: string;\r\n  type: string;\r\n  isFeatured: boolean;\r\n  artist?: string;\r\n  artistUrl?: string;\r\n  copyright?: string;\r\n  isAiGenerated?: boolean;\r\n}\r\n\r\ninterface Character {\r\n  id: string;\r\n  name: string;\r\n  player: string;\r\n  playerId: string;\r\n  campaign: string;\r\n  race: string;\r\n  class: string;\r\n  level: number;\r\n  alignment: string;\r\n  featuredImage?: string;\r\n  images: CharacterImage[];\r\n  backstory: string;\r\n  personality: string;\r\n  dndbeyond: string;\r\n  playlist?: string;\r\n  status: string;\r\n}\r\n\r\nexport default function Characters() {\r\n  const characters: Character[] = charactersData.characters;\r\n  const [selectedCampaign, setSelectedCampaign] = useState<string>(\"all\");\r\n\r\n  // Get unique campaigns\r\n  const campaigns = Array.from(\r\n    new Set(characters.map((char) => char.campaign))\r\n  ).sort();\r\n\r\n  // Filter characters by selected campaign\r\n  const filteredCharacters = selectedCampaign === \"all\" \r\n    ? characters \r\n    : characters.filter((char) => char.campaign === selectedCampaign);\r\n\r\n  const activeCharacters = filteredCharacters.filter((char) => char.status === \"active\");\r\n  const inactiveCharacters = filteredCharacters.filter(\r\n    (char) => char.status !== \"active\"\r\n  );\r\n\r\n  const CharacterCard = ({ character }: { character: Character }) => {\r\n    const featuredImage = character.images.find((img) => img.isFeatured);\r\n    \r\n    return (\r\n      <Link key={character.id} href={`/characters/${character.id}`} className=\"relative z-0 hover:z-10\">\r\n        <Card\r\n          className=\"overflow-hidden hover-elevate cursor-pointer transition-all h-full\"\r\n          data-testid={`card-character-${character.id}`}\r\n        >\r\n          <div className=\"relative aspect-[3/4] bg-muted overflow-hidden\">\r\n            {character.featuredImage ? (\r\n              <img\r\n                src={character.featuredImage}\r\n                alt={character.name}\r\n                className=\"object-cover w-full h-full\"\r\n              />\r\n            ) : (\r\n              <div className=\"flex items-center justify-center h-full text-muted-foreground\">\r\n                <Users className=\"h-16 w-16\" />\r\n              </div>\r\n            )}\r\n            <div className=\"absolute top-3 right-3 flex flex-col gap-2\">\r\n              <Badge variant=\"secondary\" data-testid={`badge-level-${character.id}`}>\r\n                Level {character.level}\r\n              </Badge>\r\n              {featuredImage?.isAiGenerated && (\r\n                <TooltipProvider>\r\n                  <Tooltip delayDuration={200}>\r\n                    <TooltipTrigger asChild>\r\n                      <div \r\n                        onClick={(e) => e.preventDefault()}\r\n                        onMouseDown={(e) => e.stopPropagation()}\r\n                      >\r\n                        <Badge \r\n                          variant=\"secondary\" \r\n                          className=\"bg-amber-500/90 text-white border-amber-600 cursor-help\"\r\n                          data-testid={`badge-ai-${character.id}`}\r\n                        >\r\n                          AI Art\r\n                        </Badge>\r\n                      </div>\r\n                    </TooltipTrigger>\r\n                    <TooltipContent className=\"max-w-xs\">\r\n                      <p>This artwork was generated using AI for early character exploration and personal use. AI-generated artwork is not used for commercial purposes or merchandise. We believe in transparency about the use of AI tools in creative work.</p>\r\n                    </TooltipContent>\r\n                  </Tooltip>\r\n                </TooltipProvider>\r\n              )}\r\n            </div>\r\n          </div>\r\n        <CardHeader>\r\n          <CardTitle\r\n            className=\"text-xl mb-2\"\r\n            data-testid={`text-character-name-${character.id}`}\r\n          >\r\n            {character.name}\r\n          </CardTitle>\r\n          <p\r\n            className=\"text-sm text-muted-foreground\"\r\n            data-testid={`text-character-class-${character.id}`}\r\n          >\r\n            {character.race} {character.class}\r\n          </p>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <p\r\n            className=\"text-xs text-muted-foreground mb-2\"\r\n            data-testid={`text-character-player-${character.id}`}\r\n          >\r\n            Played by {character.player}\r\n          </p>\r\n          <p\r\n            className=\"text-sm line-clamp-3 mb-3\"\r\n            data-testid={`text-character-backstory-${character.id}`}\r\n          >\r\n            {character.backstory}\r\n          </p>\r\n          <Badge \r\n            variant=\"outline\" \r\n            className=\"text-xs\"\r\n            data-testid={`badge-campaign-${character.id}`}\r\n          >\r\n            {character.campaign}\r\n          </Badge>\r\n        </CardContent>\r\n      </Card>\r\n    </Link>\r\n  );\r\n};\r\n\r\n  const breadcrumbData = getBreadcrumbSchema([\r\n    { name: \"Home\", url: \"https://talesofaneria.com/\" },\r\n    { name: \"Characters\", url: \"https://talesofaneria.com/characters\" }\r\n  ]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <SEO\r\n        title=\"Meet the Characters - Tales of Aneria TTRPG\"\r\n        description=\"Explore our diverse cast of heroes, NPCs, villains, and homebrew creatures from Tales of Aneria. Discover active adventurers and legendary figures across Aneria, Pterrordale, and Taebrin.\"\r\n        canonical=\"https://talesofaneria.com/characters\"\r\n        keywords=\"D&D characters, TTRPG heroes, NPCs, villains, homebrew creatures, Dungeons and Dragons adventurers, fantasy characters, Aneria characters\"\r\n        jsonLd={breadcrumbData}\r\n      />\r\n      <Navigation />\r\n      <div className=\"py-20 lg:py-32\">\r\n        <div className=\"max-w-7xl mx-auto px-6 lg:px-8\">\r\n        <div className=\"text-center mb-16\">\r\n          <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 text-primary mb-6\">\r\n            <Users className=\"h-8 w-8\" />\r\n          </div>\r\n          <h1\r\n            className=\"font-serif text-4xl md:text-5xl font-semibold mb-6\"\r\n            data-testid=\"text-page-title\"\r\n          >\r\n            Meet the Characters\r\n          </h1>\r\n          <p\r\n            className=\"text-lg text-muted-foreground max-w-3xl mx-auto\"\r\n            data-testid=\"text-page-description\"\r\n          >\r\n            Discover our diverse cast of heroes, NPCs, villains, and homebrew creatures \r\n            who shape the stories across our campaigns. From active adventurers to legendary \r\n            figures of the past, explore the characters that bring our worlds to life.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Campaign Filter */}\r\n        <div className=\"mb-12\">\r\n          <div className=\"flex flex-wrap justify-center gap-3\">\r\n            <Button\r\n              variant={selectedCampaign === \"all\" ? \"default\" : \"outline\"}\r\n              size=\"sm\"\r\n              onClick={() => setSelectedCampaign(\"all\")}\r\n              data-testid=\"filter-all\"\r\n            >\r\n              All Campaigns\r\n            </Button>\r\n            {campaigns.map((campaign) => (\r\n              <Button\r\n                key={campaign}\r\n                variant={selectedCampaign === campaign ? \"default\" : \"outline\"}\r\n                size=\"sm\"\r\n                onClick={() => setSelectedCampaign(campaign)}\r\n                data-testid={`filter-${campaign.toLowerCase().replace(/\\s+/g, '-')}`}\r\n              >\r\n                {campaign}\r\n              </Button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Active Characters */}\r\n        {activeCharacters.length > 0 && (\r\n          <div className=\"mb-16\">\r\n            <h2\r\n              className=\"font-serif text-3xl font-semibold mb-8\"\r\n              data-testid=\"text-active-title\"\r\n            >\r\n              Active Characters\r\n            </h2>\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n              {activeCharacters.map((character) => (\r\n                <CharacterCard key={character.id} character={character} />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Inactive Characters */}\r\n        {inactiveCharacters.length > 0 && (\r\n          <div>\r\n            <h2\r\n              className=\"font-serif text-3xl font-semibold mb-8 text-muted-foreground\"\r\n              data-testid=\"text-inactive-title\"\r\n            >\r\n              Past Characters\r\n            </h2>\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n              {inactiveCharacters.map((character) => (\r\n                <CharacterCard key={character.id} character={character} />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\pages\\CheckoutCancel.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":31,"column":88,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1136,1262],"text":"\r\n                If you experienced any issues during checkout, please contact us and we&apos;ll be happy to help.\r\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1136,1262],"text":"\r\n                If you experienced any issues during checkout, please contact us and we&lsquo;ll be happy to help.\r\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1136,1262],"text":"\r\n                If you experienced any issues during checkout, please contact us and we&#39;ll be happy to help.\r\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1136,1262],"text":"\r\n                If you experienced any issues during checkout, please contact us and we&rsquo;ll be happy to help.\r\n              "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { XCircle } from \"lucide-react\";\r\nimport { useLocation } from \"wouter\";\r\n\r\nimport Footer from \"@/components/Footer\";\r\nimport Navigation from \"@/components/Navigation\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\n\r\nexport default function CheckoutCancel() {\r\n  const [, setLocation] = useLocation();\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <Navigation />\r\n      \r\n      <main className=\"pt-24 pb-20\">\r\n        <div className=\"max-w-2xl mx-auto px-6\">\r\n          <Card className=\"border-2 border-muted\">\r\n            <CardContent className=\"p-12 text-center\">\r\n              <XCircle className=\"h-16 w-16 text-muted-foreground mx-auto mb-6\" />\r\n              \r\n              <h1 className=\"font-serif text-3xl md:text-4xl font-semibold mb-4\">\r\n                Checkout Cancelled\r\n              </h1>\r\n              \r\n              <p className=\"text-lg text-muted-foreground mb-6\">\r\n                Your order was cancelled. No charges were made.\r\n              </p>\r\n\r\n              <p className=\"text-sm text-muted-foreground mb-8\">\r\n                If you experienced any issues during checkout, please contact us and we'll be happy to help.\r\n              </p>\r\n\r\n              <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\r\n                <Button \r\n                  size=\"lg\"\r\n                  onClick={() => setLocation('/shop')}\r\n                >\r\n                  Return to Shop\r\n                </Button>\r\n                \r\n                <Button \r\n                  size=\"lg\"\r\n                  variant=\"outline\"\r\n                  onClick={() => setLocation('/')}\r\n                >\r\n                  Go to Homepage\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\pages\\CheckoutSuccess.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[572,575],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[572,575],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-undef","severity":2,"message":"'URLSearchParams' is not defined.","line":18,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":18,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1228,1231],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1228,1231],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":83,"column":23,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2978,3092],"text":"\r\n                    We&apos;ll send you an email with tracking information once your order ships.\r\n                  "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2978,3092],"text":"\r\n                    We&lsquo;ll send you an email with tracking information once your order ships.\r\n                  "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2978,3092],"text":"\r\n                    We&#39;ll send you an email with tracking information once your order ships.\r\n                  "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2978,3092],"text":"\r\n                    We&rsquo;ll send you an email with tracking information once your order ships.\r\n                  "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { CheckCircle, Loader2 } from \"lucide-react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useLocation } from \"wouter\";\r\n\r\nimport Footer from \"@/components/Footer\";\r\nimport Navigation from \"@/components/Navigation\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { analytics } from \"@/lib/analytics\";\r\nimport { getCheckoutSession } from \"@/lib/stripe\";\r\n\r\nexport default function CheckoutSuccess() {\r\n  const [, setLocation] = useLocation();\r\n  const [session, setSession] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const sessionId = params.get('session_id');\r\n\r\n    if (!sessionId) {\r\n      setLocation('/');\r\n      return;\r\n    }\r\n\r\n    getCheckoutSession(sessionId)\r\n      .then(data => {\r\n        setSession(data);\r\n        setLoading(false);\r\n        \r\n        // Track successful purchase\r\n        if (data) {\r\n          const totalAmount = data.amount_total ? data.amount_total / 100 : 0;\r\n          analytics.purchase(\r\n            sessionId,\r\n            totalAmount,\r\n            data.line_items?.map((item: any) => item.description) || []\r\n          );\r\n        }\r\n      })\r\n      .catch(() => {\r\n        setLoading(false);\r\n      });\r\n  }, [setLocation]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <Navigation />\r\n      \r\n      <main className=\"pt-24 pb-20\">\r\n        <div className=\"max-w-2xl mx-auto px-6\">\r\n          {loading ? (\r\n            <Card>\r\n              <CardContent className=\"p-12 text-center\">\r\n                <Loader2 className=\"h-12 w-12 animate-spin mx-auto mb-4 text-primary\" />\r\n                <p className=\"text-muted-foreground\">Loading order details...</p>\r\n              </CardContent>\r\n            </Card>\r\n          ) : (\r\n            <Card className=\"border-2 border-primary/20\">\r\n              <CardContent className=\"p-12 text-center\">\r\n                <CheckCircle className=\"h-16 w-16 text-green-500 mx-auto mb-6\" />\r\n                \r\n                <h1 className=\"font-serif text-3xl md:text-4xl font-semibold mb-4\">\r\n                  Order Confirmed!\r\n                </h1>\r\n                \r\n                <p className=\"text-lg text-muted-foreground mb-6\">\r\n                  Thank you for your purchase! Your order has been received and will be processed shortly.\r\n                </p>\r\n\r\n                {session?.customer_email && (\r\n                  <div className=\"bg-muted/50 rounded-lg p-6 mb-6\">\r\n                    <p className=\"text-sm text-muted-foreground mb-2\">\r\n                      Confirmation sent to:\r\n                    </p>\r\n                    <p className=\"font-semibold\">{session.customer_email}</p>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"space-y-4\">\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    We'll send you an email with tracking information once your order ships.\r\n                  </p>\r\n                  \r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    Orders typically ship within 2-7 business days.\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col sm:flex-row gap-4 justify-center mt-8\">\r\n                  <Button \r\n                    size=\"lg\"\r\n                    onClick={() => setLocation('/')}\r\n                  >\r\n                    Return to Homepage\r\n                  </Button>\r\n                  \r\n                  <Button \r\n                    size=\"lg\"\r\n                    variant=\"outline\"\r\n                    onClick={() => setLocation('/shop')}\r\n                  >\r\n                    Continue Shopping\r\n                  </Button>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\pages\\Home.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\pages\\PressKit.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":332,"column":21,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[16072,16251],"text":"\r\n                  Looking for high-resolution files, additional formats, custom assets, or have questions about usage? \r\n                  We&apos;re happy to help!\r\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[16072,16251],"text":"\r\n                  Looking for high-resolution files, additional formats, custom assets, or have questions about usage? \r\n                  We&lsquo;re happy to help!\r\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[16072,16251],"text":"\r\n                  Looking for high-resolution files, additional formats, custom assets, or have questions about usage? \r\n                  We&#39;re happy to help!\r\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[16072,16251],"text":"\r\n                  Looking for high-resolution files, additional formats, custom assets, or have questions about usage? \r\n                  We&rsquo;re happy to help!\r\n                "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Download, FileText, Image, Palette, Mail, ExternalLink } from \"lucide-react\";\r\n\r\nimport Footer from \"@/components/Footer\";\r\nimport Navigation from \"@/components/Navigation\";\r\nimport SEO from \"@/components/SEO\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport socialLinksData from \"@/data/social-links.json\";\r\nimport { getBreadcrumbSchema } from \"@/lib/structuredData\";\r\n\r\nexport default function PressKit() {\r\n  const breadcrumbData = getBreadcrumbSchema([\r\n    { name: \"Home\", url: \"https://talesofaneria.com/\" },\r\n    { name: \"Press Kit\", url: \"https://talesofaneria.com/press-kit\" }\r\n  ]);\r\n\r\n  const downloadPressKit = () => {\r\n    // Create a list of files to download\r\n    const files = [\r\n      { name: 'logo-icon.png', path: '/press-kit/logo-icon.png' },\r\n      { name: 'social-preview.png', path: '/press-kit/social-preview.png' },\r\n      { name: 'BRAND_GUIDELINES.txt', path: '/press-kit/BRAND_GUIDELINES.txt' }\r\n    ];\r\n\r\n    // Download each file individually (browser will handle multiple downloads)\r\n    files.forEach((file, index) => {\r\n      setTimeout(() => {\r\n        const link = document.createElement('a');\r\n        link.href = file.path;\r\n        link.download = file.name;\r\n        link.target = '_blank';\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n      }, index * 500); // Stagger downloads to avoid browser blocking\r\n    });\r\n  };\r\n\r\n  const brandColors = [\r\n    { name: \"Primary Purple\", hex: \"#9333EA\", rgb: \"147, 51, 234\", usage: \"Main brand color, CTAs, highlights\" },\r\n    { name: \"Accent Amber\", hex: \"#F59E0B\", rgb: \"245, 158, 11\", usage: \"Secondary accent, warmth, energy\" },\r\n    { name: \"Dark Background\", hex: \"#0A0A0B\", rgb: \"10, 10, 11\", usage: \"Primary background, depth\" },\r\n    { name: \"Light Text\", hex: \"#FAFAFA\", rgb: \"250, 250, 250\", usage: \"Primary text, high contrast\" }\r\n  ];\r\n\r\n  const assets = [\r\n    {\r\n      title: \"Logo Icon\",\r\n      description: \"D20 die logo in PNG format with transparent background\",\r\n      type: \"image\",\r\n      file: \"/press-kit/logo-icon.png\",\r\n      specs: \"PNG  Transparent  512x512px\"\r\n    },\r\n    {\r\n      title: \"Social Preview Image\",\r\n      description: \"Optimized image for social media sharing\",\r\n      type: \"image\",\r\n      file: \"/press-kit/social-preview.png\",\r\n      specs: \"PNG  1200x630px  Social media optimized\"\r\n    },\r\n    {\r\n      title: \"Brand Guidelines\",\r\n      description: \"Complete brand guidelines, usage rules, and press information\",\r\n      type: \"document\",\r\n      file: \"/press-kit/BRAND_GUIDELINES.txt\",\r\n      specs: \"TXT  Brand guidelines & media info\"\r\n    }\r\n  ];\r\n\r\n  const quickFacts = [\r\n    { label: \"Series Type\", value: \"TTRPG Actual Play / Live Play\" },\r\n    { label: \"Primary Platform\", value: \"YouTube & Podcast\" },\r\n    { label: \"Content Style\", value: \"Cinematic D&D storytelling\" },\r\n    { label: \"Episode Frequency\", value: \"Weekly\" },\r\n    { label: \"Tagline\", value: \"An epic journey through a world of magic, mystery, and adventure\" }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <SEO\r\n        title=\"Press Kit - Tales of Aneria Media Resources\"\r\n        description=\"Download the Tales of Aneria press kit including logos, brand guidelines, social media assets, and media information. Everything you need for press coverage and partnerships.\"\r\n        canonical=\"https://talesofaneria.com/press-kit\"\r\n        keywords=\"press kit, media kit, brand assets, logos, TTRPG press, media resources, brand guidelines\"\r\n        jsonLd={breadcrumbData}\r\n      />\r\n      <Navigation />\r\n      \r\n      <main className=\"pt-24 pb-20\">\r\n        <div className=\"max-w-7xl mx-auto px-6 lg:px-8\">\r\n          {/* Header */}\r\n          <div className=\"text-center mb-16\">\r\n            <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 text-primary mb-6\">\r\n              <Download className=\"h-8 w-8\" />\r\n            </div>\r\n            <h1 className=\"font-serif text-4xl md:text-5xl font-semibold mb-6\" data-testid=\"text-presskit-title\">\r\n              Press Kit & Media Resources\r\n            </h1>\r\n            <p className=\"text-lg text-muted-foreground max-w-3xl mx-auto mb-8\" data-testid=\"text-presskit-description\">\r\n              Download our complete press kit including logos, brand guidelines, and media assets. \r\n              Everything you need for press coverage, articles, or partnership materials.\r\n            </p>\r\n            <Button \r\n              size=\"lg\" \r\n              onClick={downloadPressKit}\r\n              data-testid=\"button-download-all\"\r\n            >\r\n              <Download className=\"mr-2 h-5 w-5\" />\r\n              Download Complete Press Kit\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Quick Facts */}\r\n          <div className=\"mb-20\">\r\n            <h2 className=\"font-serif text-3xl font-semibold mb-8 text-center\">Quick Facts</h2>\r\n            <Card>\r\n              <CardContent className=\"p-6\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                  {quickFacts.map((fact, index) => (\r\n                    <div key={index} data-testid={`fact-${fact.label.toLowerCase().replace(/\\s+/g, '-')}`}>\r\n                      <dt className=\"text-sm font-semibold text-muted-foreground mb-1\">{fact.label}</dt>\r\n                      <dd className=\"text-base\">{fact.value}</dd>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* Downloadable Assets */}\r\n          <div className=\"mb-20\">\r\n            <h2 className=\"font-serif text-3xl font-semibold mb-8 text-center\">Downloadable Assets</h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              {assets.map((asset, index) => (\r\n                <Card key={index} className=\"hover-elevate\" data-testid={`card-asset-${asset.type}`}>\r\n                  <CardHeader>\r\n                    <div className=\"mb-4 text-primary\">\r\n                      {asset.type === 'image' ? <Image className=\"h-8 w-8\" /> : <FileText className=\"h-8 w-8\" />}\r\n                    </div>\r\n                    <CardTitle className=\"text-xl mb-2\">{asset.title}</CardTitle>\r\n                    <p className=\"text-sm text-muted-foreground\">{asset.description}</p>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <Badge variant=\"outline\" className=\"mb-4\">{asset.specs}</Badge>\r\n                    <Button \r\n                      className=\"w-full\" \r\n                      variant=\"outline\"\r\n                      onClick={() => {\r\n                        const link = document.createElement('a');\r\n                        link.href = asset.file;\r\n                        link.download = asset.file.split('/').pop() || 'download';\r\n                        link.target = '_blank';\r\n                        document.body.appendChild(link);\r\n                        link.click();\r\n                        document.body.removeChild(link);\r\n                      }}\r\n                      data-testid={`button-download-${asset.type}`}\r\n                    >\r\n                      <Download className=\"mr-2 h-4 w-4\" />\r\n                      Download\r\n                    </Button>\r\n                  </CardContent>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Brand Colors */}\r\n          <div className=\"mb-20\">\r\n            <h2 className=\"font-serif text-3xl font-semibold mb-8 text-center\">Brand Colors</h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              {brandColors.map((color, index) => (\r\n                <Card key={index} data-testid={`card-color-${color.name.toLowerCase().replace(/\\s+/g, '-')}`}>\r\n                  <CardContent className=\"p-6\">\r\n                    <div className=\"flex items-start gap-4\">\r\n                      <div \r\n                        className=\"w-20 h-20 rounded-lg border border-border flex-shrink-0\"\r\n                        style={{ backgroundColor: color.hex }}\r\n                      />\r\n                      <div className=\"flex-1\">\r\n                        <h3 className=\"font-semibold mb-2\">{color.name}</h3>\r\n                        <div className=\"space-y-1 text-sm text-muted-foreground\">\r\n                          <p>HEX: <code className=\"text-foreground\">{color.hex}</code></p>\r\n                          <p>RGB: <code className=\"text-foreground\">{color.rgb}</code></p>\r\n                          <p className=\"text-xs mt-2\">{color.usage}</p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Typography */}\r\n          <div className=\"mb-20\">\r\n            <h2 className=\"font-serif text-3xl font-semibold mb-8 text-center\">Typography</h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-xl\">Headings: Cinzel</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"font-serif space-y-2\">\r\n                    <p className=\"text-4xl\">Tales of Aneria</p>\r\n                    <p className=\"text-2xl\">Epic Adventures Await</p>\r\n                    <p className=\"text-xl\">Join the Journey</p>\r\n                  </div>\r\n                  <p className=\"text-sm text-muted-foreground mt-4\">\r\n                    Elegant serif font for headers, titles, and brand name. Conveys epic, fantasy aesthetic.\r\n                  </p>\r\n                  <Button \r\n                    variant=\"outline\" \r\n                    size=\"sm\" \r\n                    className=\"mt-4\"\r\n                    onClick={() => window.open('https://fonts.google.com/specimen/Cinzel', '_blank', 'noopener,noreferrer')}\r\n                    data-testid=\"button-font-cinzel\"\r\n                  >\r\n                    <ExternalLink className=\"mr-2 h-4 w-4\" />\r\n                    View on Google Fonts\r\n                  </Button>\r\n                </CardContent>\r\n              </Card>\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-xl\">Body: Inter</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"space-y-2\">\r\n                    <p className=\"text-base\">Clean, modern sans-serif typography</p>\r\n                    <p className=\"text-sm\">Excellent readability at all sizes</p>\r\n                    <p className=\"text-xs\">Perfect for body text and UI elements</p>\r\n                  </div>\r\n                  <p className=\"text-sm text-muted-foreground mt-4\">\r\n                    Clean sans-serif font for body text, descriptions, and UI. Ensures excellent readability.\r\n                  </p>\r\n                  <Button \r\n                    variant=\"outline\" \r\n                    size=\"sm\" \r\n                    className=\"mt-4\"\r\n                    onClick={() => window.open('https://fonts.google.com/specimen/Inter', '_blank', 'noopener,noreferrer')}\r\n                    data-testid=\"button-font-inter\"\r\n                  >\r\n                    <ExternalLink className=\"mr-2 h-4 w-4\" />\r\n                    View on Google Fonts\r\n                  </Button>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Usage Guidelines */}\r\n          <div className=\"mb-20\">\r\n            <h2 className=\"font-serif text-3xl font-semibold mb-8 text-center\">Usage Guidelines</h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <Card className=\"border-green-500/20 bg-green-500/5\">\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-xl flex items-center gap-2\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-green-500\" />\r\n                    Permitted Uses\r\n                  </CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <ul className=\"space-y-2 text-sm\">\r\n                    <li className=\"flex items-start gap-2\">\r\n                      <div className=\"w-1.5 h-1.5 rounded-full bg-green-500 mt-1.5 flex-shrink-0\" />\r\n                      <span>News articles and reviews</span>\r\n                    </li>\r\n                    <li className=\"flex items-start gap-2\">\r\n                      <div className=\"w-1.5 h-1.5 rounded-full bg-green-500 mt-1.5 flex-shrink-0\" />\r\n                      <span>Social media posts and shares</span>\r\n                    </li>\r\n                    <li className=\"flex items-start gap-2\">\r\n                      <div className=\"w-1.5 h-1.5 rounded-full bg-green-500 mt-1.5 flex-shrink-0\" />\r\n                      <span>Educational content about TTRPGs</span>\r\n                    </li>\r\n                    <li className=\"flex items-start gap-2\">\r\n                      <div className=\"w-1.5 h-1.5 rounded-full bg-green-500 mt-1.5 flex-shrink-0\" />\r\n                      <span>Podcasts and video essays (with attribution)</span>\r\n                    </li>\r\n                    <li className=\"flex items-start gap-2\">\r\n                      <div className=\"w-1.5 h-1.5 rounded-full bg-green-500 mt-1.5 flex-shrink-0\" />\r\n                      <span>Event promotions featuring our content</span>\r\n                    </li>\r\n                  </ul>\r\n                </CardContent>\r\n              </Card>\r\n              <Card className=\"border-red-500/20 bg-red-500/5\">\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-xl flex items-center gap-2\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-red-500\" />\r\n                    Prohibited Uses\r\n                  </CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <ul className=\"space-y-2 text-sm\">\r\n                    <li className=\"flex items-start gap-2\">\r\n                      <div className=\"w-1.5 h-1.5 rounded-full bg-red-500 mt-1.5 flex-shrink-0\" />\r\n                      <span>Claiming our content as your own</span>\r\n                    </li>\r\n                    <li className=\"flex items-start gap-2\">\r\n                      <div className=\"w-1.5 h-1.5 rounded-full bg-red-500 mt-1.5 flex-shrink-0\" />\r\n                      <span>Modifying our logo or brand colors</span>\r\n                    </li>\r\n                    <li className=\"flex items-start gap-2\">\r\n                      <div className=\"w-1.5 h-1.5 rounded-full bg-red-500 mt-1.5 flex-shrink-0\" />\r\n                      <span>Commercial use without permission</span>\r\n                    </li>\r\n                    <li className=\"flex items-start gap-2\">\r\n                      <div className=\"w-1.5 h-1.5 rounded-full bg-red-500 mt-1.5 flex-shrink-0\" />\r\n                      <span>Creating confusing derivative works</span>\r\n                    </li>\r\n                    <li className=\"flex items-start gap-2\">\r\n                      <div className=\"w-1.5 h-1.5 rounded-full bg-red-500 mt-1.5 flex-shrink-0\" />\r\n                      <span>Misrepresenting our brand or values</span>\r\n                    </li>\r\n                  </ul>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Contact */}\r\n          <div>\r\n            <Card className=\"bg-gradient-to-br from-primary/10 to-accent/10 border-primary/20\">\r\n              <CardContent className=\"p-12 text-center\">\r\n                <Palette className=\"h-12 w-12 mx-auto mb-4 text-primary\" />\r\n                <h2 className=\"font-serif text-3xl font-semibold mb-4\">Need Something Else?</h2>\r\n                <p className=\"text-muted-foreground mb-8 max-w-2xl mx-auto\">\r\n                  Looking for high-resolution files, additional formats, custom assets, or have questions about usage? \r\n                  We're happy to help!\r\n                </p>\r\n                <div className=\"flex flex-wrap justify-center gap-4\">\r\n                  <Button \r\n                    size=\"lg\"\r\n                    onClick={() => window.location.href = `mailto:${socialLinksData.email}?subject=Press Kit Request`}\r\n                    data-testid=\"button-contact-press\"\r\n                  >\r\n                    <Mail className=\"mr-2 h-5 w-5\" />\r\n                    Contact Press Team\r\n                  </Button>\r\n                  <Button \r\n                    size=\"lg\"\r\n                    variant=\"outline\"\r\n                    onClick={() => window.location.href = '/sponsors'}\r\n                    data-testid=\"button-view-sponsors\"\r\n                  >\r\n                    View Sponsorship Opportunities\r\n                  </Button>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </div>\r\n      </main>\r\n      \r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\pages\\Privacy.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\pages\\Shop.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":128,"column":19,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[8939,9170],"text":"\r\n                We&apos;re incredibly grateful for your support! Whether you purchase merchandise, join our Patreon, make a donation, or become a sponsor, you're helping us continue our adventures in Aneria and beyond.\r\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[8939,9170],"text":"\r\n                We&lsquo;re incredibly grateful for your support! Whether you purchase merchandise, join our Patreon, make a donation, or become a sponsor, you're helping us continue our adventures in Aneria and beyond.\r\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[8939,9170],"text":"\r\n                We&#39;re incredibly grateful for your support! Whether you purchase merchandise, join our Patreon, make a donation, or become a sponsor, you're helping us continue our adventures in Aneria and beyond.\r\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[8939,9170],"text":"\r\n                We&rsquo;re incredibly grateful for your support! Whether you purchase merchandise, join our Patreon, make a donation, or become a sponsor, you're helping us continue our adventures in Aneria and beyond.\r\n              "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":128,"column":154,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[8939,9170],"text":"\r\n                We're incredibly grateful for your support! Whether you purchase merchandise, join our Patreon, make a donation, or become a sponsor, you&apos;re helping us continue our adventures in Aneria and beyond.\r\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[8939,9170],"text":"\r\n                We're incredibly grateful for your support! Whether you purchase merchandise, join our Patreon, make a donation, or become a sponsor, you&lsquo;re helping us continue our adventures in Aneria and beyond.\r\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[8939,9170],"text":"\r\n                We're incredibly grateful for your support! Whether you purchase merchandise, join our Patreon, make a donation, or become a sponsor, you&#39;re helping us continue our adventures in Aneria and beyond.\r\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[8939,9170],"text":"\r\n                We're incredibly grateful for your support! Whether you purchase merchandise, join our Patreon, make a donation, or become a sponsor, you&rsquo;re helping us continue our adventures in Aneria and beyond.\r\n              "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Footer from \"@/components/Footer\";\r\nimport Navigation from \"@/components/Navigation\";\r\nimport PrintfulShop from \"@/components/PrintfulShop\";\r\nimport SEO from \"@/components/SEO\";\r\n\r\nexport default function Shop() {\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <SEO\r\n        title=\"Official Merchandise & Support - Tales of Aneria Shop\"\r\n        description=\"Shop exclusive Tales of Aneria merchandise, support us on Patreon, make a donation, or become a sponsor. High-quality apparel, accessories, and collectibles from our epic TTRPG adventures. Every purchase supports the show!\"\r\n        canonical=\"https://talesofaneria.com/shop\"\r\n        keywords=\"Tales of Aneria merchandise, TTRPG merch, D&D apparel, fantasy merchandise, Aneria shop, support TTRPG, Patreon, donate to actual play, sponsor TTRPG show\"\r\n      />\r\n      <Navigation />\r\n      \r\n      <main className=\"pt-16\">\r\n        {/* Hero Section */}\r\n        <section className=\"py-20 lg:py-32 bg-card border-b border-border\">\r\n          <div className=\"max-w-7xl mx-auto px-6 lg:px-8\">\r\n            <div className=\"text-center mb-12\">\r\n              <h1 className=\"font-serif text-4xl md:text-5xl lg:text-6xl font-semibold mb-6\" data-testid=\"text-shop-title\">\r\n                Official Merchandise\r\n              </h1>\r\n              <p className=\"text-lg md:text-xl text-muted-foreground max-w-3xl mx-auto\" data-testid=\"text-shop-description\">\r\n                Explore our exclusive collection of Tales of Aneria merchandise. From apparel featuring your favorite characters to collectibles that celebrate our epic adventures, each item helps support the show and brings the world of Aneria into your everyday life.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        {/* Shop Section */}\r\n        <section id=\"products\" className=\"py-20 lg:py-32 bg-background\">\r\n          <div className=\"max-w-7xl mx-auto px-6 lg:px-8\">\r\n            <PrintfulShop enableCheckout={true} />\r\n          </div>\r\n        </section>\r\n\r\n        {/* Support Section */}\r\n        <section className=\"py-20 lg:py-32 bg-card\">\r\n          <div className=\"max-w-7xl mx-auto px-6 lg:px-8\">\r\n            <div className=\"text-center mb-16\">\r\n              <h2 className=\"font-serif text-3xl md:text-4xl font-semibold mb-6\">\r\n                More Ways to Support Tales of Aneria\r\n              </h2>\r\n              <p className=\"text-lg text-muted-foreground max-w-3xl mx-auto\">\r\n                Every purchase, donation, and subscription directly supports the production of Tales of Aneria. Your support helps us create more epic adventures, improve production quality, and bring you the content you love!\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12\">\r\n              {/* Patreon */}\r\n              <div className=\"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm hover-elevate transition-all\">\r\n                <div className=\"p-8 text-center\">\r\n                  <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 text-primary mb-4\">\r\n                    <svg stroke=\"currentColor\" fill=\"currentColor\" strokeWidth=\"0\" role=\"img\" viewBox=\"0 0 24 24\" className=\"h-8 w-8\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                      <path d=\"M22.957 7.21c-.004-3.064-2.391-5.576-5.191-6.482-3.478-1.125-8.064-.962-11.384.604C2.357 3.231 1.093 7.391 1.046 11.54c-.039 3.411.302 12.396 5.369 12.46 3.765.047 4.326-4.804 6.068-7.141 1.24-1.662 2.836-2.132 4.801-2.618 3.376-.836 5.678-3.501 5.673-7.031Z\"></path>\r\n                    </svg>\r\n                  </div>\r\n                  <h3 className=\"font-serif text-2xl font-semibold mb-3\">Become a Patron</h3>\r\n                  <p className=\"text-muted-foreground mb-6\">\r\n                    Join our Patreon for exclusive content, early access to episodes, behind-the-scenes footage, and special perks for supporters.\r\n                  </p>\r\n                  <a \r\n                    href=\"https://www.patreon.com/TalesofAneria\" \r\n                    target=\"_blank\" \r\n                    rel=\"noopener noreferrer\"\r\n                    className=\"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2 bg-primary text-primary-foreground border border-primary-border min-h-10 rounded-md px-8 w-full\"\r\n                  >\r\n                    Join Patreon\r\n                  </a>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Direct Donations */}\r\n              <div className=\"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm hover-elevate transition-all\">\r\n                <div className=\"p-8 text-center\">\r\n                  <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 text-primary mb-4\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"h-8 w-8\">\r\n                      <path d=\"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\"></path>\r\n                    </svg>\r\n                  </div>\r\n                  <h3 className=\"font-serif text-2xl font-semibold mb-3\">One-Time Donation</h3>\r\n                  <p className=\"text-muted-foreground mb-6\">\r\n                    Make a direct one-time donation to support the show. Every contribution helps us continue creating epic TTRPG content.\r\n                  </p>\r\n                  <a \r\n                    href={import.meta.env.VITE_STRIPE_DONATION_URL || \"https://www.patreon.com/TalesofAneria\"} \r\n                    target=\"_blank\" \r\n                    rel=\"noopener noreferrer\"\r\n                    className=\"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2 bg-primary text-primary-foreground border border-primary-border min-h-10 rounded-md px-8 w-full\"\r\n                  >\r\n                    Make a Donation\r\n                  </a>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Sponsorship */}\r\n              <div className=\"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm hover-elevate transition-all\">\r\n                <div className=\"p-8 text-center\">\r\n                  <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 text-primary mb-4\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"h-8 w-8\">\r\n                      <path d=\"M6 9H4.5a2.5 2.5 0 0 1 0-5H6\"></path>\r\n                      <path d=\"M18 9h1.5a2.5 2.5 0 0 0 0-5H18\"></path>\r\n                      <path d=\"M4 22h16\"></path>\r\n                      <path d=\"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22\"></path>\r\n                      <path d=\"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22\"></path>\r\n                      <path d=\"M18 2H6v7a6 6 0 0 0 12 0V2Z\"></path>\r\n                    </svg>\r\n                  </div>\r\n                  <h3 className=\"font-serif text-2xl font-semibold mb-3\">Become a Sponsor</h3>\r\n                  <p className=\"text-muted-foreground mb-6\">\r\n                    Partner with Tales of Aneria through sponsorship opportunities. Reach our engaged TTRPG community while supporting quality content.\r\n                  </p>\r\n                  <a \r\n                    href=\"/sponsors\"\r\n                    className=\"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2 bg-primary text-primary-foreground border border-primary-border min-h-10 rounded-md px-8 w-full\"\r\n                  >\r\n                    Learn About Sponsorship\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Thank You Message */}\r\n            <div className=\"text-center max-w-3xl mx-auto\">\r\n              <p className=\"text-lg text-muted-foreground mb-6\">\r\n                We're incredibly grateful for your support! Whether you purchase merchandise, join our Patreon, make a donation, or become a sponsor, you're helping us continue our adventures in Aneria and beyond.\r\n              </p>\r\n              <a href=\"/#about\" className=\"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2 border [border-color:var(--button-outline)] shadow-xs active:shadow-none min-h-10 rounded-md px-8\">\r\n                Learn More About Tales of Aneria\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\pages\\Sponsors.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":144,"column":23,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6188,6423],"text":"\r\n                    We&apos;re currently looking for partners who share our passion for storytelling and the TTRPG community. \r\n                    Be among the first to support our journey and gain exclusive benefits.\r\n                  "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6188,6423],"text":"\r\n                    We&lsquo;re currently looking for partners who share our passion for storytelling and the TTRPG community. \r\n                    Be among the first to support our journey and gain exclusive benefits.\r\n                  "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6188,6423],"text":"\r\n                    We&#39;re currently looking for partners who share our passion for storytelling and the TTRPG community. \r\n                    Be among the first to support our journey and gain exclusive benefits.\r\n                  "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6188,6423],"text":"\r\n                    We&rsquo;re currently looking for partners who share our passion for storytelling and the TTRPG community. \r\n                    Be among the first to support our journey and gain exclusive benefits.\r\n                  "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Heart, Mail, TrendingUp, Users, Sparkles } from \"lucide-react\";\r\n\r\nimport Footer from \"@/components/Footer\";\r\nimport Navigation from \"@/components/Navigation\";\r\nimport SEO from \"@/components/SEO\";\r\nimport { SponsorshipForm } from \"@/components/SponsorshipForm\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport socialLinksData from \"@/data/social-links.json\";\r\nimport { getBreadcrumbSchema } from \"@/lib/structuredData\";\r\n\r\nexport default function Sponsors() {\r\n  const breadcrumbData = getBreadcrumbSchema([\r\n    { name: \"Home\", url: \"https://talesofaneria.com/\" },\r\n    { name: \"Sponsors\", url: \"https://talesofaneria.com/sponsors\" }\r\n  ]);\r\n\r\n  const sponsorTiers = [\r\n    {\r\n      name: \"Platinum Sponsor\",\r\n      icon: <Sparkles className=\"h-8 w-8\" />,\r\n      description: \"Premium sponsorship with maximum visibility and benefits\",\r\n      benefits: [\r\n        \"Logo featured on every episode and video description\",\r\n        \"30-second dedicated sponsor segment in each episode\",\r\n        \"Premium placement on website homepage\",\r\n        \"Monthly social media shoutouts across all platforms\",\r\n        \"Exclusive behind-the-scenes content and access\",\r\n        \"Custom integration opportunities in campaigns\",\r\n        \"Quarterly strategy meetings with the team\"\r\n      ],\r\n      color: \"text-purple-500\"\r\n    },\r\n    {\r\n      name: \"Gold Sponsor\",\r\n      icon: <TrendingUp className=\"h-8 w-8\" />,\r\n      description: \"Strong brand presence with excellent exposure\",\r\n      benefits: [\r\n        \"Logo in video descriptions and end cards\",\r\n        \"Featured on website sponsors page\",\r\n        \"Regular social media mentions\",\r\n        \"Access to exclusive content\",\r\n        \"Custom sponsorship messages\",\r\n        \"Bi-annual check-ins with the team\"\r\n      ],\r\n      color: \"text-amber-500\"\r\n    },\r\n    {\r\n      name: \"Silver Sponsor\",\r\n      icon: <Users className=\"h-8 w-8\" />,\r\n      description: \"Great visibility and community engagement\",\r\n      benefits: [\r\n        \"Logo on website sponsors page\",\r\n        \"Mentioned in quarterly sponsor roundups\",\r\n        \"Social media thank you posts\",\r\n        \"Access to patron-only content\",\r\n        \"Early access to announcements\"\r\n      ],\r\n      color: \"text-slate-400\"\r\n    }\r\n  ];\r\n\r\n  interface Sponsor {\r\n    name: string;\r\n    tier: string;\r\n    logo: string;\r\n    website: string;\r\n  }\r\n\r\n  const currentSponsors: Sponsor[] = [\r\n    // Add actual sponsors here as they come in\r\n    // Example:\r\n    // {\r\n    //   name: \"Sponsor Company\",\r\n    //   tier: \"Platinum\",\r\n    //   logo: \"/sponsors/company-logo.png\",\r\n    //   website: \"https://example.com\"\r\n    // }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <SEO\r\n        title=\"Sponsors & Partners - Tales of Aneria\"\r\n        description=\"Support Tales of Aneria and reach our passionate TTRPG community. Explore sponsorship opportunities and learn about our current partners and supporters.\"\r\n        canonical=\"https://talesofaneria.com/sponsors\"\r\n        keywords=\"sponsorship, partners, TTRPG sponsors, D&D sponsors, podcast sponsorship, YouTube sponsorship, brand partnership\"\r\n        jsonLd={breadcrumbData}\r\n      />\r\n      <Navigation />\r\n      \r\n      <main className=\"pt-24 pb-20\">\r\n        <div className=\"max-w-7xl mx-auto px-6 lg:px-8\">\r\n          {/* Header */}\r\n          <div className=\"text-center mb-16\">\r\n            <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 text-primary mb-6\">\r\n              <Heart className=\"h-8 w-8\" />\r\n            </div>\r\n            <h1 className=\"font-serif text-4xl md:text-5xl font-semibold mb-6\" data-testid=\"text-sponsors-title\">\r\n              Sponsors & Partners\r\n            </h1>\r\n            <p className=\"text-lg text-muted-foreground max-w-3xl mx-auto\" data-testid=\"text-sponsors-description\">\r\n              Help us continue creating epic adventures and reach a passionate community of TTRPG enthusiasts. \r\n              Our sponsors make it possible to bring high-quality content to our audience every week.\r\n            </p>\r\n          </div>\r\n\r\n          {/* Current Sponsors Section */}\r\n          {currentSponsors.length > 0 ? (\r\n            <div className=\"mb-20\">\r\n              <h2 className=\"font-serif text-3xl font-semibold mb-8 text-center\">Our Amazing Sponsors</h2>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                {currentSponsors.map((sponsor, index) => (\r\n                  <Card key={index} className=\"hover-elevate cursor-pointer\" data-testid={`card-sponsor-${index}`}>\r\n                    <CardContent className=\"p-6 flex flex-col items-center text-center\">\r\n                      <img \r\n                        src={sponsor.logo} \r\n                        alt={`${sponsor.name} logo`}\r\n                        className=\"h-20 w-auto mb-4 object-contain\"\r\n                      />\r\n                      <h3 className=\"font-semibold text-lg mb-2\">{sponsor.name}</h3>\r\n                      <Badge variant=\"outline\" className=\"mb-4\">{sponsor.tier} Sponsor</Badge>\r\n                      <Button \r\n                        variant=\"outline\" \r\n                        size=\"sm\"\r\n                        onClick={() => window.open(sponsor.website, '_blank', 'noopener,noreferrer')}\r\n                        data-testid={`button-sponsor-website-${index}`}\r\n                      >\r\n                        Visit Website\r\n                      </Button>\r\n                    </CardContent>\r\n                  </Card>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"mb-20\">\r\n              <Card className=\"border-dashed\">\r\n                <CardContent className=\"p-12 text-center\">\r\n                  <Heart className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground\" />\r\n                  <h3 className=\"font-serif text-2xl font-semibold mb-3\">Become Our First Sponsor!</h3>\r\n                  <p className=\"text-muted-foreground mb-6 max-w-2xl mx-auto\">\r\n                    We're currently looking for partners who share our passion for storytelling and the TTRPG community. \r\n                    Be among the first to support our journey and gain exclusive benefits.\r\n                  </p>\r\n                  <Button \r\n                    size=\"lg\"\r\n                    onClick={() => window.location.href = `mailto:${socialLinksData.email}?subject=Sponsorship Inquiry`}\r\n                    data-testid=\"button-become-sponsor\"\r\n                  >\r\n                    <Mail className=\"mr-2 h-5 w-5\" />\r\n                    Inquire About Sponsorship\r\n                  </Button>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          )}\r\n\r\n          {/* Sponsorship Tiers */}\r\n          <div className=\"mb-20\">\r\n            <h2 className=\"font-serif text-3xl font-semibold mb-4 text-center\">Sponsorship Opportunities</h2>\r\n            <p className=\"text-muted-foreground text-center mb-12 max-w-2xl mx-auto\">\r\n              Choose the sponsorship tier that best fits your marketing goals and budget. All tiers include authentic \r\n              integration with our content and genuine engagement with our community.\r\n            </p>\r\n            \r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n              {sponsorTiers.map((tier, index) => (\r\n                <Card key={index} className=\"hover-elevate\" data-testid={`card-tier-${tier.name.toLowerCase().replace(/\\s+/g, '-')}`}>\r\n                  <CardHeader>\r\n                    <div className={`mb-4 ${tier.color}`}>\r\n                      {tier.icon}\r\n                    </div>\r\n                    <CardTitle className=\"font-serif text-2xl mb-2\">{tier.name}</CardTitle>\r\n                    <p className=\"text-sm text-muted-foreground\">{tier.description}</p>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <ul className=\"space-y-3 mb-6\">\r\n                      {tier.benefits.map((benefit, benefitIndex) => (\r\n                        <li key={benefitIndex} className=\"flex items-start gap-2 text-sm\">\r\n                          <div className=\"w-1.5 h-1.5 rounded-full bg-primary mt-1.5 flex-shrink-0\" />\r\n                          <span>{benefit}</span>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                    <Button \r\n                      variant=\"outline\" \r\n                      className=\"w-full\"\r\n                      onClick={() => {\r\n                        const subject = encodeURIComponent(`${tier.name} Sponsorship Inquiry - Tales of Aneria`);\r\n                        const body = encodeURIComponent(`Hi Tales of Aneria team,\\n\\nI'm interested in learning more about the ${tier.name} sponsorship opportunity.\\n\\nPlease send me more information about:\\n- Pricing and availability\\n- Detailed analytics and audience demographics\\n- Customization options\\n- Next steps\\n\\nLooking forward to hearing from you!\\n\\nBest regards`);\r\n                        window.location.href = `mailto:${socialLinksData.email}?subject=${subject}&body=${body}`;\r\n                      }}\r\n                      data-testid={`button-inquire-${tier.name.toLowerCase().replace(/\\s+/g, '-')}`}\r\n                    >\r\n                      <Mail className=\"mr-2 h-4 w-4\" />\r\n                      Inquire About {tier.name}\r\n                    </Button>\r\n                  </CardContent>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n            <p className=\"text-sm text-muted-foreground text-center mt-6\">\r\n              Custom packages available. Contact us to discuss your specific needs.\r\n            </p>\r\n          </div>\r\n\r\n          {/* Audience Metrics */}\r\n          <div className=\"mb-20\">\r\n            <h2 className=\"font-serif text-3xl font-semibold mb-8 text-center\">Our Community & Reach</h2>\r\n            <p className=\"text-muted-foreground text-center mb-8 max-w-2xl mx-auto\">\r\n              Connect with a highly engaged TTRPG community across multiple platforms\r\n            </p>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n              <Card>\r\n                <CardContent className=\"p-6 text-center\">\r\n                  <div className=\"text-3xl font-bold text-primary mb-2\" data-testid=\"text-metric-youtube\">Multi-Platform</div>\r\n                  <p className=\"text-sm text-muted-foreground\">YouTube, Podcast, Social</p>\r\n                </CardContent>\r\n              </Card>\r\n              <Card>\r\n                <CardContent className=\"p-6 text-center\">\r\n                  <div className=\"text-3xl font-bold text-primary mb-2\" data-testid=\"text-metric-episodes\">Weekly</div>\r\n                  <p className=\"text-sm text-muted-foreground\">Consistent Content</p>\r\n                </CardContent>\r\n              </Card>\r\n              <Card>\r\n                <CardContent className=\"p-6 text-center\">\r\n                  <div className=\"text-3xl font-bold text-primary mb-2\" data-testid=\"text-metric-community\">High</div>\r\n                  <p className=\"text-sm text-muted-foreground\">Engagement Rate</p>\r\n                </CardContent>\r\n              </Card>\r\n              <Card>\r\n                <CardContent className=\"p-6 text-center\">\r\n                  <div className=\"text-3xl font-bold text-primary mb-2\" data-testid=\"text-metric-platforms\">Global</div>\r\n                  <p className=\"text-sm text-muted-foreground\">Audience Reach</p>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n            <p className=\"text-sm text-muted-foreground text-center mt-4\">\r\n              Contact us for detailed analytics and audience demographics\r\n            </p>\r\n          </div>\r\n\r\n          {/* Why Partner With Us */}\r\n          <div className=\"mb-20\">\r\n            <h2 className=\"font-serif text-3xl font-semibold mb-8 text-center\">Why Partner With Us?</h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-xl\">Authentic Integration</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <p className=\"text-muted-foreground\">\r\n                    We only partner with brands that align with our values and resonate with our audience. \r\n                    Your sponsorship is integrated naturally into our content, never forced or disruptive.\r\n                  </p>\r\n                </CardContent>\r\n              </Card>\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-xl\">Passionate Audience</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <p className=\"text-muted-foreground\">\r\n                    Our community is highly engaged and supportive. TTRPG fans are known for their loyalty \r\n                    and enthusiasm, making them ideal customers for the right products and services.\r\n                  </p>\r\n                </CardContent>\r\n              </Card>\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-xl\">Multi-Platform Reach</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <p className=\"text-muted-foreground\">\r\n                    Your brand gains exposure across YouTube, podcast platforms, social media, and our website. \r\n                    We maximize your visibility across all our channels.\r\n                  </p>\r\n                </CardContent>\r\n              </Card>\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-xl\">Transparent Reporting</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <p className=\"text-muted-foreground\">\r\n                    We provide regular analytics and insights about your sponsorship performance, including \r\n                    reach, engagement, and audience feedback to measure your ROI.\r\n                  </p>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Target Audience & Ideal Sponsors */}\r\n          <div className=\"mb-20\">\r\n            <h2 className=\"font-serif text-3xl font-semibold mb-8 text-center\">Perfect For These Brands</h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <Card className=\"bg-gradient-to-br from-primary/5 to-transparent\">\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-lg\">Gaming & Entertainment</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n                    <li> TTRPG publishers & game designers</li>\r\n                    <li> Dice makers & gaming accessories</li>\r\n                    <li> Virtual tabletop platforms</li>\r\n                    <li> Board game companies</li>\r\n                  </ul>\r\n                </CardContent>\r\n              </Card>\r\n              <Card className=\"bg-gradient-to-br from-primary/5 to-transparent\">\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-lg\">Lifestyle & Services</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n                    <li> Subscription boxes & services</li>\r\n                    <li> Online education platforms</li>\r\n                    <li> Creative software & tools</li>\r\n                    <li> Apparel & merchandise brands</li>\r\n                  </ul>\r\n                </CardContent>\r\n              </Card>\r\n              <Card className=\"bg-gradient-to-br from-primary/5 to-transparent\">\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-lg\">Community & Tech</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n                    <li> Discord bots & community tools</li>\r\n                    <li> Streaming equipment & tech</li>\r\n                    <li> Audio/video production tools</li>\r\n                    <li> Fan art & commission platforms</li>\r\n                  </ul>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          </div>\r\n\r\n          {/* CTA */}\r\n          <div>\r\n            <div className=\"text-center mb-12\">\r\n              <h2 className=\"font-serif text-3xl font-semibold mb-4\">Ready to Partner With Us?</h2>\r\n              <p className=\"text-muted-foreground text-lg max-w-2xl mx-auto\">\r\n                Join our growing list of sponsors and reach an engaged, passionate audience of TTRPG enthusiasts. \r\n                Let&apos;s create something amazing together!\r\n              </p>\r\n            </div>\r\n            \r\n            <SponsorshipForm />\r\n            \r\n            <div className=\"text-center mt-8\">\r\n              <Button \r\n                size=\"lg\"\r\n                variant=\"outline\"\r\n                onClick={() => window.location.href = '/press-kit'}\r\n                data-testid=\"button-press-kit\"\r\n              >\r\n                Download Press Kit\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n      \r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\pages\\TermsOfService.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":38,"column":71,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1491,1751],"text":"\r\n                  Welcome to Tales of Aneria. These Terms of Service (&quot;Terms\") govern your access to and use of our website, \r\n                  content, and services. By accessing or using our website, you agree to be bound by these Terms.\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1491,1751],"text":"\r\n                  Welcome to Tales of Aneria. These Terms of Service (&ldquo;Terms\") govern your access to and use of our website, \r\n                  content, and services. By accessing or using our website, you agree to be bound by these Terms.\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1491,1751],"text":"\r\n                  Welcome to Tales of Aneria. These Terms of Service (&#34;Terms\") govern your access to and use of our website, \r\n                  content, and services. By accessing or using our website, you agree to be bound by these Terms.\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1491,1751],"text":"\r\n                  Welcome to Tales of Aneria. These Terms of Service (&rdquo;Terms\") govern your access to and use of our website, \r\n                  content, and services. By accessing or using our website, you agree to be bound by these Terms.\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":38,"column":77,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1491,1751],"text":"\r\n                  Welcome to Tales of Aneria. These Terms of Service (\"Terms&quot;) govern your access to and use of our website, \r\n                  content, and services. By accessing or using our website, you agree to be bound by these Terms.\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1491,1751],"text":"\r\n                  Welcome to Tales of Aneria. These Terms of Service (\"Terms&ldquo;) govern your access to and use of our website, \r\n                  content, and services. By accessing or using our website, you agree to be bound by these Terms.\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1491,1751],"text":"\r\n                  Welcome to Tales of Aneria. These Terms of Service (\"Terms&#34;) govern your access to and use of our website, \r\n                  content, and services. By accessing or using our website, you agree to be bound by these Terms.\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1491,1751],"text":"\r\n                  Welcome to Tales of Aneria. These Terms of Service (\"Terms&rdquo;) govern your access to and use of our website, \r\n                  content, and services. By accessing or using our website, you agree to be bound by these Terms.\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":59,"column":88,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2578,3037],"text":"\r\n                    All content on this website, including but not limited to text, graphics, logos, images, audio clips, \r\n                    video clips, character descriptions, stories, and other materials (&quot;Content\"), is the property of Tales of Aneria \r\n                    or its content creators and is protected by United States and international copyright, trademark, and other \r\n                    intellectual property laws.\r\n                  "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2578,3037],"text":"\r\n                    All content on this website, including but not limited to text, graphics, logos, images, audio clips, \r\n                    video clips, character descriptions, stories, and other materials (&ldquo;Content\"), is the property of Tales of Aneria \r\n                    or its content creators and is protected by United States and international copyright, trademark, and other \r\n                    intellectual property laws.\r\n                  "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2578,3037],"text":"\r\n                    All content on this website, including but not limited to text, graphics, logos, images, audio clips, \r\n                    video clips, character descriptions, stories, and other materials (&#34;Content\"), is the property of Tales of Aneria \r\n                    or its content creators and is protected by United States and international copyright, trademark, and other \r\n                    intellectual property laws.\r\n                  "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2578,3037],"text":"\r\n                    All content on this website, including but not limited to text, graphics, logos, images, audio clips, \r\n                    video clips, character descriptions, stories, and other materials (&rdquo;Content\"), is the property of Tales of Aneria \r\n                    or its content creators and is protected by United States and international copyright, trademark, and other \r\n                    intellectual property laws.\r\n                  "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":59,"column":96,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2578,3037],"text":"\r\n                    All content on this website, including but not limited to text, graphics, logos, images, audio clips, \r\n                    video clips, character descriptions, stories, and other materials (\"Content&quot;), is the property of Tales of Aneria \r\n                    or its content creators and is protected by United States and international copyright, trademark, and other \r\n                    intellectual property laws.\r\n                  "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2578,3037],"text":"\r\n                    All content on this website, including but not limited to text, graphics, logos, images, audio clips, \r\n                    video clips, character descriptions, stories, and other materials (\"Content&ldquo;), is the property of Tales of Aneria \r\n                    or its content creators and is protected by United States and international copyright, trademark, and other \r\n                    intellectual property laws.\r\n                  "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2578,3037],"text":"\r\n                    All content on this website, including but not limited to text, graphics, logos, images, audio clips, \r\n                    video clips, character descriptions, stories, and other materials (\"Content&#34;), is the property of Tales of Aneria \r\n                    or its content creators and is protected by United States and international copyright, trademark, and other \r\n                    intellectual property laws.\r\n                  "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2578,3037],"text":"\r\n                    All content on this website, including but not limited to text, graphics, logos, images, audio clips, \r\n                    video clips, character descriptions, stories, and other materials (\"Content&rdquo;), is the property of Tales of Aneria \r\n                    or its content creators and is protected by United States and international copyright, trademark, and other \r\n                    intellectual property laws.\r\n                  "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":114,"column":71,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6004,6080],"text":"Attempt to interfere with or disrupt the website&apos;s functionality or security"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6004,6080],"text":"Attempt to interfere with or disrupt the website&lsquo;s functionality or security"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6004,6080],"text":"Attempt to interfere with or disrupt the website&#39;s functionality or security"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6004,6080],"text":"Attempt to interfere with or disrupt the website&rsquo;s functionality or security"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":200,"column":75,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[10919,10995],"text":"Refund policies are governed by the payment platform&apos;s terms (Patreon, etc.)"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[10919,10995],"text":"Refund policies are governed by the payment platform&lsquo;s terms (Patreon, etc.)"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[10919,10995],"text":"Refund policies are governed by the payment platform&#39;s terms (Patreon, etc.)"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[10919,10995],"text":"Refund policies are governed by the payment platform&rsquo;s terms (Patreon, etc.)"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":220,"column":89,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[12017,12094],"text":"Returns, refunds, and customer service are subject to the platform&apos;s policies"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[12017,12094],"text":"Returns, refunds, and customer service are subject to the platform&lsquo;s policies"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[12017,12094],"text":"Returns, refunds, and customer service are subject to the platform&#39;s policies"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[12017,12094],"text":"Returns, refunds, and customer service are subject to the platform&rsquo;s policies"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":237,"column":58,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[12893,13212],"text":"\r\n                    OUR WEBSITE AND CONTENT ARE PROVIDED &quot;AS IS\" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. \r\n                    WE DISCLAIM ALL WARRANTIES, INCLUDING BUT NOT LIMITED TO MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, \r\n                    AND NON-INFRINGEMENT.\r\n                  "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[12893,13212],"text":"\r\n                    OUR WEBSITE AND CONTENT ARE PROVIDED &ldquo;AS IS\" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. \r\n                    WE DISCLAIM ALL WARRANTIES, INCLUDING BUT NOT LIMITED TO MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, \r\n                    AND NON-INFRINGEMENT.\r\n                  "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[12893,13212],"text":"\r\n                    OUR WEBSITE AND CONTENT ARE PROVIDED &#34;AS IS\" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. \r\n                    WE DISCLAIM ALL WARRANTIES, INCLUDING BUT NOT LIMITED TO MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, \r\n                    AND NON-INFRINGEMENT.\r\n                  "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[12893,13212],"text":"\r\n                    OUR WEBSITE AND CONTENT ARE PROVIDED &rdquo;AS IS\" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. \r\n                    WE DISCLAIM ALL WARRANTIES, INCLUDING BUT NOT LIMITED TO MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, \r\n                    AND NON-INFRINGEMENT.\r\n                  "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":237,"column":64,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[12893,13212],"text":"\r\n                    OUR WEBSITE AND CONTENT ARE PROVIDED \"AS IS&quot; WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. \r\n                    WE DISCLAIM ALL WARRANTIES, INCLUDING BUT NOT LIMITED TO MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, \r\n                    AND NON-INFRINGEMENT.\r\n                  "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[12893,13212],"text":"\r\n                    OUR WEBSITE AND CONTENT ARE PROVIDED \"AS IS&ldquo; WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. \r\n                    WE DISCLAIM ALL WARRANTIES, INCLUDING BUT NOT LIMITED TO MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, \r\n                    AND NON-INFRINGEMENT.\r\n                  "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[12893,13212],"text":"\r\n                    OUR WEBSITE AND CONTENT ARE PROVIDED \"AS IS&#34; WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. \r\n                    WE DISCLAIM ALL WARRANTIES, INCLUDING BUT NOT LIMITED TO MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, \r\n                    AND NON-INFRINGEMENT.\r\n                  "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[12893,13212],"text":"\r\n                    OUR WEBSITE AND CONTENT ARE PROVIDED \"AS IS&rdquo; WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. \r\n                    WE DISCLAIM ALL WARRANTIES, INCLUDING BUT NOT LIMITED TO MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, \r\n                    AND NON-INFRINGEMENT.\r\n                  "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":347,"column":23,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[18901,19218],"text":"\r\n                  We reserve the right to modify these Terms of Service at any time. When we make changes, we will update \r\n                  the &quot;Last Updated\" date at the top of this page. Significant changes will be communicated through our \r\n                  website or social media channels.\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[18901,19218],"text":"\r\n                  We reserve the right to modify these Terms of Service at any time. When we make changes, we will update \r\n                  the &ldquo;Last Updated\" date at the top of this page. Significant changes will be communicated through our \r\n                  website or social media channels.\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[18901,19218],"text":"\r\n                  We reserve the right to modify these Terms of Service at any time. When we make changes, we will update \r\n                  the &#34;Last Updated\" date at the top of this page. Significant changes will be communicated through our \r\n                  website or social media channels.\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[18901,19218],"text":"\r\n                  We reserve the right to modify these Terms of Service at any time. When we make changes, we will update \r\n                  the &rdquo;Last Updated\" date at the top of this page. Significant changes will be communicated through our \r\n                  website or social media channels.\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":1,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":347,"column":36,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[18901,19218],"text":"\r\n                  We reserve the right to modify these Terms of Service at any time. When we make changes, we will update \r\n                  the \"Last Updated&quot; date at the top of this page. Significant changes will be communicated through our \r\n                  website or social media channels.\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[18901,19218],"text":"\r\n                  We reserve the right to modify these Terms of Service at any time. When we make changes, we will update \r\n                  the \"Last Updated&ldquo; date at the top of this page. Significant changes will be communicated through our \r\n                  website or social media channels.\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[18901,19218],"text":"\r\n                  We reserve the right to modify these Terms of Service at any time. When we make changes, we will update \r\n                  the \"Last Updated&#34; date at the top of this page. Significant changes will be communicated through our \r\n                  website or social media channels.\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[18901,19218],"text":"\r\n                  We reserve the right to modify these Terms of Service at any time. When we make changes, we will update \r\n                  the \"Last Updated&rdquo; date at the top of this page. Significant changes will be communicated through our \r\n                  website or social media channels.\r\n                "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Footer from \"@/components/Footer\";\r\nimport Navigation from \"@/components/Navigation\";\r\nimport SEO from \"@/components/SEO\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\n\r\nexport default function TermsOfService() {\r\n  const lastUpdated = \"October 21, 2025\";\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <SEO\r\n        title=\"Terms of Service - Tales of Aneria\"\r\n        description=\"Read the Terms of Service for Tales of Aneria. Learn about intellectual property rights, user conduct, disclaimers, and legal agreements governing website use.\"\r\n        canonical=\"https://talesofaneria.com/legal/tos\"\r\n        noindex={true}\r\n      />\r\n      <Navigation />\r\n      \r\n      <main className=\"pt-24 pb-20\">\r\n        <div className=\"max-w-4xl mx-auto px-6 lg:px-8\">\r\n          <div className=\"mb-12\">\r\n            <h1 className=\"font-serif text-4xl md:text-5xl font-semibold mb-4\" data-testid=\"text-tos-title\">\r\n              Terms of Service\r\n            </h1>\r\n            <p className=\"text-muted-foreground\">\r\n              Last Updated: {lastUpdated}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"space-y-8\">\r\n            {/* Introduction */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"font-serif text-2xl\">Agreement to Terms</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 text-muted-foreground\">\r\n                <p>\r\n                  Welcome to Tales of Aneria. These Terms of Service (\"Terms\") govern your access to and use of our website, \r\n                  content, and services. By accessing or using our website, you agree to be bound by these Terms.\r\n                </p>\r\n                <p>\r\n                  If you do not agree with any part of these Terms, you may not access our website or use our services. \r\n                  We reserve the right to modify these Terms at any time, and your continued use of the website constitutes \r\n                  acceptance of any changes.\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Intellectual Property */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"font-serif text-2xl\">Intellectual Property Rights</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 text-muted-foreground\">\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground mb-2\">Content Ownership</h3>\r\n                  <p>\r\n                    All content on this website, including but not limited to text, graphics, logos, images, audio clips, \r\n                    video clips, character descriptions, stories, and other materials (\"Content\"), is the property of Tales of Aneria \r\n                    or its content creators and is protected by United States and international copyright, trademark, and other \r\n                    intellectual property laws.\r\n                  </p>\r\n                </div>\r\n\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground mb-2\">Dungeons & Dragons Content</h3>\r\n                  <p>\r\n                    Dungeons & Dragons, D&D, D&D Beyond, and related trademarks and content are owned by Wizards of the Coast LLC. \r\n                    Our use of D&D content and character information from D&D Beyond is in accordance with the Fan Content Policy \r\n                    and applicable terms of service. We are not affiliated with, endorsed by, or sponsored by Wizards of the Coast.\r\n                  </p>\r\n                </div>\r\n\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground mb-2\">Original Characters and Stories</h3>\r\n                  <p>\r\n                    Original characters, storylines, and world-building elements created by our cast are the intellectual property \r\n                    of Tales of Aneria and the individual creators. While we utilize the D&D game system, our original narrative \r\n                    content is protected by copyright.\r\n                  </p>\r\n                </div>\r\n\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground mb-2\">Third-Party Content</h3>\r\n                  <p className=\"mb-2\">\r\n                    Our website may display content from third-party services including:\r\n                  </p>\r\n                  <ul className=\"list-disc list-inside space-y-1 ml-4\">\r\n                    <li>YouTube videos and thumbnails</li>\r\n                    <li>D&D Beyond character data and avatars</li>\r\n                    <li>Spotify and YouTube Music playlists</li>\r\n                    <li>Etsy product listings</li>\r\n                    <li>Podcast episode artwork and audio</li>\r\n                  </ul>\r\n                  <p className=\"mt-2\">\r\n                    All third-party content remains the property of its respective owners and is subject to their terms of service.\r\n                  </p>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* User Conduct */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"font-serif text-2xl\">User Conduct and Restrictions</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 text-muted-foreground\">\r\n                <p>When using our website, you agree NOT to:</p>\r\n                <ul className=\"list-disc list-inside space-y-1 ml-4\">\r\n                  <li>Copy, reproduce, distribute, or create derivative works from our content without permission</li>\r\n                  <li>Use our content for commercial purposes without authorization</li>\r\n                  <li>Remove or alter any copyright, trademark, or other proprietary notices</li>\r\n                  <li>Use automated systems (bots, scrapers) to access the website without permission</li>\r\n                  <li>Attempt to interfere with or disrupt the website's functionality or security</li>\r\n                  <li>Engage in any unlawful, harmful, or fraudulent activity</li>\r\n                  <li>Impersonate any person or entity or misrepresent your affiliation</li>\r\n                  <li>Upload or transmit viruses, malware, or other harmful code</li>\r\n                  <li>Violate any applicable laws or regulations</li>\r\n                </ul>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Fan Content Policy */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"font-serif text-2xl\">Fan Content and Community Guidelines</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 text-muted-foreground\">\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground mb-2\">Fan Art and Fan Fiction</h3>\r\n                  <p>\r\n                    We love seeing fan creations inspired by our content! You are welcome to create and share fan art, \r\n                    fan fiction, and other transformative works based on Tales of Aneria, subject to the following conditions:\r\n                  </p>\r\n                  <ul className=\"list-disc list-inside space-y-1 ml-4 mt-2\">\r\n                    <li>Fan works must be non-commercial (you cannot sell fan art without permission)</li>\r\n                    <li>Provide proper attribution to Tales of Aneria</li>\r\n                    <li>Do not imply official endorsement or affiliation</li>\r\n                    <li>Respect the characters and tone of our content</li>\r\n                    <li>Follow community standards and applicable content policies</li>\r\n                  </ul>\r\n                </div>\r\n\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground mb-2\">Commercial Use</h3>\r\n                  <p>\r\n                    If you wish to create commercial products based on Tales of Aneria content (merchandise, publications, etc.), \r\n                    you must obtain written permission from us first. Please contact us to discuss licensing opportunities.\r\n                  </p>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Content and Services */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"font-serif text-2xl\">Content and Services</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 text-muted-foreground\">\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground mb-2\">Availability</h3>\r\n                  <p>\r\n                    We strive to keep our website available at all times, but we do not guarantee uninterrupted access. \r\n                    We may suspend, modify, or discontinue any part of our website or services at any time without notice.\r\n                  </p>\r\n                </div>\r\n\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground mb-2\">Content Accuracy</h3>\r\n                  <p>\r\n                    While we make efforts to ensure accuracy, we do not warrant that content on our website is complete, \r\n                    current, or error-free. Episode information, character data, and other details may change without notice.\r\n                  </p>\r\n                </div>\r\n\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground mb-2\">Third-Party Links</h3>\r\n                  <p>\r\n                    Our website contains links to third-party websites and services (YouTube, Patreon, Etsy, social media platforms, etc.). \r\n                    We are not responsible for the content, privacy policies, or practices of these third-party sites. \r\n                    Your use of third-party services is at your own risk and subject to their terms.\r\n                  </p>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Community and Patreon */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"font-serif text-2xl\">Community Support and Patreon</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 text-muted-foreground\">\r\n                <p>\r\n                  We offer community support through Patreon and other platforms. If you choose to support us financially:\r\n                </p>\r\n                <ul className=\"list-disc list-inside space-y-1 ml-4\">\r\n                  <li>Payments and subscriptions are processed through third-party platforms (Patreon, etc.)</li>\r\n                  <li>Benefits and rewards are subject to change based on our content schedule and availability</li>\r\n                  <li>We reserve the right to modify, suspend, or cancel support tiers at any time</li>\r\n                  <li>Refund policies are governed by the payment platform's terms (Patreon, etc.)</li>\r\n                  <li>Supporters must follow our community guidelines and code of conduct</li>\r\n                </ul>\r\n                <p className=\"mt-4\">\r\n                  We are grateful for all support but cannot guarantee specific outcomes, content schedules, or personalized services.\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Merchandise and Shop */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"font-serif text-2xl\">Merchandise and Purchases</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 text-muted-foreground\">\r\n                <p>\r\n                  We sell merchandise through our Etsy shop and other third-party platforms. When you make a purchase:\r\n                </p>\r\n                <ul className=\"list-disc list-inside space-y-1 ml-4\">\r\n                  <li>Transactions are processed through the third-party platform (Etsy, etc.)</li>\r\n                  <li>Returns, refunds, and customer service are subject to the platform's policies</li>\r\n                  <li>Product availability, pricing, and descriptions may change without notice</li>\r\n                  <li>Shipping times and costs are estimates and may vary</li>\r\n                  <li>We are not responsible for issues arising from third-party payment processing or shipping</li>\r\n                </ul>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Disclaimers */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"font-serif text-2xl\">Disclaimers and Limitations</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 text-muted-foreground\">\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground mb-2\">No Warranties</h3>\r\n                  <p>\r\n                    OUR WEBSITE AND CONTENT ARE PROVIDED \"AS IS\" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. \r\n                    WE DISCLAIM ALL WARRANTIES, INCLUDING BUT NOT LIMITED TO MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, \r\n                    AND NON-INFRINGEMENT.\r\n                  </p>\r\n                </div>\r\n\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground mb-2\">Content Disclaimer</h3>\r\n                  <p>\r\n                    Our content is intended for entertainment purposes only. Tales of Aneria is a fictional narrative. \r\n                    Any resemblance to actual persons, events, or places is coincidental. Content may include fantasy violence, \r\n                    mature themes, and adult language appropriate for the D&D game system.\r\n                  </p>\r\n                </div>\r\n\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground mb-2\">Limitation of Liability</h3>\r\n                  <p>\r\n                    TO THE FULLEST EXTENT PERMITTED BY LAW, TALES OF ANERIA SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, \r\n                    SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, OR ANY LOSS OF PROFITS OR REVENUES, WHETHER INCURRED DIRECTLY \r\n                    OR INDIRECTLY, OR ANY LOSS OF DATA, USE, GOODWILL, OR OTHER INTANGIBLE LOSSES RESULTING FROM:\r\n                  </p>\r\n                  <ul className=\"list-disc list-inside space-y-1 ml-4 mt-2\">\r\n                    <li>Your use or inability to use our website</li>\r\n                    <li>Any unauthorized access to or use of our servers or data</li>\r\n                    <li>Any bugs, viruses, or harmful code transmitted through our website</li>\r\n                    <li>Any errors or omissions in content</li>\r\n                    <li>Third-party conduct or content</li>\r\n                  </ul>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Indemnification */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"font-serif text-2xl\">Indemnification</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 text-muted-foreground\">\r\n                <p>\r\n                  You agree to indemnify, defend, and hold harmless Tales of Aneria, its creators, cast members, and affiliates \r\n                  from any claims, damages, losses, liabilities, and expenses (including legal fees) arising from:\r\n                </p>\r\n                <ul className=\"list-disc list-inside space-y-1 ml-4\">\r\n                  <li>Your violation of these Terms of Service</li>\r\n                  <li>Your violation of any rights of another party</li>\r\n                  <li>Your use of our website or content</li>\r\n                  <li>Any content you submit or contribute</li>\r\n                </ul>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Dispute Resolution */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"font-serif text-2xl\">Dispute Resolution and Governing Law</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 text-muted-foreground\">\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground mb-2\">Informal Resolution</h3>\r\n                  <p>\r\n                    If you have any dispute with us, you agree to first contact us and attempt to resolve the dispute informally. \r\n                    We will work in good faith to resolve any concerns.\r\n                  </p>\r\n                </div>\r\n\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground mb-2\">Governing Law</h3>\r\n                  <p>\r\n                    These Terms shall be governed by and construed in accordance with the laws of the United States, \r\n                    without regard to its conflict of law provisions. Any legal action arising out of these Terms shall be \r\n                    filed exclusively in the courts located in the applicable jurisdiction.\r\n                  </p>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Copyright Claims */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"font-serif text-2xl\">Copyright and DMCA</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 text-muted-foreground\">\r\n                <p>\r\n                  We respect the intellectual property rights of others. If you believe that your copyrighted work has been \r\n                  used on our website in a way that constitutes copyright infringement, please provide us with the following \r\n                  information in accordance with the Digital Millennium Copyright Act (DMCA):\r\n                </p>\r\n                <ul className=\"list-disc list-inside space-y-1 ml-4\">\r\n                  <li>A description of the copyrighted work you claim has been infringed</li>\r\n                  <li>The location of the allegedly infringing material on our website</li>\r\n                  <li>Your contact information (email address, phone number)</li>\r\n                  <li>A statement that you have a good faith belief that the use is not authorized</li>\r\n                  <li>A statement that the information in your notice is accurate</li>\r\n                  <li>Your physical or electronic signature</li>\r\n                </ul>\r\n                <p className=\"mt-4\">\r\n                  Please send DMCA notices to: legal@talesofaneria.com\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Modifications */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"font-serif text-2xl\">Changes to Terms</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 text-muted-foreground\">\r\n                <p>\r\n                  We reserve the right to modify these Terms of Service at any time. When we make changes, we will update \r\n                  the \"Last Updated\" date at the top of this page. Significant changes will be communicated through our \r\n                  website or social media channels.\r\n                </p>\r\n                <p>\r\n                  Your continued use of our website after changes are posted constitutes your acceptance of the modified Terms. \r\n                  If you do not agree with the changes, you must stop using our website.\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Termination */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"font-serif text-2xl\">Termination</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 text-muted-foreground\">\r\n                <p>\r\n                  We reserve the right to terminate or suspend your access to our website at any time, without notice, \r\n                  for conduct that we believe violates these Terms, is harmful to other users, or is otherwise unlawful or inappropriate.\r\n                </p>\r\n                <p>\r\n                  Upon termination, your right to use our website will immediately cease. All provisions of these Terms \r\n                  that by their nature should survive termination shall survive, including but not limited to ownership provisions, \r\n                  warranty disclaimers, and limitations of liability.\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Severability */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"font-serif text-2xl\">Severability and Waiver</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 text-muted-foreground\">\r\n                <p>\r\n                  If any provision of these Terms is found to be unenforceable or invalid, that provision will be limited \r\n                  or eliminated to the minimum extent necessary, and the remaining provisions will remain in full force and effect.\r\n                </p>\r\n                <p>\r\n                  Our failure to enforce any right or provision of these Terms will not be considered a waiver of those rights.\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Contact */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"font-serif text-2xl\">Contact Information</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 text-muted-foreground\">\r\n                <p>\r\n                  If you have any questions about these Terms of Service, please contact us:\r\n                </p>\r\n                <div className=\"space-y-1\">\r\n                  <p><strong className=\"text-foreground\">Email:</strong> legal@talesofaneria.com</p>\r\n                  <p><strong className=\"text-foreground\">Website:</strong> www.talesofaneria.com</p>\r\n                </div>\r\n                <p className=\"mt-4\">\r\n                  For general inquiries, community questions, or support, you can also reach us through our social media \r\n                  channels or community platforms.\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Acknowledgment */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"font-serif text-2xl\">Acknowledgment</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4 text-muted-foreground\">\r\n                <p>\r\n                  BY USING THIS WEBSITE, YOU ACKNOWLEDGE THAT YOU HAVE READ THESE TERMS OF SERVICE AND AGREE TO BE BOUND BY THEM. \r\n                  IF YOU DO NOT AGREE TO THESE TERMS, YOU MAY NOT USE OUR WEBSITE OR SERVICES.\r\n                </p>\r\n                <p className=\"font-semibold text-foreground mt-4\">\r\n                  Thank you for being part of the Tales of Aneria community! We appreciate your support and hope you enjoy our content.\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\client\\src\\pages\\not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\e2e\\accessibility.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\e2e\\characters.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\e2e\\homepage.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\e2e\\load-stress.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\e2e\\seo.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":14,"column":12,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":14,"endColumn":24,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[496,497],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":15,"column":12,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":15,"endColumn":24,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[550,551],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":56,"column":29,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":56,"endColumn":43},{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":283,"column":30,"nodeType":"Literal","endLine":283,"endColumn":54}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from '@playwright/test';\r\n\r\ntest.describe('SEO and Meta Tags', () => {\r\n  test('homepage has correct meta tags', async ({ page }) => {\r\n    await page.goto('/');\r\n    \r\n    // Check title\r\n    const title = await page.title();\r\n    expect(title).toContain('Tales of Aneria');\r\n    \r\n    // Check meta description\r\n    const description = await page.locator('meta[name=\"description\"]').getAttribute('content');\r\n    expect(description).toBeTruthy();\r\n    expect(description!.length).toBeGreaterThan(50);\r\n    expect(description!.length).toBeLessThan(160);\r\n    \r\n    // Check Open Graph tags\r\n    const ogTitle = await page.locator('meta[property=\"og:title\"]').getAttribute('content');\r\n    expect(ogTitle).toBeTruthy();\r\n    \r\n    const ogDescription = await page.locator('meta[property=\"og:description\"]').getAttribute('content');\r\n    expect(ogDescription).toBeTruthy();\r\n    \r\n    const ogImage = await page.locator('meta[property=\"og:image\"]').getAttribute('content');\r\n    expect(ogImage).toBeTruthy();\r\n    \r\n    const ogUrl = await page.locator('meta[property=\"og:url\"]').getAttribute('content');\r\n    expect(ogUrl).toBeTruthy();\r\n  });\r\n\r\n  test('characters page has unique meta tags', async ({ page }) => {\r\n    await page.goto('/characters');\r\n    \r\n    const title = await page.title();\r\n    expect(title).toContain('Characters');\r\n    expect(title).toContain('Tales of Aneria');\r\n    \r\n    const description = await page.locator('meta[name=\"description\"]').getAttribute('content');\r\n    expect(description).toBeTruthy();\r\n    expect(description).not.toContain('Latest Episodes'); // Should be different from homepage\r\n  });\r\n\r\n  test('character detail page has dynamic meta tags', async ({ page }) => {\r\n    await page.goto('/characters');\r\n    await page.waitForLoadState('networkidle');\r\n    \r\n    const firstCard = page.locator('[data-testid^=\"card-character-\"]').first();\r\n    await firstCard.click();\r\n    await page.waitForLoadState('networkidle');\r\n    \r\n    // Get character name from page\r\n    const characterName = await page.locator('h1').first().textContent();\r\n    \r\n    // Title should include character name\r\n    const title = await page.title();\r\n    expect(title).toContain(characterName!);\r\n    \r\n    // Description should mention the character\r\n    const description = await page.locator('meta[name=\"description\"]').getAttribute('content');\r\n    expect(description).toBeTruthy();\r\n  });\r\n\r\n  test('canonical URL is set correctly', async ({ page }) => {\r\n    await page.goto('/');\r\n    \r\n    const canonical = await page.locator('link[rel=\"canonical\"]').getAttribute('href');\r\n    expect(canonical).toBeTruthy();\r\n    expect(canonical).toMatch(/^https?:\\/\\//);\r\n  });\r\n\r\n  test('robots meta tag is present', async ({ page }) => {\r\n    await page.goto('/');\r\n    \r\n    const robots = await page.locator('meta[name=\"robots\"]').getAttribute('content');\r\n    // Should allow indexing\r\n    if (robots) {\r\n      expect(robots).not.toContain('noindex');\r\n    }\r\n  });\r\n\r\n  test('viewport meta tag is set for responsive design', async ({ page }) => {\r\n    await page.goto('/');\r\n    \r\n    const viewport = await page.locator('meta[name=\"viewport\"]').getAttribute('content');\r\n    expect(viewport).toContain('width=device-width');\r\n  });\r\n\r\n  test('Twitter Card meta tags are present', async ({ page }) => {\r\n    await page.goto('/');\r\n    \r\n    const twitterCard = await page.locator('meta[name=\"twitter:card\"]').getAttribute('content');\r\n    expect(twitterCard).toBeTruthy();\r\n    \r\n    const twitterTitle = await page.locator('meta[name=\"twitter:title\"]').getAttribute('content');\r\n    expect(twitterTitle).toBeTruthy();\r\n  });\r\n});\r\n\r\ntest.describe('Structured Data (JSON-LD)', () => {\r\n  test('homepage has valid JSON-LD structured data', async ({ page }) => {\r\n    await page.goto('/');\r\n    \r\n    // Get all script tags with type application/ld+json\r\n    const jsonLdScripts = await page.locator('script[type=\"application/ld+json\"]').allTextContents();\r\n    \r\n    expect(jsonLdScripts.length).toBeGreaterThan(0);\r\n    \r\n    // Validate first JSON-LD is valid JSON\r\n    const firstJsonLd = jsonLdScripts[0];\r\n    expect(() => JSON.parse(firstJsonLd)).not.toThrow();\r\n    \r\n    const structuredData = JSON.parse(firstJsonLd);\r\n    \r\n    // Check it has @context\r\n    expect(structuredData['@context']).toBe('https://schema.org');\r\n    \r\n    // Check it has @type\r\n    expect(structuredData['@type']).toBeTruthy();\r\n  });\r\n\r\n  test('website organization structured data is present', async ({ page }) => {\r\n    await page.goto('/');\r\n    \r\n    const jsonLdScripts = await page.locator('script[type=\"application/ld+json\"]').allTextContents();\r\n    \r\n    const organizationData = jsonLdScripts.find(script => {\r\n      try {\r\n        const data = JSON.parse(script);\r\n        return data['@type'] === 'Organization';\r\n      } catch {\r\n        return false;\r\n      }\r\n    });\r\n    \r\n    if (organizationData) {\r\n      const org = JSON.parse(organizationData);\r\n      expect(org.name).toBeTruthy();\r\n      expect(org.url).toBeTruthy();\r\n    }\r\n  });\r\n\r\n  test('podcast structured data includes required fields', async ({ page }) => {\r\n    await page.goto('/');\r\n    \r\n    const jsonLdScripts = await page.locator('script[type=\"application/ld+json\"]').allTextContents();\r\n    \r\n    const podcastData = jsonLdScripts.find(script => {\r\n      try {\r\n        const data = JSON.parse(script);\r\n        return data['@type'] === 'PodcastSeries';\r\n      } catch {\r\n        return false;\r\n      }\r\n    });\r\n    \r\n    if (podcastData) {\r\n      const podcast = JSON.parse(podcastData);\r\n      \r\n      // Required fields for PodcastSeries\r\n      expect(podcast.name).toBeTruthy();\r\n      expect(podcast.description).toBeTruthy();\r\n      expect(podcast.url).toBeTruthy();\r\n      \r\n      // Should have webFeed (RSS feed)\r\n      if (podcast.webFeed) {\r\n        expect(podcast.webFeed).toMatch(/^https?:\\/\\//);\r\n      }\r\n    }\r\n  });\r\n\r\n  test('breadcrumb structured data on character pages', async ({ page }) => {\r\n    await page.goto('/characters');\r\n    await page.waitForLoadState('networkidle');\r\n    \r\n    const firstCard = page.locator('[data-testid^=\"card-character-\"]').first();\r\n    await firstCard.click();\r\n    await page.waitForLoadState('networkidle');\r\n    \r\n    const jsonLdScripts = await page.locator('script[type=\"application/ld+json\"]').allTextContents();\r\n    \r\n    const breadcrumbData = jsonLdScripts.find(script => {\r\n      try {\r\n        const data = JSON.parse(script);\r\n        return data['@type'] === 'BreadcrumbList';\r\n      } catch {\r\n        return false;\r\n      }\r\n    });\r\n    \r\n    if (breadcrumbData) {\r\n      const breadcrumb = JSON.parse(breadcrumbData);\r\n      expect(breadcrumb.itemListElement).toBeDefined();\r\n      expect(Array.isArray(breadcrumb.itemListElement)).toBe(true);\r\n    }\r\n  });\r\n\r\n  test('all JSON-LD scripts are valid JSON', async ({ page }) => {\r\n    await page.goto('/');\r\n    \r\n    const jsonLdScripts = await page.locator('script[type=\"application/ld+json\"]').allTextContents();\r\n    \r\n    jsonLdScripts.forEach((script, index) => {\r\n      expect(() => JSON.parse(script), `JSON-LD at index ${index} should be valid`).not.toThrow();\r\n    });\r\n  });\r\n\r\n  test('structured data has no duplicate @context', async ({ page }) => {\r\n    await page.goto('/');\r\n    \r\n    const jsonLdScripts = await page.locator('script[type=\"application/ld+json\"]').allTextContents();\r\n    \r\n    jsonLdScripts.forEach((script) => {\r\n      const data = JSON.parse(script);\r\n      const stringified = JSON.stringify(data);\r\n      \r\n      // Check for duplicate @context properties\r\n      const contextMatches = stringified.match(/\"@context\"/g);\r\n      if (contextMatches) {\r\n        expect(contextMatches.length).toBe(1);\r\n      }\r\n    });\r\n  });\r\n});\r\n\r\ntest.describe('SEO Best Practices', () => {\r\n  test('page has exactly one h1 tag', async ({ page }) => {\r\n    await page.goto('/');\r\n    \r\n    const h1Tags = await page.locator('h1').count();\r\n    expect(h1Tags).toBe(1);\r\n  });\r\n\r\n  test('images have alt text', async ({ page }) => {\r\n    await page.goto('/');\r\n    await page.waitForLoadState('networkidle');\r\n    \r\n    const images = await page.locator('img').all();\r\n    \r\n    for (const img of images) {\r\n      const alt = await img.getAttribute('alt');\r\n      // Alt can be empty for decorative images, but should be defined\r\n      expect(alt).not.toBeNull();\r\n    }\r\n  });\r\n\r\n  test('links have descriptive text', async ({ page }) => {\r\n    await page.goto('/');\r\n    \r\n    const links = await page.locator('a[href]').all();\r\n    \r\n    for (const link of links) {\r\n      const text = await link.textContent();\r\n      const ariaLabel = await link.getAttribute('aria-label');\r\n      \r\n      // Link should have text or aria-label\r\n      expect(text || ariaLabel).toBeTruthy();\r\n    }\r\n  });\r\n\r\n  test('no broken internal links', async ({ page }) => {\r\n    await page.goto('/');\r\n    \r\n    const internalLinks = await page.locator('a[href^=\"/\"], a[href^=\"./\"]').all();\r\n    \r\n    // Test first 5 internal links\r\n    const linksToTest = internalLinks.slice(0, 5);\r\n    \r\n    for (const link of linksToTest) {\r\n      const href = await link.getAttribute('href');\r\n      if (href && !href.includes('#')) {\r\n        const response = await page.goto(href);\r\n        expect(response?.status()).toBeLessThan(400);\r\n        await page.goBack();\r\n      }\r\n    }\r\n  });\r\n\r\n  test('page language is set', async ({ page }) => {\r\n    await page.goto('/');\r\n    \r\n    const htmlLang = await page.locator('html').getAttribute('lang');\r\n    expect(htmlLang).toBeTruthy();\r\n    expect(htmlLang).toMatch(/^[a-z]{2}(-[A-Z]{2})?$/); // e.g., 'en' or 'en-US'\r\n  });\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\e2e\\visual-regression.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1378,1381],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1378,1381],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":60,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":60,"endColumn":18,"suggestions":[{"fix":{"range":[2014,2035],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":87,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":87,"endColumn":16,"suggestions":[{"fix":{"range":[2913,2967],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3119,3122],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3119,3122],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_next' is defined but never used.","line":92,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":92,"endColumn":70,"suggestions":[{"messageId":"removeVar","data":{"varName":"_next"},"fix":{"range":[3151,3172],"text":""},"desc":"Remove unused variable '_next'."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":126,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":126,"endColumn":16,"suggestions":[{"fix":{"range":[4221,4314],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":131,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":131,"endColumn":16,"suggestions":[{"fix":{"range":[4393,4455],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":133,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":133,"endColumn":18,"suggestions":[{"fix":{"range":[4489,4518],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":139,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":139,"endColumn":16,"suggestions":[{"fix":{"range":[4598,4659],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":141,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":141,"endColumn":18,"suggestions":[{"fix":{"range":[4693,4722],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import 'dotenv/config';\r\nimport { createServer } from \"http\";\r\nimport path from \"path\";\r\nimport { fileURLToPath } from \"url\";\r\n\r\nimport express, { type Request, Response, NextFunction } from \"express\";\r\n\r\nimport { registerRoutes } from \"./server/routes\";\r\nimport { configureSecurity } from \"./server/security\";\r\n\r\nconst app = express();\r\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\r\n\r\n// Trust proxy - required for rate limiting behind reverse proxy (Replit, etc.)\r\napp.set('trust proxy', 1);\r\n\r\n// A05: Security Misconfiguration - Apply security middleware FIRST\r\nconfigureSecurity(app);\r\n\r\n// Stripe webhook must receive raw body for signature verification\r\napp.use('/api/stripe/webhook', express.raw({ type: 'application/json' }));\r\n\r\n// Body parsing middleware (with size limits) - applied to all OTHER routes\r\napp.use(express.json({ limit: '1mb' }));\r\napp.use(express.urlencoded({ extended: false, limit: '1mb' }));\r\n\r\n// Health check endpoint for Autoscale Deployments (on /health to not interfere with homepage)\r\napp.get('/health', (req, res) => {\r\n  res.status(200).json({ \r\n    status: 'ok', \r\n    service: 'Tales of Aneria',\r\n    timestamp: new Date().toISOString()\r\n  });\r\n});\r\n\r\n// Request logging middleware\r\napp.use((req, res, next) => {\r\n  const start = Date.now();\r\n  const requestPath = req.path;\r\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\r\n\r\n  const originalResJson = res.json;\r\n  res.json = function (bodyJson, ...args) {\r\n    capturedJsonResponse = bodyJson;\r\n    return originalResJson.apply(res, [bodyJson, ...args]);\r\n  };\r\n\r\n  res.on(\"finish\", () => {\r\n    const duration = Date.now() - start;\r\n    if (requestPath.startsWith(\"/api\")) {\r\n      let logLine = `${req.method} ${requestPath} ${res.statusCode} in ${duration}ms`;\r\n      if (capturedJsonResponse) {\r\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\r\n      }\r\n\r\n      if (logLine.length > 80) {\r\n        logLine = `${logLine.slice(0, 79)  }`;\r\n      }\r\n\r\n      console.log(logLine);\r\n    }\r\n  });\r\n\r\n  next();\r\n});\r\n\r\n// Register API routes and start server\r\n(async () => {\r\n  await registerRoutes(app);\r\n\r\n  // Determine environment and setup accordingly\r\n  const isReplitDeployment = !!process.env.REPLIT_DEPLOYMENT;\r\n  const isProduction = process.env.NODE_ENV === 'production';\r\n  const isDevelopment = process.env.NODE_ENV === 'development';\r\n\r\n  // Setup static file serving for production builds (Replit Deployment or production mode)\r\n  if (isProduction || isReplitDeployment) {\r\n    // When running from dist/index.js, __dirname is 'dist', so we need 'public' not 'dist/public'\r\n    const distPath = path.join(__dirname, 'public');\r\n    app.use(express.static(distPath));\r\n    \r\n    // SPA fallback - serve index.html for all non-API routes\r\n    app.get('*', (req, res) => {\r\n      res.sendFile(path.join(distPath, 'index.html'));\r\n    });\r\n    \r\n    console.log(`Serving static files from: ${distPath}`);\r\n  }\r\n\r\n  // A07: Enhanced error handling - Don't leak sensitive information\r\n  // IMPORTANT: Register error handler AFTER all routes\r\n  app.use((err: any, req: Request, res: Response, _next: NextFunction) => {\r\n    const status = err.status || err.statusCode || 500;\r\n    \r\n    // A09: Security Logging - Log errors for monitoring\r\n    console.error('[ERROR]', {\r\n      timestamp: new Date().toISOString(),\r\n      method: req.method,\r\n      path: req.path,\r\n      status,\r\n      message: err.message,\r\n      stack: process.env.NODE_ENV === 'development' ? err.stack : undefined,\r\n    });\r\n\r\n    // A07: Don't expose internal error details in production\r\n    const message = status === 500 && process.env.NODE_ENV === 'production'\r\n      ? 'Internal Server Error'\r\n      : err.message || 'Internal Server Error';\r\n\r\n    res.status(status).json({ error: message });\r\n  });\r\n\r\n  // Start the server\r\n  const server = createServer(app);\r\n  \r\n  // Setup Vite in development mode\r\n  if (isDevelopment) {\r\n    const { setupVite } = await import('./server/vite');\r\n    await setupVite(app, server);\r\n  }\r\n  \r\n  const port = parseInt(process.env.PORT || '5000', 10);\r\n  \r\n  // Start the server and keep it running\r\n  server.listen(port, '0.0.0.0', () => {\r\n    console.log(`Server running on port ${port} (${process.env.NODE_ENV || 'production'} mode)`);\r\n  });\r\n\r\n  // Handle graceful shutdown\r\n  process.on('SIGTERM', () => {\r\n    console.log('SIGTERM received, closing server gracefully...');\r\n    server.close(() => {\r\n      console.log('Server closed');\r\n      process.exit(0);\r\n    });\r\n  });\r\n\r\n  process.on('SIGINT', () => {\r\n    console.log('SIGINT received, closing server gracefully...');\r\n    server.close(() => {\r\n      console.log('Server closed');\r\n      process.exit(0);\r\n    });\r\n  });\r\n})();\r\n\r\nexport default app;\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\scripts\\check-env-changes.mjs","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'readFileSync' is defined but never used.","line":13,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"readFileSync"},"fix":{"range":[327,340],"text":""},"desc":"Remove unused variable 'readFileSync'."}]},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":16,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":16,"endColumn":41},{"ruleId":"no-unused-vars","severity":2,"message":"'parseEnvFile' is defined but never used.","line":29,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"parseEnvFile"},"fix":{"range":[664,1101],"text":""},"desc":"Remove unused variable 'parseEnvFile'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":61,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":93,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":93,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":94,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":94,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":95,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":95,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":99,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":99,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":100,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":100,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":101,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":101,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":102,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":102,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":103,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":103,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":104,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":104,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":105,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":105,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":110,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":110,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":131,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":131,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":132,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":132,"endColumn":39},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":133,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":133,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":137,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":137,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":138,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":138,"endColumn":41},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":139,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":139,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":144,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":144,"endColumn":10}],"suppressedMessages":[],"errorCount":22,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\r\n\r\n/**\r\n * Environment Variable Change Detector\r\n * \r\n * This script compares .env.example with the previous version\r\n * and alerts about new or changed environment variables.\r\n * \r\n * Run as a pre-commit hook to catch env changes before pushing.\r\n */\r\n\r\nimport { execSync } from 'child_process';\r\nimport { readFileSync, existsSync } from 'fs';\r\nimport { resolve } from 'path';\r\n\r\nconst ENV_EXAMPLE_FILE = resolve(process.cwd(), '.env.example');\r\n\r\n// ANSI color codes\r\nconst colors = {\r\n  reset: '\\x1b[0m',\r\n  bright: '\\x1b[1m',\r\n  cyan: '\\x1b[36m',\r\n  yellow: '\\x1b[33m',\r\n  green: '\\x1b[32m',\r\n  red: '\\x1b[31m',\r\n  gray: '\\x1b[90m',\r\n};\r\n\r\nfunction parseEnvFile(content) {\r\n  const vars = {};\r\n  const lines = content.split('\\n');\r\n  \r\n  for (const line of lines) {\r\n    const trimmed = line.trim();\r\n    // Skip comments and empty lines\r\n    if (trimmed.startsWith('#') || trimmed === '') continue;\r\n    \r\n    // Match KEY=value format\r\n    const match = trimmed.match(/^([A-Z_][A-Z0-9_]*)=/);\r\n    if (match) {\r\n      vars[match[1]] = true;\r\n    }\r\n  }\r\n  \r\n  return vars;\r\n}\r\n\r\nfunction getGitDiff() {\r\n  try {\r\n    // Check if file is staged\r\n    const status = execSync('git status --porcelain .env.example', { encoding: 'utf-8' });\r\n    \r\n    if (!status) {\r\n      // No changes\r\n      return null;\r\n    }\r\n    \r\n    // Get the diff\r\n    const diff = execSync('git diff HEAD .env.example', { encoding: 'utf-8' });\r\n    return diff;\r\n  } catch (error) {\r\n    // File might be new or git not initialized\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction extractVarsFromDiff(diff) {\r\n  if (!diff) return { added: [], removed: [], modified: [] };\r\n  \r\n  const added = [];\r\n  const removed = [];\r\n  const lines = diff.split('\\n');\r\n  \r\n  for (const line of lines) {\r\n    if (line.startsWith('+') && !line.startsWith('+++')) {\r\n      const match = line.match(/^\\+([A-Z_][A-Z0-9_]*)=/);\r\n      if (match && !line.startsWith('+ #')) {\r\n        added.push(match[1]);\r\n      }\r\n    } else if (line.startsWith('-') && !line.startsWith('---')) {\r\n      const match = line.match(/^-([A-Z_][A-Z0-9_]*)=/);\r\n      if (match && !line.startsWith('- #')) {\r\n        removed.push(match[1]);\r\n      }\r\n    }\r\n  }\r\n  \r\n  return { added, removed, modified: [] };\r\n}\r\n\r\nfunction printBanner(message) {\r\n  const line = ''.repeat(60);\r\n  console.log(`\\n${colors.cyan}${line}${colors.reset}`);\r\n  console.log(`${colors.yellow}${colors.bright}${message}${colors.reset}`);\r\n  console.log(`${colors.cyan}${line}${colors.reset}\\n`);\r\n}\r\n\r\nfunction printChecklist() {\r\n  console.log(`${colors.yellow}  ENVIRONMENT VARIABLE UPDATE CHECKLIST${colors.reset}\\n`);\r\n  console.log(`${colors.gray}Update these locations:${colors.reset}\\n`);\r\n  console.log(`  ${colors.green}1.  Local .env file${colors.reset}`);\r\n  console.log(`  ${colors.yellow}2.  GitHub Secrets${colors.reset} (Settings  Secrets  Actions)`);\r\n  console.log(`  ${colors.yellow}3.  Replit Secrets${colors.reset} (Tools  Secrets)`);\r\n  console.log(`  ${colors.yellow}4.  Production Environment${colors.reset} (Vercel/Railway/etc.)`);\r\n  console.log(`  ${colors.yellow}5.  Redeploy if needed${colors.reset}\\n`);\r\n}\r\n\r\nfunction main() {\r\n  if (!existsSync(ENV_EXAMPLE_FILE)) {\r\n    console.log(`${colors.gray}No .env.example file found - skipping check${colors.reset}`);\r\n    return;\r\n  }\r\n  \r\n  const diff = getGitDiff();\r\n  \r\n  if (!diff) {\r\n    // No changes to .env.example\r\n    return;\r\n  }\r\n  \r\n  const changes = extractVarsFromDiff(diff);\r\n  \r\n  if (changes.added.length === 0 && changes.removed.length === 0) {\r\n    // Only comment changes\r\n    return;\r\n  }\r\n  \r\n  printBanner(' ENVIRONMENT VARIABLES CHANGED!');\r\n  \r\n  if (changes.added.length > 0) {\r\n    console.log(`${colors.green}${colors.bright}NEW Variables Added:${colors.reset}`);\r\n    changes.added.forEach(v => console.log(`  ${colors.green}+ ${v}${colors.reset}`));\r\n    console.log('');\r\n  }\r\n  \r\n  if (changes.removed.length > 0) {\r\n    console.log(`${colors.red}${colors.bright}Variables Removed:${colors.reset}`);\r\n    changes.removed.forEach(v => console.log(`  ${colors.red}- ${v}${colors.reset}`));\r\n    console.log('');\r\n  }\r\n  \r\n  printChecklist();\r\n  \r\n  console.log(`${colors.cyan}${''.repeat(60)}${colors.reset}\\n`);\r\n}\r\n\r\nmain();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\scripts\\check-quota.mjs","messages":[{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":27,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":27,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":28,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":32,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":32,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":33,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":33,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":35,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":35,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":36,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":36,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":37,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":37,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":38,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":38,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":39,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":39,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":41,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":41,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":42,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":42,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":43,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":43,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":45,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":45,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":54,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":54,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":55,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":55,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":56,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":56,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":57,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":57,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":69,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":69,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":70,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":70,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":71,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":71,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":72,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":72,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":73,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":73,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":77,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":77,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":78,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":78,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":80,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":80,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":81,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":81,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":82,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":82,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":83,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":83,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":84,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":84,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":91,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":91,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":92,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":92,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":93,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":93,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":94,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":94,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":95,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":95,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":96,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":96,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":99,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":99,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":100,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":100,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":103,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":103,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":104,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":104,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":106,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":106,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":107,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":107,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":109,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":109,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":110,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":110,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":112,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":112,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":113,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":113,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":115,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":115,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":118,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":118,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":119,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":119,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":120,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":120,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":121,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":121,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":122,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":122,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":123,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":123,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":124,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":124,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":125,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":125,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":127,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":127,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":128,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":128,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":129,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":129,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":130,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":130,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":133,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":133,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":134,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":134,"endColumn":10}],"suppressedMessages":[],"errorCount":60,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\r\n/**\r\n * YouTube API Quota Monitor\r\n * \r\n * Estimates your daily YouTube API quota usage based on cache and traffic.\r\n * Run this to see if you're at risk of hitting quota limits.\r\n */\r\n\r\nimport * as fs from 'fs';\r\nimport * as path from 'path';\r\nimport { fileURLToPath } from 'url';\r\n\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = path.dirname(__filename);\r\n\r\nconst CACHE_FILE = path.join(__dirname, '..', 'server', 'cache', 'youtube-playlist.json');\r\n\r\n// YouTube API v3 Quota Costs\r\nconst QUOTA_COSTS = {\r\n  'search.list': 100,      // Channel search\r\n  'videos.list': 1,        // Video details (per 50 videos)\r\n  'playlistItems.list': 1, // Playlist items (per 50 videos)\r\n};\r\n\r\nconst DAILY_QUOTA_LIMIT = 10000; // Default YouTube API quota\r\n\r\nconsole.log(' YouTube API Quota Monitor\\n');\r\nconsole.log('\\n');\r\n\r\n// Check cache status\r\nif (!fs.existsSync(CACHE_FILE)) {\r\n  console.log('  No cache file found.');\r\n  console.log('   Cache will be created on first API request.\\n');\r\n  \r\n  console.log(' Estimated First Request Costs:');\r\n  console.log(`   Channel search (1 request):  ${QUOTA_COSTS['search.list']} units`);\r\n  console.log(`   Video details (1 request):   ${QUOTA_COSTS['videos.list']} units`);\r\n  console.log(`   Total first request:         ${QUOTA_COSTS['search.list'] + QUOTA_COSTS['videos.list']} units`);\r\n  console.log('');\r\n  \r\n  console.log(' With 24-hour caching, you\\'ll make ~1-2 requests/day');\r\n  console.log(`   Daily usage: ~${(QUOTA_COSTS['search.list'] + QUOTA_COSTS['videos.list']) * 2} units`);\r\n  console.log(`   That's only ${((((QUOTA_COSTS['search.list'] + QUOTA_COSTS['videos.list']) * 2) / DAILY_QUOTA_LIMIT) * 100).toFixed(1)}% of your ${DAILY_QUOTA_LIMIT} daily quota!\\n`);\r\n  \r\n  process.exit(0);\r\n}\r\n\r\ntry {\r\n  const stats = fs.statSync(CACHE_FILE);\r\n  const content = fs.readFileSync(CACHE_FILE, 'utf-8');\r\n  const cache = JSON.parse(content);\r\n  const keys = Object.keys(cache);\r\n  \r\n  console.log(' Current Cache Status:');\r\n  console.log(`   File size: ${(stats.size / 1024).toFixed(2)} KB`);\r\n  console.log(`   Cached items: ${keys.length}`);\r\n  console.log('');\r\n  \r\n  let totalVideos = 0;\r\n  \r\n  keys.forEach(key => {\r\n    const entry = cache[key];\r\n    const age = Date.now() - entry.timestamp;\r\n    const ageHours = (age / (1000 * 60 * 60)).toFixed(1);\r\n    const timeUntilExpiry = 24 - parseFloat(ageHours);\r\n    const videos = entry.videos?.length || 0;\r\n    totalVideos += videos;\r\n    \r\n    console.log(`    ${key}`);\r\n    console.log(`      Videos: ${videos}`);\r\n    console.log(`      Age: ${ageHours}h`);\r\n    console.log(`      Expires in: ${timeUntilExpiry.toFixed(1)}h`);\r\n    console.log('');\r\n  });\r\n  \r\n  // Estimate costs\r\n  console.log(' Quota Cost Breakdown:');\r\n  console.log('');\r\n  \r\n  console.log('   Per API Request:');\r\n  console.log(`    Channel search:        ${QUOTA_COSTS['search.list']} units`);\r\n  console.log(`    Video details (${totalVideos} videos): ${Math.ceil(totalVideos / 50)} units`);\r\n  console.log(`    Total per refresh:     ${QUOTA_COSTS['search.list'] + Math.ceil(totalVideos / 50)} units`);\r\n  console.log('');\r\n  \r\n  const quotaPerRefresh = QUOTA_COSTS['search.list'] + Math.ceil(totalVideos / 50);\r\n  const estimatedDailyRequests = 2; // With 24h cache, usually 1-2 requests/day\r\n  const estimatedDailyQuota = quotaPerRefresh * estimatedDailyRequests;\r\n  const percentOfQuota = (estimatedDailyQuota / DAILY_QUOTA_LIMIT) * 100;\r\n  \r\n  console.log('   Daily Estimates (with 24h caching):');\r\n  console.log(`    API requests/day:      ~${estimatedDailyRequests}`);\r\n  console.log(`    Quota usage/day:       ~${estimatedDailyQuota} units`);\r\n  console.log(`    % of daily quota:      ${percentOfQuota.toFixed(1)}%`);\r\n  console.log(`    Remaining quota:       ${DAILY_QUOTA_LIMIT - estimatedDailyQuota} units`);\r\n  console.log('');\r\n  \r\n  // Safety assessment\r\n  console.log('  Security Assessment:');\r\n  console.log('');\r\n  \r\n  if (percentOfQuota < 10) {\r\n    console.log('    EXCELLENT - Very low quota usage');\r\n    console.log('      Your caching strategy is working great!');\r\n  } else if (percentOfQuota < 25) {\r\n    console.log('    GOOD - Moderate quota usage');\r\n    console.log('      Well within safe limits.');\r\n  } else if (percentOfQuota < 50) {\r\n    console.log('     MODERATE - Higher quota usage');\r\n    console.log('      Consider increasing cache duration.');\r\n  } else {\r\n    console.log('    HIGH - Risky quota usage');\r\n    console.log('      Increase cache duration or reduce requests!');\r\n  }\r\n  console.log('');\r\n  \r\n  // Recommendations\r\n  console.log(' Recommendations:');\r\n  console.log('');\r\n  console.log('   1.  Keep 24-hour caching enabled');\r\n  console.log('   2. Set daily quota limit to 5,000 units in Google Cloud Console');\r\n  console.log('   3. Set up alerts at 80% quota usage (4,000 units)');\r\n  console.log('   4. Restrict API key to YouTube Data API v3 only');\r\n  console.log('   5. Rotate API key every 90 days');\r\n  console.log('');\r\n  \r\n  console.log(' Quick Links:');\r\n  console.log('   Google Cloud Console: https://console.cloud.google.com/apis/credentials');\r\n  console.log('   Quota Usage: https://console.cloud.google.com/apis/api/youtube.googleapis.com/quotas');\r\n  console.log('');\r\n  \r\n} catch (error) {\r\n  console.error(' Error reading cache:', error.message);\r\n  process.exit(1);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\scripts\\check-shop-variants.mjs","messages":[{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":7,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'fetch' is not defined.","line":9,"column":24,"nodeType":"Identifier","messageId":"undef","endLine":9,"endColumn":29},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":12,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":15,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":16,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":16,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":17,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":17,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":18,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":18,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":21,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":23,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":23,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":24,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":24,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":25,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":28,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":28,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":31,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":31,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":32,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":32,"endColumn":8}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\r\n/**\r\n * Quick script to check what variant IDs are being sent to Stripe\r\n * Run: node scripts/check-shop-variants.mjs\r\n */\r\n\r\nconsole.log('Fetching current shop products...\\n');\r\n\r\nconst response = await fetch('http://localhost:5000/api/printful/products');\r\nconst products = await response.json();\r\n\r\nconsole.log(`Found ${products.length} products\\n`);\r\n\r\nfor (const product of products) {\r\n  console.log(` Product: ${product.name}`);\r\n  console.log(`   Product ID: ${product.id}`);\r\n  console.log(`   Price: ${product.price}`);\r\n  console.log(`   In Stock: ${product.inStock}`);\r\n  \r\n  if (product.variants && product.variants.length > 0) {\r\n    console.log(`   Variants (${product.variants.length}):`);\r\n    product.variants.forEach(variant => {\r\n      console.log(`      - ${variant.name}`);\r\n      console.log(`        ID: ${variant.id}  This goes to Stripe metadata`);\r\n      console.log(`        Price: ${variant.price}`);\r\n    });\r\n  }\r\n  console.log('');\r\n}\r\n\r\nconsole.log(' These variant IDs will be sent to Stripe in the checkout session metadata.');\r\nconsole.log(' When webhook fires, we convert sync variant ID  catalog variant ID for Printful order.');\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\scripts\\cleanup-github-caches.cjs","messages":[{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":41,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":41,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":59,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":59,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":60,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":60,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":67,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":67,"endColumn":10},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":68,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":68,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":69,"column":8,"nodeType":"Identifier","messageId":"undef","endLine":69,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":70,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":70,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":71,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":71,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":72,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":72,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":73,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":73,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":74,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":74,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":75,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":75,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":76,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":76,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":77,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":77,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":78,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":78,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":81,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":81,"endColumn":10},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":98,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":98,"endColumn":15},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":99,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":99,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":100,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":100,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":104,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":104,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":128,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":128,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":136,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":136,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'fetch' is not defined.","line":154,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":154,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":158,"column":40,"nodeType":"Identifier","messageId":"undef","endLine":158,"endColumn":47},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":183,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":183,"endColumn":14},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":201,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":201,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'fetch' is not defined.","line":211,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":211,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":216,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":216,"endColumn":45},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":224,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":224,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":234,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":234,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":240,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":240,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":244,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":244,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":249,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":249,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":257,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":257,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":270,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":270,"endColumn":12},{"ruleId":"no-unused-vars","severity":2,"message":"'branch' is defined but never used.","line":287,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":287,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"branch"},"fix":{"range":[8195,8203],"text":""},"desc":"Remove unused variable 'branch'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'branch' is defined but never used.","line":293,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":293,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"branch"},"fix":{"range":[8420,8428],"text":""},"desc":"Remove unused variable 'branch'."}]},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":302,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":302,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":303,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":303,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":307,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":307,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":312,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":312,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":316,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":316,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":317,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":317,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":324,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":324,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":328,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":328,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":329,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":329,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":334,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":334,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":335,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":335,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":337,"column":32,"nodeType":"Identifier","messageId":"undef","endLine":337,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":340,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":340,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":353,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":353,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":356,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":356,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'setTimeout' is not defined.","line":360,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":360,"endColumn":44},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":363,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":363,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":364,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":364,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":365,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":365,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":366,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":366,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":367,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":367,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":372,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":372,"endColumn":10}],"suppressedMessages":[],"errorCount":59,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\r\n\r\n/**\r\n * GitHub Actions Cache Cleanup Script\r\n * \r\n * Deletes GitHub Actions caches to free up storage space.\r\n * \r\n * Usage:\r\n *   node scripts/cleanup-github-caches.js [options]\r\n * \r\n * Options:\r\n *   --all                Delete ALL caches (use with caution!)\r\n *   --older-than-days N  Delete caches older than N days (default: 1)\r\n *   --branch NAME        Delete caches from specific branch only\r\n *   --dry-run            Show what would be deleted without deleting\r\n *   --keep-latest N      Keep N most recent caches per branch (default: 2)\r\n * \r\n * Examples:\r\n *   # Delete caches older than 1 day (safe default)\r\n *   node scripts/cleanup-github-caches.js\r\n * \r\n *   # Delete all caches from last 24 hours (dry run)\r\n *   node scripts/cleanup-github-caches.js --older-than-days 1 --dry-run\r\n * \r\n *   # Delete all caches except 2 most recent\r\n *   node scripts/cleanup-github-caches.js --all --keep-latest 2\r\n * \r\n *   # Delete caches from specific branch\r\n *   node scripts/cleanup-github-caches.js --branch main --older-than-days 7\r\n * \r\n * Requires:\r\n *   - GitHub CLI (gh) installed and authenticated\r\n *   OR\r\n *   - GITHUB_TOKEN environment variable set\r\n */\r\n\r\nconst { execSync } = require('child_process');\r\nconst { exit } = require('process');\r\n\r\n// Parse command line arguments\r\nconst args = process.argv.slice(2);\r\n\r\nfunction getArgValue(argName) {\r\n  const index = args.indexOf(argName);\r\n  if (index === -1 || index === args.length - 1) return null;\r\n  const value = args[index + 1];\r\n  if (value.startsWith('--')) return null;\r\n  return value;\r\n}\r\n\r\nconst options = {\r\n  all: args.includes('--all'),\r\n  dryRun: args.includes('--dry-run'),\r\n  olderThanDays: parseFloat(getArgValue('--older-than-days')) || 1,\r\n  branch: getArgValue('--branch'),\r\n  keepLatest: parseInt(getArgValue('--keep-latest')) || 2,\r\n};\r\n\r\nconsole.log(' GitHub Actions Cache Cleanup\\n');\r\nconsole.log('Options:', options, '\\n');\r\n\r\n// Check if GitHub CLI is available\r\nlet useGhCli = false;\r\ntry {\r\n  execSync('gh --version', { stdio: 'ignore' });\r\n  useGhCli = true;\r\n  console.log(' Using GitHub CLI (gh)\\n');\r\n} catch (error) {\r\n  if (!process.env.GITHUB_TOKEN) {\r\n    console.error(' Error: GitHub CLI not found and GITHUB_TOKEN not set');\r\n    console.error('');\r\n    console.error('Please either:');\r\n    console.error('  1. Install GitHub CLI: https://cli.github.com/');\r\n    console.error('  2. Or set GITHUB_TOKEN environment variable');\r\n    console.error('');\r\n    console.error('Example:');\r\n    console.error('  export GITHUB_TOKEN=ghp_your_token_here');\r\n    console.error('  node scripts/cleanup-github-caches.js');\r\n    exit(1);\r\n  }\r\n  console.log('  GitHub CLI not found, using API with GITHUB_TOKEN\\n');\r\n}\r\n\r\n// Get repository info\r\nlet owner, repo;\r\ntry {\r\n  const remoteUrl = execSync('git config --get remote.origin.url', { \r\n    encoding: 'utf8' \r\n  }).trim();\r\n  \r\n  const match = remoteUrl.match(/github\\.com[:/](.+?)\\/(.+?)(\\.git)?$/);\r\n  if (match) {\r\n    owner = match[1];\r\n    repo = match[2];\r\n  } else {\r\n    throw new Error('Could not parse repository info');\r\n  }\r\n} catch (error) {\r\n  console.error(' Error: Could not determine repository info');\r\n  console.error('Make sure you are in a git repository with GitHub remote');\r\n  exit(1);\r\n}\r\n\r\nconsole.log(` Repository: ${owner}/${repo}\\n`);\r\n\r\n/**\r\n * Fetch all caches using GitHub CLI\r\n */\r\nfunction fetchCachesWithCLI() {\r\n  const caches = [];\r\n  let page = 1;\r\n  const perPage = 100;\r\n  \r\n  while (true) {\r\n    try {\r\n      const output = execSync(\r\n        `gh api \"repos/${owner}/${repo}/actions/caches?per_page=${perPage}&page=${page}\"`,\r\n        { encoding: 'utf8', shell: 'powershell.exe' }\r\n      );\r\n      \r\n      const data = JSON.parse(output);\r\n      \r\n      if (!data.actions_caches || data.actions_caches.length === 0) {\r\n        break;\r\n      }\r\n      \r\n      caches.push(...data.actions_caches);\r\n      console.log(` Fetched page ${page}: ${data.actions_caches.length} caches`);\r\n      page++;\r\n      \r\n      // Check if we've reached the last page\r\n      if (data.actions_caches.length < perPage) {\r\n        break;\r\n      }\r\n    } catch (error) {\r\n      console.error(' Error fetching caches:', error.message);\r\n      exit(1);\r\n    }\r\n  }\r\n  \r\n  return caches;\r\n}\r\n\r\n/**\r\n * Fetch all caches using GitHub API\r\n */\r\nasync function fetchCachesWithAPI() {\r\n  const caches = [];\r\n  let page = 1;\r\n  const perPage = 100;\r\n  \r\n  while (true) {\r\n    try {\r\n      const response = await fetch(\r\n        `https://api.github.com/repos/${owner}/${repo}/actions/caches?per_page=${perPage}&page=${page}`,\r\n        {\r\n          headers: {\r\n            'Authorization': `Bearer ${process.env.GITHUB_TOKEN}`,\r\n            'Accept': 'application/vnd.github+json',\r\n            'X-GitHub-Api-Version': '2022-11-28',\r\n          },\r\n        }\r\n      );\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (!data.actions_caches || data.actions_caches.length === 0) {\r\n        break;\r\n      }\r\n      \r\n      caches.push(...data.actions_caches);\r\n      page++;\r\n      \r\n      // Check if we've reached the last page\r\n      if (data.actions_caches.length < perPage) {\r\n        break;\r\n      }\r\n    } catch (error) {\r\n      console.error(' Error fetching caches:', error.message);\r\n      exit(1);\r\n    }\r\n  }\r\n  \r\n  return caches;\r\n}\r\n\r\n/**\r\n * Delete a cache by ID\r\n */\r\nfunction deleteCacheWithCLI(cacheId) {\r\n  try {\r\n    execSync(\r\n      `gh api --method DELETE repos/${owner}/${repo}/actions/caches/${cacheId}`,\r\n      { stdio: 'ignore' }\r\n    );\r\n    return true;\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Delete a cache by ID using API\r\n */\r\nasync function deleteCacheWithAPI(cacheId) {\r\n  try {\r\n    const response = await fetch(\r\n      `https://api.github.com/repos/${owner}/${repo}/actions/caches/${cacheId}`,\r\n      {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${process.env.GITHUB_TOKEN}`,\r\n          'Accept': 'application/vnd.github+json',\r\n          'X-GitHub-Api-Version': '2022-11-28',\r\n        },\r\n      }\r\n    );\r\n    \r\n    return response.ok;\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Main cleanup logic\r\n */\r\nasync function cleanupCaches() {\r\n  // Fetch all caches\r\n  console.log(' Fetching caches...\\n');\r\n  const caches = useGhCli \r\n    ? fetchCachesWithCLI() \r\n    : await fetchCachesWithAPI();\r\n  \r\n  if (caches.length === 0) {\r\n    console.log(' No caches found!');\r\n    return;\r\n  }\r\n  \r\n  console.log(` Found ${caches.length} total caches\\n`);\r\n  \r\n  // Calculate total size\r\n  const totalSize = caches.reduce((sum, cache) => sum + cache.size_in_bytes, 0);\r\n  const totalSizeGB = (totalSize / 1024 / 1024 / 1024).toFixed(2);\r\n  console.log(` Total cache size: ${totalSizeGB} GB\\n`);\r\n  \r\n  // Filter caches based on options\r\n  let cachesToDelete = caches;\r\n  \r\n  // Filter by branch\r\n  if (options.branch) {\r\n    cachesToDelete = cachesToDelete.filter(cache => cache.ref === `refs/heads/${options.branch}`);\r\n    console.log(` Filtered to branch '${options.branch}': ${cachesToDelete.length} caches\\n`);\r\n  }\r\n  \r\n  // Filter by age\r\n  if (!options.all) {\r\n    const cutoffDate = new Date();\r\n    cutoffDate.setDate(cutoffDate.getDate() - options.olderThanDays);\r\n    \r\n    cachesToDelete = cachesToDelete.filter(cache => {\r\n      const cacheDate = new Date(cache.created_at);\r\n      return cacheDate < cutoffDate;\r\n    });\r\n    \r\n    console.log(` Filtered to caches older than ${options.olderThanDays} day(s): ${cachesToDelete.length} caches\\n`);\r\n  }\r\n  \r\n  // Keep N most recent caches per branch\r\n  if (options.keepLatest > 0) {\r\n    const cachesByBranch = new Map();\r\n    \r\n    // Group caches by branch\r\n    caches.forEach(cache => {\r\n      const branch = cache.ref;\r\n      if (!cachesByBranch.has(branch)) {\r\n        cachesByBranch.set(branch, []);\r\n      }\r\n      cachesByBranch.get(branch).push(cache);\r\n    });\r\n    \r\n    // Sort each branch's caches by creation date (newest first)\r\n    cachesByBranch.forEach((branchCaches, branch) => {\r\n      branchCaches.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\r\n    });\r\n    \r\n    // Identify caches to keep\r\n    const cachesToKeep = new Set();\r\n    cachesByBranch.forEach((branchCaches, branch) => {\r\n      branchCaches.slice(0, options.keepLatest).forEach(cache => {\r\n        cachesToKeep.add(cache.id);\r\n      });\r\n    });\r\n    \r\n    // Filter out caches to keep\r\n    cachesToDelete = cachesToDelete.filter(cache => !cachesToKeep.has(cache.id));\r\n    \r\n    console.log(` Keeping ${options.keepLatest} most recent cache(s) per branch\\n`);\r\n    console.log(`  ${cachesToDelete.length} caches will be deleted\\n`);\r\n  }\r\n  \r\n  if (cachesToDelete.length === 0) {\r\n    console.log(' No caches to delete!');\r\n    return;\r\n  }\r\n  \r\n  // Show what will be deleted\r\n  console.log(' Caches to be deleted:\\n');\r\n  cachesToDelete.forEach((cache, index) => {\r\n    const sizeGB = (cache.size_in_bytes / 1024 / 1024 / 1024).toFixed(3);\r\n    const age = Math.floor((Date.now() - new Date(cache.created_at)) / (1000 * 60 * 60 * 24));\r\n    console.log(`  ${index + 1}. ${cache.key}`);\r\n    console.log(`     Size: ${sizeGB} GB | Age: ${age} day(s) | Branch: ${cache.ref}`);\r\n  });\r\n  \r\n  const deleteSizeGB = (\r\n    cachesToDelete.reduce((sum, cache) => sum + cache.size_in_bytes, 0) / 1024 / 1024 / 1024\r\n  ).toFixed(2);\r\n  \r\n  console.log(`\\n Total space to free: ${deleteSizeGB} GB\\n`);\r\n  \r\n  // Dry run check\r\n  if (options.dryRun) {\r\n    console.log(' DRY RUN - No caches were actually deleted');\r\n    console.log('Remove --dry-run flag to perform actual deletion');\r\n    return;\r\n  }\r\n  \r\n  // Confirm deletion\r\n  console.log('  WARNING: This will permanently delete the caches listed above!');\r\n  console.log('Press Ctrl+C to cancel, or wait 5 seconds to continue...\\n');\r\n  \r\n  await new Promise(resolve => setTimeout(resolve, 5000));\r\n  \r\n  // Delete caches\r\n  console.log('  Deleting caches...\\n');\r\n  \r\n  let deleted = 0;\r\n  let failed = 0;\r\n  \r\n  for (const cache of cachesToDelete) {\r\n    const success = useGhCli \r\n      ? deleteCacheWithCLI(cache.id)\r\n      : await deleteCacheWithAPI(cache.id);\r\n    \r\n    if (success) {\r\n      deleted++;\r\n      const sizeGB = (cache.size_in_bytes / 1024 / 1024 / 1024).toFixed(3);\r\n      console.log(` Deleted: ${cache.key} (${sizeGB} GB)`);\r\n    } else {\r\n      failed++;\r\n      console.log(` Failed: ${cache.key}`);\r\n    }\r\n    \r\n    // Rate limiting: wait 100ms between deletions\r\n    await new Promise(resolve => setTimeout(resolve, 100));\r\n  }\r\n  \r\n  console.log(`\\n Summary:`);\r\n  console.log(`    Deleted: ${deleted} caches`);\r\n  console.log(`    Failed: ${failed} caches`);\r\n  console.log(`    Space freed: ${deleteSizeGB} GB (estimated)`);\r\n  console.log(`\\n Cache cleanup complete!`);\r\n}\r\n\r\n// Run cleanup\r\ncleanupCaches().catch(error => {\r\n  console.error(' Fatal error:', error);\r\n  exit(1);\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\scripts\\clear-cache.mjs","messages":[{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":17,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":17,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":21,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":21,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":22,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":22,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":23,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":23,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":33,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":33,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":34,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":34,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":35,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":35,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":38,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":38,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":43,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":43,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":47,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":47,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":51,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":51,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":52,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":52,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":55,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":55,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":56,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":56,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":57,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":57,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":60,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":60,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":61,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":61,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":62,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":63,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":63,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":64,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":64,"endColumn":8}],"suppressedMessages":[],"errorCount":20,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\r\n/**\r\n * Manual cache clearing utility for YouTube data\r\n * Run this script to clear cached YouTube playlist/channel data\r\n */\r\n\r\nimport * as fs from 'fs';\r\nimport * as path from 'path';\r\nimport { fileURLToPath } from 'url';\r\n\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = path.dirname(__filename);\r\n\r\nconst CACHE_DIR = path.join(__dirname, '..', 'server', 'cache');\r\nconst CACHE_FILE = path.join(CACHE_DIR, 'youtube-playlist.json');\r\n\r\nconsole.log(' YouTube Cache Cleaner\\n');\r\n\r\n// Check if cache file exists\r\nif (!fs.existsSync(CACHE_FILE)) {\r\n  console.log(' No cache file found. Cache is already empty.');\r\n  console.log(`   Checked: ${CACHE_FILE}\\n`);\r\n  process.exit(0);\r\n}\r\n\r\n// Read cache file to show what's being deleted\r\ntry {\r\n  const stats = fs.statSync(CACHE_FILE);\r\n  const content = fs.readFileSync(CACHE_FILE, 'utf-8');\r\n  const cache = JSON.parse(content);\r\n  const keys = Object.keys(cache);\r\n  \r\n  console.log(' Current Cache Contents:');\r\n  console.log(`   File size: ${(stats.size / 1024).toFixed(2)} KB`);\r\n  console.log(`   Cached items: ${keys.length}`);\r\n  \r\n  if (keys.length > 0) {\r\n    console.log('   Cache keys:');\r\n    keys.forEach(key => {\r\n      const entry = cache[key];\r\n      const age = Date.now() - entry.timestamp;\r\n      const ageHours = (age / (1000 * 60 * 60)).toFixed(1);\r\n      console.log(`     - ${key} (${entry.videos?.length || 0} videos, ${ageHours}h old)`);\r\n    });\r\n  }\r\n  \r\n  console.log('');\r\n  \r\n  // Delete the cache file\r\n  fs.unlinkSync(CACHE_FILE);\r\n  console.log(' Cache cleared successfully!');\r\n  console.log(`   Deleted: ${CACHE_FILE}\\n`);\r\n  \r\n} catch (error) {\r\n  console.error(' Error clearing cache:', error.message);\r\n  console.error('   You may need to manually delete:', CACHE_FILE);\r\n  process.exit(1);\r\n}\r\n\r\nconsole.log(' Next Steps:');\r\nconsole.log('   1. Cache will rebuild on next API request');\r\nconsole.log('   2. Check that latest code is deployed');\r\nconsole.log('   3. Verify environment variables are set');\r\nconsole.log('');\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\scripts\\license-check.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":52,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":52,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":56,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":56,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":63,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":63,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":64,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":64,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":154,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":154,"endColumn":36},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":156,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":156,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":159,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":159,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":160,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":160,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":161,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":161,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":162,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":162,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":163,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":163,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":164,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":164,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":168,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":168,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":171,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":171,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":172,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":172,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":173,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":173,"endColumn":16},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":176,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":176,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":177,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":177,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":178,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":178,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":179,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":179,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":180,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":180,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":182,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":182,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":185,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":185,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":186,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":186,"endColumn":12}],"suppressedMessages":[],"errorCount":24,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\r\n\r\n/**\r\n * License Compliance Checker\r\n * \r\n * Scans all dependencies and ensures they use approved licenses.\r\n * Fails build if unapproved or risky licenses are detected.\r\n */\r\n\r\nimport checker from 'license-checker';\r\nimport { writeFileSync } from 'fs';\r\nimport { join } from 'path';\r\n\r\n// Approved licenses (permissive and business-friendly)\r\nconst APPROVED_LICENSES = [\r\n  'MIT',\r\n  'MIT*', // MIT from package.json\r\n  'ISC',\r\n  'Apache-2.0',\r\n  'BSD-2-Clause',\r\n  'BSD-3-Clause',\r\n  'BSD*', // BSD from package.json\r\n  'CC0-1.0',\r\n  'CC-BY-3.0',\r\n  'CC-BY-4.0',\r\n  'Unlicense',\r\n  '0BSD',\r\n  'Python-2.0',\r\n  'BlueOak-1.0.0', // Permissive, OSI-approved\r\n];\r\n\r\n// Risky licenses that require review\r\nconst RISKY_LICENSES = [\r\n  'GPL-2.0',\r\n  'GPL-3.0',\r\n  'LGPL-2.1',\r\n  'LGPL-3.0',\r\n  'AGPL-3.0',\r\n  'MPL-2.0',\r\n  'CDDL-1.0',\r\n  'EPL-1.0',\r\n];\r\n\r\n// Known exceptions (packages we've reviewed and approved)\r\nconst EXCEPTIONS = {\r\n  // LGPL binary libraries - Safe for dynamic linking (not modifying source)\r\n  '@img/sharp-libvips-linux-x64@1.2.4': 'LGPL-3.0-or-later (binary library, dynamic linking)',\r\n  '@img/sharp-libvips-linuxmusl-x64@1.2.4': 'LGPL-3.0-or-later (binary library, dynamic linking)',\r\n  '@img/sharp-win32-x64@0.34.5': 'Apache-2.0 AND LGPL-3.0-or-later (binary library, dual-licensed)',\r\n};\r\n\r\nconsole.log(' Scanning license compliance...\\n');\r\n\r\nchecker.init(\r\n  {\r\n    start: process.cwd(),\r\n    production: true, // Only check production dependencies\r\n    json: true,\r\n    excludePrivatePackages: true,\r\n  },\r\n  (err, packages) => {\r\n    if (err) {\r\n      console.error(' License check failed:', err);\r\n      process.exit(1);\r\n    }\r\n\r\n    const results = {\r\n      total: 0,\r\n      approved: 0,\r\n      risky: 0,\r\n      unapproved: 0,\r\n      unknown: 0,\r\n      packages: {},\r\n    };\r\n\r\n    const issues = [];\r\n\r\n    for (const [name, info] of Object.entries(packages)) {\r\n      results.total++;\r\n      \r\n      // Parse license string (handle SPDX expressions)\r\n      let licenses = info.licenses;\r\n      if (typeof licenses === 'string') {\r\n        licenses = licenses.split(/\\s+(?:OR|AND)\\s+/);\r\n      } else if (Array.isArray(licenses)) {\r\n        // Already an array\r\n      } else {\r\n        licenses = ['UNKNOWN'];\r\n      }\r\n\r\n      // Check if exception\r\n      if (EXCEPTIONS[name]) {\r\n        results.approved++;\r\n        results.packages[name] = {\r\n          license: info.licenses,\r\n          status: 'approved (exception)',\r\n        };\r\n        continue;\r\n      }\r\n\r\n      // Check each license\r\n      let status = 'unapproved';\r\n      let hasApproved = false;\r\n      let hasRisky = false;\r\n      let hasUnapproved = false;\r\n\r\n      for (const license of licenses) {\r\n        const cleanLicense = license.trim();\r\n        \r\n        if (APPROVED_LICENSES.includes(cleanLicense)) {\r\n          hasApproved = true;\r\n        } else if (RISKY_LICENSES.includes(cleanLicense)) {\r\n          hasRisky = true;\r\n        } else if (cleanLicense === 'UNKNOWN' || cleanLicense === 'UNLICENSED') {\r\n          results.unknown++;\r\n          hasUnapproved = true;\r\n        } else {\r\n          hasUnapproved = true;\r\n        }\r\n      }\r\n\r\n      // Determine final status\r\n      if (hasUnapproved || (licenses.length === 1 && licenses[0] === 'UNKNOWN')) {\r\n        status = 'unapproved';\r\n        results.unapproved++;\r\n        issues.push({\r\n          package: name,\r\n          license: info.licenses,\r\n          severity: 'high',\r\n          message: 'Unapproved or unknown license',\r\n        });\r\n      } else if (hasRisky) {\r\n        status = 'risky';\r\n        results.risky++;\r\n        issues.push({\r\n          package: name,\r\n          license: info.licenses,\r\n          severity: 'medium',\r\n          message: 'Copyleft license requires review',\r\n        });\r\n      } else if (hasApproved) {\r\n        status = 'approved';\r\n        results.approved++;\r\n      }\r\n\r\n      results.packages[name] = {\r\n        license: info.licenses,\r\n        repository: info.repository,\r\n        status,\r\n      };\r\n    }\r\n\r\n    // Write detailed report\r\n    const reportPath = join(process.cwd(), 'reports', 'license-compliance.json');\r\n    writeFileSync(reportPath, JSON.stringify(results, null, 2));\r\n    console.log(` Detailed report: ${reportPath}\\n`);\r\n\r\n    // Print summary\r\n    console.log(' License Compliance Summary:');\r\n    console.log(`   Total packages: ${results.total}`);\r\n    console.log(`    Approved: ${results.approved}`);\r\n    console.log(`     Risky: ${results.risky}`);\r\n    console.log(`    Unapproved: ${results.unapproved}`);\r\n    console.log(`    Unknown: ${results.unknown}\\n`);\r\n\r\n    // Print issues\r\n    if (issues.length > 0) {\r\n      console.log('  License Issues Found:\\n');\r\n      issues.forEach((issue) => {\r\n        const icon = issue.severity === 'high' ? '' : '';\r\n        console.log(`${icon} ${issue.package}`);\r\n        console.log(`   License: ${issue.license}`);\r\n        console.log(`   ${issue.message}\\n`);\r\n      });\r\n\r\n      console.log('\\n Next steps:');\r\n      console.log('   1. Review each package and its license');\r\n      console.log('   2. Consider alternatives with approved licenses');\r\n      console.log('   3. Add reviewed packages to EXCEPTIONS in scripts/license-check.js');\r\n      console.log('   4. Consult legal team for copyleft licenses\\n');\r\n\r\n      process.exit(1);\r\n    }\r\n\r\n    console.log(' All licenses are compliant!\\n');\r\n    process.exit(0);\r\n  }\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\scripts\\optimize-character-images.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":27,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":27,"endColumn":14,"suggestions":[{"fix":{"range":[829,904],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":28,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":28,"endColumn":14,"suggestions":[{"fix":{"range":[908,1042],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":36,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":36,"endColumn":14,"suggestions":[{"fix":{"range":[1237,1303],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":55,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":55,"endColumn":14,"suggestions":[{"fix":{"range":[1857,1890],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":56,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":56,"endColumn":14,"suggestions":[{"fix":{"range":[1894,1971],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":57,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":57,"endColumn":14,"suggestions":[{"fix":{"range":[1975,2052],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":58,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":58,"endColumn":14,"suggestions":[{"fix":{"range":[2056,2148],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":59,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":59,"endColumn":14,"suggestions":[{"fix":{"range":[2152,2233],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as fs from 'fs';\r\nimport * as path from 'path';\r\n\r\nimport sharp from 'sharp';\r\n\r\nconst CHARACTERS_DIR = path.join(process.cwd(), 'client', 'public', 'characters');\r\n\r\nasync function optimizeImage(inputPath: string, outputPath: string, maxWidth: number, quality: number) {\r\n  const image = sharp(inputPath);\r\n  const metadata = await image.metadata();\r\n  \r\n  const needsResize = metadata.width && metadata.width > maxWidth;\r\n  \r\n  let pipeline = image;\r\n  if (needsResize) {\r\n    pipeline = pipeline.resize(maxWidth, undefined, { withoutEnlargement: true });\r\n  }\r\n  \r\n  await pipeline\r\n    .webp({ quality })\r\n    .toFile(outputPath);\r\n  \r\n  const inputStats = fs.statSync(inputPath);\r\n  const outputStats = fs.statSync(outputPath);\r\n  const savings = ((1 - outputStats.size / inputStats.size) * 100).toFixed(1);\r\n  \r\n  console.log(`${path.basename(inputPath)} -> ${path.basename(outputPath)}`);\r\n  console.log(`  ${(inputStats.size / 1024 / 1024).toFixed(2)} MB -> ${(outputStats.size / 1024).toFixed(0)} KB (${savings}% smaller)`);\r\n  \r\n  return { inputSize: inputStats.size, outputSize: outputStats.size };\r\n}\r\n\r\nasync function main() {\r\n  const files = fs.readdirSync(CHARACTERS_DIR).filter(f => f.endsWith('.png'));\r\n  \r\n  console.log(`\\nOptimizing ${files.length} character images...\\n`);\r\n  \r\n  let totalInputSize = 0;\r\n  let totalOutputSize = 0;\r\n  \r\n  for (const file of files) {\r\n    const inputPath = path.join(CHARACTERS_DIR, file);\r\n    const outputName = file.replace('.png', '.webp');\r\n    const outputPath = path.join(CHARACTERS_DIR, outputName);\r\n    \r\n    try {\r\n      const { inputSize, outputSize } = await optimizeImage(inputPath, outputPath, 800, 85);\r\n      totalInputSize += inputSize;\r\n      totalOutputSize += outputSize;\r\n    } catch (error) {\r\n      console.error(`Error optimizing ${file}:`, error);\r\n    }\r\n  }\r\n  \r\n  console.log(`\\n=== Summary ===`);\r\n  console.log(`Total before: ${(totalInputSize / 1024 / 1024).toFixed(2)} MB`);\r\n  console.log(`Total after: ${(totalOutputSize / 1024 / 1024).toFixed(2)} MB`);\r\n  console.log(`Total savings: ${((1 - totalOutputSize / totalInputSize) * 100).toFixed(1)}%`);\r\n  console.log(`\\nDon't forget to update characters.json to use .webp extensions!`);\r\n}\r\n\r\nmain().catch(console.error);\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\scripts\\optimize-images.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":41,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":41,"endColumn":14,"suggestions":[{"fix":{"range":[1262,1337],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":42,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":42,"endColumn":14,"suggestions":[{"fix":{"range":[1341,1475],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":54,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":54,"endColumn":14,"suggestions":[{"fix":{"range":[1720,1776],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":75,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":75,"endColumn":14,"suggestions":[{"fix":{"range":[2473,2506],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":76,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":76,"endColumn":14,"suggestions":[{"fix":{"range":[2510,2587],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":77,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":77,"endColumn":14,"suggestions":[{"fix":{"range":[2591,2668],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":78,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":78,"endColumn":14,"suggestions":[{"fix":{"range":[2672,2764],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as fs from 'fs';\r\nimport * as path from 'path';\r\n\r\nimport sharp from 'sharp';\r\n\r\nconst ASSETS_DIR = path.join(process.cwd(), 'client', 'src', 'assets');\r\nconst OUTPUT_DIR = path.join(process.cwd(), 'client', 'src', 'assets', 'optimized');\r\n\r\ninterface OptimizeConfig {\r\n  pattern: RegExp;\r\n  maxWidth: number;\r\n  quality: number;\r\n}\r\n\r\nconst configs: OptimizeConfig[] = [\r\n  { pattern: /^hero-/, maxWidth: 1920, quality: 80 },\r\n  { pattern: /^feat-/, maxWidth: 1200, quality: 80 },\r\n  { pattern: /^cast-/, maxWidth: 400, quality: 85 },\r\n  { pattern: /^creepy-/, maxWidth: 1200, quality: 80 },\r\n];\r\n\r\nasync function optimizeImage(inputPath: string, outputPath: string, maxWidth: number, quality: number) {\r\n  const image = sharp(inputPath);\r\n  const metadata = await image.metadata();\r\n  \r\n  const needsResize = metadata.width && metadata.width > maxWidth;\r\n  \r\n  let pipeline = image;\r\n  if (needsResize) {\r\n    pipeline = pipeline.resize(maxWidth, undefined, { withoutEnlargement: true });\r\n  }\r\n  \r\n  await pipeline\r\n    .webp({ quality })\r\n    .toFile(outputPath);\r\n  \r\n  const inputStats = fs.statSync(inputPath);\r\n  const outputStats = fs.statSync(outputPath);\r\n  const savings = ((1 - outputStats.size / inputStats.size) * 100).toFixed(1);\r\n  \r\n  console.log(`${path.basename(inputPath)} -> ${path.basename(outputPath)}`);\r\n  console.log(`  ${(inputStats.size / 1024 / 1024).toFixed(2)} MB -> ${(outputStats.size / 1024).toFixed(0)} KB (${savings}% smaller)`);\r\n}\r\n\r\nasync function main() {\r\n  if (!fs.existsSync(OUTPUT_DIR)) {\r\n    fs.mkdirSync(OUTPUT_DIR, { recursive: true });\r\n  }\r\n  \r\n  const files = fs.readdirSync(ASSETS_DIR).filter(f => \r\n    f.endsWith('.png') || f.endsWith('.jpg')\r\n  );\r\n  \r\n  console.log(`\\nOptimizing ${files.length} images...\\n`);\r\n  \r\n  let totalInputSize = 0;\r\n  let totalOutputSize = 0;\r\n  \r\n  for (const file of files) {\r\n    const inputPath = path.join(ASSETS_DIR, file);\r\n    const outputName = file.replace(/\\.(png|jpg)$/, '.webp');\r\n    const outputPath = path.join(OUTPUT_DIR, outputName);\r\n    \r\n    const config = configs.find(c => c.pattern.test(file)) || { maxWidth: 1200, quality: 80, pattern: /.*/ };\r\n    \r\n    try {\r\n      await optimizeImage(inputPath, outputPath, config.maxWidth, config.quality);\r\n      totalInputSize += fs.statSync(inputPath).size;\r\n      totalOutputSize += fs.statSync(outputPath).size;\r\n    } catch (error) {\r\n      console.error(`Error optimizing ${file}:`, error);\r\n    }\r\n  }\r\n  \r\n  console.log(`\\n=== Summary ===`);\r\n  console.log(`Total before: ${(totalInputSize / 1024 / 1024).toFixed(2)} MB`);\r\n  console.log(`Total after: ${(totalOutputSize / 1024 / 1024).toFixed(2)} MB`);\r\n  console.log(`Total savings: ${((1 - totalOutputSize / totalInputSize) * 100).toFixed(1)}%`);\r\n}\r\n\r\nmain().catch(console.error);\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\scripts\\sync-env.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":56,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":56,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":68,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":68,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":69,"column":35,"nodeType":"Identifier","messageId":"undef","endLine":69,"endColumn":42},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":70,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":70,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":77,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":77,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":78,"column":36,"nodeType":"Identifier","messageId":"undef","endLine":78,"endColumn":43},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":79,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":79,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":85,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":85,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":86,"column":33,"nodeType":"Identifier","messageId":"undef","endLine":86,"endColumn":40},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":87,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":87,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":92,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":92,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":93,"column":34,"nodeType":"Identifier","messageId":"undef","endLine":93,"endColumn":41},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":94,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":94,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":98,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":98,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":100,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":100,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":101,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":101,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":111,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":111,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":115,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":115,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":116,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":116,"endColumn":37},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":172,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":172,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":177,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":177,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":186,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":186,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":188,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":188,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":196,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":196,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":198,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":198,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":201,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":201,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":202,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":202,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":206,"column":17,"nodeType":"Identifier","messageId":"undef","endLine":206,"endColumn":24},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":213,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":213,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":214,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":214,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":215,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":215,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":216,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":216,"endColumn":10}],"suppressedMessages":[],"errorCount":32,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\r\n/**\r\n * Environment File Synchronization Script\r\n * \r\n * Ensures .env and .env.docker stay in sync by:\r\n * 1. Checking if all keys in .env.example exist in both files\r\n * 2. Warning about missing keys\r\n * 3. Optionally syncing keys (without values for security)\r\n */\r\n\r\nimport fs from 'fs';\r\nimport path from 'path';\r\nimport { fileURLToPath } from 'url';\r\n\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = path.dirname(__filename);\r\nconst rootDir = path.resolve(__dirname, '..');\r\n\r\nconst ENV_EXAMPLE = path.join(rootDir, '.env.example');\r\nconst ENV_LOCAL = path.join(rootDir, '.env');\r\nconst ENV_DOCKER = path.join(rootDir, '.env.docker');\r\n\r\n// Parse env file into key-value pairs\r\nfunction parseEnvFile(filePath) {\r\n  if (!fs.existsSync(filePath)) {\r\n    return { keys: new Set(), lines: [] };\r\n  }\r\n\r\n  const content = fs.readFileSync(filePath, 'utf-8');\r\n  const lines = content.split('\\n');\r\n  const keys = new Set();\r\n\r\n  lines.forEach(line => {\r\n    const trimmed = line.trim();\r\n    // Skip comments and empty lines\r\n    if (!trimmed || trimmed.startsWith('#')) return;\r\n    \r\n    // Extract key from KEY=VALUE\r\n    const match = trimmed.match(/^([A-Z_][A-Z0-9_]*)=/);\r\n    if (match) {\r\n      keys.add(match[1]);\r\n    }\r\n  });\r\n\r\n  return { keys, lines };\r\n}\r\n\r\n// Get all keys from .env.example (template)\r\nfunction getTemplateKeys() {\r\n  const { keys } = parseEnvFile(ENV_EXAMPLE);\r\n  return keys;\r\n}\r\n\r\n// Check sync status\r\nfunction checkSync() {\r\n  console.log(' Checking environment file synchronization...\\n');\r\n\r\n  const template = parseEnvFile(ENV_EXAMPLE);\r\n  const local = parseEnvFile(ENV_LOCAL);\r\n  const docker = parseEnvFile(ENV_DOCKER);\r\n\r\n  let hasIssues = false;\r\n\r\n  // Check .env\r\n  const missingInLocal = [...template.keys].filter(key => !local.keys.has(key));\r\n  if (missingInLocal.length > 0) {\r\n    hasIssues = true;\r\n    console.log('  Missing keys in .env:');\r\n    missingInLocal.forEach(key => console.log(`   - ${key}`));\r\n    console.log('');\r\n  }\r\n\r\n  // Check .env.docker\r\n  const missingInDocker = [...template.keys].filter(key => !docker.keys.has(key));\r\n  if (missingInDocker.length > 0) {\r\n    hasIssues = true;\r\n    console.log('  Missing keys in .env.docker:');\r\n    missingInDocker.forEach(key => console.log(`   - ${key}`));\r\n    console.log('');\r\n  }\r\n\r\n  // Check for extra keys not in template\r\n  const extraInLocal = [...local.keys].filter(key => !template.keys.has(key));\r\n  if (extraInLocal.length > 0) {\r\n    console.log('  Extra keys in .env (not in template):');\r\n    extraInLocal.forEach(key => console.log(`   - ${key}`));\r\n    console.log('');\r\n  }\r\n\r\n  const extraInDocker = [...docker.keys].filter(key => !template.keys.has(key));\r\n  if (extraInDocker.length > 0) {\r\n    console.log('  Extra keys in .env.docker (not in template):');\r\n    extraInDocker.forEach(key => console.log(`   - ${key}`));\r\n    console.log('');\r\n  }\r\n\r\n  if (!hasIssues) {\r\n    console.log(' All environment files are in sync!\\n');\r\n  } else {\r\n    console.log(' Run `npm run env:sync` to automatically add missing keys\\n');\r\n    process.exit(1);\r\n  }\r\n}\r\n\r\n// Sync missing keys from template to target file\r\nfunction syncFile(targetPath, templateKeys, existingContent) {\r\n  const { keys: existingKeys } = parseEnvFile(targetPath);\r\n  const missingKeys = [...templateKeys].filter(key => !existingKeys.has(key));\r\n\r\n  if (missingKeys.length === 0) {\r\n    console.log(` ${path.basename(targetPath)} is up to date`);\r\n    return;\r\n  }\r\n\r\n  console.log(` Adding ${missingKeys.length} missing keys to ${path.basename(targetPath)}:`);\r\n  missingKeys.forEach(key => console.log(`   + ${key}`));\r\n\r\n  // Read template to get comments and structure\r\n  const templateContent = fs.readFileSync(ENV_EXAMPLE, 'utf-8');\r\n  const templateLines = templateContent.split('\\n');\r\n\r\n  let newContent = existingContent;\r\n  let currentSection = '';\r\n  let sectionContent = '';\r\n\r\n  // Add a marker to show auto-added keys\r\n  newContent += '\\n# ============================================\\n';\r\n  newContent += '# AUTO-SYNCED FROM .env.example\\n';\r\n  newContent += `# Added: ${new Date().toISOString()}\\n`;\r\n  newContent += '# ============================================\\n\\n';\r\n\r\n  templateLines.forEach(line => {\r\n    const trimmed = line.trim();\r\n    \r\n    // Track sections\r\n    if (trimmed.startsWith('# ===')) {\r\n      if (sectionContent) {\r\n        newContent += sectionContent;\r\n        sectionContent = '';\r\n      }\r\n      currentSection = line;\r\n      return;\r\n    }\r\n\r\n    // Check if this line has a key we need\r\n    const match = trimmed.match(/^([A-Z_][A-Z0-9_]*)=/);\r\n    if (match && missingKeys.includes(match[1])) {\r\n      // Add section header if we have one\r\n      if (currentSection && !sectionContent) {\r\n        sectionContent += currentSection + '\\n';\r\n        currentSection = '';\r\n      }\r\n\r\n      // Add comment lines that come before this key\r\n      if (trimmed.startsWith('#') && !trimmed.startsWith('# ===')) {\r\n        sectionContent += line + '\\n';\r\n      } else {\r\n        // Add the key with a placeholder value\r\n        sectionContent += `${match[1]}=\\n`;\r\n      }\r\n    } else if (trimmed.startsWith('#') && !trimmed.startsWith('# ===') && sectionContent) {\r\n      // Add comments within a section\r\n      sectionContent += line + '\\n';\r\n    }\r\n  });\r\n\r\n  if (sectionContent) {\r\n    newContent += sectionContent;\r\n  }\r\n\r\n  fs.writeFileSync(targetPath, newContent);\r\n  console.log(` ${path.basename(targetPath)} updated successfully\\n`);\r\n}\r\n\r\n// Main sync function\r\nfunction sync() {\r\n  console.log(' Synchronizing environment files...\\n');\r\n\r\n  const templateKeys = getTemplateKeys();\r\n  \r\n  // Sync .env\r\n  if (fs.existsSync(ENV_LOCAL)) {\r\n    const localContent = fs.readFileSync(ENV_LOCAL, 'utf-8');\r\n    syncFile(ENV_LOCAL, templateKeys, localContent);\r\n  } else {\r\n    console.log('  .env file not found. Creating from template...');\r\n    fs.copyFileSync(ENV_EXAMPLE, ENV_LOCAL);\r\n    console.log(' Created .env from .env.example\\n');\r\n  }\r\n\r\n  // Sync .env.docker\r\n  if (fs.existsSync(ENV_DOCKER)) {\r\n    const dockerContent = fs.readFileSync(ENV_DOCKER, 'utf-8');\r\n    syncFile(ENV_DOCKER, templateKeys, dockerContent);\r\n  } else {\r\n    console.log('  .env.docker file not found. Creating from template...');\r\n    fs.copyFileSync(ENV_EXAMPLE, ENV_DOCKER);\r\n    console.log(' Created .env.docker from .env.example\\n');\r\n  }\r\n\r\n  console.log(' Environment file synchronization complete!');\r\n  console.log('  Remember to fill in the values for newly added keys\\n');\r\n}\r\n\r\n// CLI\r\nconst command = process.argv[2];\r\n\r\nif (command === 'check') {\r\n  checkSync();\r\n} else if (command === 'sync') {\r\n  sync();\r\n} else {\r\n  console.log('Usage:');\r\n  console.log('  npm run env:check  - Check if env files are in sync');\r\n  console.log('  npm run env:sync   - Add missing keys to env files');\r\n  process.exit(1);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\scripts\\test-printful-variant.mjs","messages":[{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":7,"column":23,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":8,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":23},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":11,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":11,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":12,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":12,"endColumn":10},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":15,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":20,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":20,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'fetch' is not defined.","line":22,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":22,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":29,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":30,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":30,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":34,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":34,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":35,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":35,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":36,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":36,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":40,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":40,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":41,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":41,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":42,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":42,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":47,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":47,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":48,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":48,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":51,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":51,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":52,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":52,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":53,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":53,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":54,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":54,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":55,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":55,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":56,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":56,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":61,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":61,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":62,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":62,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":63,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":63,"endColumn":14},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":66,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":66,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'console' is not defined.","line":68,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":68,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'process' is not defined.","line":69,"column":5,"nodeType":"Identifier","messageId":"undef","endLine":69,"endColumn":12}],"suppressedMessages":[],"errorCount":29,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\r\n/**\r\n * Test script to verify Printful variant ID resolution\r\n * Usage: node scripts/test-printful-variant.mjs <sync_variant_id>\r\n */\r\n\r\nconst syncVariantId = process.argv[2] || '5130270457';\r\nconst apiKey = process.env.PRINTFUL_API_KEY;\r\n\r\nif (!apiKey) {\r\n  console.error(' PRINTFUL_API_KEY environment variable not set');\r\n  process.exit(1);\r\n}\r\n\r\nconsole.log(`Testing variant resolution for sync variant: ${syncVariantId}\\n`);\r\n\r\nasync function testVariantResolution() {\r\n  try {\r\n    const url = `https://api.printful.com/store/variants/${syncVariantId}`;\r\n    console.log(` Fetching: ${url}`);\r\n    \r\n    const response = await fetch(url, {\r\n      headers: {\r\n        'Authorization': `Bearer ${apiKey}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n\r\n    console.log(` Response status: ${response.status}`);\r\n    console.log(` Response OK: ${response.ok}\\n`);\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      console.error(` API Error Response:`);\r\n      console.error(errorText);\r\n      process.exit(1);\r\n    }\r\n\r\n    const data = await response.json();\r\n    console.log(` Full API Response:`);\r\n    console.log(JSON.stringify(data, null, 2));\r\n    console.log('\\n');\r\n\r\n    const variant = data.result?.sync_variant;\r\n    \r\n    if (!variant) {\r\n      console.error(` No sync_variant found in response`);\r\n      process.exit(1);\r\n    }\r\n\r\n    console.log(` Found sync_variant`);\r\n    console.log(`   - Sync Variant ID: ${variant.id}`);\r\n    console.log(`   - Name: ${variant.name || 'N/A'}`);\r\n    console.log(`   - Retail Price: ${variant.retail_price || 'N/A'}`);\r\n    console.log(`   - Variant ID (catalog): ${variant.variant_id || 'NOT FOUND'}`);\r\n    console.log(`   - Product Variant ID: ${variant.product?.variant_id || 'NOT FOUND'}`);\r\n\r\n    const catalogId = variant?.variant_id || variant?.product?.variant_id;\r\n\r\n    if (!catalogId) {\r\n      console.error(`\\n Could not find catalog variant ID`);\r\n      console.error(`Variant structure:`, JSON.stringify(variant, null, 2));\r\n      process.exit(1);\r\n    }\r\n\r\n    console.log(`\\n SUCCESS: Sync variant ${syncVariantId}  Catalog variant ${catalogId}`);\r\n  } catch (error) {\r\n    console.error(`\\n Exception:`, error);\r\n    process.exit(1);\r\n  }\r\n}\r\n\r\ntestVariantResolution();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\scripts\\update-all-characters.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":68,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2023,2026],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2023,2026],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":91,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":91,"endColumn":14,"suggestions":[{"fix":{"range":[2625,2698],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":97,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":97,"endColumn":16,"suggestions":[{"fix":{"range":[2863,2898],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":98,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":98,"endColumn":16,"suggestions":[{"fix":{"range":[2904,2945],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":99,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":99,"endColumn":16,"suggestions":[{"fix":{"range":[2951,2986],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":102,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":102,"endColumn":18,"suggestions":[{"fix":{"range":[3034,3077],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":106,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":106,"endColumn":20,"suggestions":[{"fix":{"range":[3190,3265],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":107,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":107,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":107,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":107,"endColumn":21},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":115,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":115,"endColumn":14,"suggestions":[{"fix":{"range":[3488,3525],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":116,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":116,"endColumn":14,"suggestions":[{"fix":{"range":[3529,3606],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":117,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":117,"endColumn":14,"suggestions":[{"fix":{"range":[3610,3647],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":128,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4087,4090],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4087,4090],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":132,"column":28,"nodeType":"MemberExpression","endLine":132,"endColumn":64},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":135,"column":7,"nodeType":"MemberExpression","endLine":135,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":143,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4649,4652],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4649,4652],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":158,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":158,"endColumn":18,"suggestions":[{"fix":{"range":[5137,5180],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":164,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":164,"endColumn":14,"suggestions":[{"fix":{"range":[5309,5344],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":165,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":165,"endColumn":14,"suggestions":[{"fix":{"range":[5348,5432],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":166,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":166,"endColumn":14,"suggestions":[{"fix":{"range":[5436,5464],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Script to fetch fresh D&D Beyond data for ALL campaigns\r\n * and update characters.json with the correct information\r\n */\r\n\r\nimport { readFileSync, writeFileSync } from 'fs';\r\nimport { join } from 'path';\r\n\r\nconst CAMPAIGN_CHARACTER_IDS = {\r\n  'Journeys Through Taebrin': [\r\n    '151530168', // Wayne \"Archivist of Lies\"\r\n    '151527820', // Carine Sol\r\n    '153687176', // Erys Leandorian\r\n    '147130895', // Freya Fenrir\r\n    '151498356', // Porphan Valaritas\r\n    '151508871', // Titheus Cillbrost\r\n  ],\r\n  'Aneria - Wayward Watch': [\r\n    '45818629',  // Bolt\r\n    '46268811',  // Victor Udonta\r\n    '94493888',  // Winifred (Fred) Blodbane\r\n    '79518285',  // Alomah Stargazer\r\n    '79078434',  // Aramis Alderhelm\r\n    '133741834', // Auron Dawncloak\r\n    '47697687',  // Ferra Shadowmend\r\n    '67943311',  // Grelka\r\n    '56077210',  // Mirielle Aldwood\r\n    '56497643',  // Ryn Darkspear\r\n    '52932329',  // Zevander Draven\r\n  ],\r\n  'Pterrordale': [\r\n    '58907127',  // Daevor\r\n    '58917752',  // Lucian\r\n    '111107998', // Moira\r\n    '111110601', // Sylas Dreadmoor\r\n    '134997127', // Thorne Blackwood\r\n  ],\r\n};\r\n\r\nconst alignmentMap: { [key: number]: string } = {\r\n  1: 'Lawful Good',\r\n  2: 'Neutral Good',\r\n  3: 'Chaotic Good',\r\n  4: 'Lawful Neutral',\r\n  5: 'True Neutral',\r\n  6: 'Chaotic Neutral',\r\n  7: 'Lawful Evil',\r\n  8: 'Neutral Evil',\r\n  9: 'Chaotic Evil'\r\n};\r\n\r\nasync function fetchCharacterData(characterId: string) {\r\n  try {\r\n    const response = await fetch(\r\n      `https://character-service.dndbeyond.com/character/v5/character/${characterId}`\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Failed to fetch character ${characterId}: ${response.statusText}`);\r\n    }\r\n\r\n    const json = await response.json();\r\n    const character = json.data;\r\n\r\n    // Extract class and level information\r\n    const primaryClass = character.classes[0];\r\n    const className = primaryClass?.definition?.name || 'Unknown';\r\n    const totalLevel = character.classes.reduce((sum: number, c: any) => sum + c.level, 0);\r\n\r\n    // Get alignment\r\n    const alignment = character.alignmentId \r\n      ? alignmentMap[character.alignmentId] || 'Unknown'\r\n      : 'Unknown';\r\n\r\n    return {\r\n      dndbeyondId: characterId,\r\n      name: character.name,\r\n      race: character.race.fullName,\r\n      class: className,\r\n      level: totalLevel,\r\n      alignment: alignment,\r\n      avatarUrl: character.decorations?.avatarUrl || character.avatarUrl,\r\n    };\r\n  } catch (error) {\r\n    console.error(`Error fetching character ${characterId}:`, error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nasync function main() {\r\n  console.log('Fetching D&D Beyond character data for ALL campaigns...\\n');\r\n\r\n  const allCharacterData = [];\r\n\r\n  // Fetch data for each campaign\r\n  for (const [campaignName, characterIds] of Object.entries(CAMPAIGN_CHARACTER_IDS)) {\r\n    console.log(`\\n${'='.repeat(60)}`);\r\n    console.log(`CAMPAIGN: ${campaignName}`);\r\n    console.log(`${'='.repeat(60)}\\n`);\r\n\r\n    for (const id of characterIds) {\r\n      console.log(`Fetching character ${id}...`);\r\n      try {\r\n        const data = await fetchCharacterData(id);\r\n        allCharacterData.push(data);\r\n        console.log(`   ${data.name} - ${data.race} ${data.class} ${data.level}`);\r\n      } catch (error) {\r\n        console.error(`   Failed to fetch character ${id}`);\r\n      }\r\n      // Small delay to avoid rate limiting\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n    }\r\n  }\r\n\r\n  console.log(`\\n${  '='.repeat(60)}`);\r\n  console.log(` Fetched ${allCharacterData.length} characters successfully!`);\r\n  console.log(`${'='.repeat(60)  }\\n`);\r\n\r\n  // Read existing characters.json\r\n  const charactersPath = join(process.cwd(), 'client/src/data/characters.json');\r\n  const charactersFile = readFileSync(charactersPath, 'utf-8');\r\n  const charactersJson = JSON.parse(charactersFile);\r\n\r\n  // Update each character with fresh D&D Beyond data\r\n  let updatedCount = 0;\r\n  for (const freshData of allCharacterData) {\r\n    const charIndex = charactersJson.characters.findIndex(\r\n      (c: any) => c.dndbeyondId === freshData.dndbeyondId\r\n    );\r\n\r\n    if (charIndex !== -1) {\r\n      const existingChar = charactersJson.characters[charIndex];\r\n      \r\n      // Update only the D&D Beyond-derived fields\r\n      charactersJson.characters[charIndex] = {\r\n        ...existingChar,\r\n        race: freshData.race,\r\n        class: freshData.class,\r\n        level: freshData.level,\r\n        alignment: freshData.alignment,\r\n        featuredImage: freshData.avatarUrl,\r\n        images: existingChar.images.length > 0 \r\n          ? existingChar.images.map((img: any, idx: number) => \r\n              idx === 0 ? { ...img, url: freshData.avatarUrl } : img\r\n            )\r\n          : [{\r\n              id: \"1\",\r\n              url: freshData.avatarUrl,\r\n              caption: `${freshData.name} - Official Character Art`,\r\n              type: \"portrait\",\r\n              isFeatured: true,\r\n              copyright: \"D&D Beyond / Wizards of the Coast\",\r\n              isAiGenerated: false\r\n            }],\r\n      };\r\n      \r\n      updatedCount++;\r\n      console.log(` Updated ${freshData.name}`);\r\n    }\r\n  }\r\n\r\n  // Write back to characters.json\r\n  writeFileSync(charactersPath, JSON.stringify(charactersJson, null, 2));\r\n  console.log(`\\n${'='.repeat(60)}`);\r\n  console.log(` Successfully updated ${updatedCount} characters in characters.json`);\r\n  console.log('='.repeat(60));\r\n}\r\n\r\nmain().catch(console.error);\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\scripts\\update-aneria-characters.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1524,1527],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1524,1527],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":74,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":74,"endColumn":14,"suggestions":[{"fix":{"range":[2126,2208],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":79,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":79,"endColumn":16,"suggestions":[{"fix":{"range":[2313,2356],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":82,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":82,"endColumn":16,"suggestions":[{"fix":{"range":[2441,2514],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":87,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":87,"endColumn":14,"suggestions":[{"fix":{"range":[2629,2691],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":98,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3128,3131],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3128,3131],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":102,"column":28,"nodeType":"MemberExpression","endLine":102,"endColumn":64},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":105,"column":7,"nodeType":"MemberExpression","endLine":105,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":113,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3690,3693],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3690,3693],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":128,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":128,"endColumn":18,"suggestions":[{"fix":{"range":[4178,4221],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":134,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":134,"endColumn":14,"suggestions":[{"fix":{"range":[4350,4436],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Script to fetch fresh D&D Beyond data for Aneria - Wayward Watch characters\r\n * and update characters.json with the correct information\r\n */\r\n\r\nimport { readFileSync, writeFileSync } from 'fs';\r\nimport { join } from 'path';\r\n\r\nconst CHARACTER_IDS = [\r\n  '45818629',  // Bolt\r\n  '46268811',  // Victor Udonta\r\n  '94493888',  // Winifred (Fred) Blodbane\r\n  '79518285',  // Alomah Stargazer\r\n  '79078434',  // Aramis Alderhelm\r\n  '133741834', // Auron Dawncloak\r\n  '47697687',  // Ferra Shadowmend\r\n  '67943311',  // Grelka\r\n  '56077210',  // Mirielle Aldwood\r\n  '56497643',  // Ryn Darkspear\r\n  '52932329',  // Zevander Draven\r\n];\r\n\r\nconst alignmentMap: { [key: number]: string } = {\r\n  1: 'Lawful Good',\r\n  2: 'Neutral Good',\r\n  3: 'Chaotic Good',\r\n  4: 'Lawful Neutral',\r\n  5: 'True Neutral',\r\n  6: 'Chaotic Neutral',\r\n  7: 'Lawful Evil',\r\n  8: 'Neutral Evil',\r\n  9: 'Chaotic Evil'\r\n};\r\n\r\nasync function fetchCharacterData(characterId: string) {\r\n  try {\r\n    const response = await fetch(\r\n      `https://character-service.dndbeyond.com/character/v5/character/${characterId}`\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Failed to fetch character ${characterId}: ${response.statusText}`);\r\n    }\r\n\r\n    const json = await response.json();\r\n    const character = json.data;\r\n\r\n    // Extract class and level information\r\n    const primaryClass = character.classes[0];\r\n    const className = primaryClass?.definition?.name || 'Unknown';\r\n    const totalLevel = character.classes.reduce((sum: number, c: any) => sum + c.level, 0);\r\n\r\n    // Get alignment\r\n    const alignment = character.alignmentId \r\n      ? alignmentMap[character.alignmentId] || 'Unknown'\r\n      : 'Unknown';\r\n\r\n    return {\r\n      dndbeyondId: characterId,\r\n      name: character.name,\r\n      race: character.race.fullName,\r\n      class: className,\r\n      level: totalLevel,\r\n      alignment: alignment,\r\n      avatarUrl: character.decorations?.avatarUrl || character.avatarUrl,\r\n    };\r\n  } catch (error) {\r\n    console.error(`Error fetching character ${characterId}:`, error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nasync function main() {\r\n  console.log('Fetching D&D Beyond character data for Aneria - Wayward Watch...\\n');\r\n\r\n  // Fetch all character data\r\n  const characterData = [];\r\n  for (const id of CHARACTER_IDS) {\r\n    console.log(`Fetching character ${id}...`);\r\n    const data = await fetchCharacterData(id);\r\n    characterData.push(data);\r\n    console.log(`  ${data.name} - ${data.race} ${data.class} ${data.level}`);\r\n    // Small delay to avoid rate limiting\r\n    await new Promise(resolve => setTimeout(resolve, 500));\r\n  }\r\n\r\n  console.log('\\n All character data fetched successfully!\\n');\r\n\r\n  // Read existing characters.json\r\n  const charactersPath = join(process.cwd(), 'client/src/data/characters.json');\r\n  const charactersFile = readFileSync(charactersPath, 'utf-8');\r\n  const charactersJson = JSON.parse(charactersFile);\r\n\r\n  // Update each character with fresh D&D Beyond data\r\n  let updatedCount = 0;\r\n  for (const freshData of characterData) {\r\n    const charIndex = charactersJson.characters.findIndex(\r\n      (c: any) => c.dndbeyondId === freshData.dndbeyondId\r\n    );\r\n\r\n    if (charIndex !== -1) {\r\n      const existingChar = charactersJson.characters[charIndex];\r\n      \r\n      // Update only the D&D Beyond-derived fields\r\n      charactersJson.characters[charIndex] = {\r\n        ...existingChar,\r\n        race: freshData.race,\r\n        class: freshData.class,\r\n        level: freshData.level,\r\n        alignment: freshData.alignment,\r\n        featuredImage: freshData.avatarUrl,\r\n        images: existingChar.images.length > 0 \r\n          ? existingChar.images.map((img: any, idx: number) => \r\n              idx === 0 ? { ...img, url: freshData.avatarUrl } : img\r\n            )\r\n          : [{\r\n              id: \"1\",\r\n              url: freshData.avatarUrl,\r\n              caption: `${freshData.name} - Official Character Art`,\r\n              type: \"portrait\",\r\n              isFeatured: true,\r\n              copyright: \"D&D Beyond / Wizards of the Coast\",\r\n              isAiGenerated: false\r\n            }],\r\n      };\r\n      \r\n      updatedCount++;\r\n      console.log(` Updated ${freshData.name}`);\r\n    }\r\n  }\r\n\r\n  // Write back to characters.json\r\n  writeFileSync(charactersPath, JSON.stringify(charactersJson, null, 2));\r\n  console.log(`\\n Successfully updated ${updatedCount} characters in characters.json`);\r\n}\r\n\r\nmain().catch(console.error);\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\scripts\\update-pterrordale-characters.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1287,1290],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1287,1290],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":68,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":68,"endColumn":14,"suggestions":[{"fix":{"range":[1889,1960],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":73,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":73,"endColumn":16,"suggestions":[{"fix":{"range":[2065,2108],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":76,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":76,"endColumn":16,"suggestions":[{"fix":{"range":[2193,2266],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":81,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":81,"endColumn":14,"suggestions":[{"fix":{"range":[2381,2443],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2880,2883],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2880,2883],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":96,"column":28,"nodeType":"MemberExpression","endLine":96,"endColumn":64},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":99,"column":7,"nodeType":"MemberExpression","endLine":99,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":107,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3442,3445],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3442,3445],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":122,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":122,"endColumn":18,"suggestions":[{"fix":{"range":[3930,3973],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":128,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":128,"endColumn":14,"suggestions":[{"fix":{"range":[4102,4188],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Script to fetch fresh D&D Beyond data for Pterrordale characters\r\n * and update characters.json with the correct information\r\n */\r\n\r\nimport { readFileSync, writeFileSync } from 'fs';\r\nimport { join } from 'path';\r\n\r\nconst CHARACTER_IDS = [\r\n  '58907127',  // Daevor\r\n  '58917752',  // Lucian\r\n  '111107998', // Moira\r\n  '111110601', // Sylas Dreadmoor\r\n  '134997127', // Thorne Blackwood\r\n];\r\n\r\nconst alignmentMap: { [key: number]: string } = {\r\n  1: 'Lawful Good',\r\n  2: 'Neutral Good',\r\n  3: 'Chaotic Good',\r\n  4: 'Lawful Neutral',\r\n  5: 'True Neutral',\r\n  6: 'Chaotic Neutral',\r\n  7: 'Lawful Evil',\r\n  8: 'Neutral Evil',\r\n  9: 'Chaotic Evil'\r\n};\r\n\r\nasync function fetchCharacterData(characterId: string) {\r\n  try {\r\n    const response = await fetch(\r\n      `https://character-service.dndbeyond.com/character/v5/character/${characterId}`\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Failed to fetch character ${characterId}: ${response.statusText}`);\r\n    }\r\n\r\n    const json = await response.json();\r\n    const character = json.data;\r\n\r\n    // Extract class and level information\r\n    const primaryClass = character.classes[0];\r\n    const className = primaryClass?.definition?.name || 'Unknown';\r\n    const totalLevel = character.classes.reduce((sum: number, c: any) => sum + c.level, 0);\r\n\r\n    // Get alignment\r\n    const alignment = character.alignmentId \r\n      ? alignmentMap[character.alignmentId] || 'Unknown'\r\n      : 'Unknown';\r\n\r\n    return {\r\n      dndbeyondId: characterId,\r\n      name: character.name,\r\n      race: character.race.fullName,\r\n      class: className,\r\n      level: totalLevel,\r\n      alignment: alignment,\r\n      avatarUrl: character.decorations?.avatarUrl || character.avatarUrl,\r\n    };\r\n  } catch (error) {\r\n    console.error(`Error fetching character ${characterId}:`, error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nasync function main() {\r\n  console.log('Fetching D&D Beyond character data for Pterrordale...\\n');\r\n\r\n  // Fetch all character data\r\n  const characterData = [];\r\n  for (const id of CHARACTER_IDS) {\r\n    console.log(`Fetching character ${id}...`);\r\n    const data = await fetchCharacterData(id);\r\n    characterData.push(data);\r\n    console.log(`  ${data.name} - ${data.race} ${data.class} ${data.level}`);\r\n    // Small delay to avoid rate limiting\r\n    await new Promise(resolve => setTimeout(resolve, 500));\r\n  }\r\n\r\n  console.log('\\n All character data fetched successfully!\\n');\r\n\r\n  // Read existing characters.json\r\n  const charactersPath = join(process.cwd(), 'client/src/data/characters.json');\r\n  const charactersFile = readFileSync(charactersPath, 'utf-8');\r\n  const charactersJson = JSON.parse(charactersFile);\r\n\r\n  // Update each character with fresh D&D Beyond data\r\n  let updatedCount = 0;\r\n  for (const freshData of characterData) {\r\n    const charIndex = charactersJson.characters.findIndex(\r\n      (c: any) => c.dndbeyondId === freshData.dndbeyondId\r\n    );\r\n\r\n    if (charIndex !== -1) {\r\n      const existingChar = charactersJson.characters[charIndex];\r\n      \r\n      // Update only the D&D Beyond-derived fields\r\n      charactersJson.characters[charIndex] = {\r\n        ...existingChar,\r\n        race: freshData.race,\r\n        class: freshData.class,\r\n        level: freshData.level,\r\n        alignment: freshData.alignment,\r\n        featuredImage: freshData.avatarUrl,\r\n        images: existingChar.images.length > 0 \r\n          ? existingChar.images.map((img: any, idx: number) => \r\n              idx === 0 ? { ...img, url: freshData.avatarUrl } : img\r\n            )\r\n          : [{\r\n              id: \"1\",\r\n              url: freshData.avatarUrl,\r\n              caption: `${freshData.name} - Official Character Art`,\r\n              type: \"portrait\",\r\n              isFeatured: true,\r\n              copyright: \"D&D Beyond / Wizards of the Coast\",\r\n              isAiGenerated: false\r\n            }],\r\n      };\r\n      \r\n      updatedCount++;\r\n      console.log(` Updated ${freshData.name}`);\r\n    }\r\n  }\r\n\r\n  // Write back to characters.json\r\n  writeFileSync(charactersPath, JSON.stringify(charactersJson, null, 2));\r\n  console.log(`\\n Successfully updated ${updatedCount} characters in characters.json`);\r\n}\r\n\r\nmain().catch(console.error);\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\scripts\\update-taebrin-characters.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1368,1371],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1368,1371],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":69,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":69,"endColumn":14,"suggestions":[{"fix":{"range":[1970,2025],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":74,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":74,"endColumn":16,"suggestions":[{"fix":{"range":[2130,2173],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":77,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":77,"endColumn":16,"suggestions":[{"fix":{"range":[2258,2331],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":82,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":82,"endColumn":14,"suggestions":[{"fix":{"range":[2446,2508],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":93,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2945,2948],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2945,2948],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":97,"column":28,"nodeType":"MemberExpression","endLine":97,"endColumn":64},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":100,"column":7,"nodeType":"MemberExpression","endLine":100,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":108,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3507,3510],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3507,3510],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":123,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":123,"endColumn":18,"suggestions":[{"fix":{"range":[3995,4038],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":129,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":129,"endColumn":14,"suggestions":[{"fix":{"range":[4167,4253],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Script to fetch fresh D&D Beyond data for Journeys Through Taebrin characters\r\n * and update characters.json with the correct information\r\n */\r\n\r\nimport { readFileSync, writeFileSync } from 'fs';\r\nimport { join } from 'path';\r\n\r\nconst CHARACTER_IDS = [\r\n  '151530168', // Wayne \"Archivist of Lies\"\r\n  '151527820', // Carine Sol\r\n  '153687176', // Erys Leandorian\r\n  '147130895', // Freya Fenrir\r\n  '151498356', // Porphan Valaritas\r\n  '151508871', // Titheus Cillbrost\r\n];\r\n\r\nconst alignmentMap: { [key: number]: string } = {\r\n  1: 'Lawful Good',\r\n  2: 'Neutral Good',\r\n  3: 'Chaotic Good',\r\n  4: 'Lawful Neutral',\r\n  5: 'True Neutral',\r\n  6: 'Chaotic Neutral',\r\n  7: 'Lawful Evil',\r\n  8: 'Neutral Evil',\r\n  9: 'Chaotic Evil'\r\n};\r\n\r\nasync function fetchCharacterData(characterId: string) {\r\n  try {\r\n    const response = await fetch(\r\n      `https://character-service.dndbeyond.com/character/v5/character/${characterId}`\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Failed to fetch character ${characterId}: ${response.statusText}`);\r\n    }\r\n\r\n    const json = await response.json();\r\n    const character = json.data;\r\n\r\n    // Extract class and level information\r\n    const primaryClass = character.classes[0];\r\n    const className = primaryClass?.definition?.name || 'Unknown';\r\n    const totalLevel = character.classes.reduce((sum: number, c: any) => sum + c.level, 0);\r\n\r\n    // Get alignment\r\n    const alignment = character.alignmentId \r\n      ? alignmentMap[character.alignmentId] || 'Unknown'\r\n      : 'Unknown';\r\n\r\n    return {\r\n      dndbeyondId: characterId,\r\n      name: character.name,\r\n      race: character.race.fullName,\r\n      class: className,\r\n      level: totalLevel,\r\n      alignment: alignment,\r\n      avatarUrl: character.decorations?.avatarUrl || character.avatarUrl,\r\n    };\r\n  } catch (error) {\r\n    console.error(`Error fetching character ${characterId}:`, error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nasync function main() {\r\n  console.log('Fetching D&D Beyond character data...\\n');\r\n\r\n  // Fetch all character data\r\n  const characterData = [];\r\n  for (const id of CHARACTER_IDS) {\r\n    console.log(`Fetching character ${id}...`);\r\n    const data = await fetchCharacterData(id);\r\n    characterData.push(data);\r\n    console.log(`  ${data.name} - ${data.race} ${data.class} ${data.level}`);\r\n    // Small delay to avoid rate limiting\r\n    await new Promise(resolve => setTimeout(resolve, 500));\r\n  }\r\n\r\n  console.log('\\n All character data fetched successfully!\\n');\r\n\r\n  // Read existing characters.json\r\n  const charactersPath = join(process.cwd(), 'client/src/data/characters.json');\r\n  const charactersFile = readFileSync(charactersPath, 'utf-8');\r\n  const charactersJson = JSON.parse(charactersFile);\r\n\r\n  // Update each character with fresh D&D Beyond data\r\n  let updatedCount = 0;\r\n  for (const freshData of characterData) {\r\n    const charIndex = charactersJson.characters.findIndex(\r\n      (c: any) => c.dndbeyondId === freshData.dndbeyondId\r\n    );\r\n\r\n    if (charIndex !== -1) {\r\n      const existingChar = charactersJson.characters[charIndex];\r\n      \r\n      // Update only the D&D Beyond-derived fields\r\n      charactersJson.characters[charIndex] = {\r\n        ...existingChar,\r\n        race: freshData.race,\r\n        class: freshData.class,\r\n        level: freshData.level,\r\n        alignment: freshData.alignment,\r\n        featuredImage: freshData.avatarUrl,\r\n        images: existingChar.images.length > 0 \r\n          ? existingChar.images.map((img: any, idx: number) => \r\n              idx === 0 ? { ...img, url: freshData.avatarUrl } : img\r\n            )\r\n          : [{\r\n              id: \"1\",\r\n              url: freshData.avatarUrl,\r\n              caption: `${freshData.name} - Official Character Art`,\r\n              type: \"portrait\",\r\n              isFeatured: true,\r\n              copyright: \"D&D Beyond / Wizards of the Coast\",\r\n              isAiGenerated: false\r\n            }],\r\n      };\r\n      \r\n      updatedCount++;\r\n      console.log(` Updated ${freshData.name}`);\r\n    }\r\n  }\r\n\r\n  // Write back to characters.json\r\n  writeFileSync(charactersPath, JSON.stringify(charactersJson, null, 2));\r\n  console.log(`\\n Successfully updated ${updatedCount} characters in characters.json`);\r\n}\r\n\r\nmain().catch(console.error);\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\scripts\\update-taebrin-with-custom-images.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1630,1633],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1630,1633],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":81,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":81,"endColumn":14,"suggestions":[{"fix":{"range":[2551,2622],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":92,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":92,"endColumn":16,"suggestions":[{"fix":{"range":[2959,3005],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":104,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":104,"endColumn":18,"suggestions":[{"fix":{"range":[3317,3375],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":107,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":107,"endColumn":18,"suggestions":[{"fix":{"range":[3429,3499],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":112,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":112,"endColumn":18,"suggestions":[{"fix":{"range":[3667,3710],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":116,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3840,3843],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3840,3843],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":120,"column":30,"nodeType":"MemberExpression","endLine":120,"endColumn":66},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":121,"column":9,"nodeType":"MemberExpression","endLine":121,"endColumn":45},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":136,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4475,4478],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4475,4478],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":140,"column":28,"nodeType":"MemberExpression","endLine":140,"endColumn":64},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":142,"column":7,"nodeType":"MemberExpression","endLine":142,"endColumn":43},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":157,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":157,"endColumn":18,"suggestions":[{"fix":{"range":[5113,5180],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":164,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":164,"endColumn":14,"suggestions":[{"fix":{"range":[5313,5350],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":165,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":165,"endColumn":14,"suggestions":[{"fix":{"range":[5354,5419],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":166,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":166,"endColumn":14,"suggestions":[{"fix":{"range":[5423,5477],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":167,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":167,"endColumn":14,"suggestions":[{"fix":{"range":[5481,5536],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":168,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":168,"endColumn":14,"suggestions":[{"fix":{"range":[5540,5568],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":169,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":169,"endColumn":14,"suggestions":[{"fix":{"range":[5572,5626],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":170,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":170,"endColumn":14,"suggestions":[{"fix":{"range":[5630,5673],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":171,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":171,"endColumn":14,"suggestions":[{"fix":{"range":[5677,5738],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":172,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":172,"endColumn":14,"suggestions":[{"fix":{"range":[5742,5768],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":174,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":174,"endColumn":16,"suggestions":[{"fix":{"range":[5809,5859],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":23,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Script to update Journeys Through Taebrin character images\r\n * Uses custom local images if available, falls back to D&D Beyond avatars\r\n */\r\n\r\nimport { readFileSync, writeFileSync, existsSync } from 'fs';\r\nimport { join } from 'path';\r\n\r\nconst CHARACTER_CONFIG = [\r\n  { id: '151530168', slug: 'wayne-archivist', name: 'Wayne \"Archivist of Lies\"' },\r\n  { id: '151527820', slug: 'carine-sol', name: 'Carine Sol' },\r\n  { id: '153687176', slug: 'erys-leandorian', name: 'Erys Leandorian' },\r\n  { id: '147130895', slug: 'freya-fenrir', name: 'Freya Fenrir' },\r\n  { id: '151498356', slug: 'porphan-valaritas', name: 'Porphan Valaritas' },\r\n  { id: '151508871', slug: 'titheus-cillbrost', name: 'Titheus Cillbrost' },\r\n];\r\n\r\nconst IMAGE_EXTENSIONS = ['.jpg', '.jpeg', '.png', '.webp'];\r\n\r\nconst alignmentMap: { [key: number]: string } = {\r\n  1: 'Lawful Good',\r\n  2: 'Neutral Good',\r\n  3: 'Chaotic Good',\r\n  4: 'Lawful Neutral',\r\n  5: 'True Neutral',\r\n  6: 'Chaotic Neutral',\r\n  7: 'Lawful Evil',\r\n  8: 'Neutral Evil',\r\n  9: 'Chaotic Evil'\r\n};\r\n\r\nasync function fetchCharacterData(characterId: string) {\r\n  try {\r\n    const response = await fetch(\r\n      `https://character-service.dndbeyond.com/character/v5/character/${characterId}`\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Failed to fetch character ${characterId}: ${response.statusText}`);\r\n    }\r\n\r\n    const json = await response.json();\r\n    const character = json.data;\r\n\r\n    const primaryClass = character.classes[0];\r\n    const className = primaryClass?.definition?.name || 'Unknown';\r\n    const totalLevel = character.classes.reduce((sum: number, c: any) => sum + c.level, 0);\r\n    const alignment = character.alignmentId \r\n      ? alignmentMap[character.alignmentId] || 'Unknown'\r\n      : 'Unknown';\r\n\r\n    return {\r\n      dndbeyondId: characterId,\r\n      name: character.name,\r\n      race: character.race.fullName,\r\n      class: className,\r\n      level: totalLevel,\r\n      alignment: alignment,\r\n      avatarUrl: character.decorations?.avatarUrl || character.avatarUrl,\r\n    };\r\n  } catch (error) {\r\n    console.error(`Error fetching character ${characterId}:`, error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nfunction findCustomImage(slug: string): string | null {\r\n  const publicDir = join(process.cwd(), 'client/public/characters');\r\n  \r\n  for (const ext of IMAGE_EXTENSIONS) {\r\n    const imagePath = join(publicDir, `${slug}${ext}`);\r\n    if (existsSync(imagePath)) {\r\n      return `/characters/${slug}${ext}`;\r\n    }\r\n  }\r\n  \r\n  return null;\r\n}\r\n\r\nasync function main() {\r\n  console.log('Updating Journeys Through Taebrin character images...\\n');\r\n\r\n  const charactersPath = join(process.cwd(), 'client/src/data/characters.json');\r\n  const charactersFile = readFileSync(charactersPath, 'utf-8');\r\n  const charactersJson = JSON.parse(charactersFile);\r\n\r\n  let updatedCount = 0;\r\n  let customImageCount = 0;\r\n  let ddbImageCount = 0;\r\n\r\n  for (const config of CHARACTER_CONFIG) {\r\n    console.log(`\\nProcessing ${config.name}...`);\r\n    \r\n    // Check for custom image first\r\n    const customImagePath = findCustomImage(config.slug);\r\n    \r\n    let imageUrl: string;\r\n    let imageSource: string;\r\n    \r\n    if (customImagePath) {\r\n      imageUrl = customImagePath;\r\n      imageSource = 'Custom Local Image';\r\n      customImageCount++;\r\n      console.log(`   Found custom image: ${customImagePath}`);\r\n    } else {\r\n      // Fetch from D&D Beyond\r\n      console.log(`   No custom image found, fetching from D&D Beyond...`);\r\n      const freshData = await fetchCharacterData(config.id);\r\n      imageUrl = freshData.avatarUrl;\r\n      imageSource = 'D&D Beyond';\r\n      ddbImageCount++;\r\n      console.log(`   Using D&D Beyond avatar`);\r\n      \r\n      // Update other fields with fresh data\r\n      const charIndex = charactersJson.characters.findIndex(\r\n        (c: any) => c.dndbeyondId === config.id\r\n      );\r\n      \r\n      if (charIndex !== -1) {\r\n        const existingChar = charactersJson.characters[charIndex];\r\n        charactersJson.characters[charIndex] = {\r\n          ...existingChar,\r\n          race: freshData.race,\r\n          class: freshData.class,\r\n          level: freshData.level,\r\n          alignment: freshData.alignment,\r\n        };\r\n      }\r\n      \r\n      // Small delay to avoid rate limiting\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n    }\r\n    \r\n    // Update the character's image\r\n    const charIndex = charactersJson.characters.findIndex(\r\n      (c: any) => c.dndbeyondId === config.id\r\n    );\r\n    \r\n    if (charIndex !== -1) {\r\n      const existingChar = charactersJson.characters[charIndex];\r\n      \r\n      charactersJson.characters[charIndex] = {\r\n        ...existingChar,\r\n        featuredImage: imageUrl,\r\n        images: [{\r\n          id: \"1\",\r\n          url: imageUrl,\r\n          caption: `${config.name} - Official Character Art`,\r\n          type: \"portrait\",\r\n          isFeatured: true,\r\n          copyright: customImagePath ? \"Tales of Aneria\" : \"D&D Beyond / Wizards of the Coast\",\r\n          isAiGenerated: false\r\n        }],\r\n      };\r\n      \r\n      updatedCount++;\r\n      console.log(`   Updated character data (Source: ${imageSource})`);\r\n    }\r\n  }\r\n\r\n  // Write back to characters.json\r\n  writeFileSync(charactersPath, JSON.stringify(charactersJson, null, 2));\r\n  \r\n  console.log(`\\n${  '='.repeat(50)}`);\r\n  console.log(` Successfully updated ${updatedCount} characters`);\r\n  console.log(`   Custom images: ${customImageCount}`);\r\n  console.log(`   D&D Beyond images: ${ddbImageCount}`);\r\n  console.log('='.repeat(50));\r\n  console.log('\\nTo add custom images, place them in:');\r\n  console.log('  client/public/characters/');\r\n  console.log('\\nSupported formats: .jpg, .jpeg, .png, .webp');\r\n  console.log('Filenames:');\r\n  CHARACTER_CONFIG.forEach(c => {\r\n    console.log(`   ${c.slug}.jpg (or .png, .webp)`);\r\n  });\r\n}\r\n\r\nmain().catch(console.error);\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\cache.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[232,235],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[232,235],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { metrics } from \"./monitoring\";\r\n\r\nexport interface CacheOptions {\r\n  ttl?: number; // Time to live in milliseconds\r\n}\r\n\r\nexport interface CacheEntry<T> {\r\n  value: T;\r\n  expires: number;\r\n}\r\n\r\nexport class MetricsCache<T = any> {\r\n  private cache: Map<string, CacheEntry<T>> = new Map();\r\n  private defaultTTL: number;\r\n\r\n  constructor(defaultTTL: number = 3600000) { // Default 1 hour\r\n    this.defaultTTL = defaultTTL;\r\n  }\r\n\r\n  get(key: string): T | undefined {\r\n    const entry = this.cache.get(key);\r\n    \r\n    if (!entry) {\r\n      metrics.trackCacheMiss();\r\n      return undefined;\r\n    }\r\n\r\n    if (Date.now() > entry.expires) {\r\n      this.cache.delete(key);\r\n      metrics.trackCacheMiss();\r\n      metrics.trackCacheDelete();\r\n      return undefined;\r\n    }\r\n\r\n    metrics.trackCacheHit();\r\n    return entry.value;\r\n  }\r\n\r\n  set(key: string, value: T, options?: CacheOptions): void {\r\n    const ttl = options?.ttl || this.defaultTTL;\r\n    const expires = Date.now() + ttl;\r\n    \r\n    this.cache.set(key, { value, expires });\r\n    metrics.trackCacheSet();\r\n  }\r\n\r\n  delete(key: string): boolean {\r\n    const deleted = this.cache.delete(key);\r\n    if (deleted) {\r\n      metrics.trackCacheDelete();\r\n    }\r\n    return deleted;\r\n  }\r\n\r\n  clear(): void {\r\n    const size = this.cache.size;\r\n    this.cache.clear();\r\n    \r\n    // Track all deletions\r\n    for (let i = 0; i < size; i++) {\r\n      metrics.trackCacheDelete();\r\n    }\r\n  }\r\n\r\n  has(key: string): boolean {\r\n    const entry = this.cache.get(key);\r\n    \r\n    if (!entry) {\r\n      return false;\r\n    }\r\n\r\n    if (Date.now() > entry.expires) {\r\n      this.cache.delete(key);\r\n      metrics.trackCacheDelete();\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  size(): number {\r\n    // Clean expired entries first\r\n    for (const [key, entry] of this.cache.entries()) {\r\n      if (Date.now() > entry.expires) {\r\n        this.cache.delete(key);\r\n        metrics.trackCacheDelete();\r\n      }\r\n    }\r\n    \r\n    return this.cache.size;\r\n  }\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\dndbeyond.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\env-validator.ts","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":33,"column":19,"nodeType":"MemberExpression","endLine":33,"endColumn":36},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":41,"column":19,"nodeType":"MemberExpression","endLine":41,"endColumn":36},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":61,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":61,"endColumn":14,"suggestions":[{"fix":{"range":[2199,2246],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Environment Variable Validator\r\n * Validates required environment variables at application startup\r\n */\r\n\r\ninterface EnvConfig {\r\n  name: string;\r\n  required: boolean;\r\n  description: string;\r\n}\r\n\r\nconst SERVER_ENV_VARS: EnvConfig[] = [\r\n  { name: 'NODE_ENV', required: false, description: 'Application environment' },\r\n  { name: 'PORT', required: false, description: 'Server port (default: 5000)' },\r\n  { name: 'ALLOWED_ORIGINS', required: false, description: 'CORS allowed origins' },\r\n];\r\n\r\nconst OPTIONAL_API_KEYS: EnvConfig[] = [\r\n  { name: 'YOUTUBE_API_KEY', required: false, description: 'YouTube Data API v3 key (server-side)' },\r\n  { name: 'ETSY_API_KEY', required: false, description: 'Etsy API key' },\r\n  { name: 'ETSY_ACCESS_TOKEN', required: false, description: 'Etsy access token' },\r\n  { name: 'REPLIT_CONNECTORS_HOSTNAME', required: false, description: 'Replit connectors hostname' },\r\n  { name: 'REPL_IDENTITY', required: false, description: 'Replit identity token' },\r\n  { name: 'WEB_REPL_RENEWAL', required: false, description: 'Replit deployment renewal token' },\r\n];\r\n\r\nexport function validateEnvironment(): void {\r\n  const missing: string[] = [];\r\n  const warnings: string[] = [];\r\n\r\n  // Check required variables\r\n  SERVER_ENV_VARS.forEach(({ name, required, description }) => {\r\n    const value = process.env[name];\r\n    if (required && !value) {\r\n      missing.push(`${name}: ${description}`);\r\n    }\r\n  });\r\n\r\n  // Warn about missing optional API keys\r\n  OPTIONAL_API_KEYS.forEach(({ name, description }) => {\r\n    const value = process.env[name];\r\n    if (!value) {\r\n      warnings.push(`${name}: ${description}`);\r\n    }\r\n  });\r\n\r\n  // Report results\r\n  if (missing.length > 0) {\r\n    console.error('\\n Missing required environment variables:');\r\n    missing.forEach(msg => console.error(`  - ${msg}`));\r\n    console.error('\\nApplication cannot start without these variables.\\n');\r\n    process.exit(1);\r\n  }\r\n\r\n  if (warnings.length > 0) {\r\n    console.warn('\\n  Optional environment variables not configured:');\r\n    warnings.forEach(msg => console.warn(`  - ${msg}`));\r\n    console.warn('\\nSome features may not work without these variables.\\n');\r\n  }\r\n\r\n  console.log(' Environment validation passed');\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\etsy.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":70,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":70,"endColumn":18,"suggestions":[{"fix":{"range":[1582,1642],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":74,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":74,"endColumn":16,"suggestions":[{"fix":{"range":[1692,1747],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":95,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":95,"endColumn":16,"suggestions":[{"fix":{"range":[2244,2289],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":113,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":113,"endColumn":16,"suggestions":[{"fix":{"range":[2810,2892],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-undef","severity":2,"message":"'URLSearchParams' is not defined.","line":119,"column":22,"nodeType":"Identifier","messageId":"undef","endLine":119,"endColumn":37},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":136,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":136,"endColumn":20,"suggestions":[{"fix":{"range":[3451,3538],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":140,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":140,"endColumn":18,"suggestions":[{"fix":{"range":[3631,3692],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":181,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":181,"endColumn":22,"suggestions":[{"fix":{"range":[5067,5131],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":189,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":189,"endColumn":16,"suggestions":[{"fix":{"range":[5323,5380],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as fs from 'fs';\r\nimport * as path from 'path';\r\n\r\ninterface EtsyPrice {\r\n  amount: number;\r\n  divisor: number;\r\n  currency_code: string;\r\n}\r\n\r\ninterface EtsyImage {\r\n  url_570xN: string;\r\n  url_fullxfull: string;\r\n}\r\n\r\ninterface EtsyListing {\r\n  listing_id: number;\r\n  title: string;\r\n  description: string;\r\n  state: string;\r\n  price: EtsyPrice;\r\n  quantity: number;\r\n  url: string;\r\n  images?: EtsyImage[];\r\n}\r\n\r\ninterface EtsyResponse {\r\n  count: number;\r\n  results: EtsyListing[];\r\n}\r\n\r\nexport interface Product {\r\n  id: string;\r\n  name: string;\r\n  price: string;\r\n  image: string;\r\n  url: string;\r\n  inStock: boolean;\r\n}\r\n\r\nconst CACHE_DIR = path.join(process.cwd(), 'server', 'cache');\r\nconst CACHE_FILE = path.join(CACHE_DIR, 'etsy-shop.json');\r\nconst CACHE_DURATION = 60 * 60 * 1000; // 1 hour in milliseconds\r\n\r\ninterface CachedEtsyData {\r\n  shopId: string;\r\n  products: Product[];\r\n  timestamp: number;\r\n}\r\n\r\nfunction isCacheValid(cachedData: CachedEtsyData, shopId: string): boolean {\r\n  if (cachedData.shopId !== shopId) {\r\n    return false;\r\n  }\r\n  const now = Date.now();\r\n  const age = now - cachedData.timestamp;\r\n  return age < CACHE_DURATION;\r\n}\r\n\r\nfunction readCache(shopId: string): Product[] | null {\r\n  try {\r\n    if (!fs.existsSync(CACHE_FILE)) {\r\n      return null;\r\n    }\r\n\r\n    const cacheContent = fs.readFileSync(CACHE_FILE, 'utf-8');\r\n    const cachedData: CachedEtsyData = JSON.parse(cacheContent);\r\n\r\n    if (isCacheValid(cachedData, shopId)) {\r\n      const ageMinutes = Math.floor((Date.now() - cachedData.timestamp) / (1000 * 60));\r\n      console.log(`Using cached Etsy data (age: ${ageMinutes}m)`);\r\n      return cachedData.products;\r\n    }\r\n\r\n    console.log('Etsy cache expired, fetching fresh data');\r\n    return null;\r\n  } catch (error) {\r\n    console.error('Error reading Etsy cache:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction writeCache(shopId: string, products: Product[]): void {\r\n  try {\r\n    if (!fs.existsSync(CACHE_DIR)) {\r\n      fs.mkdirSync(CACHE_DIR, { recursive: true });\r\n    }\r\n\r\n    const cacheData: CachedEtsyData = {\r\n      shopId,\r\n      products,\r\n      timestamp: Date.now(),\r\n    };\r\n\r\n    fs.writeFileSync(CACHE_FILE, JSON.stringify(cacheData, null, 2), 'utf-8');\r\n    console.log('Etsy data cached successfully');\r\n  } catch (error) {\r\n    console.error('Error writing Etsy cache:', error);\r\n  }\r\n}\r\n\r\nexport async function getShopListings(shopId: string, limit: number = 8): Promise<Product[]> {\r\n  // Check cache first\r\n  const cachedProducts = readCache(shopId);\r\n  if (cachedProducts !== null) {\r\n    return cachedProducts.slice(0, limit);\r\n  }\r\n\r\n  // Cache miss or expired, fetch from API\r\n  const apiKey = process.env.ETSY_API_KEY;\r\n  const accessToken = process.env.ETSY_ACCESS_TOKEN;\r\n\r\n  if (!apiKey || !accessToken) {\r\n    console.log('Etsy API credentials not configured - returning empty product list');\r\n    return [];\r\n  }\r\n\r\n  const url = `https://openapi.etsy.com/v3/application/shops/${shopId}/listings`;\r\n  \r\n  const params = new URLSearchParams({\r\n    state: 'active',\r\n    limit: limit.toString(),\r\n    includes: 'Images',\r\n  });\r\n\r\n  try {\r\n    const response = await fetch(`${url}?${params}`, {\r\n      headers: {\r\n        'x-api-key': apiKey,\r\n        'Authorization': `Bearer ${accessToken}`,\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      if (process.env.NODE_ENV === 'development') {\r\n        const errorText = await response.text();\r\n        console.log('  Etsy API error (expected in local dev):', response.status, errorText);\r\n      } else {\r\n        console.error('Etsy API error:', response.status);\r\n      }\r\n      console.log('Returning empty product list due to API error');\r\n      return [];\r\n    }\r\n\r\n    const data: EtsyResponse = await response.json();\r\n\r\n    const products = data.results.map((listing) => {\r\n      const priceInDollars = listing.price.amount / listing.price.divisor;\r\n      const formattedPrice = new Intl.NumberFormat('en-US', {\r\n        style: 'currency',\r\n        currency: listing.price.currency_code,\r\n      }).format(priceInDollars);\r\n\r\n      // Get the best quality image available\r\n      const imageUrl = listing.images && listing.images.length > 0\r\n        ? listing.images[0].url_570xN\r\n        : 'https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=500&auto=format&fit=crop';\r\n\r\n      return {\r\n        id: listing.listing_id.toString(),\r\n        name: listing.title,\r\n        price: formattedPrice,\r\n        image: imageUrl,\r\n        url: listing.url,\r\n        inStock: listing.quantity > 0,\r\n      };\r\n    });\r\n\r\n    // Cache all products\r\n    writeCache(shopId, products);\r\n\r\n    return products.slice(0, limit);\r\n  } catch (error) {\r\n    console.error('Error fetching Etsy listings:', error);\r\n    \r\n    // If API fails, try to return stale cache as fallback\r\n    try {\r\n      if (fs.existsSync(CACHE_FILE)) {\r\n        const cacheContent = fs.readFileSync(CACHE_FILE, 'utf-8');\r\n        const cachedData: CachedEtsyData = JSON.parse(cacheContent);\r\n        if (cachedData.shopId === shopId) {\r\n          console.log('Etsy API failed, serving stale cache as fallback');\r\n          return cachedData.products.slice(0, limit);\r\n        }\r\n      }\r\n    } catch (cacheError) {\r\n      console.error('Failed to read stale Etsy cache:', cacheError);\r\n    }\r\n    \r\n    console.log('Returning empty product list due to error');\r\n    return [];\r\n  }\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\feature-flags.ts","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":107,"column":23,"nodeType":"MemberExpression","endLine":107,"endColumn":56},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":110,"column":13,"nodeType":"MemberExpression","endLine":110,"endColumn":28},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":111,"column":11,"nodeType":"MemberExpression","endLine":111,"endColumn":26},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":111,"column":34,"nodeType":"MemberExpression","endLine":111,"endColumn":49},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":121,"column":18,"nodeType":"MemberExpression","endLine":121,"endColumn":38},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":164,"column":12,"nodeType":"MemberExpression","endLine":164,"endColumn":32},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":171,"column":9,"nodeType":"MemberExpression","endLine":171,"endColumn":29},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":172,"column":7,"nodeType":"MemberExpression","endLine":172,"endColumn":27},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":184,"column":13,"nodeType":"MemberExpression","endLine":184,"endColumn":28},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":185,"column":11,"nodeType":"MemberExpression","endLine":185,"endColumn":26},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":185,"column":34,"nodeType":"MemberExpression","endLine":185,"endColumn":49},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":211,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":211,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6194,6197],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6194,6197],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":211,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":211,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6204,6207],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6204,6207],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":211,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":211,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6215,6218],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6215,6218],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":226,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":226,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6618,6621],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6618,6621],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":226,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":226,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6628,6631],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6628,6631],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":226,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":226,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6639,6642],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6639,6642],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Feature Flag System\r\n * \r\n * Enables safe rollout of new features with runtime toggles.\r\n * Supports environment-based, percentage-based, and user-based flags.\r\n */\r\n\r\nexport interface FeatureFlag {\r\n  name: string;\r\n  enabled: boolean;\r\n  description: string;\r\n  rolloutPercentage?: number; // 0-100\r\n  enabledForUsers?: string[]; // User IDs\r\n  enabledEnvironments?: string[]; // ['development', 'staging', 'production']\r\n}\r\n\r\nexport interface FeatureFlagConfig {\r\n  [key: string]: FeatureFlag;\r\n}\r\n\r\n// Default feature flags configuration\r\nconst defaultFlags: FeatureFlagConfig = {\r\n  'enhanced-caching': {\r\n    name: 'enhanced-caching',\r\n    enabled: true,\r\n    description: 'Enable advanced caching strategies',\r\n    enabledEnvironments: ['development', 'staging', 'production'],\r\n  },\r\n  'youtube-integration': {\r\n    name: 'youtube-integration',\r\n    enabled: true,\r\n    description: 'Enable YouTube API integration',\r\n    enabledEnvironments: ['development', 'staging', 'production'],\r\n  },\r\n  'etsy-store': {\r\n    name: 'etsy-store',\r\n    enabled: true,\r\n    description: 'Enable Etsy store integration',\r\n    enabledEnvironments: ['development', 'staging', 'production'],\r\n  },\r\n  'dndbeyond-integration': {\r\n    name: 'dndbeyond-integration',\r\n    enabled: true,\r\n    description: 'Enable D&D Beyond character sheet integration',\r\n    enabledEnvironments: ['development', 'staging', 'production'],\r\n  },\r\n  'podcast-feed': {\r\n    name: 'podcast-feed',\r\n    enabled: true,\r\n    description: 'Enable podcast RSS feed',\r\n    enabledEnvironments: ['development', 'staging', 'production'],\r\n  },\r\n  'health-checks-extended': {\r\n    name: 'health-checks-extended',\r\n    enabled: true,\r\n    description: 'Enable extended health check diagnostics',\r\n    enabledEnvironments: ['development', 'staging', 'production'],\r\n  },\r\n  'rate-limiting': {\r\n    name: 'rate-limiting',\r\n    enabled: true,\r\n    description: 'Enable API rate limiting',\r\n    enabledEnvironments: ['staging', 'production'],\r\n  },\r\n  'new-character-page': {\r\n    name: 'new-character-page',\r\n    enabled: false,\r\n    description: 'Enable redesigned character page (beta)',\r\n    rolloutPercentage: 10, // 10% rollout\r\n    enabledEnvironments: ['development', 'staging'],\r\n  },\r\n  'experimental-features': {\r\n    name: 'experimental-features',\r\n    enabled: false,\r\n    description: 'Enable experimental features for testing',\r\n    enabledEnvironments: ['development'],\r\n  },\r\n};\r\n\r\n// Environment-based configuration overrides\r\nconst environmentOverrides: { [env: string]: Partial<FeatureFlagConfig> } = {\r\n  production: {\r\n    'experimental-features': { ...defaultFlags['experimental-features'], enabled: false },\r\n    'new-character-page': { ...defaultFlags['new-character-page'], enabled: false },\r\n  },\r\n  staging: {\r\n    'new-character-page': { ...defaultFlags['new-character-page'], enabled: true, rolloutPercentage: 50 },\r\n  },\r\n  development: {\r\n    'experimental-features': { ...defaultFlags['experimental-features'], enabled: true },\r\n    'new-character-page': { ...defaultFlags['new-character-page'], enabled: true },\r\n  },\r\n};\r\n\r\n/**\r\n * Feature Flag Manager\r\n */\r\nexport class FeatureFlagManager {\r\n  private flags: FeatureFlagConfig;\r\n  private environment: string;\r\n\r\n  constructor(environment: string = process.env.NODE_ENV || 'development') {\r\n    this.environment = environment;\r\n    this.flags = { ...defaultFlags };\r\n\r\n    // Apply environment overrides\r\n    const overrides = environmentOverrides[environment];\r\n    if (overrides) {\r\n      Object.entries(overrides).forEach(([key, override]) => {\r\n        if (this.flags[key]) {\r\n          this.flags[key] = { ...this.flags[key], ...override };\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if a feature is enabled\r\n   */\r\n  isEnabled(flagName: string, context?: { userId?: string; requestId?: string }): boolean {\r\n    const flag = this.flags[flagName];\r\n    \r\n    if (!flag) {\r\n      console.warn(`Feature flag \"${flagName}\" not found, defaulting to false`);\r\n      return false;\r\n    }\r\n\r\n    // Check if flag is globally disabled\r\n    if (!flag.enabled) {\r\n      return false;\r\n    }\r\n\r\n    // Check environment restrictions\r\n    if (flag.enabledEnvironments && !flag.enabledEnvironments.includes(this.environment)) {\r\n      return false;\r\n    }\r\n\r\n    // Check user-specific enablement\r\n    if (context?.userId && flag.enabledForUsers) {\r\n      return flag.enabledForUsers.includes(context.userId);\r\n    }\r\n\r\n    // Check percentage rollout\r\n    if (flag.rolloutPercentage !== undefined && context?.requestId) {\r\n      const hash = this.hashString(context.requestId);\r\n      const percentage = hash % 100;\r\n      return percentage < flag.rolloutPercentage;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Get all feature flags (for admin dashboard)\r\n   */\r\n  getAllFlags(): FeatureFlagConfig {\r\n    return { ...this.flags };\r\n  }\r\n\r\n  /**\r\n   * Get a specific flag configuration\r\n   */\r\n  getFlag(flagName: string): FeatureFlag | undefined {\r\n    return this.flags[flagName];\r\n  }\r\n\r\n  /**\r\n   * Override a flag (useful for testing)\r\n   */\r\n  override(flagName: string, enabled: boolean): void {\r\n    if (this.flags[flagName]) {\r\n      this.flags[flagName].enabled = enabled;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Reset all overrides to default\r\n   */\r\n  reset(): void {\r\n    this.flags = { ...defaultFlags };\r\n    const overrides = environmentOverrides[this.environment];\r\n    if (overrides) {\r\n      Object.entries(overrides).forEach(([key, override]) => {\r\n        if (this.flags[key]) {\r\n          this.flags[key] = { ...this.flags[key], ...override };\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Simple hash function for percentage rollout\r\n   */\r\n  private hashString(str: string): number {\r\n    let hash = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n      const char = str.charCodeAt(i);\r\n      hash = ((hash << 5) - hash) + char;\r\n      hash = hash & hash; // Convert to 32bit integer\r\n    }\r\n    return Math.abs(hash);\r\n  }\r\n}\r\n\r\n// Singleton instance\r\nexport const featureFlags = new FeatureFlagManager();\r\n\r\n/**\r\n * Express middleware to add feature flag context to requests\r\n */\r\nexport function featureFlagMiddleware(req: any, res: any, next: any) {\r\n  req.featureFlags = {\r\n    isEnabled: (flagName: string) => featureFlags.isEnabled(flagName, {\r\n      userId: req.user?.id,\r\n      requestId: req.id || req.headers['x-request-id'],\r\n    }),\r\n    getAll: () => featureFlags.getAllFlags(),\r\n  };\r\n  next();\r\n}\r\n\r\n/**\r\n * Helper function for checking flags in route handlers\r\n */\r\nexport function requireFeature(flagName: string) {\r\n  return (req: any, res: any, next: any) => {\r\n    if (!req.featureFlags.isEnabled(flagName)) {\r\n      return res.status(404).json({\r\n        error: 'Feature not available',\r\n        message: `The feature \"${flagName}\" is not enabled in this environment`,\r\n      });\r\n    }\r\n    next();\r\n  };\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\health.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[380,383],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[380,383],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"sonarjs/no-duplicate-string","severity":1,"message":"Define a constant instead of duplicating this literal 5 times.","line":59,"column":66,"nodeType":"Literal","endLine":59,"endColumn":81},{"ruleId":"require-await","severity":1,"message":"Async function 'checkCache' has no 'await' expression.","line":64,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingAwait","endLine":64,"endColumn":26,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1524,1530],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import fs from \"fs/promises\";\nimport os from \"os\";\n\r\nimport { type Express } from \"express\";\r\n\r\nimport { metrics } from \"./monitoring\";\r\nimport { storage } from \"./storage\";\r\n\r\nexport type HealthStatus = \"healthy\" | \"degraded\" | \"unhealthy\";\r\n\r\nexport interface ComponentHealth {\r\n  status: HealthStatus;\r\n  message?: string;\r\n  responseTime?: number;\r\n  details?: Record<string, any>;\r\n}\r\n\r\nexport interface HealthCheckResponse {\r\n  status: HealthStatus;\r\n  timestamp: string;\r\n  uptime: number;\r\n  version: string;\r\n  environment: string;\r\n  checks: {\r\n    storage: ComponentHealth;\r\n    cache: ComponentHealth;\r\n    memory: ComponentHealth;\r\n    disk: ComponentHealth;\r\n    cpu: ComponentHealth;\r\n  };\r\n}\r\n\r\nasync function checkStorage(): Promise<ComponentHealth> {\r\n  const start = Date.now();\r\n  try {\r\n    // Test storage read operation\r\n    await storage.getUserByUsername(\"health-check-test-user\");\r\n    const responseTime = Date.now() - start;\r\n    \r\n    if (responseTime > 1000) {\r\n      return {\r\n        status: \"degraded\",\r\n        message: \"Storage responding slowly\",\r\n        responseTime,\r\n        details: { threshold: \"1000ms\" }\r\n      };\r\n    }\r\n    \r\n    return {\r\n      status: \"healthy\",\r\n      message: \"Storage operational\",\r\n      responseTime\r\n    };\r\n  } catch (error) {\r\n    return {\r\n      status: \"unhealthy\",\r\n      message: \"Storage unavailable\",\r\n      responseTime: Date.now() - start,\r\n      details: { error: error instanceof Error ? error.message : \"Unknown error\" }\r\n    };\r\n  }\r\n}\r\n\r\nasync function checkCache(): Promise<ComponentHealth> {\r\n  const start = Date.now();\r\n  try {\r\n    const cacheMetrics = metrics.getMetrics().cache;\r\n    const responseTime = Date.now() - start;\r\n    \r\n    // Calculate cache hit rate\r\n    const total = cacheMetrics.hits + cacheMetrics.misses;\r\n    const hitRate = total > 0 ? (cacheMetrics.hits / total) * 100 : 0;\r\n    \r\n    // Check if Redis is unavailable (using in-memory fallback)\r\n    const isUsingFallback = cacheMetrics.errors > 0 && total === 0;\r\n    \r\n    if (isUsingFallback) {\r\n      return {\r\n        status: \"degraded\",\r\n        message: \"Cache using in-memory fallback (Redis unavailable)\",\r\n        responseTime,\r\n        details: {\r\n          mode: \"in-memory\",\r\n          errors: cacheMetrics.errors,\r\n          note: \"Application continues to function with reduced performance\"\r\n        }\r\n      };\r\n    }\r\n    \r\n    if (hitRate < 50 && total > 100) {\r\n      return {\r\n        status: \"degraded\",\r\n        message: \"Low cache hit rate\",\r\n        responseTime,\r\n        details: {\r\n          hitRate: `${hitRate.toFixed(2)}%`,\r\n          hits: cacheMetrics.hits,\r\n          misses: cacheMetrics.misses\r\n        }\r\n      };\r\n    }\r\n    \r\n    return {\r\n      status: \"healthy\",\r\n      message: \"Cache operational\",\r\n      responseTime,\r\n      details: {\r\n        hitRate: `${hitRate.toFixed(2)}%`,\r\n        entries: cacheMetrics.sets - cacheMetrics.deletes\r\n      }\r\n    };\r\n  } catch (error) {\r\n    // Cache failures should degrade gracefully, not make app unhealthy\r\n    return {\r\n      status: \"degraded\",\r\n      message: \"Cache unavailable, using fallback\",\r\n      responseTime: Date.now() - start,\r\n      details: { \r\n        error: error instanceof Error ? error.message : \"Unknown error\",\r\n        mode: \"fallback\"\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\nfunction checkMemory(): ComponentHealth {\r\n  const start = Date.now();\r\n  try {\r\n    const used = process.memoryUsage();\r\n    const totalMem = os.totalmem();\r\n    const freeMem = os.freemem();\r\n    const usedPercent = ((totalMem - freeMem) / totalMem) * 100;\r\n    const heapUsedPercent = (used.heapUsed / used.heapTotal) * 100;\r\n    \r\n    const responseTime = Date.now() - start;\r\n    \r\n    // Critical: >95% heap usage\r\n    if (heapUsedPercent > 95) {\r\n      return {\r\n        status: \"unhealthy\",\r\n        message: \"Critical memory usage\",\r\n        responseTime,\r\n        details: {\r\n          heapUsed: `${Math.round(used.heapUsed / 1024 / 1024)}MB`,\r\n          heapTotal: `${Math.round(used.heapTotal / 1024 / 1024)}MB`,\r\n          heapUsedPercent: `${heapUsedPercent.toFixed(2)}%`,\r\n          systemUsedPercent: `${usedPercent.toFixed(2)}%`\r\n        }\r\n      };\r\n    }\r\n    \r\n    // Warning: >85% heap usage\r\n    if (heapUsedPercent > 85) {\r\n      return {\r\n        status: \"degraded\",\r\n        message: \"High memory usage\",\r\n        responseTime,\r\n        details: {\r\n          heapUsed: `${Math.round(used.heapUsed / 1024 / 1024)}MB`,\r\n          heapTotal: `${Math.round(used.heapTotal / 1024 / 1024)}MB`,\r\n          heapUsedPercent: `${heapUsedPercent.toFixed(2)}%`,\r\n          systemUsedPercent: `${usedPercent.toFixed(2)}%`\r\n        }\r\n      };\r\n    }\r\n    \r\n    return {\r\n      status: \"healthy\",\r\n      message: \"Memory usage normal\",\r\n      responseTime,\r\n      details: {\r\n        heapUsed: `${Math.round(used.heapUsed / 1024 / 1024)}MB`,\r\n        heapTotal: `${Math.round(used.heapTotal / 1024 / 1024)}MB`,\r\n        heapUsedPercent: `${heapUsedPercent.toFixed(2)}%`,\r\n        rss: `${Math.round(used.rss / 1024 / 1024)}MB`\r\n      }\r\n    };\r\n  } catch (error) {\r\n    return {\r\n      status: \"unhealthy\",\r\n      message: \"Memory check failed\",\r\n      responseTime: Date.now() - start,\r\n      details: { error: error instanceof Error ? error.message : \"Unknown error\" }\r\n    };\r\n  }\r\n}\r\n\r\nasync function checkDisk(): Promise<ComponentHealth> {\r\n  const start = Date.now();\r\n  try {\r\n    // Check if we can write to the cache directory\r\n    const testPath = \"./server/cache/.health-check\";\r\n    \r\n    await fs.mkdir(\"./server/cache\", { recursive: true });\r\n    await fs.writeFile(testPath, Date.now().toString());\r\n    await fs.unlink(testPath);\r\n    \r\n    const responseTime = Date.now() - start;\r\n    \r\n    // If write took too long, disk might be slow\r\n    if (responseTime > 500) {\r\n      return {\r\n        status: \"degraded\",\r\n        message: \"Slow disk I/O\",\r\n        responseTime,\r\n        details: { threshold: \"500ms\" }\r\n      };\r\n    }\r\n    \r\n    return {\r\n      status: \"healthy\",\r\n      message: \"Disk I/O operational\",\r\n      responseTime\r\n    };\r\n  } catch (error) {\r\n    return {\r\n      status: \"unhealthy\",\r\n      message: \"Disk I/O failed\",\r\n      responseTime: Date.now() - start,\r\n      details: { error: error instanceof Error ? error.message : \"Unknown error\" }\r\n    };\r\n  }\r\n}\r\n\r\nfunction checkCPU(): ComponentHealth {\r\n  const start = Date.now();\r\n  try {\r\n    const cpus = os.cpus();\r\n    const loadAvg = os.loadavg();\r\n    const numCPUs = cpus.length;\r\n    \r\n    // Load average normalized by CPU count\r\n    const normalizedLoad = loadAvg[0] / numCPUs;\r\n    \r\n    const responseTime = Date.now() - start;\r\n    \r\n    // Critical: Load > 2x CPU count\r\n    if (normalizedLoad > 2) {\r\n      return {\r\n        status: \"unhealthy\",\r\n        message: \"Critical CPU load\",\r\n        responseTime,\r\n        details: {\r\n          loadAvg1m: loadAvg[0].toFixed(2),\r\n          loadAvg5m: loadAvg[1].toFixed(2),\r\n          loadAvg15m: loadAvg[2].toFixed(2),\r\n          cpuCount: numCPUs,\r\n          normalizedLoad: normalizedLoad.toFixed(2)\r\n        }\r\n      };\r\n    }\r\n    \r\n    // Warning: Load > 1x CPU count\r\n    if (normalizedLoad > 1) {\r\n      return {\r\n        status: \"degraded\",\r\n        message: \"High CPU load\",\r\n        responseTime,\r\n        details: {\r\n          loadAvg1m: loadAvg[0].toFixed(2),\r\n          loadAvg5m: loadAvg[1].toFixed(2),\r\n          loadAvg15m: loadAvg[2].toFixed(2),\r\n          cpuCount: numCPUs,\r\n          normalizedLoad: normalizedLoad.toFixed(2)\r\n        }\r\n      };\r\n    }\r\n    \r\n    return {\r\n      status: \"healthy\",\r\n      message: \"CPU load normal\",\r\n      responseTime,\r\n      details: {\r\n        loadAvg1m: loadAvg[0].toFixed(2),\r\n        cpuCount: numCPUs,\r\n        normalizedLoad: normalizedLoad.toFixed(2)\r\n      }\r\n    };\r\n  } catch (error) {\r\n    return {\r\n      status: \"unhealthy\",\r\n      message: \"CPU check failed\",\r\n      responseTime: Date.now() - start,\r\n      details: { error: error instanceof Error ? error.message : \"Unknown error\" }\r\n    };\r\n  }\r\n}\r\n\r\nfunction determineOverallStatus(checks: HealthCheckResponse[\"checks\"]): HealthStatus {\r\n  const statuses = Object.values(checks).map(check => check.status);\r\n  \r\n  // Critical components: storage, memory, disk, CPU\r\n  // Non-critical: cache (can degrade gracefully)\r\n  const criticalChecks = [checks.storage, checks.memory, checks.disk, checks.cpu];\r\n  const criticalStatuses = criticalChecks.map(check => check.status);\r\n  \r\n  // Unhealthy if any critical component is unhealthy\r\n  if (criticalStatuses.some(s => s === \"unhealthy\")) {\r\n    return \"unhealthy\";\r\n  }\r\n  \r\n  // Degraded if any component is degraded\r\n  if (statuses.some(s => s === \"degraded\")) {\r\n    return \"degraded\";\r\n  }\r\n  \r\n  return \"healthy\";\r\n}\r\n\r\nexport async function getHealthStatus(): Promise<HealthCheckResponse> {\r\n  const checks = {\r\n    storage: await checkStorage(),\r\n    cache: await checkCache(),\r\n    memory: checkMemory(),\r\n    disk: await checkDisk(),\r\n    cpu: checkCPU()\r\n  };\r\n  \r\n  const status = determineOverallStatus(checks);\r\n  \r\n  return {\r\n    status,\r\n    timestamp: new Date().toISOString(),\r\n    uptime: process.uptime(),\r\n    version: process.env.npm_package_version || \"1.0.0\",\r\n    environment: process.env.NODE_ENV || \"development\",\r\n    checks\r\n  };\r\n}\r\n\r\nexport function registerHealthRoutes(app: Express): void {\r\n  // Comprehensive health check - returns detailed status\r\n  app.get(\"/api/health\", async (req, res) => {\r\n    try {\r\n      const health = await getHealthStatus();\r\n      \r\n      // Return 503 if unhealthy, 200 otherwise\r\n      const statusCode = health.status === \"unhealthy\" ? 503 : 200;\r\n      \r\n      res.status(statusCode).json(health);\r\n    } catch (error) {\r\n      res.status(503).json({\r\n        status: \"unhealthy\",\r\n        timestamp: new Date().toISOString(),\r\n        error: error instanceof Error ? error.message : \"Health check failed\"\r\n      });\r\n    }\r\n  });\r\n  \r\n  // Kubernetes readiness probe - determines if pod can receive traffic\r\n  app.get(\"/api/ready\", async (req, res) => {\r\n    try {\r\n      // Check critical components only (storage is critical, cache can degrade)\r\n      const storageCheck = await checkStorage();\r\n      \r\n      // Ready if storage is healthy or degraded (cache failure is tolerable)\r\n      const isReady = storageCheck.status !== \"unhealthy\";\r\n      \r\n      if (isReady) {\r\n        res.status(200).json({ \r\n          ready: true,\r\n          timestamp: new Date().toISOString()\r\n        });\r\n      } else {\r\n        res.status(503).json({ \r\n          ready: false,\r\n          timestamp: new Date().toISOString(),\r\n          checks: {\r\n            storage: storageCheck.status\r\n          }\r\n        });\r\n      }\r\n    } catch (error) {\r\n      res.status(503).json({ \r\n        ready: false,\r\n        timestamp: new Date().toISOString(),\r\n        error: error instanceof Error ? error.message : \"Readiness check failed\"\r\n      });\r\n    }\r\n  });\r\n  \r\n  // Kubernetes liveness probe - determines if pod should be restarted\r\n  app.get(\"/api/alive\", (req, res) => {\r\n    // Simple check - if we can respond, we're alive\r\n    res.status(200).json({ \r\n      alive: true,\r\n      timestamp: new Date().toISOString(),\r\n      uptime: process.uptime()\r\n    });\r\n  });\r\n  \r\n  // Startup probe - for slow-starting applications\r\n  app.get(\"/api/startup\", async (req, res) => {\r\n    try {\r\n      // Check if application has fully initialized\r\n      const storageCheck = await checkStorage();\r\n      const isStarted = storageCheck.status !== \"unhealthy\";\r\n      \r\n      if (isStarted) {\r\n        res.status(200).json({ \r\n          started: true,\r\n          timestamp: new Date().toISOString(),\r\n          uptime: process.uptime()\r\n        });\r\n      } else {\r\n        res.status(503).json({ \r\n          started: false,\r\n          timestamp: new Date().toISOString(),\r\n          message: \"Application still initializing\"\r\n        });\r\n      }\r\n    } catch (error) {\r\n      res.status(503).json({ \r\n        started: false,\r\n        timestamp: new Date().toISOString(),\r\n        error: error instanceof Error ? error.message : \"Startup check failed\"\r\n      });\r\n    }\r\n  });\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1279,1282],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1279,1282],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":66,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2099,2102],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2099,2102],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_next' is defined but never used.","line":66,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":66,"endColumn":70,"suggestions":[{"messageId":"removeVar","data":{"varName":"_next"},"fix":{"range":[2131,2152],"text":""},"desc":"Remove unused variable '_next'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import 'dotenv/config';\r\nimport express, { type Request, Response, NextFunction } from \"express\";\r\n\r\nimport { validateEnvironment } from \"./env-validator\";\r\nimport { metricsMiddleware } from \"./monitoring\";\r\nimport { registerRoutes } from \"./routes\";\r\nimport { configureSecurity } from \"./security\";\r\nimport { setupVite, serveStatic, log } from \"./vite\";\r\n\r\n// Validate environment variables before starting\r\nvalidateEnvironment();\r\n\r\nconst app = express();\r\n\r\n// A05: Trust proxy for production environments (Replit, cloud platforms)\r\n// This is required for rate limiting and security features to work correctly\r\nif (process.env.NODE_ENV === 'production' || process.env.REPLIT_DEPLOYMENT) {\r\n  app.set('trust proxy', 1); // Trust first proxy\r\n  log('Trust proxy enabled for production environment');\r\n}\r\n\r\n// A05: Security Misconfiguration - Apply security middleware FIRST\r\nconfigureSecurity(app);\r\n\r\n// Add metrics middleware\r\napp.use(metricsMiddleware);\r\n\r\n// Body parsing middleware (with size limits)\r\napp.use(express.json({ limit: '1mb' })); // A05: Limit request body size\r\napp.use(express.urlencoded({ extended: false, limit: '1mb' }));\r\n\r\napp.use((req, res, next) => {\r\n  const start = Date.now();\r\n  const path = req.path;\r\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\r\n\r\n  const originalResJson = res.json;\r\n  res.json = function (bodyJson, ...args) {\r\n    capturedJsonResponse = bodyJson;\r\n    return originalResJson.apply(res, [bodyJson, ...args]);\r\n  };\r\n\r\n  res.on(\"finish\", () => {\r\n    const duration = Date.now() - start;\r\n    if (path.startsWith(\"/api\")) {\r\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\r\n      if (capturedJsonResponse) {\r\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\r\n      }\r\n\r\n      if (logLine.length > 80) {\r\n        logLine = `${logLine.slice(0, 79)  }`;\r\n      }\r\n\r\n      log(logLine);\r\n    }\r\n  });\r\n\r\n  next();\r\n});\r\n\r\n(async () => {\r\n  const server = await registerRoutes(app);\r\n\r\n  // A07: Enhanced error handling - Don't leak sensitive information\r\n  app.use((err: any, req: Request, res: Response, _next: NextFunction) => {\r\n    const status = err.status || err.statusCode || 500;\r\n    \r\n    // A09: Security Logging - Log errors for monitoring\r\n    console.error('[ERROR]', {\r\n      timestamp: new Date().toISOString(),\r\n      method: req.method,\r\n      path: req.path,\r\n      status,\r\n      message: err.message,\r\n      stack: process.env.NODE_ENV === 'development' ? err.stack : undefined,\r\n    });\r\n\r\n    // A07: Don't expose internal error details in production\r\n    const message = status === 500 && process.env.NODE_ENV === 'production'\r\n      ? 'Internal Server Error'\r\n      : err.message || 'Internal Server Error';\r\n\r\n    res.status(status).json({ error: message });\r\n  });\r\n\r\n  // importantly only setup vite in development and after\r\n  // setting up all the other routes so the catch-all route\r\n  // doesn't interfere with the other routes\r\n  if (app.get(\"env\") === \"development\") {\r\n    await setupVite(app, server);\r\n  } else {\r\n    serveStatic(app);\r\n  }\r\n\r\n  // ALWAYS serve the app on the port specified in the environment variable PORT\r\n  // Other ports are firewalled. Default to 5000 if not specified.\r\n  // this serves both the API and the client.\r\n  // It is the only port that is not firewalled.\r\n  const port = parseInt(process.env.PORT || '5000', 10);\r\n  server.listen({\r\n    port,\r\n    host: \"0.0.0.0\",\r\n    reusePort: true,\r\n  }, () => {\r\n    log(`serving on port ${port}`);\r\n  });\r\n})();\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\logger.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1147,1150],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1147,1150],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1157,1160],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1157,1160],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1168,1171],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1168,1171],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":79,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1933,1936],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1933,1936],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":94,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":97,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2275,2278],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2275,2278],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import pino from 'pino';\r\n\r\nconst isDevelopment = process.env.NODE_ENV !== 'production';\r\n\r\nexport const logger = pino({\r\n  level: process.env.LOG_LEVEL || (isDevelopment ? 'debug' : 'info'),\r\n  \r\n  formatters: {\r\n    level: (label) => ({ level: label }),\r\n    bindings: (bindings) => ({\r\n      pid: bindings.pid,\r\n      hostname: bindings.hostname,\r\n      node_version: process.version,\r\n    }),\r\n  },\r\n  \r\n  timestamp: pino.stdTimeFunctions.isoTime,\r\n  \r\n  // Redact sensitive information\r\n  redact: {\r\n    paths: [\r\n      'req.headers.authorization',\r\n      'req.headers.cookie',\r\n      'password',\r\n      'token',\r\n      'secret',\r\n      'api_key',\r\n      'apiKey',\r\n      'YOUTUBE_API_KEY',\r\n      'ETSY_API_KEY',\r\n      'SESSION_SECRET',\r\n    ],\r\n    remove: true,\r\n  },\r\n  \r\n  // Pretty print in development\r\n  transport: isDevelopment\r\n    ? {\r\n        target: 'pino-pretty',\r\n        options: {\r\n          colorize: true,\r\n          translateTime: 'SYS:standard',\r\n          ignore: 'pid,hostname',\r\n        },\r\n      }\r\n    : undefined,\r\n});\r\n\r\n// Request logger middleware for Express\r\nexport function expressLogger() {\r\n  return (req: any, res: any, next: any) => {\r\n    const start = Date.now();\r\n    \r\n    res.on('finish', () => {\r\n      const duration = Date.now() - start;\r\n      const logData = {\r\n        method: req.method,\r\n        url: req.url,\r\n        status: res.statusCode,\r\n        duration,\r\n        userAgent: req.get('user-agent'),\r\n        ip: req.ip || req.connection.remoteAddress,\r\n      };\r\n      \r\n      if (res.statusCode >= 500) {\r\n        logger.error(logData, 'Request failed');\r\n      } else if (res.statusCode >= 400) {\r\n        logger.warn(logData, 'Request error');\r\n      } else {\r\n        logger.info(logData, 'Request completed');\r\n      }\r\n    });\r\n    \r\n    next();\r\n  };\r\n}\r\n\r\n// Helper for logging errors with context\r\nexport function logError(error: Error, context?: Record<string, any>) {\r\n  logger.error(\r\n    {\r\n      err: {\r\n        message: error.message,\r\n        stack: error.stack,\r\n        name: error.name,\r\n      },\r\n      ...context,\r\n    },\r\n    'Error occurred'\r\n  );\r\n}\r\n\r\n// Helper for logging performance metrics\r\nexport function logPerformance(operation: string, duration: number, context?: Record<string, any>) {\r\n  logger.info(\r\n    {\r\n      operation,\r\n      duration,\r\n      ...context,\r\n    },\r\n    'Performance metric'\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\monitoring.ts","messages":[{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":37,"column":23,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":37,"endColumn":53},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":88,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2252,2255],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2252,2255],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":91,"column":9,"nodeType":"MemberExpression","endLine":91,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":139,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":139,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3775,3778],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3775,3778],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":139,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":139,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3785,3788],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3785,3788],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":139,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":139,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3796,3799],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3796,3799],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { performance } from 'perf_hooks';\r\n\r\nexport interface ApiMetrics {\r\n  endpoint: string;\r\n  duration: number;\r\n  timestamp: number;\r\n  status: 'success' | 'error';\r\n}\r\n\r\nexport interface CacheMetrics {\r\n  hits: number;\r\n  misses: number;\r\n  sets: number;\r\n  deletes: number;\r\n}\r\n\r\nexport interface ErrorMetrics {\r\n  errors: number;\r\n  errorsByType: Map<string, number>;\r\n}\r\n\r\nclass MetricsCollector {\r\n  private apiLatency: Map<string, number[]> = new Map();\r\n  private cacheMetrics: CacheMetrics = { hits: 0, misses: 0, sets: 0, deletes: 0 };\r\n  private errorMetrics: ErrorMetrics = { \r\n    errors: 0, \r\n    errorsByType: new Map() \r\n  };\r\n  private requestCount = 0;\r\n  private startTime = Date.now();\r\n\r\n  trackApiCall(endpoint: string, duration: number, status: 'success' | 'error' = 'success') {\r\n    if (!this.apiLatency.has(endpoint)) {\r\n      this.apiLatency.set(endpoint, []);\r\n    }\r\n    \r\n    const latencies = this.apiLatency.get(endpoint)!;\r\n    latencies.push(duration);\r\n    \r\n    // Keep only last 1000 measurements per endpoint\r\n    if (latencies.length > 1000) {\r\n      latencies.shift();\r\n    }\r\n    \r\n    this.requestCount++;\r\n    if (status === 'error') {\r\n      this.errorMetrics.errors++;\r\n    }\r\n  }\r\n\r\n  trackCacheHit() {\r\n    this.cacheMetrics.hits++;\r\n  }\r\n\r\n  trackCacheMiss() {\r\n    this.cacheMetrics.misses++;\r\n  }\r\n\r\n  trackCacheSet() {\r\n    this.cacheMetrics.sets++;\r\n  }\r\n\r\n  trackCacheDelete() {\r\n    this.cacheMetrics.deletes++;\r\n  }\r\n\r\n  trackError(errorType: string) {\r\n    this.errorMetrics.errors++;\r\n    \r\n    const count = this.errorMetrics.errorsByType.get(errorType) || 0;\r\n    this.errorMetrics.errorsByType.set(errorType, count + 1);\r\n  }\r\n\r\n  private percentile(values: number[], p: number): number {\r\n    if (values.length === 0) {return 0;}\r\n    \r\n    const sorted = [...values].sort((a, b) => a - b);\r\n    const index = Math.ceil((p / 100) * sorted.length) - 1;\r\n    return sorted[Math.max(0, index)];\r\n  }\r\n\r\n  getMetrics() {\r\n    const uptime = Date.now() - this.startTime;\r\n    const cacheHitRate = this.cacheMetrics.hits + this.cacheMetrics.misses > 0\r\n      ? this.cacheMetrics.hits / (this.cacheMetrics.hits + this.cacheMetrics.misses)\r\n      : 0;\r\n\r\n    const latencyStats: Record<string, any> = {};\r\n    for (const [endpoint, values] of this.apiLatency.entries()) {\r\n      if (values.length > 0) {\r\n        latencyStats[endpoint] = {\r\n          count: values.length,\r\n          p50: this.percentile(values, 50),\r\n          p95: this.percentile(values, 95),\r\n          p99: this.percentile(values, 99),\r\n          avg: values.reduce((a, b) => a + b, 0) / values.length,\r\n          min: Math.min(...values),\r\n          max: Math.max(...values),\r\n        };\r\n      }\r\n    }\r\n\r\n    return {\r\n      uptime,\r\n      requests: {\r\n        total: this.requestCount,\r\n        rps: this.requestCount / (uptime / 1000),\r\n      },\r\n      cache: {\r\n        hitRate: cacheHitRate,\r\n        hits: this.cacheMetrics.hits,\r\n        misses: this.cacheMetrics.misses,\r\n        sets: this.cacheMetrics.sets,\r\n        deletes: this.cacheMetrics.deletes,\r\n      },\r\n      errors: {\r\n        rate: this.requestCount > 0 \r\n          ? this.errorMetrics.errors / this.requestCount \r\n          : 0,\r\n        total: this.errorMetrics.errors,\r\n        byType: Object.fromEntries(this.errorMetrics.errorsByType),\r\n      },\r\n      latency: latencyStats,\r\n    };\r\n  }\r\n\r\n  reset() {\r\n    this.apiLatency.clear();\r\n    this.cacheMetrics = { hits: 0, misses: 0, sets: 0, deletes: 0 };\r\n    this.errorMetrics = { errors: 0, errorsByType: new Map() };\r\n    this.requestCount = 0;\r\n    this.startTime = Date.now();\r\n  }\r\n}\r\n\r\nexport const metrics = new MetricsCollector();\r\n\r\n// Middleware to track API calls\r\nexport function metricsMiddleware(req: any, res: any, next: any) {\r\n  const start = performance.now();\r\n  \r\n  res.on('finish', () => {\r\n    const duration = performance.now() - start;\r\n    const endpoint = `${req.method} ${req.path}`;\r\n    const status = res.statusCode >= 400 ? 'error' : 'success';\r\n    \r\n    metrics.trackApiCall(endpoint, duration, status);\r\n    \r\n    if (status === 'error') {\r\n      metrics.trackError(`HTTP_${res.statusCode}`);\r\n    }\r\n  });\r\n  \r\n  next();\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\podcast.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":48,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":48,"endColumn":18,"suggestions":[{"fix":{"range":[1282,1345],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":52,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":52,"endColumn":16,"suggestions":[{"fix":{"range":[1395,1453],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":73,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":73,"endColumn":16,"suggestions":[{"fix":{"range":[1965,2013],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":114,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":114,"endColumn":22,"suggestions":[{"fix":{"range":[3391,3458],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as fs from 'fs';\r\nimport * as path from 'path';\r\n\r\nimport Parser from 'rss-parser';\r\n\r\nexport interface PodcastEpisode {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  pubDate: string;\r\n  duration?: string;\r\n  audioUrl?: string;\r\n  link?: string;\r\n}\r\n\r\nconst parser = new Parser();\r\n\r\nconst CACHE_DIR = path.join(process.cwd(), 'server', 'cache');\r\nconst CACHE_FILE = path.join(CACHE_DIR, 'podcast-feed.json');\r\nconst CACHE_DURATION = 60 * 60 * 1000; // 1 hour in milliseconds\r\n\r\ninterface CachedPodcastData {\r\n  feedUrl: string;\r\n  episodes: PodcastEpisode[];\r\n  timestamp: number;\r\n}\r\n\r\nfunction isCacheValid(cachedData: CachedPodcastData, feedUrl: string): boolean {\r\n  if (cachedData.feedUrl !== feedUrl) {\r\n    return false;\r\n  }\r\n  const now = Date.now();\r\n  const age = now - cachedData.timestamp;\r\n  return age < CACHE_DURATION;\r\n}\r\n\r\nfunction readCache(feedUrl: string): PodcastEpisode[] | null {\r\n  try {\r\n    if (!fs.existsSync(CACHE_FILE)) {\r\n      return null;\r\n    }\r\n\r\n    const cacheContent = fs.readFileSync(CACHE_FILE, 'utf-8');\r\n    const cachedData: CachedPodcastData = JSON.parse(cacheContent);\r\n\r\n    if (isCacheValid(cachedData, feedUrl)) {\r\n      const ageMinutes = Math.floor((Date.now() - cachedData.timestamp) / (1000 * 60));\r\n      console.log(`Using cached podcast data (age: ${ageMinutes}m)`);\r\n      return cachedData.episodes;\r\n    }\r\n\r\n    console.log('Podcast cache expired, fetching fresh data');\r\n    return null;\r\n  } catch (error) {\r\n    console.error('Error reading podcast cache:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction writeCache(feedUrl: string, episodes: PodcastEpisode[]): void {\r\n  try {\r\n    if (!fs.existsSync(CACHE_DIR)) {\r\n      fs.mkdirSync(CACHE_DIR, { recursive: true });\r\n    }\r\n\r\n    const cacheData: CachedPodcastData = {\r\n      feedUrl,\r\n      episodes,\r\n      timestamp: Date.now(),\r\n    };\r\n\r\n    fs.writeFileSync(CACHE_FILE, JSON.stringify(cacheData, null, 2), 'utf-8');\r\n    console.log('Podcast data cached successfully');\r\n  } catch (error) {\r\n    console.error('Error writing podcast cache:', error);\r\n  }\r\n}\r\n\r\nexport async function getPodcastFeed(feedUrl: string, limit: number = 10): Promise<PodcastEpisode[]> {\r\n  // Check cache first\r\n  const cachedEpisodes = readCache(feedUrl);\r\n  if (cachedEpisodes !== null) {\r\n    return cachedEpisodes.slice(0, limit);\r\n  }\r\n\r\n  // Cache miss or expired, fetch from API\r\n  try {\r\n    const feed = await parser.parseURL(feedUrl);\r\n    \r\n    const episodes: PodcastEpisode[] = (feed.items || [])\r\n      .map((item, index) => ({\r\n        id: item.guid || `episode-${index}`,\r\n        title: item.title || 'Untitled',\r\n        description: item.contentSnippet || item.content || '',\r\n        pubDate: item.pubDate || item.isoDate || '',\r\n        duration: item.itunes?.duration,\r\n        audioUrl: item.enclosure?.url,\r\n        link: item.link,\r\n      }));\r\n\r\n    // Cache all episodes\r\n    writeCache(feedUrl, episodes);\r\n\r\n    return episodes.slice(0, limit);\r\n  } catch (error) {\r\n    console.error('Error fetching podcast feed:', error);\r\n    \r\n    // If API fails, try to return stale cache as fallback\r\n    try {\r\n      if (fs.existsSync(CACHE_FILE)) {\r\n        const cacheContent = fs.readFileSync(CACHE_FILE, 'utf-8');\r\n        const cachedData: CachedPodcastData = JSON.parse(cacheContent);\r\n        if (cachedData.feedUrl === feedUrl) {\r\n          console.log('Podcast API failed, serving stale cache as fallback');\r\n          return cachedData.episodes.slice(0, limit);\r\n        }\r\n      }\r\n    } catch (cacheError) {\r\n      console.error('Failed to read stale podcast cache:', cacheError);\r\n    }\r\n    \r\n    throw error;\r\n  }\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\printful.ts","messages":[],"suppressedMessages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":125,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":125,"endColumn":18,"suggestions":[{"fix":{"range":[2791,2855],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":129,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":129,"endColumn":16,"suggestions":[{"fix":{"range":[2905,2964],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":149,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":149,"endColumn":16,"suggestions":[{"fix":{"range":[3453,3502],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":169,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":169,"endColumn":16,"suggestions":[{"fix":{"range":[4064,4142],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":187,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":187,"endColumn":20,"suggestions":[{"fix":{"range":[4698,4785],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":188,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":188,"endColumn":20,"suggestions":[{"fix":{"range":[4795,4870],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":266,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":266,"endColumn":20,"suggestions":[{"fix":{"range":[7851,7919],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":284,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":284,"endColumn":16,"suggestions":[{"fix":{"range":[8362,8409],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":354,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":354,"endColumn":16,"suggestions":[{"fix":{"range":[10505,10573],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":385,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":385,"endColumn":16,"suggestions":[{"fix":{"range":[11665,11746],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":394,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":394,"endColumn":14,"suggestions":[{"fix":{"range":[11996,12077],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":403,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":403,"endColumn":14,"suggestions":[{"fix":{"range":[12255,12340],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":406,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":406,"endColumn":16,"suggestions":[{"fix":{"range":[12357,12435],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":408,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":408,"endColumn":16,"suggestions":[{"fix":{"range":[12518,12576],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":417,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":417,"endColumn":16,"suggestions":[{"fix":{"range":[12759,12852],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":427,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":427,"endColumn":16,"suggestions":[{"fix":{"range":[13147,13253],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":438,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":438,"endColumn":16,"suggestions":[{"fix":{"range":[13620,13699],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":439,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":439,"endColumn":16,"suggestions":[{"fix":{"range":[13705,13789],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":440,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":440,"endColumn":16,"suggestions":[{"fix":{"range":[13795,13873],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":441,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":441,"endColumn":16,"suggestions":[{"fix":{"range":[13879,13975],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":453,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":453,"endColumn":16,"suggestions":[{"fix":{"range":[14370,14458],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":495,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":495,"endColumn":16,"suggestions":[{"fix":{"range":[15479,15541],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":496,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":496,"endColumn":16,"suggestions":[{"fix":{"range":[15547,15625],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":497,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":497,"endColumn":16,"suggestions":[{"fix":{"range":[15631,15667],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":520,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":520,"endColumn":16,"suggestions":[{"fix":{"range":[16293,16346],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":530,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":530,"endColumn":16,"suggestions":[{"fix":{"range":[16606,16894],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\rate-limiter.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":24,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":24,"endColumn":18,"suggestions":[{"fix":{"range":[736,787],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":27,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":27,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":13},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":35,"column":41,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":35,"endColumn":47,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[1144,1145],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":62,"column":41,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":62,"endColumn":47,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[2303,2304],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":85,"column":41,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":85,"endColumn":47,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[3265,3266],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Request, Response } from 'express';\r\nimport rateLimit from 'express-rate-limit';\r\nimport Redis from 'ioredis';\r\nimport RedisStore from 'rate-limit-redis';\r\n\r\n// Initialize Redis client (optional - falls back to in-memory if unavailable)\r\nlet redis: Redis | null = null;\r\n\r\ntry {\r\n  if (process.env.REDIS_URL) {\r\n    redis = new Redis(process.env.REDIS_URL, {\r\n      maxRetriesPerRequest: 3,\r\n      retryStrategy: (times) => {\r\n        if (times > 3) {return null;}\r\n        return Math.min(times * 100, 3000);\r\n      },\r\n    });\r\n\r\n    redis.on('error', (err) => {\r\n      console.warn('  Redis connection error, falling back to in-memory rate limiting:', err.message);\r\n    });\r\n\r\n    redis.on('connect', () => {\r\n      console.log(' Redis connected for rate limiting');\r\n    });\r\n  }\r\n} catch (err) {\r\n  console.warn('  Failed to initialize Redis for rate limiting, using in-memory store');\r\n}\r\n\r\n// General API rate limiter (100 requests per 15 minutes)\r\nexport const apiLimiter = rateLimit({\r\n  store: redis ? new RedisStore({\r\n    // @ts-expect-error - ioredis is compatible\r\n    sendCommand: (...args: string[]) => redis!.call(...args),\r\n    prefix: 'rl:api:',\r\n  }) : undefined,\r\n  windowMs: 15 * 60 * 1000, // 15 minutes\r\n  max: 100,\r\n  standardHeaders: true, // Return rate limit info in `RateLimit-*` headers\r\n  legacyHeaders: false, // Disable `X-RateLimit-*` headers\r\n  message: 'Too many requests from this IP, please try again later.',\r\n  // Trust proxy for Replit and cloud environments\r\n  validate: { trustProxy: process.env.NODE_ENV === 'production' || !!process.env.REPLIT_DEPLOYMENT },\r\n  skip: (req: Request) => {\r\n    // Skip rate limiting for localhost in development\r\n    return process.env.NODE_ENV === 'development' && req.ip === '127.0.0.1';\r\n  },\r\n  handler: (req: Request, res: Response) => {\r\n    res.status(429).json({\r\n      error: 'Too many requests',\r\n      message: 'You have exceeded the rate limit. Please try again later.',\r\n      retryAfter: res.getHeader('Retry-After'),\r\n    });\r\n  },\r\n});\r\n\r\n// Stricter rate limiter for authentication endpoints (5 requests per 15 minutes)\r\nexport const authLimiter = rateLimit({\r\n  store: redis ? new RedisStore({\r\n    // @ts-expect-error - ioredis is compatible\r\n    sendCommand: (...args: string[]) => redis!.call(...args),\r\n    prefix: 'rl:auth:',\r\n  }) : undefined,\r\n  windowMs: 15 * 60 * 1000, // 15 minutes\r\n  max: 5,\r\n  standardHeaders: true,\r\n  legacyHeaders: false,\r\n  skipSuccessfulRequests: true, // Don't count successful requests\r\n  message: 'Too many authentication attempts from this IP, please try again later.',\r\n  validate: { trustProxy: process.env.NODE_ENV === 'production' || !!process.env.REPLIT_DEPLOYMENT },\r\n  handler: (req: Request, res: Response) => {\r\n    res.status(429).json({\r\n      error: 'Too many authentication attempts',\r\n      message: 'You have exceeded the authentication rate limit. Please try again later.',\r\n      retryAfter: res.getHeader('Retry-After'),\r\n    });\r\n  },\r\n});\r\n\r\n// Aggressive rate limiter for expensive operations (10 requests per hour)\r\nexport const expensiveLimiter = rateLimit({\r\n  store: redis ? new RedisStore({\r\n    // @ts-expect-error - ioredis is compatible\r\n    sendCommand: (...args: string[]) => redis!.call(...args),\r\n    prefix: 'rl:expensive:',\r\n  }) : undefined,\r\n  windowMs: 60 * 60 * 1000, // 1 hour\r\n  max: 10,\r\n  standardHeaders: true,\r\n  legacyHeaders: false,\r\n  message: 'Too many expensive requests from this IP, please try again later.',\r\n  validate: { trustProxy: process.env.NODE_ENV === 'production' || !!process.env.REPLIT_DEPLOYMENT },\r\n  handler: (req: Request, res: Response) => {\r\n    res.status(429).json({\r\n      error: 'Rate limit exceeded',\r\n      message: 'You have exceeded the rate limit for this resource. Please try again later.',\r\n      retryAfter: res.getHeader('Retry-After'),\r\n    });\r\n  },\r\n});\r\n\r\n// Cleanup on process exit\r\nprocess.on('SIGINT', async () => {\r\n  if (redis) {\r\n    await redis.quit();\r\n  }\r\n});\r\n\r\nprocess.on('SIGTERM', async () => {\r\n  if (redis) {\r\n    await redis.quit();\r\n  }\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\routes.ts","messages":[{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":46,"column":58,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":46,"endColumn":75},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":73,"column":56,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":73,"endColumn":73},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":100,"column":56,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":100,"endColumn":73},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":153,"column":54,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":153,"endColumn":76},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":231,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":231,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9176,9179],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9176,9179],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":258,"column":54,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":258,"endColumn":71},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":277,"column":54,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":277,"endColumn":71}],"suppressedMessages":[{"ruleId":"sonarjs/cognitive-complexity","severity":1,"message":"Refactor this function to reduce its Cognitive Complexity from 28 to the 15 allowed.","line":436,"column":52,"nodeType":null,"messageId":"refactorFunction","endLine":436,"endColumn":54,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":452,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":452,"endColumn":18,"suggestions":[{"fix":{"range":[16847,16898],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":457,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":457,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17056,17059],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17056,17059],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":462,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":462,"endColumn":24,"suggestions":[{"fix":{"range":[17250,17336],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":466,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":466,"endColumn":22,"suggestions":[{"fix":{"range":[17440,17488],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":467,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":467,"endColumn":22,"suggestions":[{"fix":{"range":[17500,17569],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":468,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":468,"endColumn":22,"suggestions":[{"fix":{"range":[17581,17679],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":486,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":486,"endColumn":22,"suggestions":[{"fix":{"range":[18366,18447],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":504,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":504,"endColumn":24,"suggestions":[{"fix":{"range":[19799,19873],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":508,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":508,"endColumn":22,"suggestions":[{"fix":{"range":[19920,20007],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":512,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":512,"endColumn":22,"suggestions":[{"fix":{"range":[20210,20290],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":517,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":517,"endColumn":24,"suggestions":[{"fix":{"range":[20510,20589],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":518,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":518,"endColumn":24,"suggestions":[{"fix":{"range":[20603,20759],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":526,"column":15,"nodeType":"MemberExpression","messageId":"limited","endLine":526,"endColumn":26,"suggestions":[{"fix":{"range":[20904,20986],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":527,"column":15,"nodeType":"MemberExpression","messageId":"limited","endLine":527,"endColumn":26,"suggestions":[{"fix":{"range":[21002,21065],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":556,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":556,"endColumn":22,"suggestions":[{"fix":{"range":[22318,22359],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":558,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":558,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22486,22489],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22486,22489],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":570,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":570,"endColumn":22,"suggestions":[{"fix":{"range":[22904,22942],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":571,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":571,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22997,23000],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22997,23000],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":572,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":572,"endColumn":22,"suggestions":[{"fix":{"range":[23013,23065],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":578,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":578,"endColumn":22,"suggestions":[{"fix":{"range":[23182,23237],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createServer, type Server } from \"http\";\r\n\r\nimport type { Express } from \"express\";\r\n\r\nimport { getCharacterData } from \"./dndbeyond\";\r\nimport { getShopListings } from \"./etsy\";\r\nimport { registerHealthRoutes } from \"./health\";\r\nimport { metrics } from \"./monitoring\";\r\nimport { getPodcastFeed } from \"./podcast\";\r\nimport { getPrintfulSyncProducts, getPrintfulProductDetails, getCatalogVariantId as resolveCatalogVariantId, getPrintfulShippingEstimate } from \"./printful\";\r\nimport { apiLimiter, expensiveLimiter } from \"./rate-limiter\";\r\nimport { validateUrl, validateNumber, logSecurityEvent } from \"./security\";\r\nimport { createCheckoutSession, getCheckoutSession, verifyWebhookSignature, createPrintfulOrderFromSession, createPrintfulOrder, STRIPE_CONFIG } from \"./stripe\";\r\nimport { getPlaylistVideos, getChannelVideos, getChannelShorts, getChannelStats } from \"./youtube\";\r\n\r\nexport function registerRoutes(app: Express): Server {\r\n  // Apply API rate limiting to all /api routes\r\n  app.use(\"/api\", apiLimiter);\r\n\r\n  // Health check endpoints (for Kubernetes, Docker, monitoring)\r\n  registerHealthRoutes(app);\r\n  \r\n  // Metrics endpoint\r\n  app.get(\"/api/metrics\", (req, res) => {\r\n    res.json(metrics.getMetrics());\r\n  });\r\n  // A03: Injection Prevention - Validate YouTube playlist ID\r\n  app.get(\"/api/youtube/playlist/:playlistId\", async (req, res) => {\r\n    try {\r\n      const { playlistId } = req.params;\r\n      \r\n      // A03: Validate playlistId format (YouTube playlist IDs are alphanumeric with hyphens/underscores)\r\n      if (!/^[a-zA-Z0-9_-]+$/.test(playlistId)) {\r\n        logSecurityEvent('INVALID_PLAYLIST_ID', { playlistId, ip: req.ip });\r\n        return res.status(400).json({ error: 'Invalid playlist ID format' });\r\n      }\r\n\r\n      // A03: Validate maxResults parameter\r\n      const maxResultsInput = req.query.maxResults as string;\r\n      const validation = validateNumber(maxResultsInput || '1000', 1, 10000);\r\n      \r\n      if (!validation.valid) {\r\n        return res.status(400).json({ error: validation.error });\r\n      }\r\n\r\n      const videos = await getPlaylistVideos(playlistId, validation.value!);\r\n      res.json(videos);\r\n    } catch (error) {\r\n      console.error('Error fetching playlist:', error);\r\n      res.status(500).json({ error: 'Failed to fetch YouTube playlist' });\r\n    }\r\n  });\r\n\r\n  // NEW: Fetch all videos from a YouTube channel (sorted by newest first)\r\n  app.get(\"/api/youtube/channel/:channelId\", async (req, res) => {\r\n    try {\r\n      const { channelId } = req.params;\r\n\r\n      // A03: Validate channelId format (YouTube channel IDs start with UC)\r\n      if (!/^UC[a-zA-Z0-9_-]+$/.test(channelId)) {\r\n        logSecurityEvent('INVALID_CHANNEL_ID', { channelId, ip: req.ip });\r\n        return res.status(400).json({ error: 'Invalid channel ID format. Channel IDs must start with UC' });\r\n      }\r\n\r\n      // A03: Validate maxResults parameter\r\n      const maxResultsInput = req.query.maxResults as string;\r\n      const validation = validateNumber(maxResultsInput || '50', 1, 10000);\r\n      \r\n      if (!validation.valid) {\r\n        return res.status(400).json({ error: validation.error });\r\n      }\r\n\r\n      const videos = await getChannelVideos(channelId, validation.value!);\r\n      res.json(videos);\r\n    } catch (error) {\r\n      console.error('Error fetching channel videos:', error);\r\n      res.status(500).json({ error: 'Failed to fetch YouTube channel videos' });\r\n    }\r\n  });\r\n\r\n  // Fetch YouTube Shorts from a channel (videos <= 60 seconds)\r\n  app.get(\"/api/youtube/channel/:channelId/shorts\", async (req, res) => {\r\n    try {\r\n      const { channelId } = req.params;\r\n\r\n      // A03: Validate channelId format (YouTube channel IDs start with UC)\r\n      if (!/^UC[a-zA-Z0-9_-]+$/.test(channelId)) {\r\n        logSecurityEvent('INVALID_CHANNEL_ID', { channelId, ip: req.ip });\r\n        return res.status(400).json({ error: 'Invalid channel ID format. Channel IDs must start with UC' });\r\n      }\r\n\r\n      // A03: Validate maxResults parameter\r\n      const maxResultsInput = req.query.maxResults as string;\r\n      const validation = validateNumber(maxResultsInput || '50', 1, 10000);\r\n      \r\n      if (!validation.valid) {\r\n        return res.status(400).json({ error: validation.error });\r\n      }\r\n\r\n      const shorts = await getChannelShorts(channelId, validation.value!);\r\n      res.json(shorts);\r\n    } catch (error) {\r\n      console.error('Error fetching YouTube Shorts:', error);\r\n      res.status(500).json({ error: 'Failed to fetch YouTube Shorts' });\r\n    }\r\n  });\r\n\r\n  // YouTube channel statistics endpoint\r\n  app.get(\"/api/youtube/channel/:channelId/stats\", async (req, res) => {\r\n    try {\r\n      const { channelId } = req.params;\r\n\r\n      // A03: Validate channelId format (YouTube channel IDs start with UC)\r\n      if (!/^UC[a-zA-Z0-9_-]+$/.test(channelId)) {\r\n        logSecurityEvent('INVALID_CHANNEL_ID', { channelId, ip: req.ip });\r\n        return res.status(400).json({ error: 'Invalid channel ID format. Channel IDs must start with UC' });\r\n      }\r\n\r\n      const stats = await getChannelStats(channelId);\r\n      res.json(stats);\r\n    } catch (error) {\r\n      console.error('Error fetching YouTube channel stats:', error);\r\n      res.status(500).json({ error: 'Failed to fetch channel statistics' });\r\n    }\r\n  });\r\n\r\n  // A10: SSRF Prevention - Validate and sanitize podcast feed URL\r\n  app.post(\"/api/podcast/feed\", expensiveLimiter, async (req, res) => {\r\n    try {\r\n      const { feedUrl, limit } = req.body;\r\n      \r\n      if (!feedUrl) {\r\n        return res.status(400).json({ error: 'feedUrl is required' });\r\n      }\r\n\r\n      // A10: SSRF Protection - Validate URL to prevent attacks\r\n      const urlValidation = validateUrl(feedUrl);\r\n      if (!urlValidation.valid) {\r\n        logSecurityEvent('SSRF_ATTEMPT', { \r\n          feedUrl, \r\n          ip: req.ip,\r\n          error: urlValidation.error \r\n        });\r\n        return res.status(400).json({ error: urlValidation.error });\r\n      }\r\n\r\n      // A03: Validate limit parameter\r\n      const limitValidation = validateNumber(limit || 10, 1, 50);\r\n      if (!limitValidation.valid) {\r\n        return res.status(400).json({ error: limitValidation.error });\r\n      }\r\n      \r\n      const episodes = await getPodcastFeed(feedUrl, limitValidation.value!);\r\n      res.json(episodes);\r\n    } catch (error) {\r\n      console.error('Error fetching podcast feed:', error);\r\n      res.status(500).json({ error: 'Failed to fetch podcast feed' });\r\n    }\r\n  });\r\n\r\n  // Audio proxy endpoint to bypass CORS restrictions\r\n  // Uses redirect approach for better production reliability\r\n  app.get(\"/api/podcast/audio-proxy\", async (req, res) => {\r\n    try {\r\n      const { url } = req.query;\r\n      \r\n      if (!url || typeof url !== 'string') {\r\n        return res.status(400).json({ error: 'URL parameter is required' });\r\n      }\r\n\r\n      // Decode URL if it's double-encoded\r\n      let decodedUrl = url;\r\n      try {\r\n        // Handle multiple levels of encoding\r\n        while (decodedUrl.includes('%25')) {\r\n          decodedUrl = decodeURIComponent(decodedUrl);\r\n        }\r\n      } catch {\r\n        // If decoding fails, use original\r\n      }\r\n\r\n      // Validate URL to prevent SSRF attacks\r\n      const urlValidation = validateUrl(decodedUrl);\r\n      if (!urlValidation.valid) {\r\n        logSecurityEvent('SSRF_ATTEMPT', { \r\n          url: decodedUrl, \r\n          ip: req.ip,\r\n          error: urlValidation.error \r\n        });\r\n        return res.status(400).json({ error: urlValidation.error });\r\n      }\r\n\r\n      // Only allow audio from known podcast hosting domains\r\n      const allowedDomains = ['anchor.fm', 'cloudfront.net', 'spotify.com', 'apple.com', 'spreaker.com', 'buzzsprout.com', 'libsyn.com', 'podbean.com', 'simplecast.com', 'transistor.fm', 'captivate.fm', 'megaphone.fm', 'omny.fm', 'acast.com'];\r\n      const urlObj = new URL(decodedUrl);\r\n      const isAllowed = allowedDomains.some(domain => \r\n        urlObj.hostname.endsWith(domain) || urlObj.hostname === domain\r\n      );\r\n\r\n      if (!isAllowed) {\r\n        logSecurityEvent('UNAUTHORIZED_AUDIO_DOMAIN', { url: decodedUrl, ip: req.ip });\r\n        return res.status(403).json({ error: 'Audio URL from unauthorized domain' });\r\n      }\r\n\r\n      // Follow redirects to get the final audio URL\r\n      const controller = new globalThis.AbortController();\r\n      const timeout = globalThis.setTimeout(() => controller.abort(), 15000);\r\n\r\n      try {\r\n        const response = await fetch(decodedUrl, {\r\n          method: 'HEAD',\r\n          headers: {\r\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\r\n          },\r\n          redirect: 'follow',\r\n          signal: controller.signal,\r\n        });\r\n\r\n        globalThis.clearTimeout(timeout);\r\n\r\n        // Get the final URL after redirects\r\n        const finalUrl = response.url;\r\n        \r\n        // Redirect client to the actual audio source\r\n        res.redirect(302, finalUrl);\r\n      } catch {\r\n        globalThis.clearTimeout(timeout);\r\n        // If HEAD request fails, try direct redirect\r\n        res.redirect(302, decodedUrl);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error proxying audio:', error?.message || error);\r\n      if (!res.headersSent) {\r\n        res.status(500).json({ error: 'Failed to proxy audio file' });\r\n      }\r\n    }\r\n  });\r\n\r\n  // A03: Injection Prevention - Validate Etsy shop ID\r\n  app.get(\"/api/etsy/shop/:shopId/listings\", async (req, res) => {\r\n    try {\r\n      const { shopId } = req.params;\r\n      \r\n      // A03: Validate shopId format (Etsy shop IDs are alphanumeric)\r\n      if (!/^[a-zA-Z0-9]+$/.test(shopId)) {\r\n        logSecurityEvent('INVALID_SHOP_ID', { shopId, ip: req.ip });\r\n        return res.status(400).json({ error: 'Invalid shop ID format' });\r\n      }\r\n\r\n      // A03: Validate limit parameter\r\n      const limitInput = req.query.limit as string;\r\n      const validation = validateNumber(limitInput || '8', 1, 50);\r\n      \r\n      if (!validation.valid) {\r\n        return res.status(400).json({ error: validation.error });\r\n      }\r\n      \r\n      const products = await getShopListings(shopId, validation.value!);\r\n      res.json(products);\r\n    } catch (error) {\r\n      console.error('Error fetching Etsy listings:', error);\r\n      res.status(500).json({ error: 'Failed to fetch Etsy products' });\r\n    }\r\n  });\r\n\r\n  // Printful sync products endpoint\r\n  app.get(\"/api/printful/products\", async (req, res) => {\r\n    try {\r\n      // A03: Validate limit parameter\r\n      const limitInput = req.query.limit as string;\r\n      const validation = validateNumber(limitInput || '20', 1, 50);\r\n      \r\n      if (!validation.valid) {\r\n        return res.status(400).json({ error: validation.error });\r\n      }\r\n      \r\n      const products = await getPrintfulSyncProducts(validation.value!);\r\n      res.json(products);\r\n    } catch (error) {\r\n      console.error('Error fetching Printful products:', error);\r\n      res.status(500).json({ error: 'Failed to fetch Printful products' });\r\n    }\r\n  });\r\n\r\n  // Printful product details endpoint\r\n  app.get(\"/api/printful/products/:productId\", async (req, res) => {\r\n    try {\r\n      const { productId } = req.params;\r\n      \r\n      // A03: Validate productId format (Printful product IDs are numeric)\r\n      if (!/^\\d+$/.test(productId)) {\r\n        logSecurityEvent('INVALID_PRODUCT_ID', { productId, ip: req.ip });\r\n        return res.status(400).json({ error: 'Invalid product ID format' });\r\n      }\r\n      \r\n      const product = await getPrintfulProductDetails(productId);\r\n      \r\n      if (!product) {\r\n        return res.status(404).json({ error: 'Product not found' });\r\n      }\r\n      \r\n      res.json(product);\r\n    } catch (error) {\r\n      console.error('Error fetching Printful product:', error);\r\n      res.status(500).json({ error: 'Failed to fetch product details' });\r\n    }\r\n  });\r\n\r\n  // Printful: Calculate shipping estimate\r\n  app.post(\"/api/printful/shipping-estimate\", async (req, res) => {\r\n    try {\r\n      const { variantId, quantity, recipient } = req.body;\r\n\r\n      // Validate inputs\r\n      if (!variantId || !recipient) {\r\n        return res.status(400).json({ error: 'Missing required fields: variantId, recipient' });\r\n      }\r\n\r\n      if (!recipient.address1 || !recipient.city || !recipient.state_code || !recipient.country_code || !recipient.zip) {\r\n        return res.status(400).json({ error: 'Missing required recipient fields' });\r\n      }\r\n\r\n      const estimate = await getPrintfulShippingEstimate({\r\n        recipient: {\r\n          address1: recipient.address1,\r\n          address2: recipient.address2 || null,\r\n          city: recipient.city,\r\n          state_code: recipient.state_code,\r\n          country_code: recipient.country_code,\r\n          zip: recipient.zip,\r\n        },\r\n        items: [{\r\n          sync_variant_id: parseInt(variantId),\r\n          quantity: quantity || 1,\r\n        }],\r\n      });\r\n\r\n      if (!estimate) {\r\n        return res.status(500).json({ error: 'Failed to calculate shipping estimate' });\r\n      }\r\n\r\n      res.json({\r\n        shipping: estimate.shipping,\r\n        tax: estimate.tax,\r\n        rates: estimate.rates,\r\n        costs: estimate.costs,\r\n      });\r\n    } catch (error) {\r\n      console.error('Error calculating shipping estimate:', error);\r\n      res.status(500).json({ error: 'Failed to calculate shipping' });\r\n    }\r\n  });\r\n\r\n  // Stripe Checkout: Create checkout session\r\n  app.post(\"/api/stripe/create-checkout\", async (req, res) => {\r\n    try {\r\n      const { productId, variantId, productName, price, quantity, imageUrl, shipping } = req.body;\r\n\r\n      // Validate inputs\r\n      if (!productId || !variantId || !productName || !price) {\r\n        return res.status(400).json({ error: 'Missing required fields' });\r\n      }\r\n\r\n      if (!/^\\d+$/.test(productId) || !/^\\d+$/.test(variantId)) {\r\n        return res.status(400).json({ error: 'Invalid product or variant ID' });\r\n      }\r\n\r\n      const priceInCents = Math.round(parseFloat(price) * 100);\r\n      if (isNaN(priceInCents) || priceInCents <= 0) {\r\n        return res.status(400).json({ error: 'Invalid price' });\r\n      }\r\n\r\n      // Parse shipping estimate if provided\r\n      let shippingEstimate;\r\n      if (shipping && typeof shipping.shipping === 'number' && typeof shipping.tax === 'number') {\r\n        shippingEstimate = {\r\n          shipping: shipping.shipping,\r\n          tax: shipping.tax,\r\n        };\r\n      }\r\n\r\n      const session = await createCheckoutSession({\r\n        productId,\r\n        variantId,\r\n        productName,\r\n        price: priceInCents,\r\n        quantity: quantity || 1,\r\n        imageUrl,\r\n        shippingEstimate,  // Pass Printful's exact costs if available\r\n      });\r\n\r\n      if (!session) {\r\n        return res.status(500).json({ error: 'Failed to create checkout session' });\r\n      }\r\n\r\n      res.json({ sessionId: session.id, url: session.url });\r\n    } catch (error) {\r\n      console.error('Error creating checkout session:', error);\r\n      res.status(500).json({ error: 'Failed to create checkout session' });\r\n    }\r\n  });\r\n\r\n  // Stripe: Get checkout session details\r\n  app.get(\"/api/stripe/checkout/:sessionId\", async (req, res) => {\r\n    try {\r\n      const { sessionId } = req.params;\r\n\r\n      if (!sessionId.startsWith('cs_')) {\r\n        return res.status(400).json({ error: 'Invalid session ID format' });\r\n      }\r\n\r\n      const session = await getCheckoutSession(sessionId);\r\n      \r\n      if (!session) {\r\n        return res.status(404).json({ error: 'Session not found' });\r\n      }\r\n\r\n      res.json({\r\n        id: session.id,\r\n        status: session.status,\r\n        payment_status: session.payment_status,\r\n        customer_email: session.customer_details?.email,\r\n        amount_total: session.amount_total,\r\n      });\r\n    } catch (error) {\r\n      console.error('Error fetching checkout session:', error);\r\n      res.status(500).json({ error: 'Failed to fetch session details' });\r\n    }\r\n  });\r\n\r\n  /* eslint-disable no-console, @typescript-eslint/no-explicit-any, sonarjs/cognitive-complexity */\r\n  // Stripe Webhook: Handle payment events\r\n  // Track processed sessions to prevent duplicate orders\r\n  const processedSessions = new Set<string>();\r\n\r\n  app.post(\"/api/stripe/webhook\", async (req, res) => {\r\n    const signature = req.headers['stripe-signature'];\r\n    const webhookSecret = process.env.STRIPE_WEBHOOK_SECRET;\r\n\r\n    if (!signature || !webhookSecret) {\r\n      console.error('Missing webhook signature or secret');\r\n      return res.status(400).send('Webhook signature verification failed');\r\n    }\r\n\r\n    try {\r\n      const event = verifyWebhookSignature(req.body, signature as string, webhookSecret);\r\n\r\n      if (!event) {\r\n        return res.status(400).send('Invalid signature');\r\n      }\r\n\r\n      console.log('Webhook event received:', event.type);\r\n\r\n      // Handle the event\r\n      switch (event.type) {\r\n        case 'checkout.session.completed': {\r\n          const eventSession = event.data.object as any;\r\n          const sessionId = eventSession.id;\r\n          \r\n          // Idempotency check - prevent duplicate order creation\r\n          if (processedSessions.has(sessionId)) {\r\n            console.log(`  Session ${sessionId} already processed, skipping duplicate webhook`);\r\n            return res.json({ received: true, duplicate: true });\r\n          }\r\n          \r\n          console.log(' Payment successful:', sessionId);\r\n          console.log('Customer email:', eventSession.customer_details?.email);\r\n          console.log('Amount paid:', eventSession.amount_total / 100, eventSession.currency.toUpperCase());\r\n          \r\n          // Fetch full session with shipping details (not included in webhook by default)\r\n          const fullSession = await getCheckoutSession(eventSession.id);\r\n          \r\n          if (!fullSession) {\r\n            console.error(' Failed to retrieve full session data');\r\n            break;\r\n          }\r\n          \r\n          // Get sync variant ID from metadata\r\n          const syncVariantId = fullSession.metadata?.printful_variant_id;\r\n          if (!syncVariantId) {\r\n            console.error(' No Printful variant ID in session metadata');\r\n            console.error('Session metadata:', fullSession.metadata);\r\n            break;\r\n          }\r\n\r\n          console.log(` Converting sync variant ${syncVariantId} to catalog variant...`);\r\n          \r\n          // Convert sync variant ID to catalog variant ID\r\n          const catalogVariantId = await resolveCatalogVariantId(syncVariantId);\r\n          if (!catalogVariantId) {\r\n            console.error(` Could not resolve catalog variant ID for sync variant ${syncVariantId}`);\r\n            console.error('  CRITICAL: Payment was successful but order cannot be auto-fulfilled');\r\n            console.error('This likely means:');\r\n            console.error('1. The variant does not exist in your Printful store (most common)');\r\n            console.error('2. The Printful API key is incorrect');\r\n            console.error('3. The sync variant ID in metadata is wrong');\r\n            console.error(` Manual Action Required:`);\r\n            console.error(`   - Check session: https://dashboard.stripe.com/payments/${eventSession.id}`);\r\n            console.error(`   - Check variant: https://api.printful.com/store/variants/${syncVariantId}`);\r\n            console.error(`   - Manually create Printful order for: ${eventSession.customer_details?.email}`);\r\n            console.error(`   - Amount paid: $${eventSession.amount_total / 100} ${eventSession.currency.toUpperCase()}`);\r\n            // Don't break - continue processing webhook to acknowledge receipt\r\n            // But the order will need manual fulfillment\r\n            console.log(' Webhook acknowledged, but order needs manual fulfillment');\r\n            break;\r\n          }\r\n\r\n          console.log(` Resolved variant: sync=${syncVariantId}  catalog=${catalogVariantId}`);\r\n          \r\n          // Note: For sync products in Printful, use sync_variant_id (not variant_id)\r\n          // The files are already associated with the sync variant, no need to send them\r\n          console.log(` Creating Printful order with sync variant ${syncVariantId}...`);\r\n          \r\n          const orderData = createPrintfulOrderFromSession(fullSession);\r\n          if (orderData) {\r\n            // Order data already uses sync_variant_id from createPrintfulOrderFromSession\r\n            console.log('Recipient:', orderData.recipient.name, orderData.recipient.email);\r\n            console.log('Items:', orderData.items.map(i => ({ \r\n              sync_variant_id: i.sync_variant_id,\r\n              quantity: i.quantity\r\n            })));\r\n            \r\n            const result = await createPrintfulOrder(orderData);\r\n            \r\n            if (result.success) {\r\n              console.log(` Printful order created successfully! Order ID: ${result.orderId}`);\r\n              console.log(`Order will be fulfilled and shipped by Printful`);\r\n              \r\n              // Mark session as processed to prevent duplicates\r\n              processedSessions.add(sessionId);\r\n              \r\n              // Clean up old sessions (keep last 1000 to prevent memory leak)\r\n              if (processedSessions.size > 1000) {\r\n                const sessionsArray = Array.from(processedSessions);\r\n                processedSessions.clear();\r\n                sessionsArray.slice(-500).forEach(id => processedSessions.add(id));\r\n              }\r\n              \r\n              // TODO: Send confirmation email to customer\r\n              // TODO: Store order in database for tracking\r\n            } else {\r\n              console.error(` Failed to create Printful order: ${result.error}`);\r\n              console.error('Order data:', JSON.stringify(orderData, null, 2));\r\n              // TODO: Alert admin about failed order creation\r\n              // TODO: Store failed order for manual processing\r\n            }\r\n          } else {\r\n            console.error(' Could not extract order data from Stripe session');\r\n            console.error('Session ID:', eventSession.id);\r\n          }\r\n          \r\n          break;\r\n        }\r\n\r\n        case 'checkout.session.async_payment_succeeded': {\r\n          console.log(' Async payment succeeded');\r\n          // Handle delayed payment methods (bank transfers, etc.)\r\n          const asyncEventSession = event.data.object as any;\r\n          const asyncSession = await getCheckoutSession(asyncEventSession.id);\r\n          if (asyncSession) {\r\n            const asyncOrderData = createPrintfulOrderFromSession(asyncSession);\r\n            if (asyncOrderData) {\r\n              await createPrintfulOrder(asyncOrderData);\r\n            }\r\n          }\r\n          break;\r\n        }\r\n\r\n        case 'checkout.session.async_payment_failed': {\r\n          console.log(' Async payment failed');\r\n          const failedSession = event.data.object as any;\r\n          console.log('Failed session ID:', failedSession.id);\r\n          // TODO: Notify customer that payment failed\r\n          break;\r\n        }\r\n\r\n        default:\r\n          console.log(`  Unhandled event type: ${event.type}`);\r\n      }\r\n\r\n      res.json({ received: true });\r\n    } catch (error) {\r\n      console.error('Webhook error:', error);\r\n      res.status(400).send('Webhook error');\r\n    }\r\n  });\r\n\r\n  // Get Stripe config (publishable key for client-side)\r\n  app.get(\"/api/stripe/config\", (req, res) => {\r\n    res.json({\r\n      publishableKey: STRIPE_CONFIG.publishableKey,\r\n    });\r\n  });\r\n\r\n  // A03: Injection Prevention - Validate D&D Beyond character ID\r\n  app.get(\"/api/dndbeyond/character/:characterId\", async (req, res) => {\r\n    try {\r\n      const { characterId } = req.params;\r\n      \r\n      // A03: Validate characterId format (D&D Beyond character IDs are numeric)\r\n      if (!/^\\d+$/.test(characterId)) {\r\n        logSecurityEvent('INVALID_CHARACTER_ID', { characterId, ip: req.ip });\r\n        return res.status(400).json({ error: 'Invalid character ID format' });\r\n      }\r\n      \r\n      const characterData = await getCharacterData(characterId);\r\n      res.json(characterData);\r\n    } catch (error) {\r\n      console.error('Error fetching D&D Beyond character:', error);\r\n      res.status(500).json({ error: 'Failed to fetch character data' });\r\n    }\r\n  });\r\n\r\n  return createServer(app);\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\security.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\storage.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":9,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"id"},"fix":{"range":[211,221],"text":""},"desc":"Remove unused variable 'id'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'username' is defined but never used.","line":10,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"username"},"fix":{"range":[272,288],"text":""},"desc":"Remove unused variable 'username'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'user' is defined but never used.","line":11,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"user"},"fix":{"range":[332,348],"text":""},"desc":"Remove unused variable 'user'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'getUser' has no 'await' expression.","line":21,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":21,"endColumn":16,"suggestions":[{"messageId":"removeAsync","fix":{"range":[515,521],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'getUserByUsername' has no 'await' expression.","line":25,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":25,"endColumn":26,"suggestions":[{"messageId":"removeAsync","fix":{"range":[612,618],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'createUser' has no 'await' expression.","line":31,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":31,"endColumn":19,"suggestions":[{"messageId":"removeAsync","fix":{"range":[796,802],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { randomUUID } from \"crypto\";\r\n\r\nimport { type User, type InsertUser } from \"@shared/schema\";\r\n\r\n// modify the interface with any CRUD methods\r\n// you might need\r\n\r\nexport interface IStorage {\r\n  getUser(id: string): Promise<User | undefined>;\r\n  getUserByUsername(username: string): Promise<User | undefined>;\r\n  createUser(user: InsertUser): Promise<User>;\r\n}\r\n\r\nexport class MemStorage implements IStorage {\r\n  private users: Map<string, User>;\r\n\r\n  constructor() {\r\n    this.users = new Map();\r\n  }\r\n\r\n  async getUser(id: string): Promise<User | undefined> {\r\n    return this.users.get(id);\r\n  }\r\n\r\n  async getUserByUsername(username: string): Promise<User | undefined> {\r\n    return Array.from(this.users.values()).find(\r\n      (user) => user.username === username,\r\n    );\r\n  }\r\n\r\n  async createUser(insertUser: InsertUser): Promise<User> {\r\n    const id = randomUUID();\r\n    const user: User = { ...insertUser, id };\r\n    this.users.set(id, user);\r\n    return user;\r\n  }\r\n}\r\n\r\nexport const storage = new MemStorage();\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\stripe.ts","messages":[],"suppressedMessages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":68,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":68,"endColumn":14,"suggestions":[{"fix":{"range":[1961,2261],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":238,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":238,"endColumn":16,"suggestions":[{"fix":{"range":[6951,7005],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":239,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":239,"endColumn":16,"suggestions":[{"fix":{"range":[7011,7074],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":251,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":251,"endColumn":16,"suggestions":[{"fix":{"range":[7399,7463],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":252,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":252,"endColumn":16,"suggestions":[{"fix":{"range":[7469,7528],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":270,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":270,"endColumn":16,"suggestions":[{"fix":{"range":[8008,8073],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\vite.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":16,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":16,"endColumn":14,"suggestions":[{"fix":{"range":[399,454],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import fs from \"fs\";\r\nimport { type Server } from \"http\";\r\nimport path from \"path\";\r\n\r\nimport express, { type Express } from \"express\";\r\nimport { nanoid } from \"nanoid\";\r\n\r\nexport function log(message: string, source = \"express\") {\r\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\r\n    hour: \"numeric\",\r\n    minute: \"2-digit\",\r\n    second: \"2-digit\",\r\n    hour12: true,\r\n  });\r\n\r\n  console.log(`${formattedTime} [${source}] ${message}`);\r\n}\r\n\r\nexport async function setupVite(app: Express, server: Server) {\r\n  // Dynamically import vite only when needed (development mode)\r\n  const { createServer: createViteServer, createLogger } = await import(\"vite\");\r\n  const react = (await import(\"@vitejs/plugin-react\")).default;\r\n  const runtimeErrorOverlay = (await import(\"@replit/vite-plugin-runtime-error-modal\")).default;\r\n  const viteLogger = createLogger();\r\n  \r\n  const serverOptions = {\r\n    middlewareMode: true,\r\n    hmr: { server },\r\n    allowedHosts: true as const,\r\n  };\r\n\r\n  log(\"Setting up Vite dev server...\", \"vite\");\r\n  \r\n  const vite = await createViteServer({\r\n    plugins: [\r\n      react(),\r\n      runtimeErrorOverlay(),\r\n      ...(process.env.NODE_ENV !== \"production\" &&\r\n      process.env.REPL_ID !== undefined\r\n        ? [\r\n            await import(\"@replit/vite-plugin-cartographer\").then((m) =>\r\n              m.cartographer(),\r\n            ),\r\n            await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\r\n              m.devBanner(),\r\n            ),\r\n          ]\r\n        : []),\r\n    ],\r\n    resolve: {\r\n      alias: {\r\n        \"@\": path.resolve(import.meta.dirname, \"..\", \"client\", \"src\"),\r\n        \"@shared\": path.resolve(import.meta.dirname, \"..\", \"shared\"),\r\n        \"@assets\": path.resolve(import.meta.dirname, \"..\", \"attached_assets\"),\r\n      },\r\n    },\r\n    root: path.resolve(import.meta.dirname, \"..\", \"client\"),\r\n    build: {\r\n      outDir: path.resolve(import.meta.dirname, \"..\", \"dist/public\"),\r\n      emptyOutDir: true,\r\n    },\r\n    server: {\r\n      ...serverOptions,\r\n      fs: {\r\n        strict: true,\r\n        deny: [\"**/.*\"],\r\n      },\r\n    },\r\n    configFile: false,\r\n    customLogger: {\r\n      ...viteLogger,\r\n      error: (msg, options) => {\r\n        viteLogger.error(msg, options);\r\n        process.exit(1);\r\n      },\r\n    },\r\n    appType: \"custom\",\r\n  });\r\n\r\n  log(\"Vite dev server ready\", \"vite\");\r\n  \r\n  app.use(vite.middlewares);\r\n  app.use(\"*\", async (req, res, next) => {\r\n    const url = req.originalUrl;\r\n\r\n    try {\r\n      const clientTemplate = path.resolve(\r\n        import.meta.dirname,\r\n        \"..\",\r\n        \"client\",\r\n        \"index.html\",\r\n      );\r\n\r\n      // always reload the index.html file from disk incase it changes\r\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\r\n      template = template.replace(\r\n        `src=\"/src/main.tsx\"`,\r\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\r\n      );\r\n      const page = await vite.transformIndexHtml(url, template);\r\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\r\n    } catch (e) {\r\n      vite.ssrFixStacktrace(e as Error);\r\n      next(e);\r\n    }\r\n  });\r\n}\r\n\r\nexport function serveStatic(app: Express) {\r\n  const distPath = path.resolve(import.meta.dirname, \"public\");\r\n\r\n  if (!fs.existsSync(distPath)) {\r\n    throw new Error(\r\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\r\n    );\r\n  }\r\n\r\n  app.use(express.static(distPath));\r\n\r\n  // fall through to index.html if the file doesn't exist\r\n  app.use(\"*\", (_req, res) => {\r\n    res.sendFile(path.resolve(distPath, \"index.html\"));\r\n  });\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\server\\youtube.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[124,127],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[124,127],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":110,"column":24,"nodeType":"MemberExpression","endLine":110,"endColumn":46},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":117,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":117,"endColumn":18,"suggestions":[{"fix":{"range":[3298,3386],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":121,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":121,"endColumn":16,"suggestions":[{"fix":{"range":[3434,3511],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":147,"column":5,"nodeType":"MemberExpression","endLine":147,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":153,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":153,"endColumn":16,"suggestions":[{"fix":{"range":[4409,4484],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_maxResults' is defined but never used.","line":159,"column":63,"nodeType":"Identifier","messageId":"unusedVar","endLine":159,"endColumn":82,"suggestions":[{"messageId":"removeVar","data":{"varName":"_maxResults"},"fix":{"range":[4628,4649],"text":""},"desc":"Remove unused variable '_maxResults'."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":170,"column":33,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":170,"endColumn":40},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":189,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5629,5632],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5629,5632],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":209,"column":33,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":209,"endColumn":40},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":220,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6651,6654],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6651,6654],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"sonarjs/cognitive-complexity","severity":1,"message":"Refactor this function to reduce its Cognitive Complexity from 29 to the 15 allowed.","line":262,"column":23,"nodeType":null,"messageId":"refactorFunction","endLine":262,"endColumn":40},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":275,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8420,8423],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8420,8423],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":279,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":279,"endColumn":22,"suggestions":[{"fix":{"range":[8742,8829],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":286,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":286,"endColumn":24,"suggestions":[{"fix":{"range":[9117,9237],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":287,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":287,"endColumn":24,"suggestions":[{"fix":{"range":[9251,9357],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":301,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":301,"endColumn":18,"suggestions":[{"fix":{"range":[9741,9861],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":324,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":324,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10511,10514],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10511,10514],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":393,"column":28,"nodeType":"MemberExpression","endLine":393,"endColumn":50},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":395,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":395,"endColumn":22,"suggestions":[{"fix":{"range":[12998,13057],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":404,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":404,"endColumn":16,"suggestions":[{"fix":{"range":[13297,13368],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"sonarjs/cognitive-complexity","severity":1,"message":"Refactor this function to reduce its Cognitive Complexity from 24 to the 15 allowed.","line":417,"column":23,"nodeType":null,"messageId":"refactorFunction","endLine":417,"endColumn":39},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":429,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":429,"endColumn":18,"suggestions":[{"fix":{"range":[14136,14219],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":463,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":463,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15373,15376],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15373,15376],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":478,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":478,"endColumn":18,"suggestions":[{"fix":{"range":[15778,15834],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":482,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":482,"endColumn":16,"suggestions":[{"fix":{"range":[15867,15942],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":503,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":503,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16752,16755],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16752,16755],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":541,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":541,"endColumn":16,"suggestions":[{"fix":{"range":[18075,18149],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":552,"column":28,"nodeType":"MemberExpression","endLine":552,"endColumn":49},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":554,"column":11,"nodeType":"MemberExpression","messageId":"limited","endLine":554,"endColumn":22,"suggestions":[{"fix":{"range":[18612,18695],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_cacheError' is defined but never used.","line":558,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":558,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_cacheError' is defined but never used.","line":558,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":558,"endColumn":25},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":562,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":562,"endColumn":16,"suggestions":[{"fix":{"range":[18835,18906],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":577,"column":35,"nodeType":"Literal","endLine":577,"endColumn":72},{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":591,"column":35,"nodeType":"Literal","endLine":591,"endColumn":72},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":651,"column":26,"nodeType":"MemberExpression","endLine":651,"endColumn":47},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":655,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":655,"endColumn":20,"suggestions":[{"fix":{"range":[22037,22111],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":660,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":660,"endColumn":16,"suggestions":[{"fix":{"range":[22169,22233],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":706,"column":5,"nodeType":"MemberExpression","endLine":706,"endColumn":26},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":716,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":716,"endColumn":16,"suggestions":[{"fix":{"range":[24208,24274],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":726,"column":26,"nodeType":"MemberExpression","endLine":726,"endColumn":47},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":729,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":729,"endColumn":20,"suggestions":[{"fix":{"range":[24748,24837],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":37,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as fs from 'fs';\r\nimport * as path from 'path';\r\n\r\nimport { google } from 'googleapis';\r\n\r\nlet connectionSettings: any;\r\n\r\nconst CACHE_DIR = path.join(process.cwd(), 'server', 'cache');\r\nconst CACHE_FILE = path.join(CACHE_DIR, 'youtube-playlist.json');\r\nconst CACHE_DURATION = 24 * 60 * 60 * 1000; // 24 hours in milliseconds\r\n\r\nasync function getAccessToken() {\r\n  if (connectionSettings && connectionSettings.settings.expires_at && new Date(connectionSettings.settings.expires_at).getTime() > Date.now()) {\r\n    return connectionSettings.settings.access_token;\r\n  }\r\n  \r\n  const hostname = process.env.REPLIT_CONNECTORS_HOSTNAME\r\n  const xReplitToken = process.env.REPL_IDENTITY \r\n    ? `repl ${  process.env.REPL_IDENTITY}` \r\n    : process.env.WEB_REPL_RENEWAL \r\n    ? `depl ${  process.env.WEB_REPL_RENEWAL}` \r\n    : null;\r\n\r\n  if (!xReplitToken) {\r\n    throw new Error('X_REPLIT_TOKEN not found for repl/depl');\r\n  }\r\n\r\n  connectionSettings = await fetch(\r\n    `https://${  hostname  }/api/v2/connection?include_secrets=true&connector_names=youtube`,\r\n    {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'X_REPLIT_TOKEN': xReplitToken\r\n      }\r\n    }\r\n  ).then(res => res.json()).then(data => data.items?.[0]);\r\n\r\n  const accessToken = connectionSettings?.settings?.access_token || connectionSettings.settings?.oauth?.credentials?.access_token;\r\n\r\n  if (!connectionSettings || !accessToken) {\r\n    throw new Error('YouTube not connected');\r\n  }\r\n  return accessToken;\r\n}\r\n\r\nexport async function getUncachableYouTubeClient() {\r\n  // Check if we have a standard YouTube API key (for non-Replit deployments)\r\n  if (process.env.YOUTUBE_API_KEY) {\r\n    return google.youtube({ \r\n      version: 'v3', \r\n      auth: process.env.YOUTUBE_API_KEY \r\n    });\r\n  }\r\n  \r\n  // Fall back to Replit OAuth flow\r\n  const accessToken = await getAccessToken();\r\n  \r\n  const oauth2Client = new google.auth.OAuth2();\r\n  oauth2Client.setCredentials({\r\n    access_token: accessToken,\r\n  });\r\n  \r\n  return google.youtube({ version: 'v3', auth: oauth2Client });\r\n}\r\n\r\nexport interface VideoItem {\r\n  id: string;\r\n  title: string;\r\n  thumbnail: string;\r\n  duration: string;\r\n  publishedAt: string;\r\n  viewCount?: string;\r\n  description?: string;\r\n  durationSeconds?: number;\r\n}\r\n\r\ninterface ChannelCacheEntry {\r\n  videos: VideoItem[];\r\n  timestamp: number;\r\n}\r\n\r\ninterface CachedChannelData {\r\n  [channelId: string]: ChannelCacheEntry;\r\n}\r\n\r\ninterface PlaylistCacheEntry {\r\n  videos: VideoItem[];\r\n  timestamp: number;\r\n}\r\n\r\ninterface CachedPlaylistData {\r\n  [playlistId: string]: PlaylistCacheEntry;\r\n}\r\n\r\nfunction isCacheValid(cacheEntry: PlaylistCacheEntry): boolean {\r\n  const now = Date.now();\r\n  const age = now - cacheEntry.timestamp;\r\n  return age < CACHE_DURATION;\r\n}\r\n\r\nfunction readCache(playlistId: string): VideoItem[] | null {\r\n  try {\r\n    if (!fs.existsSync(CACHE_FILE)) {\r\n      return null;\r\n    }\r\n\r\n    const cacheContent = fs.readFileSync(CACHE_FILE, 'utf-8');\r\n    const cachedData: CachedPlaylistData = JSON.parse(cacheContent);\r\n\r\n    const cacheEntry = cachedData[playlistId];\r\n    if (!cacheEntry) {\r\n      return null;\r\n    }\r\n\r\n    if (isCacheValid(cacheEntry)) {\r\n      const ageHours = Math.floor((Date.now() - cacheEntry.timestamp) / (1000 * 60 * 60));\r\n      console.log(`Using cached YouTube data for playlist ${playlistId} (age: ${ageHours}h)`);\r\n      return cacheEntry.videos;\r\n    }\r\n\r\n    console.log(`Cache expired for playlist ${playlistId}, fetching fresh data`);\r\n    return null;\r\n  } catch (error) {\r\n    console.error('Error reading cache:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction writeCache(playlistId: string, videos: VideoItem[]): void {\r\n  try {\r\n    if (!fs.existsSync(CACHE_DIR)) {\r\n      fs.mkdirSync(CACHE_DIR, { recursive: true });\r\n    }\r\n\r\n    // Read existing cache to preserve other playlists\r\n    let cachedData: CachedPlaylistData = {};\r\n    if (fs.existsSync(CACHE_FILE)) {\r\n      try {\r\n        const existing = fs.readFileSync(CACHE_FILE, 'utf-8');\r\n        cachedData = JSON.parse(existing);\r\n      } catch (error) {\r\n        console.warn('Could not read existing cache, starting fresh:', error);\r\n      }\r\n    }\r\n\r\n    // Update or add this playlist's data\r\n    cachedData[playlistId] = {\r\n      videos,\r\n      timestamp: Date.now(),\r\n    };\r\n\r\n    fs.writeFileSync(CACHE_FILE, JSON.stringify(cachedData, null, 2), 'utf-8');\r\n    console.log(`YouTube data cached successfully for playlist ${playlistId}`);\r\n  } catch (error) {\r\n    console.error('Error writing cache:', error);\r\n  }\r\n}\r\n\r\nasync function getPlaylistVideosDirectAPI(playlistId: string, _maxResults: number): Promise<VideoItem[]> {\r\n  const apiKey = process.env.YOUTUBE_API_KEY;\r\n  const allVideoIds: string[] = [];\r\n  let nextPageToken: string | undefined = undefined;\r\n  \r\n  // Fetch all pages of playlist items\r\n  do {\r\n    const url = new URL('https://www.googleapis.com/youtube/v3/playlistItems');\r\n    url.searchParams.set('part', 'snippet,contentDetails');\r\n    url.searchParams.set('playlistId', playlistId);\r\n    url.searchParams.set('maxResults', '50');\r\n    url.searchParams.set('key', apiKey!);\r\n    if (nextPageToken) {\r\n      url.searchParams.set('pageToken', nextPageToken);\r\n    }\r\n    \r\n    const response = await fetch(url.toString());\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(`YouTube API error: ${JSON.stringify(error)}`);\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    if (!data.items || data.items.length === 0) {\r\n      break;\r\n    }\r\n\r\n    const videoIds = data.items\r\n      .map((item: any) => item.contentDetails?.videoId)\r\n      .filter(Boolean) as string[];\r\n    \r\n    allVideoIds.push(...videoIds);\r\n    nextPageToken = data.nextPageToken;\r\n    \r\n  } while (nextPageToken);\r\n\r\n  if (allVideoIds.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  // Fetch video details in batches of 50 (API limit)\r\n  const allVideos: VideoItem[] = [];\r\n  for (let i = 0; i < allVideoIds.length; i += 50) {\r\n    const batchIds = allVideoIds.slice(i, i + 50);\r\n    \r\n    const url = new URL('https://www.googleapis.com/youtube/v3/videos');\r\n    url.searchParams.set('part', 'snippet,contentDetails,statistics');\r\n    url.searchParams.set('id', batchIds.join(','));\r\n    url.searchParams.set('key', apiKey!);\r\n    \r\n    const response = await fetch(url.toString());\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(`YouTube API error: ${JSON.stringify(error)}`);\r\n    }\r\n    \r\n    const data = await response.json();\r\n\r\n    const videos: VideoItem[] = (data.items || []).map((video: any) => {\r\n      const snippet = video.snippet;\r\n      const statistics = video.statistics;\r\n      const contentDetails = video.contentDetails;\r\n      \r\n      const viewCount = statistics?.viewCount \r\n        ? formatViewCount(parseInt(statistics.viewCount))\r\n        : undefined;\r\n\r\n      const isoDuration = contentDetails?.duration || 'PT0S';\r\n      const duration = formatDuration(isoDuration);\r\n      const durationSeconds = getDurationInSeconds(isoDuration);\r\n\r\n      return {\r\n        id: video.id || '',\r\n        title: snippet?.title || 'Untitled',\r\n        thumbnail: snippet?.thumbnails?.high?.url || snippet?.thumbnails?.default?.url || '',\r\n        duration: duration,\r\n        publishedAt: snippet?.publishedAt || '',\r\n        viewCount: viewCount,\r\n        description: snippet?.description || undefined,\r\n        durationSeconds: durationSeconds,\r\n      };\r\n    });\r\n    \r\n    allVideos.push(...videos);\r\n  }\r\n\r\n  // Sort by publishedAt date (most recent first)\r\n  allVideos.sort((a, b) => {\r\n    const dateA = new Date(a.publishedAt).getTime();\r\n    const dateB = new Date(b.publishedAt).getTime();\r\n    return dateB - dateA;\r\n  });\r\n\r\n  // Cache the fetched data\r\n  writeCache(playlistId, allVideos);\r\n\r\n  return allVideos;\r\n}\r\n\r\n\r\nexport async function getPlaylistVideos(playlistId: string, maxResults: number = 1000): Promise<VideoItem[]> {\r\n  // Check cache first\r\n  const cachedVideos = readCache(playlistId);\r\n  if (cachedVideos !== null) {\r\n    return cachedVideos;\r\n  }\r\n\r\n  // Cache miss or expired, fetch from API\r\n  try {\r\n    // Use direct fetch API for API key to avoid referrer issues\r\n    if (process.env.YOUTUBE_API_KEY) {\r\n      try {\r\n        return await getPlaylistVideosDirectAPI(playlistId, maxResults);\r\n      } catch (apiError: any) {\r\n        const errorMsg = apiError.message?.toLowerCase() || '';\r\n        // If API key has referrer restrictions, fall through to try OAuth only if Replit env is available\r\n        if (errorMsg.includes('referer') || errorMsg.includes('api_key_http_referrer_blocked') || errorMsg.includes('blocked')) {\r\n          console.log('YouTube API key has referrer restrictions, attempting OAuth fallback...');\r\n          \r\n          // Check if OAuth is available before attempting it\r\n          const hasOAuthSupport = process.env.REPLIT_CONNECTORS_HOSTNAME && \r\n            (process.env.REPL_IDENTITY || process.env.WEB_REPL_RENEWAL);\r\n          \r\n          if (!hasOAuthSupport) {\r\n            console.log('  OAuth fallback not available. YouTube API key has referrer restrictions and OAuth is not configured.');\r\n            console.log('   To fix: Remove referrer restrictions from your YouTube API key in Google Cloud Console.');\r\n            return [];\r\n          }\r\n        } else {\r\n          throw apiError;\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Check if OAuth is available before attempting\r\n    const hasOAuthSupport = process.env.REPLIT_CONNECTORS_HOSTNAME && \r\n      (process.env.REPL_IDENTITY || process.env.WEB_REPL_RENEWAL);\r\n    \r\n    if (!hasOAuthSupport && !process.env.YOUTUBE_API_KEY) {\r\n      console.log('  No YouTube authentication available. Please configure YOUTUBE_API_KEY or connect YouTube via Replit.');\r\n      return [];\r\n    }\r\n    \r\n    const youtube = await getUncachableYouTubeClient();\r\n    \r\n    const allVideoIds: string[] = [];\r\n    let nextPageToken: string | undefined = undefined;\r\n    \r\n    // Fetch all pages of playlist items\r\n    do {\r\n      const response = await youtube.playlistItems.list({\r\n        part: ['snippet', 'contentDetails'],\r\n        playlistId: playlistId,\r\n        maxResults: 50, // YouTube API max per page\r\n        pageToken: nextPageToken,\r\n      });\r\n\r\n      if (!response.data.items || response.data.items.length === 0) {\r\n        break;\r\n      }\r\n\r\n      const videoIds = response.data.items\r\n        .map((item: any) => item.contentDetails?.videoId)\r\n        .filter(Boolean) as string[];\r\n      \r\n      allVideoIds.push(...videoIds);\r\n      nextPageToken = response.data.nextPageToken as string | undefined;\r\n      \r\n    } while (nextPageToken);\r\n\r\n    if (allVideoIds.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    // Fetch video details in batches of 50 (API limit)\r\n    const allVideos: VideoItem[] = [];\r\n    for (let i = 0; i < allVideoIds.length; i += 50) {\r\n      const batchIds = allVideoIds.slice(i, i + 50);\r\n      \r\n      const videosResponse = await youtube.videos.list({\r\n        part: ['snippet', 'contentDetails', 'statistics'],\r\n        id: batchIds,\r\n      });\r\n\r\n      const videos: VideoItem[] = (videosResponse.data.items || []).map((video) => {\r\n        const snippet = video.snippet;\r\n        const statistics = video.statistics;\r\n        const contentDetails = video.contentDetails;\r\n        \r\n        const viewCount = statistics?.viewCount \r\n          ? formatViewCount(parseInt(statistics.viewCount))\r\n          : undefined;\r\n\r\n        const isoDuration = contentDetails?.duration || 'PT0S';\r\n        const duration = formatDuration(isoDuration);\r\n        const durationSeconds = getDurationInSeconds(isoDuration);\r\n\r\n        return {\r\n          id: video.id || '',\r\n          title: snippet?.title || 'Untitled',\r\n          thumbnail: snippet?.thumbnails?.high?.url || snippet?.thumbnails?.default?.url || '',\r\n          duration: duration,\r\n          publishedAt: snippet?.publishedAt || '',\r\n          viewCount: viewCount,\r\n          description: snippet?.description || undefined,\r\n          durationSeconds: durationSeconds,\r\n        };\r\n      });\r\n      \r\n      allVideos.push(...videos);\r\n    }\r\n\r\n    // Sort by publishedAt date (most recent first)\r\n    allVideos.sort((a, b) => {\r\n      const dateA = new Date(a.publishedAt).getTime();\r\n      const dateB = new Date(b.publishedAt).getTime();\r\n      return dateB - dateA;\r\n    });\r\n\r\n    // Cache the fetched data\r\n    writeCache(playlistId, allVideos);\r\n\r\n    return allVideos;\r\n  } catch (error) {\r\n    console.error('Error fetching YouTube playlist:', error);\r\n    \r\n    // If API fails, try to return stale cache as fallback\r\n    try {\r\n      if (fs.existsSync(CACHE_FILE)) {\r\n        const cacheContent = fs.readFileSync(CACHE_FILE, 'utf-8');\r\n        const cachedData: CachedPlaylistData = JSON.parse(cacheContent);\r\n        const cacheEntry = cachedData[playlistId];\r\n        if (cacheEntry) {\r\n          console.log('API failed, serving stale cache as fallback');\r\n          return cacheEntry.videos;\r\n        }\r\n      }\r\n    } catch (cacheError) {\r\n      console.error('Failed to read stale cache:', cacheError);\r\n    }\r\n    \r\n    // Return empty array instead of throwing to prevent page crashes\r\n    console.log('  YouTube API unavailable, returning empty video list');\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch all videos from a YouTube channel (sorted by newest first)\r\n * Uses YouTube Search API to get all videos from a channel\r\n * \r\n * @param channelId - YouTube channel ID (starts with UC)\r\n * @param maxResults - Maximum number of videos to fetch\r\n * @returns Array of video items sorted by publish date (newest first)\r\n */\r\nexport async function getChannelVideos(channelId: string, maxResults: number = 50): Promise<VideoItem[]> {\r\n  // Check cache first (use channelId as cache key)\r\n  const cachedVideos = readCache(channelId);\r\n  if (cachedVideos !== null) {\r\n    return cachedVideos;\r\n  }\r\n\r\n  // Cache miss or expired, fetch from API\r\n  try {\r\n    const apiKey = process.env.YOUTUBE_API_KEY;\r\n    \r\n    if (!apiKey) {\r\n      console.log('  No YouTube API key available. Please configure YOUTUBE_API_KEY.');\r\n      return [];\r\n    }\r\n\r\n    let allVideoIds: string[] = [];\r\n    let nextPageToken: string | undefined = undefined;\r\n    \r\n    // Fetch all pages of channel videos using search API\r\n    do {\r\n      const url = new URL('https://www.googleapis.com/youtube/v3/search');\r\n      url.searchParams.set('part', 'id');\r\n      url.searchParams.set('channelId', channelId);\r\n      url.searchParams.set('order', 'date'); // Sort by newest first\r\n      url.searchParams.set('type', 'video'); // Only videos, not playlists or channels\r\n      url.searchParams.set('maxResults', '50'); // API max per page\r\n      url.searchParams.set('key', apiKey);\r\n      if (nextPageToken) {\r\n        url.searchParams.set('pageToken', nextPageToken);\r\n      }\r\n      \r\n      const response = await fetch(url.toString());\r\n      \r\n      if (!response.ok) {\r\n        const error = await response.json();\r\n        throw new Error(`YouTube API error: ${JSON.stringify(error)}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (!data.items || data.items.length === 0) {\r\n        break;\r\n      }\r\n\r\n      const videoIds = data.items\r\n        .map((item: any) => item.id?.videoId)\r\n        .filter(Boolean) as string[];\r\n      \r\n      allVideoIds.push(...videoIds);\r\n      nextPageToken = data.nextPageToken;\r\n      \r\n      // Limit to maxResults\r\n      if (allVideoIds.length >= maxResults) {\r\n        allVideoIds = allVideoIds.slice(0, maxResults);\r\n        break;\r\n      }\r\n      \r\n    } while (nextPageToken);\r\n\r\n    if (allVideoIds.length === 0) {\r\n      console.log(`No videos found for channel ${channelId}`);\r\n      return [];\r\n    }\r\n\r\n    console.log(`Found ${allVideoIds.length} videos for channel ${channelId}`);\r\n\r\n    // Fetch video details in batches of 50 (API limit)\r\n    const allVideos: VideoItem[] = [];\r\n    for (let i = 0; i < allVideoIds.length; i += 50) {\r\n      const batchIds = allVideoIds.slice(i, i + 50);\r\n      \r\n      const url = new URL('https://www.googleapis.com/youtube/v3/videos');\r\n      url.searchParams.set('part', 'snippet,contentDetails,statistics');\r\n      url.searchParams.set('id', batchIds.join(','));\r\n      url.searchParams.set('key', apiKey);\r\n      \r\n      const response = await fetch(url.toString());\r\n      \r\n      if (!response.ok) {\r\n        const error = await response.json();\r\n        throw new Error(`YouTube API error: ${JSON.stringify(error)}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n\r\n      const videos: VideoItem[] = (data.items || []).map((video: any) => {\r\n        const snippet = video.snippet;\r\n        const statistics = video.statistics;\r\n        const contentDetails = video.contentDetails;\r\n        \r\n        const viewCount = statistics?.viewCount \r\n          ? formatViewCount(parseInt(statistics.viewCount))\r\n          : undefined;\r\n\r\n        const isoDuration = contentDetails?.duration || 'PT0S';\r\n        const duration = formatDuration(isoDuration);\r\n        const durationSeconds = getDurationInSeconds(isoDuration);\r\n\r\n        return {\r\n          id: video.id || '',\r\n          title: snippet?.title || 'Untitled',\r\n          thumbnail: snippet?.thumbnails?.high?.url || snippet?.thumbnails?.default?.url || '',\r\n          duration: duration,\r\n          publishedAt: snippet?.publishedAt || '',\r\n          viewCount: viewCount,\r\n          description: snippet?.description || undefined,\r\n          durationSeconds: durationSeconds,\r\n        };\r\n      });\r\n      \r\n      allVideos.push(...videos);\r\n    }\r\n\r\n    // Already sorted by date from search API, but ensure consistency\r\n    allVideos.sort((a, b) => {\r\n      const dateA = new Date(a.publishedAt).getTime();\r\n      const dateB = new Date(b.publishedAt).getTime();\r\n      return dateB - dateA; // Newest first\r\n    });\r\n\r\n    // Cache the fetched data\r\n    writeCache(channelId, allVideos);\r\n\r\n    console.log(`Cached ${allVideos.length} videos for channel ${channelId}`);\r\n    return allVideos;\r\n\r\n  } catch (error) {\r\n    console.error('Error fetching channel videos:', error);\r\n    \r\n    // Try to return stale cache if available\r\n    try {\r\n      if (fs.existsSync(CACHE_FILE)) {\r\n        const cacheContent = fs.readFileSync(CACHE_FILE, 'utf-8');\r\n        const cachedData: CachedChannelData = JSON.parse(cacheContent);\r\n        const cacheEntry = cachedData[channelId];\r\n        if (cacheEntry && cacheEntry.videos) {\r\n          console.log(`  Returning stale cache for channel ${channelId} due to API error`);\r\n          return cacheEntry.videos;\r\n        }\r\n      }\r\n    } catch (_cacheError) {\r\n      // Ignore cache read errors\r\n    }\r\n    \r\n    console.log('  YouTube API unavailable, returning empty video list');\r\n    return [];\r\n  }\r\n}\r\n\r\nfunction formatViewCount(count: number): string {\r\n  if (count >= 1000000) {\r\n    return `${(count / 1000000).toFixed(1)  }M`;\r\n  } else if (count >= 1000) {\r\n    return `${(count / 1000).toFixed(1)  }K`;\r\n  }\r\n  return count.toString();\r\n}\r\n\r\nfunction formatDuration(isoDuration: string): string {\r\n  const match = isoDuration.match(/PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/);\r\n  if (!match) {return '0:00';}\r\n\r\n  const hours = parseInt(match[1] || '0');\r\n  const minutes = parseInt(match[2] || '0');\r\n  const seconds = parseInt(match[3] || '0');\r\n\r\n  if (hours > 0) {\r\n    return `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\r\n  }\r\n  return `${minutes}:${seconds.toString().padStart(2, '0')}`;\r\n}\r\n\r\nfunction getDurationInSeconds(isoDuration: string): number {\r\n  const match = isoDuration.match(/PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/);\r\n  if (!match) {return 0;}\r\n\r\n  const hours = parseInt(match[1] || '0');\r\n  const minutes = parseInt(match[2] || '0');\r\n  const seconds = parseInt(match[3] || '0');\r\n\r\n  return hours * 3600 + minutes * 60 + seconds;\r\n}\r\n\r\n/**\r\n * Fetch YouTube Shorts from a channel (videos <= 60 seconds)\r\n * Uses the same caching mechanism as regular videos\r\n * \r\n * @param channelId - YouTube channel ID (starts with UC)\r\n * @param maxResults - Maximum number of shorts to fetch\r\n * @returns Array of short video items sorted by publish date (newest first)\r\n */\r\nexport async function getChannelShorts(channelId: string, maxResults: number = 50): Promise<VideoItem[]> {\r\n  // Fetch all videos from channel (they're cached)\r\n  const allVideos = await getChannelVideos(channelId, 200); // Fetch more to ensure we get enough shorts\r\n  \r\n  // Filter for shorts (duration <= 60 seconds)\r\n  const shorts = allVideos.filter(video => {\r\n    return video.durationSeconds !== undefined && video.durationSeconds > 0 && video.durationSeconds <= 60;\r\n  });\r\n  \r\n  return shorts.slice(0, maxResults);\r\n}\r\n\r\n/**\r\n * Channel statistics interface\r\n */\r\nexport interface ChannelStats {\r\n  subscriberCount: string;\r\n  videoCount: string;\r\n  viewCount: string;\r\n  estimatedWatchHours: string;\r\n}\r\n\r\ninterface ChannelStatsCacheEntry {\r\n  stats: ChannelStats;\r\n  timestamp: number;\r\n}\r\n\r\nconst CHANNEL_STATS_CACHE_FILE = path.join(CACHE_DIR, 'youtube-channel-stats.json');\r\n\r\n/**\r\n * Fetch channel statistics from YouTube API\r\n * Cached for 24 hours\r\n * \r\n * @param channelId - YouTube channel ID (starts with UC)\r\n * @returns Channel statistics including subscribers, videos, views, and estimated watch hours\r\n */\r\nexport async function getChannelStats(channelId: string): Promise<ChannelStats> {\r\n  try {\r\n    // Check cache first\r\n    if (fs.existsSync(CHANNEL_STATS_CACHE_FILE)) {\r\n      const cacheContent = fs.readFileSync(CHANNEL_STATS_CACHE_FILE, 'utf-8');\r\n      const cachedData: { [key: string]: ChannelStatsCacheEntry } = JSON.parse(cacheContent);\r\n      const cacheEntry = cachedData[channelId];\r\n      \r\n      if (cacheEntry && isCacheValid(cacheEntry)) {\r\n        const age = Math.floor((Date.now() - cacheEntry.timestamp) / 1000 / 60);\r\n        console.log(`Using cached channel stats for ${channelId} (age: ${age}m)`);\r\n        return cacheEntry.stats;\r\n      }\r\n    }\r\n\r\n    console.log(`Fetching fresh channel stats for ${channelId}...`);\r\n    \r\n    const youtube = await getUncachableYouTubeClient();\r\n    \r\n    const response = await youtube.channels.list({\r\n      part: ['statistics', 'contentDetails'],\r\n      id: [channelId],\r\n    });\r\n\r\n    if (!response.data.items || response.data.items.length === 0) {\r\n      throw new Error(`Channel ${channelId} not found`);\r\n    }\r\n\r\n    const channel = response.data.items[0];\r\n    const statistics = channel.statistics;\r\n\r\n    if (!statistics) {\r\n      throw new Error('Channel statistics not available');\r\n    }\r\n\r\n    // Format numbers with abbreviations\r\n    const subscriberCount = formatLargeNumber(parseInt(statistics.subscriberCount || '0'));\r\n    const videoCount = statistics.videoCount || '0';\r\n    const viewCount = statistics.viewCount || '0';\r\n    \r\n    // Estimate watch hours: Assume average video duration of 2 hours\r\n    // Watch hours  (Total Views  Average Duration) / 60\r\n    // This is a rough estimate since we don't have actual watch time from API\r\n    const avgVideoDurationMinutes = 120; // 2 hours average\r\n    const estimatedWatchMinutes = parseInt(viewCount) * avgVideoDurationMinutes;\r\n    const estimatedWatchHours = Math.floor(estimatedWatchMinutes / 60);\r\n    \r\n    const stats: ChannelStats = {\r\n      subscriberCount,\r\n      videoCount,\r\n      viewCount: formatLargeNumber(parseInt(viewCount)),\r\n      estimatedWatchHours: formatLargeNumber(estimatedWatchHours),\r\n    };\r\n\r\n    // Update cache\r\n    let cachedData: { [key: string]: ChannelStatsCacheEntry } = {};\r\n    if (fs.existsSync(CHANNEL_STATS_CACHE_FILE)) {\r\n      const cacheContent = fs.readFileSync(CHANNEL_STATS_CACHE_FILE, 'utf-8');\r\n      cachedData = JSON.parse(cacheContent);\r\n    }\r\n\r\n    cachedData[channelId] = {\r\n      stats,\r\n      timestamp: Date.now(),\r\n    };\r\n\r\n    if (!fs.existsSync(CACHE_DIR)) {\r\n      fs.mkdirSync(CACHE_DIR, { recursive: true });\r\n    }\r\n    fs.writeFileSync(CHANNEL_STATS_CACHE_FILE, JSON.stringify(cachedData, null, 2));\r\n    \r\n    console.log(`Channel stats cached successfully for ${channelId}`);\r\n    \r\n    return stats;\r\n  } catch (error) {\r\n    console.error('Error fetching channel stats:', error);\r\n    \r\n    // Try to return stale cache on error\r\n    if (fs.existsSync(CHANNEL_STATS_CACHE_FILE)) {\r\n      const cacheContent = fs.readFileSync(CHANNEL_STATS_CACHE_FILE, 'utf-8');\r\n      const cachedData: { [key: string]: ChannelStatsCacheEntry } = JSON.parse(cacheContent);\r\n      const cacheEntry = cachedData[channelId];\r\n      \r\n      if (cacheEntry) {\r\n        console.log(`  Returning stale cache for channel stats ${channelId} due to API error`);\r\n        return cacheEntry.stats;\r\n      }\r\n    }\r\n    \r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Format large numbers with K/M abbreviations\r\n */\r\nfunction formatLargeNumber(num: number): string {\r\n  if (num >= 1000000) {\r\n    return `${(num / 1000000).toFixed(1)}M`;\r\n  }\r\n  if (num >= 1000) {\r\n    return `${(num / 1000).toFixed(1)}K`;\r\n  }\r\n  return num.toString();\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\shared\\schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\cache.test.ts","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":283,"column":15,"nodeType":"MemberExpression","endLine":283,"endColumn":25},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":283,"column":35,"nodeType":"MemberExpression","endLine":283,"endColumn":45},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":294,"column":9,"nodeType":"MemberExpression","endLine":294,"endColumn":19},{"ruleId":"security/detect-object-injection","severity":1,"message":"Generic Object Injection Sink","line":325,"column":9,"nodeType":"MemberExpression","endLine":325,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as fs from 'fs';\r\nimport * as path from 'path';\r\n\r\nimport { describe, it, expect, beforeEach, afterEach } from 'vitest';\r\n\r\ndescribe('Generic Cache Behavior', () => {\r\n  const testCacheDir = path.join(process.cwd(), 'server', 'cache', 'test');\r\n  const testCacheFile = path.join(testCacheDir, 'test-cache.json');\r\n\r\n  beforeEach(() => {\r\n    // Clean up test cache before each test\r\n    if (fs.existsSync(testCacheFile)) {\r\n      fs.unlinkSync(testCacheFile);\r\n    }\r\n    if (fs.existsSync(testCacheDir)) {\r\n      fs.rmdirSync(testCacheDir);\r\n    }\r\n  });\r\n\r\n  afterEach(() => {\r\n    // Clean up test cache after each test\r\n    if (fs.existsSync(testCacheFile)) {\r\n      fs.unlinkSync(testCacheFile);\r\n    }\r\n    if (fs.existsSync(testCacheDir)) {\r\n      fs.rmSync(testCacheDir, { recursive: true, force: true });\r\n    }\r\n  });\r\n\r\n  describe('Cache File Operations', () => {\r\n    it('should create cache directory if it does not exist', () => {\r\n      expect(fs.existsSync(testCacheDir)).toBe(false);\r\n\r\n      fs.mkdirSync(testCacheDir, { recursive: true });\r\n      \r\n      expect(fs.existsSync(testCacheDir)).toBe(true);\r\n    });\r\n\r\n    it('should write valid JSON to cache file', () => {\r\n      const testData = {\r\n        key1: { data: 'value1', timestamp: Date.now() },\r\n        key2: { data: 'value2', timestamp: Date.now() },\r\n      };\r\n\r\n      fs.mkdirSync(testCacheDir, { recursive: true });\r\n      fs.writeFileSync(testCacheFile, JSON.stringify(testData, null, 2));\r\n\r\n      expect(fs.existsSync(testCacheFile)).toBe(true);\r\n      \r\n      const cached = JSON.parse(fs.readFileSync(testCacheFile, 'utf-8'));\r\n      expect(cached).toEqual(testData);\r\n    });\r\n\r\n    it('should read existing cache file', () => {\r\n      const testData = { key: 'value', timestamp: Date.now() };\r\n\r\n      fs.mkdirSync(testCacheDir, { recursive: true });\r\n      fs.writeFileSync(testCacheFile, JSON.stringify(testData));\r\n\r\n      const cached = JSON.parse(fs.readFileSync(testCacheFile, 'utf-8'));\r\n      expect(cached).toEqual(testData);\r\n    });\r\n\r\n    it('should handle non-existent cache file gracefully', () => {\r\n      expect(fs.existsSync(testCacheFile)).toBe(false);\r\n    });\r\n\r\n    it('should overwrite existing cache file', () => {\r\n      fs.mkdirSync(testCacheDir, { recursive: true });\r\n      \r\n      const data1 = { key: 'value1' };\r\n      fs.writeFileSync(testCacheFile, JSON.stringify(data1));\r\n      \r\n      const data2 = { key: 'value2' };\r\n      fs.writeFileSync(testCacheFile, JSON.stringify(data2));\r\n\r\n      const cached = JSON.parse(fs.readFileSync(testCacheFile, 'utf-8'));\r\n      expect(cached.key).toBe('value2');\r\n    });\r\n\r\n    it('should merge cache entries instead of overwriting', () => {\r\n      fs.mkdirSync(testCacheDir, { recursive: true });\r\n      \r\n      // Initial cache\r\n      const cache = { key1: 'value1' };\r\n      fs.writeFileSync(testCacheFile, JSON.stringify(cache));\r\n\r\n      // Read, merge, write\r\n      const existing = JSON.parse(fs.readFileSync(testCacheFile, 'utf-8'));\r\n      const merged = { ...existing, key2: 'value2' };\r\n      fs.writeFileSync(testCacheFile, JSON.stringify(merged));\r\n\r\n      const final = JSON.parse(fs.readFileSync(testCacheFile, 'utf-8'));\r\n      expect(final).toEqual({ key1: 'value1', key2: 'value2' });\r\n    });\r\n  });\r\n\r\n  describe('Cache Expiration Logic', () => {\r\n    it('should correctly calculate cache age', () => {\r\n      const now = Date.now();\r\n      const oneHourAgo = now - (60 * 60 * 1000);\r\n      const oneDayAgo = now - (24 * 60 * 60 * 1000);\r\n\r\n      const age1 = now - oneHourAgo;\r\n      const age24 = now - oneDayAgo;\r\n\r\n      expect(age1).toBe(60 * 60 * 1000); // 1 hour in ms\r\n      expect(age24).toBe(24 * 60 * 60 * 1000); // 24 hours in ms\r\n    });\r\n\r\n    it('should validate fresh cache (within duration)', () => {\r\n      const CACHE_DURATION = 60 * 60 * 1000; // 1 hour\r\n      const now = Date.now();\r\n      const freshTimestamp = now - (30 * 60 * 1000); // 30 minutes ago\r\n\r\n      const age = now - freshTimestamp;\r\n      const isValid = age < CACHE_DURATION;\r\n\r\n      expect(isValid).toBe(true);\r\n    });\r\n\r\n    it('should invalidate expired cache (beyond duration)', () => {\r\n      const CACHE_DURATION = 60 * 60 * 1000; // 1 hour\r\n      const now = Date.now();\r\n      const expiredTimestamp = now - (90 * 60 * 1000); // 90 minutes ago\r\n\r\n      const age = now - expiredTimestamp;\r\n      const isValid = age < CACHE_DURATION;\r\n\r\n      expect(isValid).toBe(false);\r\n    });\r\n\r\n    it('should handle boundary condition (exactly at duration)', () => {\r\n      const CACHE_DURATION = 60 * 60 * 1000; // 1 hour\r\n      const now = Date.now();\r\n      const boundaryTimestamp = now - CACHE_DURATION; // Exactly 1 hour ago\r\n\r\n      const age = now - boundaryTimestamp;\r\n      const isValid = age < CACHE_DURATION;\r\n\r\n      expect(isValid).toBe(false); // Should be invalid (>= duration)\r\n    });\r\n\r\n    it('should calculate age in different units', () => {\r\n      const now = Date.now();\r\n      const timestamp = now - (3665 * 1000); // 1 hour, 1 minute, 5 seconds ago\r\n\r\n      const ageMs = now - timestamp;\r\n      const ageSeconds = Math.floor(ageMs / 1000);\r\n      const ageMinutes = Math.floor(ageMs / (60 * 1000));\r\n      const ageHours = Math.floor(ageMs / (60 * 60 * 1000));\r\n\r\n      expect(ageSeconds).toBe(3665);\r\n      expect(ageMinutes).toBe(61);\r\n      expect(ageHours).toBe(1);\r\n    });\r\n  });\r\n\r\n  describe('Cache Data Integrity', () => {\r\n    it('should preserve data types when caching', () => {\r\n      const testData = {\r\n        string: 'text',\r\n        number: 42,\r\n        boolean: true,\r\n        array: [1, 2, 3],\r\n        object: { nested: 'value' },\r\n        null: null,\r\n      };\r\n\r\n      fs.mkdirSync(testCacheDir, { recursive: true });\r\n      fs.writeFileSync(testCacheFile, JSON.stringify(testData));\r\n\r\n      const cached = JSON.parse(fs.readFileSync(testCacheFile, 'utf-8'));\r\n      \r\n      expect(typeof cached.string).toBe('string');\r\n      expect(typeof cached.number).toBe('number');\r\n      expect(typeof cached.boolean).toBe('boolean');\r\n      expect(Array.isArray(cached.array)).toBe(true);\r\n      expect(typeof cached.object).toBe('object');\r\n      expect(cached.null).toBe(null);\r\n    });\r\n\r\n    it('should handle special characters in cached strings', () => {\r\n      const testData = {\r\n        special: 'Hello \"World\" with \\'quotes\\' and \\n newlines',\r\n        unicode: ' Unicode emoji support',\r\n        html: '<div>HTML &amp; entities</div>',\r\n      };\r\n\r\n      fs.mkdirSync(testCacheDir, { recursive: true });\r\n      fs.writeFileSync(testCacheFile, JSON.stringify(testData));\r\n\r\n      const cached = JSON.parse(fs.readFileSync(testCacheFile, 'utf-8'));\r\n      expect(cached).toEqual(testData);\r\n    });\r\n\r\n    it('should handle large cache entries', () => {\r\n      const largeArray = Array.from({ length: 1000 }, (_, i) => ({\r\n        id: i,\r\n        data: `Item ${i}`,\r\n        timestamp: Date.now(),\r\n      }));\r\n\r\n      fs.mkdirSync(testCacheDir, { recursive: true });\r\n      fs.writeFileSync(testCacheFile, JSON.stringify(largeArray));\r\n\r\n      const cached = JSON.parse(fs.readFileSync(testCacheFile, 'utf-8'));\r\n      expect(cached).toHaveLength(1000);\r\n      expect(cached[500].id).toBe(500);\r\n    });\r\n  });\r\n\r\n  describe('Error Handling', () => {\r\n    it('should handle corrupted JSON gracefully', () => {\r\n      fs.mkdirSync(testCacheDir, { recursive: true });\r\n      fs.writeFileSync(testCacheFile, 'corrupted {{{ json');\r\n\r\n      expect(() => {\r\n        JSON.parse(fs.readFileSync(testCacheFile, 'utf-8'));\r\n      }).toThrow();\r\n    });\r\n\r\n    it('should handle empty cache file', () => {\r\n      fs.mkdirSync(testCacheDir, { recursive: true });\r\n      fs.writeFileSync(testCacheFile, '');\r\n\r\n      expect(() => {\r\n        JSON.parse(fs.readFileSync(testCacheFile, 'utf-8'));\r\n      }).toThrow();\r\n    });\r\n\r\n    it('should handle invalid UTF-8 encoding', () => {\r\n      fs.mkdirSync(testCacheDir, { recursive: true });\r\n      // Write invalid UTF-8 bytes\r\n      fs.writeFileSync(testCacheFile, Buffer.from([0xFF, 0xFE, 0xFD]));\r\n\r\n      // This might throw or return garbled text depending on Node.js behavior\r\n      try {\r\n        const content = fs.readFileSync(testCacheFile, 'utf-8');\r\n        expect(() => JSON.parse(content)).toThrow();\r\n      } catch (error) {\r\n        // Expected to fail\r\n        expect(error).toBeDefined();\r\n      }\r\n    });\r\n  });\r\n\r\n  describe('Concurrency Considerations', () => {\r\n    it('should handle multiple sequential writes', () => {\r\n      fs.mkdirSync(testCacheDir, { recursive: true });\r\n\r\n      // Simulate multiple cache updates\r\n      for (let i = 0; i < 10; i++) {\r\n        const data = { iteration: i, timestamp: Date.now() };\r\n        fs.writeFileSync(testCacheFile, JSON.stringify(data));\r\n      }\r\n\r\n      const final = JSON.parse(fs.readFileSync(testCacheFile, 'utf-8'));\r\n      expect(final.iteration).toBe(9); // Last write wins\r\n    });\r\n\r\n    it('should read the most recent write', () => {\r\n      fs.mkdirSync(testCacheDir, { recursive: true });\r\n\r\n      const data1 = { version: 1 };\r\n      fs.writeFileSync(testCacheFile, JSON.stringify(data1));\r\n\r\n      // Small delay to ensure timestamp difference\r\n      const data2 = { version: 2 };\r\n      fs.writeFileSync(testCacheFile, JSON.stringify(data2));\r\n\r\n      const cached = JSON.parse(fs.readFileSync(testCacheFile, 'utf-8'));\r\n      expect(cached.version).toBe(2);\r\n    });\r\n  });\r\n\r\n  describe('Cache Strategies', () => {\r\n    it('should implement read-through caching pattern', () => {\r\n      // Simulate read-through: check cache, fetch if missing, store in cache\r\n      const getCachedData = (key: string) => {\r\n        if (fs.existsSync(testCacheFile)) {\r\n          const cache = JSON.parse(fs.readFileSync(testCacheFile, 'utf-8'));\r\n          if (cache[key]) {return cache[key];}\r\n        }\r\n        \r\n        // Simulate fetch from source\r\n        const freshData = { value: `fresh-${key}`, timestamp: Date.now() };\r\n        \r\n        // Store in cache\r\n        const cache = fs.existsSync(testCacheFile) \r\n          ? JSON.parse(fs.readFileSync(testCacheFile, 'utf-8'))\r\n          : {};\r\n        \r\n        cache[key] = freshData;\r\n        \r\n        if (!fs.existsSync(testCacheDir)) {\r\n          fs.mkdirSync(testCacheDir, { recursive: true });\r\n        }\r\n        fs.writeFileSync(testCacheFile, JSON.stringify(cache));\r\n        \r\n        return freshData;\r\n      };\r\n\r\n      // First call - cache miss\r\n      const data1 = getCachedData('test');\r\n      expect(data1.value).toBe('fresh-test');\r\n\r\n      // Second call - cache hit\r\n      const data2 = getCachedData('test');\r\n      expect(data2.value).toBe('fresh-test');\r\n      expect(data2.timestamp).toBe(data1.timestamp);\r\n    });\r\n\r\n    it('should implement write-through caching pattern', () => {\r\n      // Write-through: update source and cache simultaneously\r\n      const updateData = (key: string, value: any) => {\r\n        // Simulate updating source\r\n        const data = { value, timestamp: Date.now() };\r\n        \r\n        // Update cache\r\n        const cache = fs.existsSync(testCacheFile) \r\n          ? JSON.parse(fs.readFileSync(testCacheFile, 'utf-8'))\r\n          : {};\r\n        \r\n        cache[key] = data;\r\n        \r\n        if (!fs.existsSync(testCacheDir)) {\r\n          fs.mkdirSync(testCacheDir, { recursive: true });\r\n        }\r\n        fs.writeFileSync(testCacheFile, JSON.stringify(cache));\r\n        \r\n        return data;\r\n      };\r\n\r\n      updateData('key1', 'value1');\r\n      updateData('key2', 'value2');\r\n\r\n      const cache = JSON.parse(fs.readFileSync(testCacheFile, 'utf-8'));\r\n      expect(cache.key1.value).toBe('value1');\r\n      expect(cache.key2.value).toBe('value2');\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\chaos\\fault-injection.test.ts","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'no-undef').","line":3,"column":1,"severity":1,"nodeType":null,"fix":{"range":[93,122],"text":" "}}],"suppressedMessages":[{"ruleId":"require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":45,"column":58,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":45,"endColumn":60,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1716,1722],"text":""},"desc":"Remove 'async'."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":70,"column":59,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":70,"endColumn":61,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2504,2510],"text":""},"desc":"Remove 'async'."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":130,"column":62,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":130,"endColumn":64,"suggestions":[{"messageId":"removeAsync","fix":{"range":[4604,4610],"text":""},"desc":"Remove 'async'."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":142,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":142,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":142,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":142,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":200,"column":61,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":200,"endColumn":63,"suggestions":[{"messageId":"removeAsync","fix":{"range":[6791,6797],"text":""},"desc":"Remove 'async'."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":270,"column":63,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":270,"endColumn":65,"suggestions":[{"messageId":"removeAsync","fix":{"range":[8832,8838],"text":""},"desc":"Remove 'async'."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":301,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":301,"endColumn":11,"suggestions":[{"messageId":"removeAsync","fix":{"range":[9669,9675],"text":""},"desc":"Remove 'async'."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":333,"column":63,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":333,"endColumn":65,"suggestions":[{"messageId":"removeAsync","fix":{"range":[10713,10719],"text":""},"desc":"Remove 'async'."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":334,"column":25,"nodeType":"MemberExpression","endLine":334,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'youtubeError' is defined but never used.","line":344,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":344,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'youtubeError' is defined but never used.","line":344,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":344,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-unused-vars","severity":2,"message":"'cacheError' is defined but never used.","line":347,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":347,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'cacheError' is defined but never used.","line":347,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":347,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-return-await","severity":2,"message":"Redundant use of `await` on a return value.","line":348,"column":20,"nodeType":"Identifier","messageId":"redundantUseOfAwait","endLine":348,"endColumn":49,"suggestions":[{"messageId":"removeAwait","fix":{"range":[11237,11243],"text":""},"desc":"Remove redundant `await`."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"security/detect-object-injection","severity":1,"message":"Variable Assigned to Object Injection Sink","line":373,"column":19,"nodeType":"MemberExpression","endLine":373,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"/* eslint-disable @typescript-eslint/no-unused-vars */\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable no-undef */\r\n/* eslint-disable require-await */\r\n/* eslint-disable no-return-await */\r\n/* eslint-disable security/detect-object-injection */\r\nimport axios from 'axios';\r\nimport { describe, it, expect, vi, beforeEach, afterEach } from 'vitest';\r\n\r\ndescribe('Fault Injection Tests', () => {\r\n  describe('Network Failures', () => {\r\n    it('should handle DNS resolution failures', async () => {\r\n      try {\r\n        await axios.get('https://this-domain-definitely-does-not-exist-12345.com', {\r\n          timeout: 2000\r\n        });\r\n        expect.fail('Should have thrown network error');\r\n      } catch (error: any) {\r\n        expect(['ENOTFOUND', 'EAI_AGAIN', 'ECONNREFUSED', 'ERR_NETWORK']).toContain(error.code);\r\n      }\r\n    });\r\n\r\n    it('should handle slow network responses', async () => {\r\n      const startTime = Date.now();\r\n      \r\n      try {\r\n        await axios.get('https://httpstat.us/200?sleep=3000', {\r\n          timeout: 1000\r\n        });\r\n        expect.fail('Should have timed out');\r\n      } catch (error: any) {\r\n        const duration = Date.now() - startTime;\r\n        // Duration should be close to timeout value, but can be faster in CI\r\n        // Allow for fast failures (network unavailable) or proper timeouts\r\n        expect(duration).toBeGreaterThanOrEqual(0);\r\n        expect(duration).toBeLessThan(5000);\r\n        expect(error.code).toMatch(/ECONNABORTED|ETIMEDOUT|ECONNRESET|ERR_NETWORK/);\r\n      }\r\n    });\r\n\r\n    it('should handle intermittent connection drops', async () => {\r\n      let successCount = 0;\r\n      let failureCount = 0;\r\n\r\n      const attemptRequest = async (shouldFail: boolean) => {\r\n        if (shouldFail) {\r\n          failureCount++;\r\n          throw new Error('Connection reset by peer');\r\n        }\r\n        successCount++;\r\n        return { success: true };\r\n      };\r\n\r\n      const results = await Promise.allSettled([\r\n        attemptRequest(false),\r\n        attemptRequest(true),\r\n        attemptRequest(false),\r\n        attemptRequest(true),\r\n        attemptRequest(false)\r\n      ]);\r\n\r\n      expect(successCount).toBe(3);\r\n      expect(failureCount).toBe(2);\r\n      expect(results.filter(r => r.status === 'fulfilled').length).toBe(3);\r\n      expect(results.filter(r => r.status === 'rejected').length).toBe(2);\r\n    });\r\n  });\r\n\r\n  describe('API Response Corruption', () => {\r\n    it('should handle malformed JSON responses', async () => {\r\n      const malformedResponses = [\r\n        '{\"incomplete\":',\r\n        '{broken json}',\r\n        '{\"valid\": true} extra text',\r\n        'null',\r\n        ''\r\n      ];\r\n\r\n      malformedResponses.forEach(response => {\r\n        try {\r\n          JSON.parse(response);\r\n        } catch (error) {\r\n          expect(error).toBeInstanceOf(SyntaxError);\r\n        }\r\n      });\r\n    });\r\n\r\n    it('should handle unexpected response structures', () => {\r\n      const responses = [\r\n        { items: [], pageInfo: { totalResults: 10 } }, // Valid\r\n        { items: 'not-an-array', pageInfo: {} },       // Invalid items\r\n        { items: [], pageInfo: null },                 // Invalid pageInfo\r\n        { wrongKey: [] }                               // Missing keys\r\n      ];\r\n\r\n      const validateResponse = (response: any) => {\r\n        if (!response || !response.items || !Array.isArray(response.items)) {\r\n          return false;\r\n        }\r\n        if (!response.pageInfo || typeof response.pageInfo.totalResults !== 'number') {\r\n          return false;\r\n        }\r\n        return true;\r\n      };\r\n\r\n      expect(validateResponse(responses[0])).toBe(true);\r\n      expect(validateResponse(responses[1])).toBe(false);\r\n      expect(validateResponse(responses[2])).toBe(false);\r\n      expect(validateResponse(responses[3])).toBe(false);\r\n    });\r\n\r\n    it('should handle missing required fields', () => {\r\n      const validateVideo = (video: any) => {\r\n        const required = ['id', 'snippet'];\r\n        const missing = required.filter(field => !(field in video));\r\n        return missing.length === 0 ? null : missing;\r\n      };\r\n\r\n      expect(validateVideo({ id: '1', snippet: {} })).toBeNull();\r\n      expect(validateVideo({ id: '1' })).toEqual(['snippet']);\r\n      expect(validateVideo({ snippet: {} })).toEqual(['id']);\r\n      expect(validateVideo({})).toEqual(['id', 'snippet']);\r\n    });\r\n  });\r\n\r\n  describe('Database Failures', () => {\r\n    it('should handle transaction rollback on error', async () => {\r\n      const operations: string[] = [];\r\n\r\n      const executeTransaction = async (shouldFail: boolean) => {\r\n        operations.push('begin');\r\n        try {\r\n          operations.push('insert1');\r\n          operations.push('insert2');\r\n          \r\n          if (shouldFail) {\r\n            throw new Error('Constraint violation');\r\n          }\r\n          \r\n          operations.push('commit');\r\n          return true;\r\n        } catch (error) {\r\n          operations.push('rollback');\r\n          return false;\r\n        }\r\n      };\r\n\r\n      const result = await executeTransaction(true);\r\n      expect(result).toBe(false);\r\n      expect(operations).toEqual(['begin', 'insert1', 'insert2', 'rollback']);\r\n    });\r\n\r\n    it('should handle deadlock scenarios', async () => {\r\n      const locks = new Map<string, number>();\r\n\r\n      const acquireLock = (resource: string, holder: number): boolean => {\r\n        if (locks.has(resource) && locks.get(resource) !== holder) {\r\n          return false;\r\n        }\r\n        locks.set(resource, holder);\r\n        return true;\r\n      };\r\n\r\n      const releaseLock = (resource: string) => {\r\n        locks.delete(resource);\r\n      };\r\n\r\n      const transaction1 = async () => {\r\n        if (!acquireLock('resourceA', 1)) {return false;}\r\n        await new Promise(resolve => setTimeout(resolve, 10));\r\n        if (!acquireLock('resourceB', 1)) {\r\n          releaseLock('resourceA');\r\n          return false;\r\n        }\r\n        releaseLock('resourceA');\r\n        releaseLock('resourceB');\r\n        return true;\r\n      };\r\n\r\n      const transaction2 = async () => {\r\n        if (!acquireLock('resourceB', 2)) {return false;}\r\n        await new Promise(resolve => setTimeout(resolve, 10));\r\n        if (!acquireLock('resourceA', 2)) {\r\n          releaseLock('resourceB');\r\n          return false;\r\n        }\r\n        releaseLock('resourceA');\r\n        releaseLock('resourceB');\r\n        return true;\r\n      };\r\n\r\n      const results = await Promise.all([transaction1(), transaction2()]);\r\n      const successCount = results.filter(r => r === true).length;\r\n      \r\n      expect(successCount).toBeLessThanOrEqual(1);\r\n    });\r\n  });\r\n\r\n  describe('Resource Exhaustion', () => {\r\n    it('should handle file descriptor exhaustion', async () => {\r\n      const openHandles = new Set<number>();\r\n      const maxHandles = 10;\r\n      let nextHandle = 1;\r\n\r\n      const openFile = () => {\r\n        if (openHandles.size >= maxHandles) {\r\n          throw new Error('EMFILE: too many open files');\r\n        }\r\n        const handle = nextHandle++;\r\n        openHandles.add(handle);\r\n        return handle;\r\n      };\r\n\r\n      const closeFile = (handle: number) => {\r\n        openHandles.delete(handle);\r\n      };\r\n\r\n      for (let i = 0; i < maxHandles; i++) {\r\n        expect(() => openFile()).not.toThrow();\r\n      }\r\n\r\n      expect(() => openFile()).toThrow('EMFILE');\r\n      \r\n      closeFile(1);\r\n      expect(() => openFile()).not.toThrow();\r\n    });\r\n\r\n    it('should handle thread pool exhaustion', async () => {\r\n      const pool = new Set<number>();\r\n      const maxThreads = 5;\r\n\r\n      const executeTask = async (taskId: number): Promise<void> => {\r\n        if (pool.size >= maxThreads) {\r\n          throw new Error('Thread pool exhausted');\r\n        }\r\n        pool.add(taskId);\r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n        pool.delete(taskId);\r\n      };\r\n\r\n      const tasks = Array.from({ length: 10 }, (_, i) => executeTask(i));\r\n      const results = await Promise.allSettled(tasks);\r\n\r\n      const rejected = results.filter(r => r.status === 'rejected');\r\n      expect(rejected.length).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('should handle memory allocation failures', () => {\r\n      const allocate = (sizeMB: number, maxMB: number) => {\r\n        if (sizeMB > maxMB) {\r\n          throw new Error('Out of memory');\r\n        }\r\n        return new Array(sizeMB * 1024);\r\n      };\r\n\r\n      expect(() => allocate(10, 100)).not.toThrow();\r\n      expect(() => allocate(200, 100)).toThrow('Out of memory');\r\n    });\r\n  });\r\n\r\n  describe('Time-based Failures', () => {\r\n    beforeEach(() => {\r\n      vi.useFakeTimers();\r\n    });\r\n\r\n    afterEach(() => {\r\n      vi.useRealTimers();\r\n    });\r\n\r\n    it('should handle cache expiration during read', async () => {\r\n      const cache = new Map<string, { data: any; expiresAt: number }>();\r\n\r\n      const setCache = (key: string, data: any, ttlMs: number) => {\r\n        cache.set(key, {\r\n          data,\r\n          expiresAt: Date.now() + ttlMs\r\n        });\r\n      };\r\n\r\n      const getCache = (key: string) => {\r\n        const entry = cache.get(key);\r\n        if (!entry) {return null;}\r\n        if (Date.now() > entry.expiresAt) {\r\n          cache.delete(key);\r\n          return null;\r\n        }\r\n        return entry.data;\r\n      };\r\n\r\n      setCache('test', { value: 1 }, 1000);\r\n      expect(getCache('test')).toEqual({ value: 1 });\r\n\r\n      vi.advanceTimersByTime(1500);\r\n      expect(getCache('test')).toBeNull();\r\n    });\r\n\r\n    it('should handle request timeout during processing', async () => {\r\n      const processWithTimeout = async (\r\n        operation: () => Promise<any>,\r\n        timeoutMs: number\r\n      ) => {\r\n        const timeout = new Promise((_, reject) =>\r\n          setTimeout(() => reject(new Error('Timeout')), timeoutMs)\r\n        );\r\n\r\n        return Promise.race([operation(), timeout]);\r\n      };\r\n\r\n      const slowOperation = () => new Promise(resolve => \r\n        setTimeout(() => resolve('done'), 2000)\r\n      );\r\n\r\n      const promise = processWithTimeout(slowOperation, 1000);\r\n      \r\n      try {\r\n        vi.advanceTimersByTime(1000);\r\n        await promise;\r\n        expect.fail('Should have timed out');\r\n      } catch (error: any) {\r\n        expect(error.message).toBe('Timeout');\r\n      }\r\n    });\r\n  });\r\n\r\n  describe('Cascading Failures', () => {\r\n    it('should handle upstream service failure propagation', async () => {\r\n      const services = {\r\n        youtube: { healthy: true, errorRate: 0 },\r\n        cache: { healthy: true, errorRate: 0 },\r\n        database: { healthy: true, errorRate: 0 }\r\n      };\r\n\r\n      const callService = async (name: keyof typeof services) => {\r\n        const service = services[name];\r\n        if (!service.healthy || Math.random() < service.errorRate) {\r\n          throw new Error(`${name} service unavailable`);\r\n        }\r\n        return { success: true };\r\n      };\r\n\r\n      const getVideos = async () => {\r\n        try {\r\n          return await callService('youtube');\r\n        } catch (youtubeError) {\r\n          try {\r\n            return await callService('cache');\r\n          } catch (cacheError) {\r\n            return await callService('database');\r\n          }\r\n        }\r\n      };\r\n\r\n      services.youtube.healthy = false;\r\n      services.cache.healthy = false;\r\n\r\n      try {\r\n        await getVideos();\r\n      } catch (error: any) {\r\n        expect(error.message).toBe('database service unavailable');\r\n      }\r\n    });\r\n\r\n    it('should implement bulkhead pattern for isolation', async () => {\r\n      const pools = {\r\n        critical: { limit: 5, active: 0 },\r\n        nonCritical: { limit: 2, active: 0 }\r\n      };\r\n\r\n      const executeInPool = async (\r\n        pool: keyof typeof pools,\r\n        task: () => Promise<any>\r\n      ) => {\r\n        const p = pools[pool];\r\n        if (p.active >= p.limit) {\r\n          throw new Error(`${pool} pool exhausted`);\r\n        }\r\n        p.active++;\r\n        try {\r\n          return await task();\r\n        } finally {\r\n          p.active--;\r\n        }\r\n      };\r\n\r\n      const criticalTasks = Array(5).fill(null).map(() => \r\n        executeInPool('critical', () => new Promise(r => setTimeout(r, 100)))\r\n      );\r\n\r\n      const nonCriticalTasks = Array(3).fill(null).map(() =>\r\n        executeInPool('nonCritical', () => new Promise(r => setTimeout(r, 100)))\r\n      );\r\n\r\n      const results = await Promise.allSettled([\r\n        ...criticalTasks,\r\n        ...nonCriticalTasks\r\n      ]);\r\n\r\n      const criticalSuccess = results.slice(0, 5).filter(r => r.status === 'fulfilled');\r\n      const nonCriticalSuccess = results.slice(5).filter(r => r.status === 'fulfilled');\r\n\r\n      expect(criticalSuccess.length).toBe(5);\r\n      expect(nonCriticalSuccess.length).toBeLessThan(3);\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\chaos\\network-resilience.test.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'beforeEach' is defined but never used.","line":2,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"beforeEach"},"fix":{"range":[57,69],"text":""},"desc":"Remove unused variable 'beforeEach'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'beforeEach' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":42},{"ruleId":"no-unused-vars","severity":2,"message":"'vi' is defined but never used.","line":2,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"vi"},"fix":{"range":[69,73],"text":""},"desc":"Remove unused variable 'vi'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'vi' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":46},{"ruleId":"no-undef","severity":2,"message":"'AbortController' is not defined.","line":7,"column":30,"nodeType":"Identifier","messageId":"undef","endLine":7,"endColumn":45},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":40,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":40,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":21},{"ruleId":"require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":73,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":73,"endColumn":42,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2595,2601],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":91,"column":59,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":91,"endColumn":61,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3154,3160],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":154,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":154,"endColumn":43,"suggestions":[{"messageId":"removeAsync","fix":{"range":[4902,4908],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":161,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":161,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":161,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":161,"endColumn":23},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":184,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":184,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":184,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":184,"endColumn":21},{"ruleId":"no-unused-vars","severity":2,"message":"'data' is defined but never used.","line":214,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":214,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[6680,6691],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'data' is defined but never used. Allowed unused args must match /^_/u.","line":214,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":214,"endColumn":53},{"ruleId":"no-unused-vars","severity":2,"message":"'refillRate' is defined but never used.","line":247,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":247,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"refillRate"},"fix":{"range":[7542,7560],"text":""},"desc":"Remove unused variable 'refillRate'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'maxRequests' is defined but never used.","line":285,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":285,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"maxRequests"},"fix":{"range":[8594,8613],"text":""},"desc":"Remove unused variable 'maxRequests'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'windowMs' is defined but never used.","line":286,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":286,"endColumn":35,"suggestions":[{"messageId":"removeVar","data":{"varName":"windowMs"},"fix":{"range":[8634,8650],"text":""},"desc":"Remove unused variable 'windowMs'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'capacity' is defined but never used.","line":334,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":334,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"capacity"},"fix":{"range":[9974,9990],"text":""},"desc":"Remove unused variable 'capacity'."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":338,"column":25,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":338,"endColumn":45}],"suppressedMessages":[],"errorCount":17,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import axios from 'axios';\r\nimport { describe, it, expect, beforeEach, vi } from 'vitest';\r\n\r\ndescribe('Network Resilience & Chaos Tests', () => {\r\n  describe('YouTube API Resilience', () => {\r\n    it('should handle network timeout gracefully', async () => {\r\n      const controller = new AbortController();\r\n      setTimeout(() => controller.abort(), 100);\r\n\r\n      try {\r\n        await axios.get('https://www.googleapis.com/youtube/v3/playlistItems', {\r\n          signal: controller.signal,\r\n          timeout: 100\r\n        });\r\n      } catch (error: any) {\r\n        expect(['ECONNABORTED', 'ERR_CANCELED']).toContain(error.code);\r\n      }\r\n    });\r\n\r\n    it('should retry on 5xx errors', async () => {\r\n      let attempts = 0;\r\n      const maxRetries = 3;\r\n\r\n      const fetchWithRetry = async (url: string, retries = maxRetries): Promise<any> => {\r\n        attempts++;\r\n        try {\r\n          const response = await axios.get(url, { timeout: 5000 });\r\n          return response.data;\r\n        } catch (error: any) {\r\n          if ((error.response?.status >= 500 || error.code === 'ECONNRESET') && retries > 0) {\r\n            await new Promise(resolve => setTimeout(resolve, 100));\r\n            return fetchWithRetry(url, retries - 1);\r\n          }\r\n          throw error;\r\n        }\r\n      };\r\n\r\n      try {\r\n        await fetchWithRetry('https://httpstat.us/500');\r\n      } catch (error) {\r\n        expect(attempts).toBeGreaterThanOrEqual(1);\r\n        expect(attempts).toBeLessThanOrEqual(maxRetries + 1);\r\n      }\r\n    });\r\n\r\n    it('should handle rate limiting with exponential backoff', async () => {\r\n      const timestamps: number[] = [];\r\n\r\n      const fetchWithBackoff = async (attempt = 0): Promise<void> => {\r\n        timestamps.push(Date.now());\r\n        if (attempt < 3) {\r\n          const delay = Math.pow(2, attempt) * 100;\r\n          await new Promise(resolve => setTimeout(resolve, delay));\r\n          return fetchWithBackoff(attempt + 1);\r\n        }\r\n      };\r\n\r\n      await fetchWithBackoff();\r\n\r\n      expect(timestamps.length).toBe(4);\r\n      const delay1 = timestamps[1] - timestamps[0];\r\n      const delay2 = timestamps[2] - timestamps[1];\r\n      const delay3 = timestamps[3] - timestamps[2];\r\n\r\n      expect(delay1).toBeGreaterThanOrEqual(90);\r\n      expect(delay2).toBeGreaterThanOrEqual(190);\r\n      expect(delay3).toBeGreaterThanOrEqual(390);\r\n    });\r\n\r\n    it('should handle partial response failures', async () => {\r\n      const mockPlaylistIds = ['PLtest1', 'PLtest2', 'PLtest3'];\r\n      const results = await Promise.allSettled(\r\n        mockPlaylistIds.map(async (id) => {\r\n          if (id === 'PLtest2') {\r\n            throw new Error('API Error');\r\n          }\r\n          return { id, videos: [] };\r\n        })\r\n      );\r\n\r\n      const successful = results.filter(r => r.status === 'fulfilled');\r\n      const failed = results.filter(r => r.status === 'rejected');\r\n\r\n      expect(successful.length).toBe(2);\r\n      expect(failed.length).toBe(1);\r\n    });\r\n  });\r\n\r\n  describe('Database Connection Resilience', () => {\r\n    it('should handle database connection loss', async () => {\r\n      const mockDbOperation = async (shouldFail: boolean) => {\r\n        if (shouldFail) {\r\n          throw new Error('ECONNREFUSED');\r\n        }\r\n        return { success: true };\r\n      };\r\n\r\n      let result;\r\n      try {\r\n        result = await mockDbOperation(true);\r\n      } catch (error: any) {\r\n        expect(error.message).toBe('ECONNREFUSED');\r\n        result = { success: false, cached: true };\r\n      }\r\n\r\n      expect(result).toHaveProperty('success');\r\n    });\r\n\r\n    it('should implement circuit breaker pattern', async () => {\r\n      class CircuitBreaker {\r\n        private failures = 0;\r\n        private threshold = 3;\r\n        private state: 'closed' | 'open' | 'half-open' = 'closed';\r\n        private resetTimeout = 1000;\r\n        private nextAttempt = 0;\r\n\r\n        async execute<T>(fn: () => Promise<T>): Promise<T> {\r\n          if (this.state === 'open') {\r\n            if (Date.now() < this.nextAttempt) {\r\n              throw new Error('Circuit breaker is OPEN');\r\n            }\r\n            this.state = 'half-open';\r\n          }\r\n\r\n          try {\r\n            const result = await fn();\r\n            this.onSuccess();\r\n            return result;\r\n          } catch (error) {\r\n            this.onFailure();\r\n            throw error;\r\n          }\r\n        }\r\n\r\n        private onSuccess() {\r\n          this.failures = 0;\r\n          this.state = 'closed';\r\n        }\r\n\r\n        private onFailure() {\r\n          this.failures++;\r\n          if (this.failures >= this.threshold) {\r\n            this.state = 'open';\r\n            this.nextAttempt = Date.now() + this.resetTimeout;\r\n          }\r\n        }\r\n\r\n        getState() {\r\n          return this.state;\r\n        }\r\n      }\r\n\r\n      const breaker = new CircuitBreaker();\r\n      const failingOperation = async () => {\r\n        throw new Error('Service unavailable');\r\n      };\r\n\r\n      for (let i = 0; i < 3; i++) {\r\n        try {\r\n          await breaker.execute(failingOperation);\r\n        } catch (error) {\r\n          // Expected to fail\r\n        }\r\n      }\r\n\r\n      expect(breaker.getState()).toBe('open');\r\n\r\n      try {\r\n        await breaker.execute(failingOperation);\r\n        expect.fail('Should have thrown circuit breaker error');\r\n      } catch (error: any) {\r\n        expect(error.message).toBe('Circuit breaker is OPEN');\r\n      }\r\n    });\r\n  });\r\n\r\n  describe('Cache Resilience', () => {\r\n    it('should handle cache corruption gracefully', () => {\r\n      const corruptedData = 'invalid-json-{{{';\r\n\r\n      try {\r\n        JSON.parse(corruptedData);\r\n        expect.fail('Should have thrown parse error');\r\n      } catch (error) {\r\n        const fallbackData = { videos: [], timestamp: Date.now() };\r\n        expect(fallbackData).toHaveProperty('videos');\r\n        expect(fallbackData).toHaveProperty('timestamp');\r\n      }\r\n    });\r\n\r\n    it('should handle missing cache files', async () => {\r\n      const fs = await import('fs/promises');\r\n\r\n      const readCache = async (path: string) => {\r\n        try {\r\n          const data = await fs.readFile(path, 'utf-8');\r\n          return JSON.parse(data);\r\n        } catch (error: any) {\r\n          if (error.code === 'ENOENT') {\r\n            return null;\r\n          }\r\n          throw error;\r\n        }\r\n      };\r\n\r\n      const result = await readCache('non-existent-cache.json');\r\n      expect(result).toBeNull();\r\n    });\r\n\r\n    it('should handle concurrent cache writes', async () => {\r\n      let writeCount = 0;\r\n      const locks = new Map<string, Promise<void>>();\r\n\r\n      const writeWithLock = async (key: string, data: any) => {\r\n        if (locks.has(key)) {\r\n          await locks.get(key);\r\n        }\r\n\r\n        const operation = (async () => {\r\n          writeCount++;\r\n          await new Promise(resolve => setTimeout(resolve, 10));\r\n        })();\r\n\r\n        locks.set(key, operation);\r\n        await operation;\r\n        locks.delete(key);\r\n      };\r\n\r\n      await Promise.all([\r\n        writeWithLock('cache1', { data: 1 }),\r\n        writeWithLock('cache1', { data: 2 }),\r\n        writeWithLock('cache1', { data: 3 })\r\n      ]);\r\n\r\n      expect(writeCount).toBe(3);\r\n    });\r\n  });\r\n\r\n  describe('API Rate Limiting', () => {\r\n    it('should respect rate limits with token bucket', () => {\r\n      class TokenBucket {\r\n        private tokens: number;\r\n        private lastRefill: number;\r\n\r\n        constructor(\r\n          private capacity: number,\r\n          private refillRate: number\r\n        ) {\r\n          this.tokens = capacity;\r\n          this.lastRefill = Date.now();\r\n        }\r\n\r\n        tryConsume(tokens = 1): boolean {\r\n          this.refill();\r\n          if (this.tokens >= tokens) {\r\n            this.tokens -= tokens;\r\n            return true;\r\n          }\r\n          return false;\r\n        }\r\n\r\n        private refill() {\r\n          const now = Date.now();\r\n          const timePassed = now - this.lastRefill;\r\n          const tokensToAdd = (timePassed / 1000) * this.refillRate;\r\n          this.tokens = Math.min(this.capacity, this.tokens + tokensToAdd);\r\n          this.lastRefill = now;\r\n        }\r\n      }\r\n\r\n      const bucket = new TokenBucket(10, 5);\r\n\r\n      for (let i = 0; i < 10; i++) {\r\n        expect(bucket.tryConsume()).toBe(true);\r\n      }\r\n\r\n      expect(bucket.tryConsume()).toBe(false);\r\n    });\r\n\r\n    it('should implement sliding window rate limiter', () => {\r\n      class SlidingWindowLimiter {\r\n        private requests: number[] = [];\r\n\r\n        constructor(\r\n          private maxRequests: number,\r\n          private windowMs: number\r\n        ) {}\r\n\r\n        tryRequest(): boolean {\r\n          const now = Date.now();\r\n          this.requests = this.requests.filter(\r\n            time => now - time < this.windowMs\r\n          );\r\n\r\n          if (this.requests.length < this.maxRequests) {\r\n            this.requests.push(now);\r\n            return true;\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n\r\n      const limiter = new SlidingWindowLimiter(5, 1000);\r\n\r\n      for (let i = 0; i < 5; i++) {\r\n        expect(limiter.tryRequest()).toBe(true);\r\n      }\r\n\r\n      expect(limiter.tryRequest()).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('Memory Pressure Handling', () => {\r\n    it('should handle large payload gracefully', () => {\r\n      const generateLargePayload = (sizeMB: number) => {\r\n        const size = sizeMB * 1024 * 1024;\r\n        return new Array(size).fill('x').join('');\r\n      };\r\n\r\n      try {\r\n        const payload = generateLargePayload(1);\r\n        expect(payload.length).toBeGreaterThan(1000000);\r\n      } catch (error: any) {\r\n        expect(['out of memory', 'allocation failed']).toContain(\r\n          error.message.toLowerCase()\r\n        );\r\n      }\r\n    });\r\n\r\n    it('should implement LRU cache eviction', () => {\r\n      class LRUCache<K, V> {\r\n        private cache = new Map<K, V>();\r\n\r\n        constructor(private capacity: number) {}\r\n\r\n        get(key: K): V | undefined {\r\n          if (!this.cache.has(key)) {return undefined;}\r\n          const value = this.cache.get(key)!;\r\n          this.cache.delete(key);\r\n          this.cache.set(key, value);\r\n          return value;\r\n        }\r\n\r\n        set(key: K, value: V): void {\r\n          if (this.cache.has(key)) {\r\n            this.cache.delete(key);\r\n          } else if (this.cache.size >= this.capacity) {\r\n            const firstKey = this.cache.keys().next().value;\r\n            this.cache.delete(firstKey);\r\n          }\r\n          this.cache.set(key, value);\r\n        }\r\n\r\n        size(): number {\r\n          return this.cache.size;\r\n        }\r\n      }\r\n\r\n      const cache = new LRUCache<string, number>(3);\r\n      cache.set('a', 1);\r\n      cache.set('b', 2);\r\n      cache.set('c', 3);\r\n      expect(cache.size()).toBe(3);\r\n\r\n      cache.set('d', 4);\r\n      expect(cache.size()).toBe(3);\r\n      expect(cache.get('a')).toBeUndefined();\r\n      expect(cache.get('d')).toBe(4);\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\client-libs.test.ts","messages":[{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":4,"column":1,"nodeType":"Identifier","messageId":"undef","endLine":4,"endColumn":7},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":15,"column":6,"nodeType":"Identifier","messageId":"undef","endLine":15,"endColumn":12},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":25,"column":6,"nodeType":"Identifier","messageId":"undef","endLine":25,"endColumn":12},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":28,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":28,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[912,918],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":35,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":35,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1112,1118],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi } from 'vitest';\r\n\r\n// Mock fetch\r\nglobal.fetch = vi.fn();\r\n\r\ndescribe('YouTube Client Library', () => {\r\n  it('should export getPlaylistVideosClient function', async () => {\r\n    const module = await import('../client/src/lib/youtube');\r\n    \r\n    expect(module.getPlaylistVideosClient).toBeDefined();\r\n    expect(typeof module.getPlaylistVideosClient).toBe('function');\r\n  });\r\n\r\n  it('should handle API errors gracefully', async () => {\r\n    (global.fetch as any).mockRejectedValueOnce(new Error('API Error'));\r\n    \r\n    const { getPlaylistVideosClient } = await import('../client/src/lib/youtube');\r\n    \r\n    await expect(\r\n      getPlaylistVideosClient('test-playlist', 'test-key', 10)\r\n    ).rejects.toThrow();\r\n  });\r\n\r\n  it('should format durations correctly', async () => {\r\n    (global.fetch as any)\r\n      .mockResolvedValueOnce({\r\n        ok: true,\r\n        json: async () => ({\r\n          items: [{ contentDetails: { videoId: 'test123' } }],\r\n          nextPageToken: null,\r\n        }),\r\n      })\r\n      .mockResolvedValueOnce({\r\n        ok: true,\r\n        json: async () => ({\r\n          items: [\r\n            {\r\n              id: 'test123',\r\n              snippet: {\r\n                title: 'Test Video',\r\n                publishedAt: '2024-01-01',\r\n                thumbnails: { high: { url: 'https://example.com/thumb.jpg' } },\r\n              },\r\n              contentDetails: { duration: 'PT1H30M15S' },\r\n              statistics: { viewCount: '1500000' },\r\n            },\r\n          ],\r\n        }),\r\n      });\r\n\r\n    const { getPlaylistVideosClient } = await import('../client/src/lib/youtube');\r\n    const videos = await getPlaylistVideosClient('test-playlist', 'test-key', 10);\r\n\r\n    expect(videos[0].duration).toBe('1:30:15');\r\n    expect(videos[0].viewCount).toBe('1.5M');\r\n  });\r\n});\r\n\r\ndescribe('Structured Data Library', () => {\r\n  it('should generate valid organization schema', async () => {\r\n    const { getOrganizationSchema } = await import('../client/src/lib/structuredData');\r\n    const schema = getOrganizationSchema();\r\n\r\n    expect(schema['@type']).toBe('Organization');\r\n    expect(schema.name).toBe('Tales of Aneria');\r\n    expect(schema.url).toBe('https://talesofaneria.com');\r\n  });\r\n\r\n  it('should generate valid website schema', async () => {\r\n    const { getWebSiteSchema } = await import('../client/src/lib/structuredData');\r\n    const schema = getWebSiteSchema();\r\n\r\n    expect(schema['@type']).toBe('WebSite');\r\n    expect(schema.name).toBe('Tales of Aneria');\r\n  });\r\n\r\n  it('should generate valid breadcrumb schema', async () => {\r\n    const { getBreadcrumbSchema } = await import('../client/src/lib/structuredData');\r\n    const schema = getBreadcrumbSchema([\r\n      { name: 'Home', url: 'https://talesofaneria.com' },\r\n      { name: 'Characters', url: 'https://talesofaneria.com/characters' },\r\n    ]);\r\n\r\n    expect(schema['@type']).toBe('BreadcrumbList');\r\n    expect(schema.itemListElement).toHaveLength(2);\r\n  });\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\components\\chaos-goblin-mode.test.tsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'this' is defined but never used.","line":22,"column":60,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":69,"suggestions":[{"messageId":"removeVar","data":{"varName":"this"},"fix":{"range":[750,759],"text":""},"desc":"Remove unused variable 'this'."}]},{"ruleId":"no-undef","severity":2,"message":"'Audio' is not defined.","line":29,"column":29,"nodeType":"Identifier","messageId":"undef","endLine":29,"endColumn":34},{"ruleId":"no-unused-vars","severity":2,"message":"'this' is defined but never used.","line":135,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":135,"endColumn":71,"suggestions":[{"messageId":"removeVar","data":{"varName":"this"},"fix":{"range":[4644,4653],"text":""},"desc":"Remove unused variable 'this'."}]},{"ruleId":"no-undef","severity":2,"message":"'Audio' is not defined.","line":142,"column":31,"nodeType":"Identifier","messageId":"undef","endLine":142,"endColumn":36},{"ruleId":"no-unused-vars","severity":2,"message":"'this' is defined but never used.","line":154,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":154,"endColumn":71,"suggestions":[{"messageId":"removeVar","data":{"varName":"this"},"fix":{"range":[5239,5248],"text":""},"desc":"Remove unused variable 'this'."}]},{"ruleId":"no-undef","severity":2,"message":"'Audio' is not defined.","line":161,"column":31,"nodeType":"Identifier","messageId":"undef","endLine":161,"endColumn":36}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { render, screen, fireEvent, act } from '@testing-library/react';\r\nimport { useState } from 'react';\r\nimport { describe, it, expect, vi, beforeEach, afterEach } from 'vitest';\r\n\r\nimport { useKonamiCode, ChaosGoblinMode } from '../../client/src/components/ChaosGoblinMode';\r\n\r\n\r\n// Test component that uses the Konami code hook\r\nfunction TestKonamiComponent() {\r\n  const [activated, setActivated] = useState(false);\r\n  useKonamiCode(() => setActivated(true));\r\n  \r\n  return <div>{activated ? 'Activated!' : 'Not activated'}</div>;\r\n}\r\n\r\ndescribe('Chaos Goblin Mode', () => {\r\n  beforeEach(() => {\r\n    vi.useFakeTimers();\r\n    \r\n    // Mock Audio API globally as a constructor\r\n     \r\n    globalThis.Audio = vi.fn().mockImplementation(function(this: any) {\r\n      this.play = vi.fn().mockResolvedValue(undefined);\r\n      this.pause = vi.fn();\r\n      this.currentTime = 0;\r\n      this.volume = 0.5;\r\n      this.loop = false;\r\n      return this;\r\n    }) as unknown as typeof Audio;\r\n  });\r\n\r\n  afterEach(() => {\r\n    vi.restoreAllMocks();\r\n  });\r\n\r\n  describe('Konami Code Detection', () => {\r\n    it('should activate when Konami code is entered correctly', () => {\r\n      render(<TestKonamiComponent />);\r\n      \r\n      expect(screen.getByText('Not activated')).toBeInTheDocument();\r\n\r\n      // Enter Konami code:         B A\r\n      const konamiCode = [\r\n        'ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown',\r\n        'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight',\r\n        'b', 'a'\r\n      ];\r\n\r\n      konamiCode.forEach(key => {\r\n        fireEvent.keyDown(window, { key });\r\n      });\r\n\r\n      expect(screen.getByText('Activated!')).toBeInTheDocument();\r\n    });\r\n\r\n    it('should not activate with incorrect sequence', () => {\r\n      render(<TestKonamiComponent />);\r\n      \r\n      // Enter wrong sequence\r\n      fireEvent.keyDown(window, { key: 'ArrowUp' });\r\n      fireEvent.keyDown(window, { key: 'ArrowDown' });\r\n      fireEvent.keyDown(window, { key: 'a' });\r\n\r\n      expect(screen.getByText('Not activated')).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  describe('Chaos Goblin Mode Component', () => {\r\n    it('should not render when inactive', () => {\r\n      const onComplete = vi.fn();\r\n      const { container } = render(<ChaosGoblinMode active={false} onComplete={onComplete} />);\r\n      \r\n      expect(screen.queryByText('CHAOS GOBLIN MODE')).not.toBeInTheDocument();\r\n      expect(container.innerHTML).toBe('');\r\n    });\r\n\r\n    it('should render when active', () => {\r\n      const onComplete = vi.fn();\r\n      render(<ChaosGoblinMode active={true} onComplete={onComplete} />);\r\n      \r\n      expect(screen.getByText('CHAOS GOBLIN MODE')).toBeInTheDocument();\r\n      expect(screen.getByAltText('Dancing Chaos Goblin')).toBeInTheDocument();\r\n      expect(screen.getByText(/Ending in \\d+s/)).toBeInTheDocument();\r\n    });\r\n\r\n    it('should have epilepsy-safe transitions', () => {\r\n      const onComplete = vi.fn();\r\n      const { container } = render(<ChaosGoblinMode active={true} onComplete={onComplete} />);\r\n      \r\n      const overlay = container.querySelector('div[style*=\"transition\"]');\r\n      \r\n      // Should have smooth 500ms transitions (not instant flashing)\r\n      expect(overlay?.style.transition).toContain('0.5s');\r\n      expect(overlay?.style.transition).toContain('ease-in-out');\r\n    });\r\n\r\n    it('should not block user interaction', () => {\r\n      const onComplete = vi.fn();\r\n      const { container } = render(<ChaosGoblinMode active={true} onComplete={onComplete} />);\r\n      \r\n      const overlay = container.querySelector('.pointer-events-none');\r\n      expect(overlay).toBeInTheDocument();\r\n    });\r\n\r\n    it('should display countdown from 60 seconds', () => {\r\n      render(<ChaosGoblinMode active={true} onComplete={vi.fn()} />);\r\n      \r\n      expect(screen.getByText('Ending in 60s')).toBeInTheDocument();\r\n      \r\n      // Advance timer by 1 second\r\n      act(() => {\r\n        vi.advanceTimersByTime(1000);\r\n      });\r\n      \r\n      expect(screen.getByText('Ending in 59s')).toBeInTheDocument();\r\n    });\r\n\r\n    it('should call onComplete after 60 seconds', () => {\r\n      const onComplete = vi.fn();\r\n      render(<ChaosGoblinMode active={true} onComplete={onComplete} />);\r\n      \r\n      // Fast-forward 60 seconds\r\n      act(() => {\r\n        vi.advanceTimersByTime(60000);\r\n      });\r\n      \r\n      expect(onComplete).toHaveBeenCalled();\r\n    });\r\n\r\n    it('should play audio when activated', () => {\r\n      const mockPlay = vi.fn().mockResolvedValue(undefined);\r\n      const mockPause = vi.fn();\r\n      \r\n       \r\n      globalThis.Audio = vi.fn().mockImplementation(function(this: any) {\r\n        this.play = mockPlay;\r\n        this.pause = mockPause;\r\n        this.currentTime = 0;\r\n        this.volume = 0.5;\r\n        this.loop = false;\r\n        return this;\r\n      }) as unknown as typeof Audio;\r\n      \r\n      render(<ChaosGoblinMode active={true} onComplete={vi.fn()} />);\r\n      \r\n      expect(mockPlay).toHaveBeenCalled();\r\n    });\r\n\r\n    it('should stop audio when deactivated', () => {\r\n      const mockPlay = vi.fn().mockResolvedValue(undefined);\r\n      const mockPause = vi.fn();\r\n      \r\n       \r\n      globalThis.Audio = vi.fn().mockImplementation(function(this: any) {\r\n        this.play = mockPlay;\r\n        this.pause = mockPause;\r\n        this.currentTime = 0;\r\n        this.volume = 0.5;\r\n        this.loop = false;\r\n        return this;\r\n      }) as unknown as typeof Audio;\r\n      \r\n      const { rerender } = render(<ChaosGoblinMode active={true} onComplete={vi.fn()} />);\r\n      \r\n      // Deactivate\r\n      rerender(<ChaosGoblinMode active={false} onComplete={vi.fn()} />);\r\n      \r\n      expect(mockPause).toHaveBeenCalled();\r\n    });\r\n  });\r\n});","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\contract\\api.contract.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\contract\\printful.contract.test.ts","messages":[{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":51,"column":11,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":51,"endColumn":23,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1281,1287],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":69,"column":11,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":69,"endColumn":23,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1802,1808],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":131,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":131,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3956,3962],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'text' has no 'await' expression.","line":148,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":148,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[4422,4428],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":162,"column":11,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":162,"endColumn":23,"suggestions":[{"messageId":"removeAsync","fix":{"range":[4858,4864],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":180,"column":11,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":180,"endColumn":23,"suggestions":[{"messageId":"removeAsync","fix":{"range":[5436,5442],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":206,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":206,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[6210,6216],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":289,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":289,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[8901,8907],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":341,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":341,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[10539,10545],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'text' has no 'await' expression.","line":366,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":366,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[11273,11279],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":381,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":381,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[11712,11718],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":401,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":401,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[12242,12248],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":425,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":425,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[12911,12917],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":441,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":441,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[13359,13365],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":461,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":461,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[13926,13932],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":482,"column":11,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":482,"endColumn":23,"suggestions":[{"messageId":"removeAsync","fix":{"range":[14498,14504],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":496,"column":11,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":496,"endColumn":23,"suggestions":[{"messageId":"removeAsync","fix":{"range":[14890,14896],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":48,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":48,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":65,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":65,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":101,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":101,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":129,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":129,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":135,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":135,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":145,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":145,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":149,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":149,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":159,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":159,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":174,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":174,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":178,"column":10,"nodeType":"Identifier","messageId":"undef","endLine":178,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":193,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":193,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":204,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":204,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":257,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":257,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":276,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":276,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":279,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":279,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":287,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":287,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":327,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":327,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":339,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":339,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":354,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":354,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":363,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":363,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":371,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":371,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":379,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":379,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":391,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":391,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":399,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":399,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":413,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":413,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":423,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":423,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":430,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":430,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":438,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":438,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":449,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":449,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":458,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":458,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":469,"column":12,"nodeType":"Identifier","messageId":"undef","endLine":469,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":479,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":479,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":493,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":493,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":510,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":510,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable no-undef */\r\nimport * as fs from 'fs';\r\nimport * as path from 'path';\n\r\nimport { describe, it, expect, vi, beforeAll, afterAll, beforeEach } from 'vitest';\r\n\r\nimport { \r\n  getPrintfulSyncProducts,\r\n  getPrintfulProductDetails,\r\n  getCatalogVariantId\r\n} from '../../server/printful';\r\n\r\n/**\r\n * Contract Tests for Printful API Integration\r\n * Validates that our Printful integration adheres to expected API contracts\r\n */\r\n\r\ndescribe('Printful API Contract Tests', () => {\r\n  const originalEnv = process.env;\r\n  const CACHE_FILE = path.join(process.cwd(), 'server', 'cache', 'printful-products.json');\r\n\r\n  beforeAll(() => {\r\n    process.env = {\r\n      ...originalEnv,\r\n      PRINTFUL_API_KEY: 'test_printful_contract_key',\r\n    };\r\n  });\r\n\r\n  afterAll(() => {\r\n    process.env = originalEnv;\r\n  });\r\n\r\n  beforeEach(() => {\r\n    vi.clearAllMocks();\r\n    \r\n    // Clear cache before each test\r\n    try {\r\n      if (fs.existsSync(CACHE_FILE)) {\r\n        fs.unlinkSync(CACHE_FILE);\r\n      }\r\n    } catch {\r\n      // Ignore errors\r\n    }\r\n  });\r\n\r\n  describe('Sync Products API Contract', () => {\r\n    it('should return products with required fields', async () => {\r\n      global.fetch = vi.fn()\r\n        .mockResolvedValueOnce({\r\n          ok: true,\r\n          json: async () => ({\r\n            code: 200,\r\n            result: [\r\n              {\r\n                id: 123,\r\n                external_id: 'ext-123',\r\n                name: 'Test Product',\r\n                variants: 3,\r\n                synced: 3,\r\n                thumbnail_url: 'https://example.com/thumb.jpg',\r\n                is_ignored: false,\r\n              }\r\n            ]\r\n          }),\r\n        } as Response)\r\n        // Product details fetch\r\n        .mockResolvedValueOnce({\r\n          ok: true,\r\n          json: async () => ({\r\n            code: 200,\r\n            result: {\r\n              sync_product: {\r\n                id: 123,\r\n                external_id: 'ext-123',\r\n                name: 'Test Product',\r\n                thumbnail_url: 'https://example.com/thumb.jpg',\r\n              },\r\n              sync_variants: [\r\n                {\r\n                  id: 456,\r\n                  external_id: 'ext-456',\r\n                  sync_product_id: 123,\r\n                  name: 'Small - Black',\r\n                  synced: true,\r\n                  variant_id: 789,\r\n                  retail_price: '24.99',\r\n                  currency: 'USD',\r\n                  is_ignored: false,\r\n                  sku: null,\r\n                  product: {\r\n                    variant_id: 789,\r\n                    product_id: 71,\r\n                    image: 'https://example.com/product.jpg',\r\n                    name: 'Bella + Canvas 3001',\r\n                  },\r\n                  files: []\r\n                }\r\n              ]\r\n            }\r\n          }),\r\n        } as Response);\r\n\r\n      const products = await getPrintfulSyncProducts(10);\r\n\r\n      expect(products).toBeDefined();\r\n      expect(Array.isArray(products)).toBe(true);\r\n      \r\n      if (products.length > 0) {\r\n        const product = products[0];\r\n        // Required fields per contract\r\n        expect(product).toHaveProperty('id');\r\n        expect(product).toHaveProperty('name');\r\n        expect(product).toHaveProperty('price');\r\n        expect(product).toHaveProperty('image');\r\n        expect(product).toHaveProperty('url');\r\n        expect(product).toHaveProperty('inStock');\r\n        \r\n        // Type validations\r\n        expect(typeof product.id).toBe('string');\r\n        expect(typeof product.name).toBe('string');\r\n        expect(typeof product.price).toBe('string');\r\n        expect(typeof product.image).toBe('string');\r\n        expect(typeof product.url).toBe('string');\r\n        expect(typeof product.inStock).toBe('boolean');\r\n      }\r\n    });\r\n\r\n    it('should handle empty product list', async () => {\r\n      global.fetch = vi.fn().mockResolvedValue({\r\n        ok: true,\r\n        json: async () => ({\r\n          code: 200,\r\n          result: []\r\n        }),\r\n      } as Response);\r\n\r\n      const products = await getPrintfulSyncProducts();\r\n\r\n      expect(products).toBeDefined();\r\n      expect(Array.isArray(products)).toBe(true);\r\n      expect(products).toHaveLength(0);\r\n    });\r\n\r\n    it('should handle API errors gracefully', async () => {\r\n      global.fetch = vi.fn().mockResolvedValue({\r\n        ok: false,\r\n        status: 500,\r\n        text: async () => 'Internal Server Error',\r\n      } as Response);\r\n\r\n      const products = await getPrintfulSyncProducts();\r\n\r\n      expect(products).toBeDefined();\r\n      expect(Array.isArray(products)).toBe(true);\r\n      // Should return empty array on error, not throw\r\n    });\r\n\r\n    it('should respect limit parameter', async () => {\r\n      global.fetch = vi.fn()\r\n        .mockResolvedValueOnce({\r\n          ok: true,\r\n          json: async () => ({\r\n            code: 200,\r\n            result: Array(50).fill(null).map((_, i) => ({\r\n              id: i,\r\n              external_id: `ext-${i}`,\r\n              name: `Product ${i}`,\r\n              variants: 1,\r\n              synced: 1,\r\n              thumbnail_url: 'https://example.com/thumb.jpg',\r\n              is_ignored: false,\r\n            }))\r\n          }),\r\n        } as Response);\r\n\r\n      // Mock product details for each\r\n      for (let i = 0; i < 50; i++) {\r\n        (global.fetch as any).mockResolvedValueOnce({\r\n          ok: true,\r\n          json: async () => ({\r\n            code: 200,\r\n            result: {\r\n              sync_product: { id: i, name: `Product ${i}` },\r\n              sync_variants: [{\r\n                id: i * 10,\r\n                retail_price: '19.99',\r\n                currency: 'USD',\r\n                synced: true,\r\n                product: { image: 'https://example.com/img.jpg' }\r\n              }]\r\n            }\r\n          }),\r\n        } as Response);\r\n      }\r\n\r\n      const products = await getPrintfulSyncProducts(10);\r\n\r\n      expect(products.length).toBeLessThanOrEqual(10);\r\n    });\r\n  });\r\n\r\n  describe('Product Details API Contract', () => {\r\n    it('should return product with variants', async () => {\r\n      global.fetch = vi.fn().mockResolvedValue({\r\n        ok: true,\r\n        json: async () => ({\r\n          code: 200,\r\n          result: {\r\n            sync_product: {\r\n              id: 123,\r\n              external_id: 'ext-123',\r\n              name: 'Test T-Shirt',\r\n              thumbnail_url: 'https://example.com/thumb.jpg',\r\n            },\r\n            sync_variants: [\r\n              {\r\n                id: 456,\r\n                external_id: 'ext-456',\r\n                sync_product_id: 123,\r\n                name: 'Small - Black',\r\n                synced: true,\r\n                variant_id: 789,\r\n                retail_price: '24.99',\r\n                currency: 'USD',\r\n                is_ignored: false,\r\n                sku: null,\r\n                product: {\r\n                  variant_id: 789,\r\n                  product_id: 71,\r\n                  image: 'https://example.com/product.jpg',\r\n                  name: 'Bella + Canvas 3001',\r\n                },\r\n                files: []\r\n              },\r\n              {\r\n                id: 457,\r\n                external_id: 'ext-457',\r\n                sync_product_id: 123,\r\n                name: 'Medium - Black',\r\n                synced: true,\r\n                variant_id: 790,\r\n                retail_price: '24.99',\r\n                currency: 'USD',\r\n                is_ignored: false,\r\n                sku: null,\r\n                product: {\r\n                  variant_id: 790,\r\n                  product_id: 71,\r\n                  image: 'https://example.com/product.jpg',\r\n                  name: 'Bella + Canvas 3001',\r\n                },\r\n                files: []\r\n              }\r\n            ]\r\n          }\r\n        }),\r\n      } as Response);\r\n\r\n      const product = await getPrintfulProductDetails('123');\r\n\r\n      expect(product).toBeDefined();\r\n      expect(product?.variants).toBeDefined();\r\n      expect(Array.isArray(product?.variants)).toBe(true);\r\n      expect(product?.variants?.length).toBeGreaterThan(0);\r\n      \r\n      if (product?.variants && product.variants.length > 0) {\r\n        const variant = product.variants[0];\r\n        expect(variant).toHaveProperty('id');\r\n        expect(variant).toHaveProperty('name');\r\n        expect(variant).toHaveProperty('price');\r\n        expect(variant).toHaveProperty('inStock');\r\n      }\r\n    });\r\n\r\n    it('should return null for non-existent product', async () => {\r\n      global.fetch = vi.fn().mockResolvedValue({\r\n        ok: false,\r\n        status: 404,\r\n      } as Response);\r\n\r\n      const product = await getPrintfulProductDetails('999999');\r\n\r\n      expect(product).toBeNull();\r\n    });\r\n\r\n    it('should filter out ignored variants', async () => {\r\n      global.fetch = vi.fn().mockResolvedValue({\r\n        ok: true,\r\n        json: async () => ({\r\n          code: 200,\r\n          result: {\r\n            sync_product: {\r\n              id: 123,\r\n              name: 'Test Product',\r\n              thumbnail_url: 'https://example.com/thumb.jpg',\r\n            },\r\n            sync_variants: [\r\n              {\r\n                id: 456,\r\n                name: 'Active Variant',\r\n                synced: true,\r\n                variant_id: 789,\r\n                retail_price: '24.99',\r\n                currency: 'USD',\r\n                is_ignored: false,\r\n                product: {\r\n                  variant_id: 789,\r\n                  image: 'https://example.com/img.jpg',\r\n                }\r\n              },\r\n              {\r\n                id: 457,\r\n                name: 'Ignored Variant',\r\n                synced: false,\r\n                variant_id: 790,\r\n                retail_price: '24.99',\r\n                currency: 'USD',\r\n                is_ignored: true, // Should be filtered out\r\n                product: {\r\n                  variant_id: 790,\r\n                  image: 'https://example.com/img.jpg',\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        }),\r\n      } as Response);\r\n\r\n      const product = await getPrintfulProductDetails('123');\r\n\r\n      expect(product?.variants).toBeDefined();\r\n      expect(product?.variants?.length).toBe(1);\r\n      expect(product?.variants?.[0].name).toContain('Active');\r\n    });\r\n  });\r\n\r\n  describe('Variant ID Resolution Contract', () => {\r\n    it('should resolve sync variant to catalog variant', async () => {\r\n      global.fetch = vi.fn().mockResolvedValue({\r\n        ok: true,\r\n        json: async () => ({\r\n          code: 200,\r\n          result: {\r\n            id: 5130270457,\r\n            external_id: 'ext-123',\r\n            variant_id: 12345, // Catalog variant ID\r\n            product: {\r\n              variant_id: 12345,\r\n              product_id: 71,\r\n              name: 'Bella + Canvas 3001',\r\n            }\r\n          }\r\n        }),\r\n      } as Response);\r\n\r\n      const catalogId = await getCatalogVariantId('5130270457');\r\n\r\n      expect(catalogId).toBe(12345);\r\n      expect(catalogId).not.toBe(5130270457); // Must convert!\r\n    });\r\n\r\n    it('should return null for invalid sync variant', async () => {\r\n      global.fetch = vi.fn().mockResolvedValue({\r\n        ok: false,\r\n        status: 404,\r\n        text: async () => JSON.stringify({\r\n          code: 404,\r\n          result: 'Variant not found',\r\n          error: { reason: 'NotFound' }\r\n        }),\r\n      } as Response);\r\n\r\n      const catalogId = await getCatalogVariantId('999999999');\r\n\r\n      expect(catalogId).toBeNull();\r\n    });\r\n\r\n    it('should handle missing variant_id in response', async () => {\r\n      global.fetch = vi.fn().mockResolvedValue({\r\n        ok: true,\r\n        json: async () => ({\r\n          code: 200,\r\n          result: {\r\n            sync_variant: {\r\n              id: 5130270457,\r\n              external_id: 'ext-123',\r\n              // variant_id is missing\r\n            }\r\n          }\r\n        }),\r\n      } as Response);\r\n\r\n      const catalogId = await getCatalogVariantId('5130270457');\r\n\r\n      expect(catalogId).toBeNull();\r\n    });\r\n\r\n    it('should use product.variant_id as fallback', async () => {\r\n      global.fetch = vi.fn().mockResolvedValue({\r\n        ok: true,\r\n        json: async () => ({\r\n          code: 200,\r\n          result: {\r\n            id: 5130270457,\r\n            external_id: 'ext-123',\r\n            // variant_id is missing\r\n            product: {\r\n              variant_id: 67890, // Fallback location\r\n              product_id: 71,\r\n            }\r\n          }\r\n        }),\r\n      } as Response);\r\n\r\n      const catalogId = await getCatalogVariantId('5130270457');\r\n\r\n      expect(catalogId).toBe(67890);\r\n    });\r\n  });\r\n\r\n  describe('API Response Structure Contract', () => {\r\n    it('should follow Printful API response format', async () => {\r\n      global.fetch = vi.fn().mockResolvedValue({\r\n        ok: true,\r\n        json: async () => ({\r\n          code: 200, // Always present\r\n          result: [], // Data payload\r\n          // Optional: error, paging\r\n        }),\r\n      } as Response);\r\n\r\n      const products = await getPrintfulSyncProducts();\r\n\r\n      expect(products).toBeDefined();\r\n    });\r\n\r\n    it('should handle rate limiting response', async () => {\r\n      global.fetch = vi.fn().mockResolvedValue({\r\n        ok: false,\r\n        status: 429,\r\n        json: async () => ({\r\n          code: 429,\r\n          result: 'Too Many Requests',\r\n          error: {\r\n            reason: 'TooManyRequests',\r\n            message: 'Rate limit exceeded'\r\n          }\r\n        }),\r\n      } as Response);\r\n\r\n      const products = await getPrintfulSyncProducts();\r\n\r\n      // Should handle gracefully, not crash\r\n      expect(Array.isArray(products)).toBe(true);\r\n    });\r\n\r\n    it('should handle unauthorized response', async () => {\r\n      global.fetch = vi.fn().mockResolvedValue({\r\n        ok: false,\r\n        status: 401,\r\n        json: async () => ({\r\n          code: 401,\r\n          result: 'Unauthorized',\r\n          error: {\r\n            reason: 'Unauthorized',\r\n            message: 'Invalid API key'\r\n          }\r\n        }),\r\n      } as Response);\r\n\r\n      const products = await getPrintfulSyncProducts();\r\n\r\n      expect(Array.isArray(products)).toBe(true);\r\n    });\r\n  });\r\n\r\n  describe('Backward Compatibility', () => {\r\n    it('should maintain ProductDisplay interface structure', async () => {\r\n      global.fetch = vi.fn()\r\n        .mockResolvedValueOnce({\r\n          ok: true,\r\n          json: async () => ({\r\n            code: 200,\r\n            result: [{\r\n              id: 123,\r\n              name: 'Test',\r\n              variants: 1,\r\n              synced: 1,\r\n              thumbnail_url: 'https://example.com/img.jpg',\r\n              is_ignored: false,\r\n            }]\r\n          }),\r\n        } as Response)\r\n        .mockResolvedValueOnce({\r\n          ok: true,\r\n          json: async () => ({\r\n            code: 200,\r\n            result: {\r\n              sync_product: { id: 123, name: 'Test' },\r\n              sync_variants: [{\r\n                id: 456,\r\n                retail_price: '19.99',\r\n                currency: 'USD',\r\n                synced: true,\r\n                variant_id: 789,\r\n                product: { variant_id: 789, image: 'https://example.com/img.jpg' }\r\n              }]\r\n            }\r\n          }),\r\n        } as Response);\r\n\r\n      const products = await getPrintfulSyncProducts(1);\r\n\r\n      if (products.length > 0) {\r\n        const product = products[0];\r\n        \r\n        // Critical: Don't rename these fields\r\n        expect(product).toHaveProperty('id'); // Not productId\r\n        expect(product).toHaveProperty('name'); // Not title\r\n        expect(product).toHaveProperty('price'); // Not cost\r\n        expect(product).toHaveProperty('image'); // Not imageUrl\r\n        expect(product).toHaveProperty('url'); // Not link\r\n        expect(product).toHaveProperty('inStock'); // Not available\r\n      }\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\contract\\stripe.contract.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\contract\\youtube.contract.test.ts","messages":[{"ruleId":"security/detect-object-injection","severity":1,"message":"Function Call Object Injection Sink","line":113,"column":18,"nodeType":"MemberExpression","endLine":113,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi } from 'vitest';\r\n\r\nimport { getPlaylistVideos, VideoItem } from '../../server/youtube';\r\n\r\n/**\r\n * YouTube Service Contract Tests\r\n * Ensures YouTube integration maintains expected behavior\r\n */\r\n\r\n// Mock the YouTube client\r\nvi.mock('../../server/youtube', async () => {\r\n  const actual = await vi.importActual<typeof import('../../server/youtube')>('../../server/youtube');\r\n  return {\r\n    ...actual,\r\n    getPlaylistVideos: vi.fn().mockResolvedValue([\r\n      {\r\n        id: 'test-video-1',\r\n        title: 'Test Video 1',\r\n        description: 'Test description',\r\n        thumbnail: 'https://i.ytimg.com/vi/test-video-1/maxresdefault.jpg',\r\n        publishedAt: '2024-01-15T12:00:00Z',\r\n        url: 'https://www.youtube.com/watch?v=test-video-1',\r\n        duration: '10:00',\r\n        viewCount: '1000',\r\n      },\r\n      {\r\n        id: 'test-video-2',\r\n        title: 'Test Video 2',\r\n        description: 'Test description 2',\r\n        thumbnail: 'https://i.ytimg.com/vi/test-video-2/maxresdefault.jpg',\r\n        publishedAt: '2024-01-10T12:00:00Z',\r\n        url: 'https://www.youtube.com/watch?v=test-video-2',\r\n        duration: '15:00',\r\n        viewCount: '2000',\r\n      },\r\n    ] as VideoItem[]),\r\n  };\r\n});\r\n\r\ndescribe('YouTube Service Contract', () => {\r\n  describe('Video Object Contract', () => {\r\n    it('should return videos with all required fields', async () => {\r\n      const videos = await getPlaylistVideos('test-playlist');\r\n      \r\n      expect(videos.length).toBeGreaterThan(0);\r\n      \r\n      videos.forEach(video => {\r\n        expect(video).toHaveProperty('id');\r\n        expect(video).toHaveProperty('title');\r\n        expect(video).toHaveProperty('description');\r\n        expect(video).toHaveProperty('thumbnail');\r\n        expect(video).toHaveProperty('publishedAt');\r\n        expect(video).toHaveProperty('url');\r\n        \r\n        expect(typeof video.id).toBe('string');\r\n        expect(typeof video.title).toBe('string');\r\n        expect(typeof video.description).toBe('string');\r\n        expect(typeof video.thumbnail).toBe('string');\r\n        expect(typeof video.publishedAt).toBe('string');\r\n        expect(typeof video.url).toBe('string');\r\n      });\r\n    });\r\n\r\n    it('should format URLs correctly', async () => {\r\n      const videos = await getPlaylistVideos('test-playlist');\r\n      \r\n      videos.forEach(video => {\r\n        expect(video.url).toMatch(/^https:\\/\\/www\\.youtube\\.com\\/watch\\?v=[a-zA-Z0-9_-]+$/);\r\n        expect(video.thumbnail).toMatch(/^https?:\\/\\//i);\r\n      });\r\n    });\r\n\r\n    it('should have valid ISO 8601 dates', async () => {\r\n      const videos = await getPlaylistVideos('test-playlist');\r\n      \r\n      videos.forEach(video => {\r\n        const date = new Date(video.publishedAt);\r\n        expect(date.toString()).not.toBe('Invalid Date');\r\n        expect(video.publishedAt).toMatch(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/);\r\n      });\r\n    });\r\n\r\n    it('should maintain backward compatibility with field names', async () => {\r\n      const videos = await getPlaylistVideos('test-playlist');\r\n      \r\n      videos.forEach(video => {\r\n        // Ensure field names haven't changed\r\n        expect(video).toHaveProperty('id');\r\n        expect(video).not.toHaveProperty('videoId');\r\n        expect(video).toHaveProperty('url');\r\n        expect(video).not.toHaveProperty('link');\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Type Safety Contract', () => {\r\n    it('should match VideoItem interface', async () => {\r\n      const videos = await getPlaylistVideos('test-playlist');\r\n      \r\n      videos.forEach(video => {\r\n        // Check all expected properties exist\r\n        const requiredProps: (keyof VideoItem)[] = [\r\n          'id',\r\n          'title',\r\n          'description',\r\n          'thumbnail',\r\n          'publishedAt',\r\n          'url',\r\n        ];\r\n        \r\n        requiredProps.forEach(prop => {\r\n          expect(video).toHaveProperty(prop);\r\n          expect(video[prop]).toBeDefined();\r\n        });\r\n      });\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\contracts\\youtube-api.contract.test.ts","messages":[{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":74,"column":31,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":74,"endColumn":42},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":330,"column":18,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":330,"endColumn":22,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[11902,11903],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":334,"column":20,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":334,"endColumn":24,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[12053,12054],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { http, HttpResponse } from 'msw';\r\nimport { setupServer } from 'msw/node';\r\nimport { describe, it, expect, beforeAll, afterAll, afterEach } from 'vitest';\r\n\r\n/**\r\n * YouTube Data API v3 Contract Tests\r\n * \r\n * These tests ensure our code works with the actual YouTube API response format.\r\n * They serve as living documentation of the API contract.\r\n */\r\n\r\nconst YOUTUBE_API_BASE = 'https://www.googleapis.com/youtube/v3';\r\n\r\n// Create MSW server\r\nconst server = setupServer();\r\n\r\nbeforeAll(() => server.listen({ onUnhandledRequest: 'warn' }));\r\nafterEach(() => server.resetHandlers());\r\nafterAll(() => server.close());\r\n\r\ndescribe('YouTube API Contract Tests', () => {\r\n  describe('PlaylistItems Endpoint', () => {\r\n    it('returns correct structure for playlistItems', async () => {\r\n      // Mock YouTube API with realistic response structure\r\n      server.use(\r\n        http.get(`${YOUTUBE_API_BASE}/playlistItems`, ({ request }) => {\r\n          const url = new URL(request.url);\r\n          const playlistId = url.searchParams.get('playlistId');\r\n          const part = url.searchParams.get('part');\r\n          const maxResults = url.searchParams.get('maxResults');\r\n          \r\n          // Validate required parameters\r\n          expect(playlistId).toBeTruthy();\r\n          expect(part).toBe('snippet,contentDetails');\r\n          expect(maxResults).toBeTruthy();\r\n          \r\n          // Return realistic YouTube API response\r\n          return HttpResponse.json({\r\n            kind: 'youtube#playlistItemListResponse',\r\n            etag: 'mock-etag',\r\n            nextPageToken: 'CAUQAA',\r\n            pageInfo: {\r\n              totalResults: 100,\r\n              resultsPerPage: 50,\r\n            },\r\n            items: [\r\n              {\r\n                kind: 'youtube#playlistItem',\r\n                etag: 'item-etag-1',\r\n                id: 'playlistItem1',\r\n                snippet: {\r\n                  publishedAt: '2024-01-15T10:00:00Z',\r\n                  channelId: 'UCChannelId',\r\n                  title: 'Test Episode 1',\r\n                  description: 'Test episode description',\r\n                  thumbnails: {\r\n                    default: {\r\n                      url: 'https://i.ytimg.com/vi/video1/default.jpg',\r\n                      width: 120,\r\n                      height: 90,\r\n                    },\r\n                    medium: {\r\n                      url: 'https://i.ytimg.com/vi/video1/mqdefault.jpg',\r\n                      width: 320,\r\n                      height: 180,\r\n                    },\r\n                    high: {\r\n                      url: 'https://i.ytimg.com/vi/video1/hqdefault.jpg',\r\n                      width: 480,\r\n                      height: 360,\r\n                    },\r\n                  },\r\n                  channelTitle: 'Tales of Aneria',\r\n                  playlistId: playlistId!,\r\n                  position: 0,\r\n                  resourceId: {\r\n                    kind: 'youtube#video',\r\n                    videoId: 'video1',\r\n                  },\r\n                },\r\n                contentDetails: {\r\n                  videoId: 'video1',\r\n                  videoPublishedAt: '2024-01-15T10:00:00Z',\r\n                },\r\n              },\r\n            ],\r\n          });\r\n        })\r\n      );\r\n\r\n      // Test that our code handles this structure\r\n      const url = new URL(`${YOUTUBE_API_BASE}/playlistItems`);\r\n      url.searchParams.set('part', 'snippet,contentDetails');\r\n      url.searchParams.set('playlistId', 'PLTest123');\r\n      url.searchParams.set('maxResults', '50');\r\n      url.searchParams.set('key', 'test-api-key');\r\n\r\n      const response = await fetch(url.toString());\r\n      const data = await response.json();\r\n\r\n      // Verify contract compliance\r\n      expect(data.kind).toBe('youtube#playlistItemListResponse');\r\n      expect(data.items).toBeInstanceOf(Array);\r\n      expect(data.items[0].snippet).toBeDefined();\r\n      expect(data.items[0].snippet.resourceId.videoId).toBe('video1');\r\n      expect(data.items[0].contentDetails.videoId).toBe('video1');\r\n    });\r\n\r\n    it('handles pagination with nextPageToken', async () => {\r\n      server.use(\r\n        http.get(`${YOUTUBE_API_BASE}/playlistItems`, ({ request }) => {\r\n          const url = new URL(request.url);\r\n          const pageToken = url.searchParams.get('pageToken');\r\n          \r\n          if (!pageToken) {\r\n            // First page\r\n            return HttpResponse.json({\r\n              kind: 'youtube#playlistItemListResponse',\r\n              nextPageToken: 'PAGE2TOKEN',\r\n              items: [{ id: '1' }],\r\n            });\r\n          } else {\r\n            // Second page (no nextPageToken)\r\n            return HttpResponse.json({\r\n              kind: 'youtube#playlistItemListResponse',\r\n              items: [{ id: '2' }],\r\n            });\r\n          }\r\n        })\r\n      );\r\n\r\n      // First request\r\n      const url1 = new URL(`${YOUTUBE_API_BASE}/playlistItems`);\r\n      url1.searchParams.set('part', 'snippet');\r\n      url1.searchParams.set('playlistId', 'PLTest');\r\n      url1.searchParams.set('maxResults', '1');\r\n\r\n      const response1 = await fetch(url1.toString());\r\n      const data1 = await response1.json();\r\n\r\n      expect(data1.nextPageToken).toBe('PAGE2TOKEN');\r\n\r\n      // Second request with pageToken\r\n      const url2 = new URL(`${YOUTUBE_API_BASE}/playlistItems`);\r\n      url2.searchParams.set('part', 'snippet');\r\n      url2.searchParams.set('playlistId', 'PLTest');\r\n      url2.searchParams.set('maxResults', '1');\r\n      url2.searchParams.set('pageToken', data1.nextPageToken);\r\n\r\n      const response2 = await fetch(url2.toString());\r\n      const data2 = await response2.json();\r\n\r\n      expect(data2.nextPageToken).toBeUndefined();\r\n    });\r\n\r\n    it('handles 403 Forbidden (API key invalid)', async () => {\r\n      server.use(\r\n        http.get(`${YOUTUBE_API_BASE}/playlistItems`, () => {\r\n          return HttpResponse.json(\r\n            {\r\n              error: {\r\n                code: 403,\r\n                message: 'The request is missing a valid API key.',\r\n                errors: [\r\n                  {\r\n                    message: 'The request is missing a valid API key.',\r\n                    domain: 'global',\r\n                    reason: 'forbidden',\r\n                  },\r\n                ],\r\n                status: 'PERMISSION_DENIED',\r\n              },\r\n            },\r\n            { status: 403 }\r\n          );\r\n        })\r\n      );\r\n\r\n      const url = new URL(`${YOUTUBE_API_BASE}/playlistItems`);\r\n      url.searchParams.set('part', 'snippet');\r\n      url.searchParams.set('playlistId', 'PLTest');\r\n\r\n      const response = await fetch(url.toString());\r\n      const data = await response.json();\r\n\r\n      expect(response.status).toBe(403);\r\n      expect(data.error.code).toBe(403);\r\n      expect(data.error.status).toBe('PERMISSION_DENIED');\r\n    });\r\n\r\n    it('handles 429 Rate Limit Exceeded', async () => {\r\n      server.use(\r\n        http.get(`${YOUTUBE_API_BASE}/playlistItems`, () => {\r\n          return HttpResponse.json(\r\n            {\r\n              error: {\r\n                code: 429,\r\n                message: 'The request cannot be completed because you have exceeded your quota.',\r\n                errors: [\r\n                  {\r\n                    message: 'The request cannot be completed because you have exceeded your quota.',\r\n                    domain: 'youtube.quota',\r\n                    reason: 'quotaExceeded',\r\n                  },\r\n                ],\r\n                status: 'RESOURCE_EXHAUSTED',\r\n              },\r\n            },\r\n            { status: 429 }\r\n          );\r\n        })\r\n      );\r\n\r\n      const url = new URL(`${YOUTUBE_API_BASE}/playlistItems`);\r\n      url.searchParams.set('part', 'snippet');\r\n      url.searchParams.set('playlistId', 'PLTest');\r\n\r\n      const response = await fetch(url.toString());\r\n      const data = await response.json();\r\n\r\n      expect(response.status).toBe(429);\r\n      expect(data.error.code).toBe(429);\r\n      expect(data.error.errors[0].reason).toBe('quotaExceeded');\r\n    });\r\n\r\n    it('handles 404 Not Found (playlist does not exist)', async () => {\r\n      server.use(\r\n        http.get(`${YOUTUBE_API_BASE}/playlistItems`, () => {\r\n          return HttpResponse.json(\r\n            {\r\n              error: {\r\n                code: 404,\r\n                message: 'The playlist identified with the request\\'s playlistId parameter cannot be found.',\r\n                errors: [\r\n                  {\r\n                    message: 'The playlist identified with the request\\'s playlistId parameter cannot be found.',\r\n                    domain: 'youtube.playlistItem',\r\n                    reason: 'playlistNotFound',\r\n                  },\r\n                ],\r\n              },\r\n            },\r\n            { status: 404 }\r\n          );\r\n        })\r\n      );\r\n\r\n      const url = new URL(`${YOUTUBE_API_BASE}/playlistItems`);\r\n      url.searchParams.set('part', 'snippet');\r\n      url.searchParams.set('playlistId', 'PLNonExistent');\r\n\r\n      const response = await fetch(url.toString());\r\n      const data = await response.json();\r\n\r\n      expect(response.status).toBe(404);\r\n      expect(data.error.errors[0].reason).toBe('playlistNotFound');\r\n    });\r\n  });\r\n\r\n  describe('Videos Endpoint', () => {\r\n    it('returns correct structure for videos', async () => {\r\n      server.use(\r\n        http.get(`${YOUTUBE_API_BASE}/videos`, ({ request }) => {\r\n          const url = new URL(request.url);\r\n          const id = url.searchParams.get('id');\r\n          const part = url.searchParams.get('part');\r\n          \r\n          expect(id).toBeTruthy();\r\n          expect(part).toBe('snippet,contentDetails,statistics');\r\n          \r\n          return HttpResponse.json({\r\n            kind: 'youtube#videoListResponse',\r\n            etag: 'mock-etag',\r\n            items: [\r\n              {\r\n                kind: 'youtube#video',\r\n                etag: 'video-etag',\r\n                id: 'video1',\r\n                snippet: {\r\n                  publishedAt: '2024-01-15T10:00:00Z',\r\n                  channelId: 'UCChannelId',\r\n                  title: 'Test Video',\r\n                  description: 'Video description',\r\n                  thumbnails: {\r\n                    default: {\r\n                      url: 'https://i.ytimg.com/vi/video1/default.jpg',\r\n                    },\r\n                    high: {\r\n                      url: 'https://i.ytimg.com/vi/video1/hqdefault.jpg',\r\n                    },\r\n                  },\r\n                },\r\n                contentDetails: {\r\n                  duration: 'PT1H30M45S', // ISO 8601 duration format\r\n                  dimension: '2d',\r\n                  definition: 'hd',\r\n                },\r\n                statistics: {\r\n                  viewCount: '123456',\r\n                  likeCount: '5000',\r\n                  favoriteCount: '0',\r\n                  commentCount: '250',\r\n                },\r\n              },\r\n            ],\r\n          });\r\n        })\r\n      );\r\n\r\n      const url = new URL(`${YOUTUBE_API_BASE}/videos`);\r\n      url.searchParams.set('part', 'snippet,contentDetails,statistics');\r\n      url.searchParams.set('id', 'video1');\r\n      url.searchParams.set('key', 'test-api-key');\r\n\r\n      const response = await fetch(url.toString());\r\n      const data = await response.json();\r\n\r\n      expect(data.kind).toBe('youtube#videoListResponse');\r\n      expect(data.items[0].contentDetails.duration).toMatch(/^PT/); // ISO 8601 format\r\n      expect(data.items[0].statistics.viewCount).toBe('123456');\r\n    });\r\n\r\n    it('handles batch video requests', async () => {\r\n      server.use(\r\n        http.get(`${YOUTUBE_API_BASE}/videos`, ({ request }) => {\r\n          const url = new URL(request.url);\r\n          const ids = url.searchParams.get('id')?.split(',');\r\n          \r\n          expect(ids).toBeInstanceOf(Array);\r\n          expect(ids!.length).toBeGreaterThan(1);\r\n          \r\n          return HttpResponse.json({\r\n            kind: 'youtube#videoListResponse',\r\n            items: ids!.map((id, index) => ({\r\n              kind: 'youtube#video',\r\n              id,\r\n              snippet: { title: `Video ${index + 1}` },\r\n              contentDetails: { duration: 'PT5M' },\r\n              statistics: { viewCount: '1000' },\r\n            })),\r\n          });\r\n        })\r\n      );\r\n\r\n      const url = new URL(`${YOUTUBE_API_BASE}/videos`);\r\n      url.searchParams.set('part', 'snippet,contentDetails,statistics');\r\n      url.searchParams.set('id', 'video1,video2,video3');\r\n      url.searchParams.set('key', 'test-api-key');\r\n\r\n      const response = await fetch(url.toString());\r\n      const data = await response.json();\r\n\r\n      expect(data.items).toHaveLength(3);\r\n      expect(data.items[0].id).toBe('video1');\r\n      expect(data.items[1].id).toBe('video2');\r\n    });\r\n\r\n    it('handles missing optional fields gracefully', async () => {\r\n      server.use(\r\n        http.get(`${YOUTUBE_API_BASE}/videos`, () => {\r\n          return HttpResponse.json({\r\n            kind: 'youtube#videoListResponse',\r\n            items: [\r\n              {\r\n                kind: 'youtube#video',\r\n                id: 'video1',\r\n                snippet: {\r\n                  publishedAt: '2024-01-15T10:00:00Z',\r\n                  title: 'Video without stats',\r\n                  // No thumbnails\r\n                },\r\n                contentDetails: {\r\n                  duration: 'PT5M',\r\n                },\r\n                // No statistics\r\n              },\r\n            ],\r\n          });\r\n        })\r\n      );\r\n\r\n      const url = new URL(`${YOUTUBE_API_BASE}/videos`);\r\n      url.searchParams.set('part', 'snippet,contentDetails,statistics');\r\n      url.searchParams.set('id', 'video1');\r\n\r\n      const response = await fetch(url.toString());\r\n      const data = await response.json();\r\n\r\n      // Should handle missing fields\r\n      expect(data.items[0].statistics).toBeUndefined();\r\n      expect(data.items[0].snippet.thumbnails).toBeUndefined();\r\n    });\r\n  });\r\n\r\n  describe('API Error Response Format', () => {\r\n    it('all errors follow consistent structure', async () => {\r\n      const errorCodes = [400, 401, 403, 404, 429, 500, 503];\r\n      \r\n      for (const code of errorCodes) {\r\n        server.use(\r\n          http.get(`${YOUTUBE_API_BASE}/playlistItems`, () => {\r\n            return HttpResponse.json(\r\n              {\r\n                error: {\r\n                  code,\r\n                  message: `Error message for ${code}`,\r\n                  errors: [\r\n                    {\r\n                      message: `Detailed error for ${code}`,\r\n                      domain: 'global',\r\n                      reason: 'testReason',\r\n                    },\r\n                  ],\r\n                },\r\n              },\r\n              { status: code }\r\n            );\r\n          })\r\n        );\r\n\r\n        const url = new URL(`${YOUTUBE_API_BASE}/playlistItems`);\r\n        url.searchParams.set('part', 'snippet');\r\n        url.searchParams.set('playlistId', 'PLTest');\r\n\r\n        const response = await fetch(url.toString());\r\n        const data = await response.json();\r\n\r\n        // All errors should have this structure\r\n        expect(data.error).toBeDefined();\r\n        expect(data.error.code).toBe(code);\r\n        expect(data.error.message).toBeTruthy();\r\n        expect(data.error.errors).toBeInstanceOf(Array);\r\n\r\n        server.resetHandlers();\r\n      }\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\env-validator.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\health-check.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\helpers\\api-mocks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\helpers\\test-utils.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\integration\\health.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\integration\\rate-limiter.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\integration\\stripe-printful-integration.test.ts","messages":[],"suppressedMessages":[{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":36,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":36,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":52,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":52,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":58,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":58,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":69,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":69,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":78,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":78,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":86,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":86,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":95,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":95,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":107,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":107,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":202,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":202,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":214,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":214,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":238,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":238,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":252,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":252,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":264,"column":14,"nodeType":"Identifier","messageId":"undef","endLine":264,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":289,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":289,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'global' is not defined.","line":316,"column":7,"nodeType":"Identifier","messageId":"undef","endLine":316,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":327,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":327,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-undef","severity":2,"message":"'Response' is not defined.","line":338,"column":16,"nodeType":"Identifier","messageId":"undef","endLine":338,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":365,"column":29,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":365,"endColumn":67,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":374,"column":7,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":374,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":374,"column":26,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":374,"endColumn":36,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[11332,11333],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":376,"column":21,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":376,"endColumn":38,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":379,"column":14,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":379,"endColumn":24,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[11450,11451],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":382,"column":48,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":382,"endColumn":58,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\latest-shorts.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\load\\load-test.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":11,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":11,"endColumn":14,"suggestions":[{"fix":{"range":[269,316],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":12,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":12,"endColumn":14,"suggestions":[{"fix":{"range":[320,350],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":13,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":13,"endColumn":14,"suggestions":[{"fix":{"range":[354,397],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":23,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":23,"endColumn":14,"suggestions":[{"fix":{"range":[533,574],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":24,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":24,"endColumn":14,"suggestions":[{"fix":{"range":[578,631],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":25,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":25,"endColumn":14,"suggestions":[{"fix":{"range":[635,715],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":26,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":26,"endColumn":14,"suggestions":[{"fix":{"range":[719,788],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":27,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":27,"endColumn":14,"suggestions":[{"fix":{"range":[792,860],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":28,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":28,"endColumn":14,"suggestions":[{"fix":{"range":[864,907],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":29,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":29,"endColumn":14,"suggestions":[{"fix":{"range":[911,958],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":35,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":35,"endColumn":14,"suggestions":[{"fix":{"range":[1012,1055],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":63,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":63,"endColumn":16,"suggestions":[{"fix":{"range":[1647,1709],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":72,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":72,"endColumn":16,"suggestions":[{"fix":{"range":[1897,1938],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":73,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":73,"endColumn":16,"suggestions":[{"fix":{"range":[1944,2003],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":74,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":74,"endColumn":16,"suggestions":[{"fix":{"range":[2009,2095],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":75,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":75,"endColumn":16,"suggestions":[{"fix":{"range":[2101,2176],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":76,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":76,"endColumn":16,"suggestions":[{"fix":{"range":[2182,2256],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":77,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":77,"endColumn":16,"suggestions":[{"fix":{"range":[2262,2311],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":78,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":78,"endColumn":16,"suggestions":[{"fix":{"range":[2317,2370],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":81,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":81,"endColumn":16,"suggestions":[{"fix":{"range":[2412,2459],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":83,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2514,2517],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2514,2517],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":85,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":85,"endColumn":18,"suggestions":[{"fix":{"range":[2635,2761],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error, info.","line":96,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":96,"endColumn":16,"suggestions":[{"fix":{"range":[3170,3247],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":23,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import autocannon from 'autocannon';\r\n\r\nimport { setupServer } from '../helpers/test-server';\r\n\r\n/**\r\n * Load Testing Script\r\n * Tests API endpoints under various load conditions\r\n */\r\n\r\nasync function runLoadTest(url: string, name: string, duration: number = 10) {\r\n  console.log(`\\n Running load test: ${name}`);\r\n  console.log(`   URL: ${url}`);\r\n  console.log(`   Duration: ${duration}s\\n`);\r\n\r\n  const result = await autocannon({\r\n    url,\r\n    duration,\r\n    connections: 10,\r\n    pipelining: 1,\r\n    workers: 2,\r\n  });\r\n\r\n  console.log(`\\n Results for ${name}:`);\r\n  console.log(`   Requests: ${result.requests.total}`);\r\n  console.log(`   Throughput: ${Math.round(result.throughput.mean / 1024)} KB/s`);\r\n  console.log(`   Latency (avg): ${result.latency.mean.toFixed(2)}ms`);\r\n  console.log(`   Latency (p99): ${result.latency.p99.toFixed(2)}ms`);\r\n  console.log(`   Errors: ${result.errors}`);\r\n  console.log(`   Timeouts: ${result.timeouts}`);\r\n\r\n  return result;\r\n}\r\n\r\nasync function main() {\r\n  console.log(' Starting Load Tests...\\n');\r\n\r\n  const { server } = await setupServer();\r\n  const baseUrl = 'http://localhost:5000';\r\n\r\n  try {\r\n    // Test 1: YouTube API endpoint\r\n    const youtubeResult = await runLoadTest(\r\n      `${baseUrl}/api/youtube`,\r\n      'YouTube API',\r\n      10\r\n    );\r\n\r\n    // Test 2: Events API endpoint\r\n    const eventsResult = await runLoadTest(\r\n      `${baseUrl}/api/events`,\r\n      'Events API',\r\n      10\r\n    );\r\n\r\n    // Test 3: Homepage\r\n    const homepageResult = await runLoadTest(\r\n      baseUrl,\r\n      'Homepage',\r\n      10\r\n    );\r\n\r\n    // Test 4: Stress test - High concurrency\r\n    console.log(`\\n Running stress test (high concurrency)...`);\r\n    const stressResult = await autocannon({\r\n      url: `${baseUrl}/api/youtube`,\r\n      duration: 10,\r\n      connections: 100,\r\n      pipelining: 10,\r\n      workers: 4,\r\n    });\r\n\r\n    console.log(`\\n Stress Test Results:`);\r\n    console.log(`   Requests: ${stressResult.requests.total}`);\r\n    console.log(`   Throughput: ${Math.round(stressResult.throughput.mean / 1024)} KB/s`);\r\n    console.log(`   Latency (avg): ${stressResult.latency.mean.toFixed(2)}ms`);\r\n    console.log(`   Latency (p99): ${stressResult.latency.p99.toFixed(2)}ms`);\r\n    console.log(`   Errors: ${stressResult.errors}`);\r\n    console.log(`   Timeouts: ${stressResult.timeouts}`);\r\n\r\n    // Validate performance SLAs\r\n    console.log(`\\n Performance SLA Validation:`);\r\n    \r\n    const validateSLA = (name: string, result: any, maxLatencyP99: number) => {\r\n      const passed = result.latency.p99 < maxLatencyP99 && result.errors === 0;\r\n      console.log(`   ${name}: ${passed ? ' PASS' : ' FAIL'} (p99: ${result.latency.p99.toFixed(2)}ms, max: ${maxLatencyP99}ms)`);\r\n      return passed;\r\n    };\r\n\r\n    const youtubeSLA = validateSLA('YouTube API', youtubeResult, 5000);\r\n    const eventsSLA = validateSLA('Events API', eventsResult, 2000);\r\n    const homepageSLA = validateSLA('Homepage', homepageResult, 1000);\r\n    const stressSLA = validateSLA('Stress Test', stressResult, 10000);\r\n\r\n    const allPassed = youtubeSLA && eventsSLA && homepageSLA && stressSLA;\r\n    \r\n    console.log(`\\n${allPassed ? ' All SLAs passed!' : ' Some SLAs failed!'}`);\r\n    \r\n    process.exit(allPassed ? 0 : 1);\r\n  } catch (error) {\r\n    console.error(' Load test failed:', error);\r\n    process.exit(1);\r\n  } finally {\r\n    server.close();\r\n  }\r\n}\r\n\r\nmain();\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\metrics-cache.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\monitoring.test.ts","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'no-undef').","line":1,"column":1,"severity":1,"nodeType":null,"fix":{"range":[0,29],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"/* eslint-disable no-undef */\r\nimport express from 'express';\r\nimport request from 'supertest';\r\nimport { describe, test, expect, beforeEach } from 'vitest';\r\n\r\nimport { metrics, metricsMiddleware } from '../server/monitoring';\r\n\r\ndescribe('Monitoring & Metrics', () => {\r\n  let app: express.Express;\r\n\r\n  beforeEach(() => {\r\n    metrics.reset();\r\n    app = express();\r\n    app.use(metricsMiddleware);\r\n    \r\n    // Test endpoints\r\n    app.get('/api/test', (req, res) => {\r\n      res.json({ success: true });\r\n    });\r\n    \r\n    app.get('/api/error', (req, res) => {\r\n      res.status(500).json({ error: 'Test error' });\r\n    });\r\n    \r\n    app.get('/api/metrics', (req, res) => {\r\n      res.json(metrics.getMetrics());\r\n    });\r\n  });\r\n\r\n  describe('Metrics Collection', () => {\r\n    test('should track successful API calls', async () => {\r\n      metrics.reset(); // Explicit reset  \r\n      await request(app).get('/api/test');\r\n      await request(app).get('/api/test');\r\n      \r\n      const metricsData = metrics.getMetrics();\r\n      \r\n      expect(metricsData.requests.total).toBe(2);\r\n      expect(metricsData.latency['GET /api/test']).toBeDefined();\r\n      expect(metricsData.latency['GET /api/test'].count).toBe(2);\r\n    });\r\n\r\n    test.skip('should track error rates - SKIPPED: test isolation issue with async middleware', async () => {\r\n      // NOTE: This test has timing issues with the async middleware callbacks\r\n      // The functionality works correctly in production, but test isolation is tricky\r\n      // Other tests cover the error tracking functionality\r\n      metrics.reset(); // Explicit reset\r\n      \r\n      const res1 = await request(app).get('/api/test');\r\n      const res2 = await request(app).get('/api/error');\r\n      const res3 = await request(app).get('/api/error');\r\n      \r\n      // Verify responses\r\n      expect(res1.status).toBe(200);\r\n      expect(res2.status).toBe(500);\r\n      expect(res3.status).toBe(500);\r\n      \r\n      //Call getMetrics directly without HTTP to avoid extra tracking\r\n      const metricsData = metrics.getMetrics();\r\n      \r\n      // Should have tracked the 3 requests\r\n      expect(metricsData.requests.total).toBe(3);\r\n      // Should have 2 errors (the two 500 responses)\r\n      expect(metricsData.errors.total).toBe(2);\r\n      // Error rate should be 2/3 = 0.67\r\n      const expectedRate = 2 / 3;\r\n      expect(metricsData.errors.rate).toBeCloseTo(expectedRate, 2);\r\n    });\r\n\r\n    test('should calculate latency percentiles', async () => {\r\n      // Make multiple requests\r\n      for (let i = 0; i < 10; i++) {\r\n        await request(app).get('/api/test');\r\n      }\r\n      \r\n      const metricsData = metrics.getMetrics();\r\n      const latency = metricsData.latency['GET /api/test'];\r\n      \r\n      expect(latency.p50).toBeGreaterThan(0);\r\n      expect(latency.p95).toBeGreaterThan(0);\r\n      expect(latency.p99).toBeGreaterThan(0);\r\n      expect(latency.avg).toBeGreaterThan(0);\r\n      expect(latency.min).toBeGreaterThan(0);\r\n      expect(latency.max).toBeGreaterThanOrEqual(latency.min);\r\n    });\r\n\r\n    test('should track requests per second', async () => {\r\n      await request(app).get('/api/test');\r\n      await request(app).get('/api/test');\r\n      \r\n      const metricsData = metrics.getMetrics();\r\n      \r\n      expect(metricsData.requests.rps).toBeGreaterThan(0);\r\n    });\r\n\r\n    test('should track cache hit rate', () => {\r\n      metrics.trackCacheHit();\r\n      metrics.trackCacheHit();\r\n      metrics.trackCacheMiss();\r\n      \r\n      const metricsData = metrics.getMetrics();\r\n      \r\n      expect(metricsData.cache.hitRate).toBeCloseTo(0.67, 1);\r\n      expect(metricsData.cache.hits).toBe(2);\r\n      expect(metricsData.cache.misses).toBe(1);\r\n    });\r\n\r\n    test('should track error types', () => {\r\n      metrics.trackError('VALIDATION_ERROR');\r\n      metrics.trackError('VALIDATION_ERROR');\r\n      metrics.trackError('NETWORK_ERROR');\r\n      \r\n      const metricsData = metrics.getMetrics();\r\n      \r\n      expect(metricsData.errors.byType.VALIDATION_ERROR).toBe(2);\r\n      expect(metricsData.errors.byType.NETWORK_ERROR).toBe(1);\r\n    });\r\n\r\n    test('should track uptime', async () => {\r\n      await new Promise(resolve => setTimeout(resolve, 100));\r\n      \r\n      const metricsData = metrics.getMetrics();\r\n      \r\n      // Uptime should be close to 100ms, but can be slightly less in fast CI environments\r\n      expect(metricsData.uptime).toBeGreaterThanOrEqual(90);\r\n      expect(metricsData.uptime).toBeLessThan(5000);\r\n    });\r\n  });\r\n\r\n  describe('Metrics Endpoint', () => {\r\n    test('should return metrics in JSON format', async () => {\r\n      await request(app).get('/api/test');\r\n      \r\n      const res = await request(app).get('/api/metrics');\r\n      \r\n      expect(res.status).toBe(200);\r\n      expect(res.body).toHaveProperty('uptime');\r\n      expect(res.body).toHaveProperty('requests');\r\n      expect(res.body).toHaveProperty('cache');\r\n      expect(res.body).toHaveProperty('errors');\r\n      expect(res.body).toHaveProperty('latency');\r\n    });\r\n\r\n    test('should show cache metrics', async () => {\r\n      metrics.trackCacheHit();\r\n      metrics.trackCacheMiss();\r\n      metrics.trackCacheSet();\r\n      \r\n      const res = await request(app).get('/api/metrics');\r\n      \r\n      expect(res.body.cache.hits).toBe(1);\r\n      expect(res.body.cache.misses).toBe(1);\r\n      expect(res.body.cache.sets).toBe(1);\r\n      expect(res.body.cache.hitRate).toBe(0.5);\r\n    });\r\n  });\r\n\r\n  describe('Performance Tracking', () => {\r\n    test('should limit stored latency samples to 1000 per endpoint', async () => {\r\n      // Make 1500 requests\r\n      for (let i = 0; i < 1500; i++) {\r\n        await request(app).get('/api/test');\r\n      }\r\n      \r\n      const metricsData = metrics.getMetrics();\r\n      \r\n      // Should only keep last 1000\r\n      expect(metricsData.latency['GET /api/test'].count).toBeLessThanOrEqual(1000);\r\n    }, 10000); // Increase timeout to 10 seconds\r\n\r\n    test('should handle concurrent requests', async () => {\r\n      // Reset metrics before test to avoid interference\r\n      metrics.reset();\r\n      \r\n      const promises = Array(20).fill(null).map(() => \r\n        request(app).get('/api/test')\r\n      );\r\n      \r\n      await Promise.all(promises);\r\n      \r\n      const metricsData = metrics.getMetrics();\r\n      expect(metricsData.requests.total).toBe(20);\r\n    });\r\n  });\r\n\r\n  describe('Metrics Reset', () => {\r\n    test('should reset all metrics', async () => {\r\n      await request(app).get('/api/test');\r\n      metrics.trackCacheHit();\r\n      metrics.trackError('TEST_ERROR');\r\n      \r\n      metrics.reset();\r\n      \r\n      const metricsData = metrics.getMetrics();\r\n      \r\n      expect(metricsData.requests.total).toBe(0);\r\n      expect(metricsData.cache.hits).toBe(0);\r\n      expect(metricsData.errors.total).toBe(0);\r\n      expect(Object.keys(metricsData.latency)).toHaveLength(0);\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\mutation-demo.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\mutation-demo.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\performance\\benchmarks.perf.test.ts","messages":[],"suppressedMessages":[{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":199,"column":36,"nodeType":"Literal","endLine":199,"endColumn":73,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\printful-shop.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\property\\validators.property.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\routes.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\routes\\printful-routes.test.ts","messages":[{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":52,"column":11,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":52,"endColumn":23,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1265,1271],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":70,"column":11,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":70,"endColumn":23,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1787,1793],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'text' has no 'await' expression.","line":120,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":120,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3400,3406],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":136,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":136,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3892,3898],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as fs from 'fs';\r\nimport * as path from 'path';\r\n\r\nimport express from 'express';\r\nimport request from 'supertest';\r\nimport { describe, it, expect, beforeEach, vi, beforeAll, afterAll } from 'vitest';\r\n\r\nimport { registerRoutes } from '../../server/routes';\r\n\r\ndescribe('Printful Routes', () => {\r\n  let app: express.Application;\r\n  const originalEnv = process.env;\r\n  let fetchMock: any;\r\n  const CACHE_FILE = path.join(process.cwd(), 'server', 'cache', 'printful-products.json');\r\n\r\n  beforeAll(() => {\r\n    process.env = {\r\n      ...originalEnv,\r\n      PRINTFUL_API_KEY: 'test_printful_key',\r\n    };\r\n  });\r\n\r\n  afterAll(() => {\r\n    process.env = originalEnv;\r\n  });\r\n\r\n  beforeEach(() => {\r\n    vi.clearAllMocks();\r\n    \r\n    // Clear cache before each test\r\n    try {\r\n      if (fs.existsSync(CACHE_FILE)) {\r\n        fs.unlinkSync(CACHE_FILE);\r\n      }\r\n    } catch {\r\n      // Ignore errors\r\n    }\r\n    \r\n    fetchMock = vi.fn();\r\n    globalThis.fetch = fetchMock;\r\n    \r\n    app = express();\r\n    app.use(express.json());\r\n    registerRoutes(app);\r\n  });\r\n\r\n  describe('GET /api/printful/products', () => {\r\n    it('should return product list', async () => {\r\n      fetchMock\r\n        .mockResolvedValueOnce({\r\n          ok: true,\r\n          json: async () => ({\r\n            code: 200,\r\n            result: [\r\n              {\r\n                id: 123,\r\n                external_id: 'ext-123',\r\n                name: 'Test T-Shirt',\r\n                variants: 3,\r\n                synced: 3,\r\n                thumbnail_url: 'https://example.com/thumb.jpg',\r\n                is_ignored: false,\r\n              }\r\n            ]\r\n          }),\r\n        })\r\n        // Mock variant fetch for the product\r\n        .mockResolvedValueOnce({\r\n          ok: true,\r\n          json: async () => ({\r\n            code: 200,\r\n            result: {\r\n              sync_product: {\r\n                id: 123,\r\n                name: 'Test T-Shirt',\r\n              },\r\n              sync_variants: [\r\n                {\r\n                  id: 456,\r\n                  external_id: 'ext-456',\r\n                  sync_product_id: 123,\r\n                  name: 'Small - Black',\r\n                  synced: true,\r\n                  variant_id: 789,\r\n                  retail_price: '24.99',\r\n                  currency: 'USD',\r\n                  is_ignored: false,\r\n                  sku: null,\r\n                  product: {\r\n                    variant_id: 789,\r\n                    product_id: 71,\r\n                    image: 'https://example.com/product.jpg',\r\n                    name: 'Bella + Canvas 3001',\r\n                  },\r\n                  files: []\r\n                }\r\n              ]\r\n            }\r\n          }),\r\n        });\r\n\r\n      const response = await request(app)\r\n        .get('/api/printful/products')\r\n        .expect(200);\r\n\r\n      expect(response.body).toBeInstanceOf(Array);\r\n      if (response.body.length > 0) {\r\n        expect(response.body[0]).toHaveProperty('id');\r\n        expect(response.body[0]).toHaveProperty('name');\r\n        expect(response.body[0]).toHaveProperty('price');\r\n        expect(response.body[0]).toHaveProperty('image');\r\n        expect(response.body[0]).toHaveProperty('url');\r\n      }\r\n    });\r\n\r\n    it('should handle API errors gracefully', async () => {\r\n      fetchMock.mockResolvedValueOnce({\r\n        ok: false,\r\n        status: 500,\r\n        text: async () => 'Internal Server Error',\r\n      });\r\n\r\n      const response = await request(app)\r\n        .get('/api/printful/products')\r\n        .expect(200); // Returns empty array, not error\r\n\r\n      expect(response.body).toBeInstanceOf(Array);\r\n      expect(response.body).toHaveLength(0);\r\n    });\r\n  });\r\n\r\n  describe('GET /api/printful/products/:id', () => {\r\n    it('should return product details', async () => {\r\n      fetchMock.mockResolvedValueOnce({\r\n        ok: true,\r\n        json: async () => ({\r\n          code: 200,\r\n          result: {\r\n            sync_product: {\r\n              id: 123,\r\n              external_id: 'ext-123',\r\n              name: 'Test T-Shirt',\r\n              thumbnail_url: 'https://example.com/thumb.jpg',\r\n            },\r\n            sync_variants: [\r\n              {\r\n                id: 456,\r\n                external_id: 'ext-456',\r\n                sync_product_id: 123,\r\n                name: 'Small - Black',\r\n                synced: true,\r\n                variant_id: 789,\r\n                retail_price: '24.99',\r\n                currency: 'USD',\r\n                is_ignored: false,\r\n                sku: null,\r\n                product: {\r\n                  variant_id: 789,\r\n                  product_id: 71,\r\n                  image: 'https://example.com/product.jpg',\r\n                  name: 'Bella + Canvas 3001',\r\n                },\r\n                files: []\r\n              }\r\n            ]\r\n          }\r\n        }),\r\n      });\r\n\r\n      const response = await request(app)\r\n        .get('/api/printful/products/123')\r\n        .expect(200);\r\n\r\n      expect(response.body).toHaveProperty('id');\r\n      expect(response.body).toHaveProperty('variants');\r\n      expect(response.body.variants).toBeInstanceOf(Array);\r\n    });\r\n\r\n    it('should validate product ID format', async () => {\r\n      const response = await request(app)\r\n        .get('/api/printful/products/invalid$id')\r\n        .expect(400);\r\n\r\n      expect(response.body).toHaveProperty('error');\r\n      expect(response.body.error).toContain('Invalid product ID format');\r\n    });\r\n\r\n    it('should return 404 for non-existent product', async () => {\r\n      fetchMock.mockResolvedValueOnce({\r\n        ok: false,\r\n        status: 404,\r\n      });\r\n\r\n      const response = await request(app)\r\n        .get('/api/printful/products/999999')\r\n        .expect(404);\r\n\r\n      expect(response.body).toHaveProperty('error');\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\routes\\printful-shipping.test.ts","messages":[{"ruleId":"require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":18,"column":83,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":18,"endColumn":85,"suggestions":[{"messageId":"removeAsync","fix":{"range":[576,582],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":61,"column":43,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":61,"endColumn":45,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1742,1748],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import express from 'express';\r\nimport request from 'supertest';\r\nimport { describe, it, expect, beforeAll, vi } from 'vitest';\n\r\nimport { registerRoutes } from '../../server/routes';\r\n\r\n// Mock environment variables\r\nbeforeAll(() => {\r\n  process.env.PRINTFUL_API_KEY = 'test_printful_key';\r\n  process.env.STRIPE_SECRET_KEY = 'sk_test_123';\r\n});\r\n\r\n// Mock Printful getPrintfulShippingEstimate\r\nvi.mock('../../server/printful', async () => {\r\n  const actual = await vi.importActual('../../server/printful');\r\n  return {\r\n    ...actual,\r\n    getPrintfulShippingEstimate: vi.fn(async (params: {recipient: {zip: string}}) => {\r\n      // Mock successful response\r\n      if (params.recipient.zip === '84015') {\r\n        return {\r\n          shipping: 4.39,\r\n          tax: 0.17,\r\n          retail_costs: {\r\n            subtotal: 3.00,\r\n            discount: 0,\r\n            shipping: 4.39,\r\n            tax: 0.17,\r\n          },\r\n          costs: {\r\n            subtotal: '2.29',\r\n            discount: '0.00',\r\n            shipping: '4.39',\r\n            digitization: '0.00',\r\n            additional_fee: '0.00',\r\n            fulfillment_fee: '0.00',\r\n            tax: '0.00',\r\n            vat: '0.17',\r\n            total: '6.85',\r\n          },\r\n          rates: [{\r\n            id: 'STANDARD',\r\n            name: 'Flat Rate (Estimated delivery: Feb 2)',\r\n            rate: '4.39',\r\n            currency: 'USD',\r\n            min_delivery_days: 5,\r\n            max_delivery_days: 7,\r\n          }],\r\n        };\r\n      }\r\n      return null;\r\n    }),\r\n  };\r\n});\r\n\r\n// Mock Stripe\r\nvi.mock('../../server/stripe', async () => {\r\n  const actual = await vi.importActual('../../server/stripe');\r\n  return {\r\n    ...actual,\r\n    createCheckoutSession: vi.fn(async () => {\r\n      return {\r\n        id: 'cs_test_with_shipping_123',\r\n        url: 'https://checkout.stripe.com/test-with-shipping',\r\n      };\r\n    }),\r\n  };\r\n});\r\n\r\ndescribe('Printful Shipping Estimate API', () => {\r\n  let app: express.Express;\r\n\r\n  beforeAll(() => {\r\n    app = express();\r\n    app.use(express.json());\r\n    registerRoutes(app);\r\n  });\r\n\r\n  it('should calculate shipping estimate for valid address', async () => {\r\n    const response = await request(app)\r\n      .post('/api/printful/shipping-estimate')\r\n      .send({\r\n        variantId: '5130270457',\r\n        quantity: 1,\r\n        recipient: {\r\n          address1: '526 E 200 S',\r\n          city: 'Clearfield',\r\n          state_code: 'UT',\r\n          country_code: 'US',\r\n          zip: '84015',\r\n        },\r\n      });\r\n\r\n    expect(response.status).toBe(200);\r\n    expect(response.body).toHaveProperty('shipping');\r\n    expect(response.body).toHaveProperty('tax');\r\n    expect(response.body).toHaveProperty('rates');\r\n    \r\n    expect(response.body.shipping).toBe(4.39);\r\n    expect(response.body.tax).toBe(0.17);\r\n    expect(response.body.rates).toHaveLength(1);\r\n    expect(response.body.rates[0].name).toContain('Flat Rate');\r\n  });\r\n\r\n  it('should return 400 for missing variantId', async () => {\r\n    const response = await request(app)\r\n      .post('/api/printful/shipping-estimate')\r\n      .send({\r\n        quantity: 1,\r\n        recipient: {\r\n          address1: '526 E 200 S',\r\n          city: 'Clearfield',\r\n          state_code: 'UT',\r\n          country_code: 'US',\r\n          zip: '84015',\r\n        },\r\n      });\r\n\r\n    expect(response.status).toBe(400);\r\n    expect(response.body.error).toContain('Missing required fields');\r\n  });\r\n\r\n  it('should return 400 for incomplete recipient address', async () => {\r\n    const response = await request(app)\r\n      .post('/api/printful/shipping-estimate')\r\n      .send({\r\n        variantId: '5130270457',\r\n        quantity: 1,\r\n        recipient: {\r\n          city: 'Clearfield',\r\n          // Missing address1, state_code, country_code, zip\r\n        },\r\n      });\r\n\r\n    expect(response.status).toBe(400);\r\n    expect(response.body.error).toContain('Missing required recipient fields');\r\n  });\r\n\r\n  it('should use Printful shipping in Stripe checkout', async () => {\r\n    const response = await request(app)\r\n      .post('/api/stripe/create-checkout')\r\n      .send({\r\n        productId: '123',\r\n        variantId: '5130270457',\r\n        productName: 'Test Sticker',\r\n        price: '3.00',\r\n        quantity: 1,\r\n        shipping: {\r\n          shipping: 4.39,  // From Printful API\r\n          tax: 0.17,       // From Printful API\r\n        },\r\n      });\r\n\r\n    expect(response.status).toBe(200);\r\n    expect(response.body).toHaveProperty('sessionId');\r\n    expect(response.body).toHaveProperty('url');\r\n  });\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\routes\\stripe-routes.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\routes\\youtube-shorts-routes.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\security.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\security\\security.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\seo.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\sponsors.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\structured-data.snapshot.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\unit\\feature-flags.test.ts","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'featureFlags' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"featureFlags"},"fix":{"range":[59,72],"text":""},"desc":"Remove unused variable 'featureFlags'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'featureFlags' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":22},{"ruleId":"no-undef","severity":2,"message":"'beforeEach' is not defined.","line":8,"column":3,"nodeType":"Identifier","messageId":"undef","endLine":8,"endColumn":13}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect } from 'vitest';\r\n\r\nimport { featureFlags, FeatureFlagManager } from '../../server/feature-flags';\r\n\r\ndescribe('Feature Flags', () => {\r\n  let manager: FeatureFlagManager;\r\n\r\n  beforeEach(() => {\r\n    manager = new FeatureFlagManager('development');\r\n  });\r\n\r\n  describe('isEnabled', () => {\r\n    it('should return true for globally enabled flags', () => {\r\n      expect(manager.isEnabled('enhanced-caching')).toBe(true);\r\n    });\r\n\r\n    it('should respect environment overrides in development', () => {\r\n      // In development, new-character-page is enabled by environment override\r\n      expect(manager.isEnabled('new-character-page')).toBe(true);\r\n      \r\n      // In production, it should be disabled\r\n      const prodManager = new FeatureFlagManager('production');\r\n      expect(prodManager.isEnabled('new-character-page')).toBe(false);\r\n    });\r\n\r\n    it('should return false for non-existent flags', () => {\r\n      expect(manager.isEnabled('non-existent-flag')).toBe(false);\r\n    });\r\n\r\n    it('should respect environment restrictions', () => {\r\n      const prodManager = new FeatureFlagManager('production');\r\n      expect(prodManager.isEnabled('experimental-features')).toBe(false);\r\n    });\r\n\r\n    it('should handle percentage rollout correctly', () => {\r\n      // Create a staging manager where new-character-page has 50% rollout\r\n      const stagingManager = new FeatureFlagManager('staging');\r\n      const flag = stagingManager.getFlag('new-character-page');\r\n      \r\n      if (flag && flag.rolloutPercentage) {\r\n        // Test with multiple request IDs\r\n        const results = Array.from({ length: 100 }, (_, i) => \r\n          stagingManager.isEnabled('new-character-page', { requestId: `request-${i}` })\r\n        );\r\n        \r\n        const enabledCount = results.filter(r => r).length;\r\n        // Should be roughly 50% in staging (allow 30-70% variance due to hashing)\r\n        expect(enabledCount).toBeGreaterThan(30);\r\n        expect(enabledCount).toBeLessThan(70);\r\n      }\r\n    });\r\n\r\n    it('should enable for specific users', () => {\r\n      const flag = manager.getFlag('new-character-page');\r\n      if (flag) {\r\n        flag.enabledForUsers = ['user-123'];\r\n        flag.enabled = true;\r\n        \r\n        expect(manager.isEnabled('new-character-page', { userId: 'user-123' })).toBe(true);\r\n        expect(manager.isEnabled('new-character-page', { userId: 'user-456' })).toBe(false);\r\n      }\r\n    });\r\n  });\r\n\r\n  describe('getAllFlags', () => {\r\n    it('should return all feature flags', () => {\r\n      const flags = manager.getAllFlags();\r\n      expect(flags).toHaveProperty('enhanced-caching');\r\n      expect(flags).toHaveProperty('youtube-integration');\r\n      expect(flags).toHaveProperty('new-character-page');\r\n    });\r\n\r\n    it('should return copies to prevent mutation', () => {\r\n      const flags1 = manager.getAllFlags();\r\n      const flags2 = manager.getAllFlags();\r\n      expect(flags1).not.toBe(flags2);\r\n    });\r\n  });\r\n\r\n  describe('getFlag', () => {\r\n    it('should return flag configuration', () => {\r\n      const flag = manager.getFlag('enhanced-caching');\r\n      expect(flag).toBeDefined();\r\n      expect(flag?.name).toBe('enhanced-caching');\r\n      expect(flag?.enabled).toBe(true);\r\n    });\r\n\r\n    it('should return undefined for non-existent flags', () => {\r\n      expect(manager.getFlag('non-existent')).toBeUndefined();\r\n    });\r\n  });\r\n\r\n  describe('override', () => {\r\n    it('should override flag state', () => {\r\n      manager.override('new-character-page', true);\r\n      expect(manager.isEnabled('new-character-page')).toBe(true);\r\n    });\r\n\r\n    it('should not affect non-existent flags', () => {\r\n      manager.override('non-existent', true);\r\n      expect(manager.isEnabled('non-existent')).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('reset', () => {\r\n    it('should reset all overrides', () => {\r\n      // Override a naturally disabled flag in the default config\r\n      manager.override('experimental-features', false);\r\n      expect(manager.isEnabled('experimental-features')).toBe(false);\r\n      \r\n      manager.reset();\r\n      // After reset, development environment override should apply (enabled)\r\n      expect(manager.isEnabled('experimental-features')).toBe(true);\r\n    });\r\n  });\r\n\r\n  describe('environment-specific behavior', () => {\r\n    it('should enable experimental features in development', () => {\r\n      const devManager = new FeatureFlagManager('development');\r\n      expect(devManager.isEnabled('experimental-features')).toBe(true);\r\n    });\r\n\r\n    it('should disable experimental features in production', () => {\r\n      const prodManager = new FeatureFlagManager('production');\r\n      expect(prodManager.isEnabled('experimental-features')).toBe(false);\r\n    });\r\n\r\n    it('should have different rollout percentages per environment', () => {\r\n      const devManager = new FeatureFlagManager('development');\r\n      const stagingManager = new FeatureFlagManager('staging');\r\n      \r\n      const devFlag = devManager.getFlag('new-character-page');\r\n      const stagingFlag = stagingManager.getFlag('new-character-page');\r\n      \r\n      expect(devFlag?.enabled).toBe(true);\r\n      expect(stagingFlag?.enabled).toBe(true);\r\n      expect(stagingFlag?.rolloutPercentage).toBe(50);\r\n    });\r\n  });\r\n\r\n  describe('integration scenarios', () => {\r\n    it('should work with request context', () => {\r\n      manager.override('new-character-page', true);\r\n      \r\n      const context = {\r\n        userId: 'user-123',\r\n        requestId: 'req-abc',\r\n      };\r\n      \r\n      expect(manager.isEnabled('new-character-page', context)).toBeDefined();\r\n    });\r\n\r\n    it('should handle missing context gracefully', () => {\r\n      expect(() => manager.isEnabled('enhanced-caching')).not.toThrow();\r\n      expect(manager.isEnabled('enhanced-caching')).toBe(true);\r\n    });\r\n  });\r\n});\r\n\r\ndescribe('Feature Flag Middleware', () => {\r\n  it('should add featureFlags to request object', () => {\r\n    // This would typically be tested with an integration test\r\n    // For now, we're just documenting the expected behavior\r\n    expect(true).toBe(true);\r\n  });\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\youtube-integration.test.ts","messages":[{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":33,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":33,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[918,924],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'text' has no 'await' expression.","line":39,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":39,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1064,1070],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":60,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":60,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[1817,1823],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":80,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":80,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[2407,2413],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":107,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":107,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3295,3301],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":122,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":122,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[3800,3806],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":136,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":136,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[4235,4241],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":157,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":157,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[4907,4913],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":170,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":170,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[5240,5246],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":197,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":197,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[6234,6240],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":215,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":215,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[6898,6904],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":249,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":249,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[7985,7991],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":281,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":281,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[8926,8932],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":309,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":309,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[9738,9744],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":390,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":390,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[12353,12359],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":416,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":416,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[13215,13221],"text":""},"desc":"Remove 'async'."}]},{"ruleId":"require-await","severity":1,"message":"Async method 'json' has no 'await' expression.","line":424,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":424,"endColumn":21,"suggestions":[{"messageId":"removeAsync","fix":{"range":[13409,13415],"text":""},"desc":"Remove 'async'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as fs from 'fs';\r\nimport * as path from 'path';\r\n\r\nimport { describe, it, expect, vi, beforeEach, afterEach } from 'vitest';\r\n\r\n// Mock fetch globally\r\nglobalThis.fetch = vi.fn();\r\n\r\nconst CACHE_DIR = path.join(process.cwd(), 'server', 'cache');\r\nconst TEST_CACHE_FILE = path.join(CACHE_DIR, 'test-youtube-playlist.json');\r\n\r\ndescribe('YouTube API Integration Tests', () => {\r\n  beforeEach(() => {\r\n    vi.clearAllMocks();\r\n    // Clean cache before each test\r\n    if (fs.existsSync(TEST_CACHE_FILE)) {\r\n      fs.unlinkSync(TEST_CACHE_FILE);\r\n    }\r\n  });\r\n\r\n  afterEach(() => {\r\n    if (fs.existsSync(TEST_CACHE_FILE)) {\r\n      fs.unlinkSync(TEST_CACHE_FILE);\r\n    }\r\n  });\r\n\r\n  describe('API Error Handling', () => {\r\n    it('should handle 429 rate limit errors', async () => {\r\n      const mockResponse = {\r\n        ok: false,\r\n        status: 429,\r\n        statusText: 'Too Many Requests',\r\n        json: async () => ({\r\n          error: {\r\n            code: 429,\r\n            message: 'Rate limit exceeded',\r\n          },\r\n        }),\r\n        text: async () => 'Rate limit exceeded',\r\n      };\r\n\r\n      vi.mocked(globalThis.fetch).mockResolvedValueOnce(mockResponse as any);\r\n\r\n      try {\r\n        const response = await fetch('https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=PLTest&maxResults=50&key=test');\r\n        expect(response.ok).toBe(false);\r\n        expect(response.status).toBe(429);\r\n        const error = await response.json();\r\n        expect(error.error.code).toBe(429);\r\n      } catch (error: any) {\r\n        expect(error.message).toContain('Rate limit');\r\n      }\r\n    });\r\n\r\n    it('should handle 403 forbidden errors', async () => {\r\n      const mockResponse = {\r\n        ok: false,\r\n        status: 403,\r\n        statusText: 'Forbidden',\r\n        json: async () => ({\r\n          error: {\r\n            code: 403,\r\n            message: 'API key not valid',\r\n          },\r\n        }),\r\n      };\r\n\r\n      vi.mocked(globalThis.fetch).mockResolvedValueOnce(mockResponse as any);\r\n\r\n      const response = await fetch('https://www.googleapis.com/youtube/v3/playlistItems');\r\n      expect(response.ok).toBe(false);\r\n      expect(response.status).toBe(403);\r\n    });\r\n\r\n    it('should handle 404 playlist not found', async () => {\r\n      const mockResponse = {\r\n        ok: false,\r\n        status: 404,\r\n        statusText: 'Not Found',\r\n        json: async () => ({\r\n          error: {\r\n            code: 404,\r\n            message: 'Playlist not found',\r\n          },\r\n        }),\r\n      };\r\n\r\n      vi.mocked(globalThis.fetch).mockResolvedValueOnce(mockResponse as any);\r\n\r\n      const response = await fetch('https://www.googleapis.com/youtube/v3/playlistItems?playlistId=PLNonExistent');\r\n      expect(response.ok).toBe(false);\r\n      expect(response.status).toBe(404);\r\n    });\r\n\r\n    it('should handle network errors', async () => {\r\n      vi.mocked(globalThis.fetch).mockRejectedValueOnce(new Error('Network request failed'));\r\n\r\n      await expect(\r\n        fetch('https://www.googleapis.com/youtube/v3/playlistItems')\r\n      ).rejects.toThrow('Network request failed');\r\n    });\r\n\r\n    it('should handle malformed JSON responses', async () => {\r\n      const mockResponse = {\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => {\r\n          throw new SyntaxError('Unexpected token in JSON');\r\n        },\r\n      };\r\n\r\n      vi.mocked(globalThis.fetch).mockResolvedValueOnce(mockResponse as any);\r\n\r\n      const response = await fetch('https://www.googleapis.com/youtube/v3/playlistItems');\r\n      await expect(response.json()).rejects.toThrow('Unexpected token');\r\n    });\r\n\r\n    it('should handle empty response bodies', async () => {\r\n      const mockResponse = {\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => ({}),\r\n      };\r\n\r\n      vi.mocked(globalThis.fetch).mockResolvedValueOnce(mockResponse as any);\r\n\r\n      const response = await fetch('https://www.googleapis.com/youtube/v3/playlistItems');\r\n      const data = await response.json();\r\n      expect(data).toEqual({});\r\n    });\r\n\r\n    it('should handle missing items array', async () => {\r\n      const mockResponse = {\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => ({\r\n          kind: 'youtube#playlistItemListResponse',\r\n          etag: 'test',\r\n          pageInfo: { totalResults: 0, resultsPerPage: 0 },\r\n        }),\r\n      };\r\n\r\n      vi.mocked(globalThis.fetch).mockResolvedValueOnce(mockResponse as any);\r\n\r\n      const response = await fetch('https://www.googleapis.com/youtube/v3/playlistItems');\r\n      const data = await response.json();\r\n      expect(data.items).toBeUndefined();\r\n    });\r\n  });\r\n\r\n  describe('Pagination Handling', () => {\r\n    it('should handle multiple pages of results', async () => {\r\n      // First page\r\n      const page1Response = {\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => ({\r\n          items: [\r\n            { contentDetails: { videoId: 'video1' } },\r\n            { contentDetails: { videoId: 'video2' } },\r\n          ],\r\n          nextPageToken: 'token123',\r\n        }),\r\n      };\r\n\r\n      // Second page\r\n      const page2Response = {\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => ({\r\n          items: [\r\n            { contentDetails: { videoId: 'video3' } },\r\n            { contentDetails: { videoId: 'video4' } },\r\n          ],\r\n        }),\r\n      };\r\n\r\n      vi.mocked(globalThis.fetch)\r\n        .mockResolvedValueOnce(page1Response as any)\r\n        .mockResolvedValueOnce(page2Response as any);\r\n\r\n      const page1 = await fetch('https://www.googleapis.com/youtube/v3/playlistItems?pageToken=');\r\n      const data1 = await page1.json();\r\n      expect(data1.items).toHaveLength(2);\r\n      expect(data1.nextPageToken).toBe('token123');\r\n\r\n      const page2 = await fetch(`https://www.googleapis.com/youtube/v3/playlistItems?pageToken=${data1.nextPageToken}`);\r\n      const data2 = await page2.json();\r\n      expect(data2.items).toHaveLength(2);\r\n      expect(data2.nextPageToken).toBeUndefined();\r\n    });\r\n\r\n    it('should stop pagination when no nextPageToken', async () => {\r\n      const response = {\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => ({\r\n          items: [{ contentDetails: { videoId: 'video1' } }],\r\n          // No nextPageToken\r\n        }),\r\n      };\r\n\r\n      vi.mocked(globalThis.fetch).mockResolvedValueOnce(response as any);\r\n\r\n      const result = await fetch('https://www.googleapis.com/youtube/v3/playlistItems');\r\n      const data = await result.json();\r\n      expect(data.nextPageToken).toBeUndefined();\r\n    });\r\n\r\n    it('should handle very large playlists (1000+ videos)', async () => {\r\n      // Simulate 20 pages of 50 videos each = 1000 videos\r\n      const pageResponses = Array.from({ length: 20 }, (_, i) => ({\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => ({\r\n          items: Array.from({ length: 50 }, (_, j) => ({\r\n            contentDetails: { videoId: `video${i * 50 + j}` },\r\n          })),\r\n          nextPageToken: i < 19 ? `token${i + 1}` : undefined,\r\n        }),\r\n      }));\r\n\r\n      pageResponses.forEach(resp => {\r\n        vi.mocked(globalThis.fetch).mockResolvedValueOnce(resp as any);\r\n      });\r\n\r\n      let totalVideos = 0;\r\n      let nextPageToken: string | undefined = undefined;\r\n      let pageCount = 0;\r\n\r\n      do {\r\n        const response = await fetch('https://www.googleapis.com/youtube/v3/playlistItems');\r\n        const data = await response.json();\r\n        totalVideos += data.items.length;\r\n        nextPageToken = data.nextPageToken;\r\n        pageCount++;\r\n      } while (nextPageToken && pageCount < 20);\r\n\r\n      expect(totalVideos).toBe(1000);\r\n      expect(pageCount).toBe(20);\r\n    });\r\n  });\r\n\r\n  describe('Data Transformation', () => {\r\n    it('should handle videos with missing thumbnails', async () => {\r\n      const mockResponse = {\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => ({\r\n          items: [{\r\n            id: 'video1',\r\n            snippet: {\r\n              title: 'Test Video',\r\n              publishedAt: '2024-01-01',\r\n              // No thumbnails property\r\n            },\r\n            contentDetails: {\r\n              duration: 'PT5M30S',\r\n            },\r\n            statistics: {\r\n              viewCount: '1000',\r\n            },\r\n          }],\r\n        }),\r\n      };\r\n\r\n      vi.mocked(globalThis.fetch).mockResolvedValueOnce(mockResponse as any);\r\n\r\n      const response = await fetch('https://www.googleapis.com/youtube/v3/videos');\r\n      const data = await response.json();\r\n      const video = data.items[0];\r\n      \r\n      expect(video.snippet.thumbnails).toBeUndefined();\r\n      // Should fallback to empty string\r\n    });\r\n\r\n    it('should handle videos with missing statistics', async () => {\r\n      const mockResponse = {\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => ({\r\n          items: [{\r\n            id: 'video1',\r\n            snippet: {\r\n              title: 'Test Video',\r\n              publishedAt: '2024-01-01',\r\n            },\r\n            contentDetails: {\r\n              duration: 'PT5M30S',\r\n            },\r\n            // No statistics property\r\n          }],\r\n        }),\r\n      };\r\n\r\n      vi.mocked(globalThis.fetch).mockResolvedValueOnce(mockResponse as any);\r\n\r\n      const response = await fetch('https://www.googleapis.com/youtube/v3/videos');\r\n      const data = await response.json();\r\n      const video = data.items[0];\r\n      \r\n      expect(video.statistics).toBeUndefined();\r\n    });\r\n\r\n    it('should handle videos with malformed duration', async () => {\r\n      const mockResponse = {\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => ({\r\n          items: [{\r\n            id: 'video1',\r\n            snippet: {\r\n              title: 'Test Video',\r\n            },\r\n            contentDetails: {\r\n              duration: 'INVALID_DURATION',\r\n            },\r\n          }],\r\n        }),\r\n      };\r\n\r\n      vi.mocked(globalThis.fetch).mockResolvedValueOnce(mockResponse as any);\r\n\r\n      const response = await fetch('https://www.googleapis.com/youtube/v3/videos');\r\n      const data = await response.json();\r\n      const video = data.items[0];\r\n      \r\n      // Duration should be malformed\r\n      expect(video.contentDetails.duration).toBe('INVALID_DURATION');\r\n    });\r\n  });\r\n\r\n  describe('Cache Stale Fallback Integration', () => {\r\n    it('should use stale cache when API fails', () => {\r\n      // First, populate the cache with good data\r\n      const staleCache = {\r\n        'PLTest': {\r\n          videos: [\r\n            {\r\n              id: 'video1',\r\n              title: 'Stale Video',\r\n              thumbnail: '',\r\n              duration: '5:00',\r\n              publishedAt: '2024-01-01',\r\n            },\r\n          ],\r\n          timestamp: Date.now() - (25 * 60 * 60 * 1000), // 25 hours ago (expired)\r\n        },\r\n      };\r\n\r\n      if (!fs.existsSync(CACHE_DIR)) {\r\n        fs.mkdirSync(CACHE_DIR, { recursive: true });\r\n      }\r\n      fs.writeFileSync(TEST_CACHE_FILE, JSON.stringify(staleCache, null, 2));\r\n\r\n      // Verify stale cache exists and is usable\r\n      const cached = JSON.parse(fs.readFileSync(TEST_CACHE_FILE, 'utf-8'));\r\n      expect(cached.PLTest).toBeDefined();\r\n      expect(cached.PLTest.videos).toHaveLength(1);\r\n      \r\n      // Verify timestamp is expired\r\n      const age = Date.now() - cached.PLTest.timestamp;\r\n      const CACHE_DURATION = 24 * 60 * 60 * 1000;\r\n      expect(age).toBeGreaterThan(CACHE_DURATION);\r\n    });\r\n\r\n    it('should return empty array when no cache and API fails', async () => {\r\n      // Ensure no cache exists\r\n      if (fs.existsSync(TEST_CACHE_FILE)) {\r\n        fs.unlinkSync(TEST_CACHE_FILE);\r\n      }\r\n\r\n      // Mock API failure\r\n      vi.mocked(globalThis.fetch).mockRejectedValueOnce(new Error('API Error'));\r\n\r\n      await expect(\r\n        fetch('https://www.googleapis.com/youtube/v3/playlistItems')\r\n      ).rejects.toThrow('API Error');\r\n\r\n      // No cache should be created\r\n      expect(fs.existsSync(TEST_CACHE_FILE)).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('Concurrent Request Handling', () => {\r\n    it('should handle concurrent requests to same playlist', async () => {\r\n      const mockResponse = {\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => ({\r\n          items: [{ contentDetails: { videoId: 'video1' } }],\r\n        }),\r\n      };\r\n\r\n      // Simulate multiple concurrent requests\r\n      vi.mocked(globalThis.fetch).mockResolvedValue(mockResponse as any);\r\n\r\n      const requests = Array.from({ length: 5 }, () => \r\n        fetch('https://www.googleapis.com/youtube/v3/playlistItems?playlistId=PLTest')\r\n      );\r\n\r\n      const responses = await Promise.all(requests);\r\n      \r\n      expect(responses).toHaveLength(5);\r\n      responses.forEach(async (response) => {\r\n        expect(response.ok).toBe(true);\r\n        const data = await response.json();\r\n        expect(data.items).toHaveLength(1);\r\n      });\r\n    });\r\n\r\n    it('should handle concurrent requests to different playlists', async () => {\r\n      const playlist1Response = {\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => ({\r\n          items: [{ contentDetails: { videoId: 'video1' } }],\r\n        }),\r\n      };\r\n\r\n      const playlist2Response = {\r\n        ok: true,\r\n        status: 200,\r\n        json: async () => ({\r\n          items: [{ contentDetails: { videoId: 'video2' } }],\r\n        }),\r\n      };\r\n\r\n      vi.mocked(globalThis.fetch)\r\n        .mockResolvedValueOnce(playlist1Response as any)\r\n        .mockResolvedValueOnce(playlist2Response as any);\r\n\r\n      const [response1, response2] = await Promise.all([\r\n        fetch('https://www.googleapis.com/youtube/v3/playlistItems?playlistId=PL1'),\r\n        fetch('https://www.googleapis.com/youtube/v3/playlistItems?playlistId=PL2'),\r\n      ]);\r\n\r\n      expect(response1.ok).toBe(true);\r\n      expect(response2.ok).toBe(true);\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]},{"filePath":"C:\\Users\\Preston\\git\\toa-website\\test\\youtube.test.ts","messages":[{"ruleId":"security/detect-unsafe-regex","severity":2,"message":"Unsafe Regular Expression","line":217,"column":43,"nodeType":"Literal","endLine":217,"endColumn":80},{"ruleId":"curly","severity":2,"message":"Expected { after 'if' condition.","line":218,"column":23,"nodeType":"IfStatement","messageId":"missingCurlyAfterCondition","endLine":218,"endColumn":37,"fix":{"range":[8163,8177],"text":"{return '0:00';}"}}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import * as fs from 'fs';\r\nimport * as path from 'path';\r\n\r\nimport { describe, it, expect, vi, beforeEach, afterEach } from 'vitest';\r\n\r\n// We need to test the cache functions and formatters\r\n// Since they're not exported, we'll test through the main function\r\nvi.mock('googleapis', () => ({\r\n  google: {\r\n    youtube: vi.fn(),\r\n    auth: {\r\n      OAuth2: vi.fn().mockImplementation(() => ({\r\n        setCredentials: vi.fn(),\r\n      })),\r\n    },\r\n  },\r\n}));\r\n\r\n// Import after mocking\r\nconst CACHE_DIR = path.join(process.cwd(), 'server', 'cache');\r\nconst CACHE_FILE = path.join(CACHE_DIR, 'youtube-playlist.json');\r\n\r\ndescribe('YouTube Cache System', () => {\r\n  beforeEach(() => {\r\n    // Clean up cache before each test\r\n    if (fs.existsSync(CACHE_FILE)) {\r\n      fs.unlinkSync(CACHE_FILE);\r\n    }\r\n  });\r\n\r\n  afterEach(() => {\r\n    // Clean up cache after tests\r\n    if (fs.existsSync(CACHE_FILE)) {\r\n      fs.unlinkSync(CACHE_FILE);\r\n    }\r\n  });\r\n\r\n  describe('Multi-Playlist Cache', () => {\r\n    it('should cache multiple playlists independently', () => {\r\n      // Create cache with two playlists\r\n      const cacheData = {\r\n        'PLPlaylist1': {\r\n          videos: [{ id: 'video1', title: 'Video 1', thumbnail: '', duration: '5:00', publishedAt: '2024-01-01' }],\r\n          timestamp: Date.now(),\r\n        },\r\n        'PLPlaylist2': {\r\n          videos: [{ id: 'video2', title: 'Video 2', thumbnail: '', duration: '3:00', publishedAt: '2024-01-02' }],\r\n          timestamp: Date.now(),\r\n        },\r\n      };\r\n\r\n      if (!fs.existsSync(CACHE_DIR)) {\r\n        fs.mkdirSync(CACHE_DIR, { recursive: true });\r\n      }\r\n      fs.writeFileSync(CACHE_FILE, JSON.stringify(cacheData, null, 2));\r\n\r\n      // Read and verify both playlists exist\r\n      const cached = JSON.parse(fs.readFileSync(CACHE_FILE, 'utf-8'));\r\n      expect(cached).toHaveProperty('PLPlaylist1');\r\n      expect(cached).toHaveProperty('PLPlaylist2');\r\n      expect(cached.PLPlaylist1.videos).toHaveLength(1);\r\n      expect(cached.PLPlaylist2.videos).toHaveLength(1);\r\n    });\r\n\r\n    it('should not overwrite existing playlist cache when adding new one', () => {\r\n      // Start with one playlist cached\r\n      const initialCache = {\r\n        'PLPlaylist1': {\r\n          videos: [{ id: 'video1', title: 'Video 1', thumbnail: '', duration: '5:00', publishedAt: '2024-01-01' }],\r\n          timestamp: Date.now(),\r\n        },\r\n      };\r\n\r\n      if (!fs.existsSync(CACHE_DIR)) {\r\n        fs.mkdirSync(CACHE_DIR, { recursive: true });\r\n      }\r\n      fs.writeFileSync(CACHE_FILE, JSON.stringify(initialCache, null, 2));\r\n\r\n      // Simulate adding a second playlist (read existing, merge, write)\r\n      const existingCache = JSON.parse(fs.readFileSync(CACHE_FILE, 'utf-8'));\r\n      existingCache['PLPlaylist2'] = {\r\n        videos: [{ id: 'video2', title: 'Video 2', thumbnail: '', duration: '3:00', publishedAt: '2024-01-02' }],\r\n        timestamp: Date.now(),\r\n      };\r\n      fs.writeFileSync(CACHE_FILE, JSON.stringify(existingCache, null, 2));\r\n\r\n      // Verify both playlists still exist\r\n      const finalCache = JSON.parse(fs.readFileSync(CACHE_FILE, 'utf-8'));\r\n      expect(finalCache).toHaveProperty('PLPlaylist1');\r\n      expect(finalCache).toHaveProperty('PLPlaylist2');\r\n      expect(finalCache.PLPlaylist1.videos[0].id).toBe('video1');\r\n      expect(finalCache.PLPlaylist2.videos[0].id).toBe('video2');\r\n    });\r\n\r\n    it('should handle expired cache per playlist', () => {\r\n      const CACHE_DURATION = 24 * 60 * 60 * 1000; // 24 hours\r\n      const now = Date.now();\r\n      \r\n      const cacheData = {\r\n        'PLPlaylist1': {\r\n          videos: [{ id: 'video1', title: 'Video 1', thumbnail: '', duration: '5:00', publishedAt: '2024-01-01' }],\r\n          timestamp: now - (CACHE_DURATION + 1000), // Expired\r\n        },\r\n        'PLPlaylist2': {\r\n          videos: [{ id: 'video2', title: 'Video 2', thumbnail: '', duration: '3:00', publishedAt: '2024-01-02' }],\r\n          timestamp: now - 1000, // Fresh\r\n        },\r\n      };\r\n\r\n      if (!fs.existsSync(CACHE_DIR)) {\r\n        fs.mkdirSync(CACHE_DIR, { recursive: true });\r\n      }\r\n      fs.writeFileSync(CACHE_FILE, JSON.stringify(cacheData, null, 2));\r\n\r\n      // Read cache and check validity\r\n      const cached = JSON.parse(fs.readFileSync(CACHE_FILE, 'utf-8'));\r\n      const age1 = now - cached.PLPlaylist1.timestamp;\r\n      const age2 = now - cached.PLPlaylist2.timestamp;\r\n\r\n      expect(age1).toBeGreaterThan(CACHE_DURATION); // Expired\r\n      expect(age2).toBeLessThan(CACHE_DURATION); // Valid\r\n    });\r\n\r\n    it('should create cache directory if it does not exist', () => {\r\n      // Remove cache file but not directory (to avoid conflicts with other tests)\r\n      if (fs.existsSync(CACHE_FILE)) {\r\n        fs.unlinkSync(CACHE_FILE);\r\n      }\r\n\r\n      // Simulate cache write operation\r\n      if (!fs.existsSync(CACHE_DIR)) {\r\n        fs.mkdirSync(CACHE_DIR, { recursive: true });\r\n      }\r\n\r\n      const cacheData = {\r\n        'PLTest': {\r\n          videos: [],\r\n          timestamp: Date.now(),\r\n        },\r\n      };\r\n      fs.writeFileSync(CACHE_FILE, JSON.stringify(cacheData, null, 2));\r\n\r\n      expect(fs.existsSync(CACHE_DIR)).toBe(true);\r\n      expect(fs.existsSync(CACHE_FILE)).toBe(true);\r\n    });\r\n  });\r\n\r\n  describe('Cache Fallback on API Failure', () => {\r\n    it('should return stale cache when API fails', () => {\r\n      const CACHE_DURATION = 24 * 60 * 60 * 1000;\r\n      const staleCache = {\r\n        'PLTest': {\r\n          videos: [\r\n            { id: 'stale1', title: 'Stale Video', thumbnail: '', duration: '5:00', publishedAt: '2024-01-01' }\r\n          ],\r\n          timestamp: Date.now() - (CACHE_DURATION + 1000), // Expired\r\n        },\r\n      };\r\n\r\n      if (!fs.existsSync(CACHE_DIR)) {\r\n        fs.mkdirSync(CACHE_DIR, { recursive: true });\r\n      }\r\n      fs.writeFileSync(CACHE_FILE, JSON.stringify(staleCache, null, 2));\r\n\r\n      // Simulate API failure scenario - should still return stale data\r\n      const cached = JSON.parse(fs.readFileSync(CACHE_FILE, 'utf-8'));\r\n      const cacheEntry = cached['PLTest'];\r\n      \r\n      expect(cacheEntry).toBeDefined();\r\n      expect(cacheEntry.videos).toHaveLength(1);\r\n      expect(cacheEntry.videos[0].id).toBe('stale1');\r\n    });\r\n\r\n    it('should handle missing cache gracefully', () => {\r\n      if (fs.existsSync(CACHE_FILE)) {\r\n        fs.unlinkSync(CACHE_FILE);\r\n      }\r\n\r\n      expect(fs.existsSync(CACHE_FILE)).toBe(false);\r\n      // This simulates the cache miss scenario - should return null/empty\r\n    });\r\n\r\n    it('should handle corrupted cache file', () => {\r\n      if (!fs.existsSync(CACHE_DIR)) {\r\n        fs.mkdirSync(CACHE_DIR, { recursive: true });\r\n      }\r\n      \r\n      // Write invalid JSON\r\n      fs.writeFileSync(CACHE_FILE, 'invalid json{{{');\r\n\r\n      expect(() => {\r\n        JSON.parse(fs.readFileSync(CACHE_FILE, 'utf-8'));\r\n      }).toThrow();\r\n    });\r\n  });\r\n});\r\n\r\ndescribe('YouTube Formatters', () => {\r\n  describe('formatDuration', () => {\r\n    // Test the ISO 8601 duration parsing logic\r\n    const testCases = [\r\n      { input: 'PT1H30M45S', expected: '1:30:45', description: 'hours, minutes, seconds' },\r\n      { input: 'PT5M20S', expected: '5:20', description: 'minutes and seconds' },\r\n      { input: 'PT45S', expected: '0:45', description: 'only seconds' },\r\n      { input: 'PT1H5S', expected: '1:00:05', description: 'hours and seconds (no minutes)' },\r\n      { input: 'PT2H', expected: '2:00:00', description: 'only hours' },\r\n      { input: 'PT10M', expected: '10:00', description: 'only minutes' },\r\n      { input: 'PT0S', expected: '0:00', description: 'zero duration' },\r\n      { input: 'invalid', expected: '0:00', description: 'invalid format' },\r\n      { input: '', expected: '0:00', description: 'empty string' },\r\n    ];\r\n\r\n    testCases.forEach(({ input, expected, description }) => {\r\n      it(`should format ${description}: ${input} -> ${expected}`, () => {\r\n        // Manual implementation to test the logic\r\n        const formatDuration = (isoDuration: string): string => {\r\n          const match = isoDuration.match(/PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/);\r\n          if (!match) return '0:00';\r\n\r\n          const hours = parseInt(match[1] || '0');\r\n          const minutes = parseInt(match[2] || '0');\r\n          const seconds = parseInt(match[3] || '0');\r\n\r\n          if (hours > 0) {\r\n            return `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\r\n          }\r\n          return `${minutes}:${seconds.toString().padStart(2, '0')}`;\r\n        };\r\n\r\n        expect(formatDuration(input)).toBe(expected);\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('formatViewCount', () => {\r\n    const testCases = [\r\n      { input: 999, expected: '999', description: 'less than 1K' },\r\n      { input: 1000, expected: '1.0K', description: 'exactly 1K' },\r\n      { input: 1500, expected: '1.5K', description: '1.5K' },\r\n      { input: 999999, expected: '1000.0K', description: 'almost 1M' },\r\n      { input: 1000000, expected: '1.0M', description: 'exactly 1M' },\r\n      { input: 2500000, expected: '2.5M', description: '2.5M' },\r\n      { input: 0, expected: '0', description: 'zero views' },\r\n      { input: 42, expected: '42', description: 'small number' },\r\n      { input: 1234567, expected: '1.2M', description: 'rounds millions' },\r\n    ];\r\n\r\n    testCases.forEach(({ input, expected, description }) => {\r\n      it(`should format ${description}: ${input} -> ${expected}`, () => {\r\n        const formatViewCount = (count: number): string => {\r\n          if (count >= 1000000) {\r\n            return `${(count / 1000000).toFixed(1)  }M`;\r\n          } else if (count >= 1000) {\r\n            return `${(count / 1000).toFixed(1)  }K`;\r\n          }\r\n          return count.toString();\r\n        };\r\n\r\n        expect(formatViewCount(input)).toBe(expected);\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Video sorting', () => {\r\n    it('should sort videos by publishedAt date (most recent first)', () => {\r\n      const videos = [\r\n        { id: '1', title: 'Old', thumbnail: '', duration: '5:00', publishedAt: '2024-01-01' },\r\n        { id: '2', title: 'Newest', thumbnail: '', duration: '5:00', publishedAt: '2024-12-31' },\r\n        { id: '3', title: 'Middle', thumbnail: '', duration: '5:00', publishedAt: '2024-06-15' },\r\n      ];\r\n\r\n      const sorted = [...videos].sort((a, b) => {\r\n        const dateA = new Date(a.publishedAt).getTime();\r\n        const dateB = new Date(b.publishedAt).getTime();\r\n        return dateB - dateA; // Most recent first\r\n      });\r\n\r\n      expect(sorted[0].id).toBe('2'); // Newest\r\n      expect(sorted[1].id).toBe('3'); // Middle\r\n      expect(sorted[2].id).toBe('1'); // Oldest\r\n    });\r\n\r\n    it('should handle invalid dates gracefully', () => {\r\n      const videos = [\r\n        { id: '1', title: 'Valid', thumbnail: '', duration: '5:00', publishedAt: '2024-01-01' },\r\n        { id: '2', title: 'Invalid', thumbnail: '', duration: '5:00', publishedAt: 'invalid-date' },\r\n      ];\r\n\r\n      const sorted = [...videos].sort((a, b) => {\r\n        const dateA = new Date(a.publishedAt).getTime();\r\n        const dateB = new Date(b.publishedAt).getTime();\r\n        return dateB - dateA;\r\n      });\r\n\r\n      // Invalid dates become NaN, which should be handled\r\n      expect(sorted).toHaveLength(2);\r\n    });\r\n  });\r\n\r\n  describe('Shorts Filtering', () => {\r\n    it('should filter videos with duration <= 60 seconds', () => {\r\n      const videos = [\r\n        { id: '1', title: 'Short 1', thumbnail: '', duration: '0:30', publishedAt: '2024-01-01', durationSeconds: 30 },\r\n        { id: '2', title: 'Long Video', thumbnail: '', duration: '5:00', publishedAt: '2024-01-02', durationSeconds: 300 },\r\n        { id: '3', title: 'Short 2', thumbnail: '', duration: '0:59', publishedAt: '2024-01-03', durationSeconds: 59 },\r\n        { id: '4', title: 'Exactly 60s', thumbnail: '', duration: '1:00', publishedAt: '2024-01-04', durationSeconds: 60 },\r\n        { id: '5', title: 'Just over', thumbnail: '', duration: '1:01', publishedAt: '2024-01-05', durationSeconds: 61 },\r\n      ];\r\n\r\n      const shorts = videos.filter(video => {\r\n        return video.durationSeconds !== undefined && video.durationSeconds > 0 && video.durationSeconds <= 60;\r\n      });\r\n\r\n      expect(shorts).toHaveLength(3);\r\n      expect(shorts[0].id).toBe('1');\r\n      expect(shorts[1].id).toBe('3');\r\n      expect(shorts[2].id).toBe('4');\r\n    });\r\n\r\n    it('should exclude videos with 0 duration', () => {\r\n      const videos = [\r\n        { id: '1', title: 'Valid Short', thumbnail: '', duration: '0:30', publishedAt: '2024-01-01', durationSeconds: 30 },\r\n        { id: '2', title: 'Zero Duration', thumbnail: '', duration: '0:00', publishedAt: '2024-01-02', durationSeconds: 0 },\r\n      ];\r\n\r\n      const shorts = videos.filter(video => {\r\n        return video.durationSeconds !== undefined && video.durationSeconds > 0 && video.durationSeconds <= 60;\r\n      });\r\n\r\n      expect(shorts).toHaveLength(1);\r\n      expect(shorts[0].id).toBe('1');\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-return-await","replacedBy":[],"info":{"message":"The original assumption of the rule no longer holds true because of engine optimization.","deprecatedSince":"8.46.0","availableUntil":null,"replacedBy":[]}}]}]
